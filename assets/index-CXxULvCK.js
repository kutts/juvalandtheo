(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function U1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Yh={exports:{}},bl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function L1(){if(C_)return bl;C_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:u,ref:r!==void 0?r:null,props:a}}return bl.Fragment=e,bl.jsx=n,bl.jsxs=n,bl}var b_;function k1(){return b_||(b_=1,Yh.exports=L1()),Yh.exports}var G=k1(),Jh={exports:{}},Rl={},$h={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function O1(){return R_||(R_=1,(function(t){function e(W,ae){var ve=W.length;W.push(ae);e:for(;0<ve;){var Be=ve-1>>>1,Ue=W[Be];if(0<r(Ue,ae))W[Be]=ae,W[ve]=Ue,ve=Be;else break e}}function n(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ae=W[0],ve=W.pop();if(ve!==ae){W[0]=ve;e:for(var Be=0,Ue=W.length,B=Ue>>>1;Be<B;){var $=2*(Be+1)-1,le=W[$],he=$+1,Se=W[he];if(0>r(le,ve))he<Ue&&0>r(Se,le)?(W[Be]=Se,W[he]=ve,Be=he):(W[Be]=le,W[$]=ve,Be=$);else if(he<Ue&&0>r(Se,ve))W[Be]=Se,W[he]=ve,Be=he;else break e}}return ae}function r(W,ae){var ve=W.sortIndex-ae.sortIndex;return ve!==0?ve:W.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var g=[],h=[],_=1,T=null,A=3,C=!1,P=!1,k=!1,M=!1,K=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function re(W){for(var ae=n(h);ae!==null;){if(ae.callback===null)i(h);else if(ae.startTime<=W)i(h),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=n(h)}}function ce(W){if(k=!1,re(W),!P)if(n(g)!==null)P=!0,ue||(ue=!0,q());else{var ae=n(h);ae!==null&&ct(ce,ae.startTime-W)}}var ue=!1,N=-1,w=5,I=-1;function L(){return M?!0:!(t.unstable_now()-I<w)}function U(){if(M=!1,ue){var W=t.unstable_now();I=W;var ae=!0;try{e:{P=!1,k&&(k=!1,te(N),N=-1),C=!0;var ve=A;try{t:{for(re(W),T=n(g);T!==null&&!(T.expirationTime>W&&L());){var Be=T.callback;if(typeof Be=="function"){T.callback=null,A=T.priorityLevel;var Ue=Be(T.expirationTime<=W);if(W=t.unstable_now(),typeof Ue=="function"){T.callback=Ue,re(W),ae=!0;break t}T===n(g)&&i(g),re(W)}else i(g);T=n(g)}if(T!==null)ae=!0;else{var B=n(h);B!==null&&ct(ce,B.startTime-W),ae=!1}}break e}finally{T=null,A=ve,C=!1}ae=void 0}}finally{ae?q():ue=!1}}}var q;if(typeof Z=="function")q=function(){Z(U)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ke=D.port2;D.port1.onmessage=U,q=function(){ke.postMessage(null)}}else q=function(){K(U,0)};function ct(W,ae){N=K(function(){W(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_next=function(W){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var ve=A;A=ae;try{return W()}finally{A=ve}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(W,ae){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ve=A;A=W;try{return ae()}finally{A=ve}},t.unstable_scheduleCallback=function(W,ae,ve){var Be=t.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Be+ve:Be):ve=Be,W){case 1:var Ue=-1;break;case 2:Ue=250;break;case 5:Ue=1073741823;break;case 4:Ue=1e4;break;default:Ue=5e3}return Ue=ve+Ue,W={id:_++,callback:ae,priorityLevel:W,startTime:ve,expirationTime:Ue,sortIndex:-1},ve>Be?(W.sortIndex=ve,e(h,W),n(g)===null&&W===n(h)&&(k?(te(N),N=-1):k=!0,ct(ce,ve-Be))):(W.sortIndex=Ue,e(g,W),P||C||(P=!0,ue||(ue=!0,q()))),W},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(W){var ae=A;return function(){var ve=A;A=ae;try{return W.apply(this,arguments)}finally{A=ve}}}})(Kh)),Kh}var I_;function B1(){return I_||(I_=1,$h.exports=O1()),$h.exports}var Qh={exports:{}},Ne={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w_;function q1(){if(w_)return Ne;w_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function C(B){return B===null||typeof B!="object"?null:(B=A&&B[A]||B["@@iterator"],typeof B=="function"?B:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,M={};function K(B,$,le){this.props=B,this.context=$,this.refs=M,this.updater=le||P}K.prototype.isReactComponent={},K.prototype.setState=function(B,$){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,$,"setState")},K.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function te(){}te.prototype=K.prototype;function Z(B,$,le){this.props=B,this.context=$,this.refs=M,this.updater=le||P}var re=Z.prototype=new te;re.constructor=Z,k(re,K.prototype),re.isPureReactComponent=!0;var ce=Array.isArray;function ue(){}var N={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(B,$,le){var he=le.ref;return{$$typeof:t,type:B,key:$,ref:he!==void 0?he:null,props:le}}function L(B,$){return I(B.type,$,B.props)}function U(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function q(B){var $={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(le){return $[le]})}var D=/\/+/g;function ke(B,$){return typeof B=="object"&&B!==null&&B.key!=null?q(""+B.key):$.toString(36)}function ct(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(ue,ue):(B.status="pending",B.then(function($){B.status==="pending"&&(B.status="fulfilled",B.value=$)},function($){B.status==="pending"&&(B.status="rejected",B.reason=$)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function W(B,$,le,he,Se){var Me=typeof B;(Me==="undefined"||Me==="boolean")&&(B=null);var Ge=!1;if(B===null)Ge=!0;else switch(Me){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(B.$$typeof){case t:case e:Ge=!0;break;case _:return Ge=B._init,W(Ge(B._payload),$,le,he,Se)}}if(Ge)return Se=Se(B),Ge=he===""?"."+ke(B,0):he,ce(Se)?(le="",Ge!=null&&(le=Ge.replace(D,"$&/")+"/"),W(Se,$,le,"",function(Ce){return Ce})):Se!=null&&(U(Se)&&(Se=L(Se,le+(Se.key==null||B&&B.key===Se.key?"":(""+Se.key).replace(D,"$&/")+"/")+Ge)),$.push(Se)),1;Ge=0;var Ct=he===""?".":he+":";if(ce(B))for(var ht=0;ht<B.length;ht++)he=B[ht],Me=Ct+ke(he,ht),Ge+=W(he,$,le,Me,Se);else if(ht=C(B),typeof ht=="function")for(B=ht.call(B),ht=0;!(he=B.next()).done;)he=he.value,Me=Ct+ke(he,ht++),Ge+=W(he,$,le,Me,Se);else if(Me==="object"){if(typeof B.then=="function")return W(ct(B),$,le,he,Se);throw $=String(B),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function ae(B,$,le){if(B==null)return B;var he=[],Se=0;return W(B,he,"","",function(Me){return $.call(le,Me,Se++)}),he}function ve(B){if(B._status===-1){var $=B._result;$=$(),$.then(function(le){(B._status===0||B._status===-1)&&(B._status=1,B._result=le)},function(le){(B._status===0||B._status===-1)&&(B._status=2,B._result=le)}),B._status===-1&&(B._status=0,B._result=$)}if(B._status===1)return B._result.default;throw B._result}var Be=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Ue={map:ae,forEach:function(B,$,le){ae(B,function(){$.apply(this,arguments)},le)},count:function(B){var $=0;return ae(B,function(){$++}),$},toArray:function(B){return ae(B,function($){return $})||[]},only:function(B){if(!U(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Ne.Activity=T,Ne.Children=Ue,Ne.Component=K,Ne.Fragment=n,Ne.Profiler=r,Ne.PureComponent=Z,Ne.StrictMode=i,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(B){return N.H.useMemoCache(B)}},Ne.cache=function(B){return function(){return B.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(B,$,le){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var he=k({},B.props),Se=B.key;if($!=null)for(Me in $.key!==void 0&&(Se=""+$.key),$)!w.call($,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&$.ref===void 0||(he[Me]=$[Me]);var Me=arguments.length-2;if(Me===1)he.children=le;else if(1<Me){for(var Ge=Array(Me),Ct=0;Ct<Me;Ct++)Ge[Ct]=arguments[Ct+2];he.children=Ge}return I(B.type,Se,he)},Ne.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},Ne.createElement=function(B,$,le){var he,Se={},Me=null;if($!=null)for(he in $.key!==void 0&&(Me=""+$.key),$)w.call($,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Se[he]=$[he]);var Ge=arguments.length-2;if(Ge===1)Se.children=le;else if(1<Ge){for(var Ct=Array(Ge),ht=0;ht<Ge;ht++)Ct[ht]=arguments[ht+2];Se.children=Ct}if(B&&B.defaultProps)for(he in Ge=B.defaultProps,Ge)Se[he]===void 0&&(Se[he]=Ge[he]);return I(B,Me,Se)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(B){return{$$typeof:d,render:B}},Ne.isValidElement=U,Ne.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:ve}},Ne.memo=function(B,$){return{$$typeof:h,type:B,compare:$===void 0?null:$}},Ne.startTransition=function(B){var $=N.T,le={};N.T=le;try{var he=B(),Se=N.S;Se!==null&&Se(le,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ue,Be)}catch(Me){Be(Me)}finally{$!==null&&le.types!==null&&($.types=le.types),N.T=$}},Ne.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ne.use=function(B){return N.H.use(B)},Ne.useActionState=function(B,$,le){return N.H.useActionState(B,$,le)},Ne.useCallback=function(B,$){return N.H.useCallback(B,$)},Ne.useContext=function(B){return N.H.useContext(B)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(B,$){return N.H.useDeferredValue(B,$)},Ne.useEffect=function(B,$){return N.H.useEffect(B,$)},Ne.useEffectEvent=function(B){return N.H.useEffectEvent(B)},Ne.useId=function(){return N.H.useId()},Ne.useImperativeHandle=function(B,$,le){return N.H.useImperativeHandle(B,$,le)},Ne.useInsertionEffect=function(B,$){return N.H.useInsertionEffect(B,$)},Ne.useLayoutEffect=function(B,$){return N.H.useLayoutEffect(B,$)},Ne.useMemo=function(B,$){return N.H.useMemo(B,$)},Ne.useOptimistic=function(B,$){return N.H.useOptimistic(B,$)},Ne.useReducer=function(B,$,le){return N.H.useReducer(B,$,le)},Ne.useRef=function(B){return N.H.useRef(B)},Ne.useState=function(B){return N.H.useState(B)},Ne.useSyncExternalStore=function(B,$,le){return N.H.useSyncExternalStore(B,$,le)},Ne.useTransition=function(){return N.H.useTransition()},Ne.version="19.2.3",Ne}var N_;function Xp(){return N_||(N_=1,Qh.exports=q1()),Qh.exports}var Xh={exports:{}},ln={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D_;function F1(){if(D_)return ln;D_=1;var t=Xp();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(g,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:h,implementation:_}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ln.createPortal=function(g,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(g,h,null,_)},ln.flushSync=function(g){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=h,i.p=_,i.d.f()}},ln.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(g,h))},ln.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},ln.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin),A=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:C}):_==="script"&&i.d.X(g,{crossOrigin:T,integrity:A,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},ln.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(g)},ln.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin);i.d.L(g,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},ln.preloadModule=function(g,h){if(typeof g=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(g)},ln.requestFormReset=function(g){i.d.r(g)},ln.unstable_batchedUpdates=function(g,h){return g(h)},ln.useFormState=function(g,h,_){return u.H.useFormState(g,h,_)},ln.useFormStatus=function(){return u.H.useHostTransitionStatus()},ln.version="19.2.3",ln}var M_;function G1(){if(M_)return Xh.exports;M_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Xh.exports=F1(),Xh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function H1(){if(P_)return Rl;P_=1;var t=B1(),e=Xp(),n=G1();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function u(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function d(o){if(o.tag===31){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function g(o){if(a(o)!==o)throw Error(i(188))}function h(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var l=o,c=s;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return g(y),o;if(v===c)return g(y),s;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var S=!1,b=y.child;b;){if(b===l){S=!0,l=y,c=v;break}if(b===c){S=!0,c=y,l=v;break}b=b.sibling}if(!S){for(b=v.child;b;){if(b===l){S=!0,l=v,c=y;break}if(b===c){S=!0,c=v,l=y;break}b=b.sibling}if(!S)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?o:s}function _(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=_(o),s!==null)return s;o=o.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function q(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var D=Symbol.for("react.client.reference");function ke(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===D?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case k:return"Fragment";case K:return"Profiler";case M:return"StrictMode";case ce:return"Suspense";case ue:return"SuspenseList";case I:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case P:return"Portal";case Z:return o.displayName||"Context";case te:return(o._context.displayName||"Context")+".Consumer";case re:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case N:return s=o.displayName||null,s!==null?s:ke(o.type)||"Memo";case w:s=o._payload,o=o._init;try{return ke(o(s))}catch{}}return null}var ct=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Be=[],Ue=-1;function B(o){return{current:o}}function $(o){0>Ue||(o.current=Be[Ue],Be[Ue]=null,Ue--)}function le(o,s){Ue++,Be[Ue]=o.current,o.current=s}var he=B(null),Se=B(null),Me=B(null),Ge=B(null);function Ct(o,s){switch(le(Me,s),le(Se,o),le(he,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?Ky(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=Ky(s),o=Qy(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}$(he),le(he,o)}function ht(){$(he),$(Se),$(Me)}function Ce(o){o.memoizedState!==null&&le(Ge,o);var s=he.current,l=Qy(s,o.type);s!==l&&(le(Se,o),le(he,l))}function be(o){Se.current===o&&($(he),$(Se)),Ge.current===o&&($(Ge),Al._currentValue=ve)}var j,fe;function Re(o){if(j===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);j=s&&s[1]||"",fe=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+j+o+fe}var Oe=!1;function bt(o,s){if(!o||Oe)return"";Oe=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(X){var J=X}Reflect.construct(o,[],oe)}else{try{oe.call()}catch(X){J=X}o.call(oe.prototype)}}else{try{throw Error()}catch(X){J=X}(oe=o())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(X){if(X&&J&&typeof X.stack=="string")return[X.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),S=v[0],b=v[1];if(S&&b){var V=S.split(`
`),Y=b.split(`
`);for(y=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===V.length||y===Y.length)for(c=V.length-1,y=Y.length-1;1<=c&&0<=y&&V[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(V[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||V[c]!==Y[y]){var ee=`
`+V[c].replace(" at new "," at ");return o.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",o.displayName)),ee}while(1<=c&&0<=y);break}}}finally{Oe=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?Re(l):""}function Tn(o,s){switch(o.tag){case 26:case 27:case 5:return Re(o.type);case 16:return Re("Lazy");case 13:return o.child!==s&&s!==null?Re("Suspense Fallback"):Re("Suspense");case 19:return Re("SuspenseList");case 0:case 15:return bt(o.type,!1);case 11:return bt(o.type.render,!1);case 1:return bt(o.type,!0);case 31:return Re("Activity");default:return""}}function Wi(o){try{var s="",l=null;do s+=Tn(o,l),l=o,o=o.return;while(o);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var ft=Object.prototype.hasOwnProperty,Rt=t.unstable_scheduleCallback,ii=t.unstable_cancelCallback,$f=t.unstable_shouldYield,ru=t.unstable_requestPaint,hn=t.unstable_now,Ts=t.unstable_getCurrentPriorityLevel,Ca=t.unstable_ImmediatePriority,ba=t.unstable_UserBlockingPriority,bo=t.unstable_NormalPriority,Kf=t.unstable_LowPriority,au=t.unstable_IdlePriority,lu=t.log,uu=t.unstable_setDisableYieldValue,oi=null,Zt=null;function Bn(o){if(typeof lu=="function"&&uu(o),Zt&&typeof Zt.setStrictMode=="function")try{Zt.setStrictMode(oi,o)}catch{}}var It=Math.clz32?Math.clz32:fu,cu=Math.log,ur=Math.LN2;function fu(o){return o>>>=0,o===0?32:31-(cu(o)/ur|0)|0}var xi=256,Es=262144,Pt=4194304;function Ci(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function bi(o,s,l){var c=o.pendingLanes;if(c===0)return 0;var y=0,v=o.suspendedLanes,S=o.pingedLanes;o=o.warmLanes;var b=c&134217727;return b!==0?(c=b&~v,c!==0?y=Ci(c):(S&=b,S!==0?y=Ci(S):l||(l=b&~o,l!==0&&(y=Ci(l))))):(b=c&~v,b!==0?y=Ci(b):S!==0?y=Ci(S):l||(l=c&~o,l!==0&&(y=Ci(l)))),y===0?0:s!==0&&s!==y&&(s&v)===0&&(v=y&-y,l=s&-s,v>=l||v===32&&(l&4194048)!==0)?s:y}function si(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function Qf(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function du(){var o=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),o}function Ri(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function As(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Xf(o,s,l,c,y,v){var S=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var b=o.entanglements,V=o.expirationTimes,Y=o.hiddenUpdates;for(l=S&~l;0<l;){var ee=31-It(l),oe=1<<ee;b[ee]=0,V[ee]=-1;var J=Y[ee];if(J!==null)for(Y[ee]=null,ee=0;ee<J.length;ee++){var X=J[ee];X!==null&&(X.lane&=-536870913)}l&=~oe}c!==0&&Ss(o,c,0),v!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=v&~(S&~s))}function Ss(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var c=31-It(s);o.entangledLanes|=s,o.entanglements[c]=o.entanglements[c]|1073741824|l&261930}function Ra(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var c=31-It(l),y=1<<c;y&s|o[c]&s&&(o[c]|=s),l&=~y}}function Ia(o,s){var l=s&-s;return l=(l&42)!==0?1:xs(l),(l&(o.suspendedLanes|s))!==0?0:l}function xs(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Zi(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function hu(){var o=ae.p;return o!==0?o:(o=window.event,o===void 0?32:__(o.type))}function ri(o,s){var l=ae.p;try{return ae.p=o,s()}finally{ae.p=l}}var ai=Math.random().toString(36).slice(2),Vt="__reactFiber$"+ai,$t="__reactProps$"+ai,Ii="__reactContainer$"+ai,cr="__reactEvents$"+ai,Wf="__reactListeners$"+ai,pu="__reactHandles$"+ai,mu="__reactResources$"+ai,wi="__reactMarker$"+ai;function fr(o){delete o[Vt],delete o[$t],delete o[cr],delete o[Wf],delete o[pu]}function Ni(o){var s=o[Vt];if(s)return s;for(var l=o.parentNode;l;){if(s=l[Ii]||l[Vt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=n_(o);o!==null;){if(l=o[Vt])return l;o=n_(o)}return s}o=l,l=o.parentNode}return null}function qn(o){if(o=o[Vt]||o[Ii]){var s=o.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return o}return null}function wn(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function Di(o){var s=o[mu];return s||(s=o[mu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ut(o){o[wi]=!0}var wa=new Set,Na={};function Mi(o,s){Pi(o,s),Pi(o+"Capture",s)}function Pi(o,s){for(Na[o]=s,o=0;o<s.length;o++)wa.add(s[o])}var Da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ma={},Pa={};function gu(o){return ft.call(Pa,o)?!0:ft.call(Ma,o)?!1:Da.test(o)?Pa[o]=!0:(Ma[o]=!0,!1)}function dr(o,s,l){if(gu(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function Nn(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function Lt(o,s,l,c){if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+c)}}function Kt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ro(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Va(o,s,l){var c=Object.getOwnPropertyDescriptor(o.constructor.prototype,s);if(!o.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return y.call(this)},set:function(S){l=""+S,v.call(this,S)}}),Object.defineProperty(o,s,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function it(o){if(!o._valueTracker){var s=Ro(o)?"checked":"value";o._valueTracker=Va(o,s,""+o[s])}}function Cs(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return o&&(c=Ro(o)?o.checked?"true":"false":o.value),o=c,o!==l?(s.setValue(o),!0):!1}function Vi(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var bs=/[\n"\\]/g;function En(o){return o.replace(bs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function hr(o,s,l,c,y,v,S,b){o.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?o.type=S:o.removeAttribute("type"),s!=null?S==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+Kt(s)):o.value!==""+Kt(s)&&(o.value=""+Kt(s)):S!=="submit"&&S!=="reset"||o.removeAttribute("value"),s!=null?Ua(o,S,Kt(s)):l!=null?Ua(o,S,Kt(l)):c!=null&&o.removeAttribute("value"),y==null&&v!=null&&(o.defaultChecked=!!v),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?o.name=""+Kt(b):o.removeAttribute("name")}function yu(o,s,l,c,y,v,S,b){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(o.type=v),s!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){it(o);return}l=l!=null?""+Kt(l):"",s=s!=null?""+Kt(s):l,b||s===o.value||(o.value=s),o.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,o.checked=b?o.checked:!!c,o.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.name=S),it(o)}function Ua(o,s,l){s==="number"&&Vi(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function Io(o,s,l,c){if(o=o.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<o.length;l++)y=s.hasOwnProperty("$"+o[l].value),o[l].selected!==y&&(o[l].selected=y),y&&c&&(o[l].defaultSelected=!0)}else{for(l=""+Kt(l),s=null,y=0;y<o.length;y++){if(o[y].value===l){o[y].selected=!0,c&&(o[y].defaultSelected=!0);return}s!==null||o[y].disabled||(s=o[y])}s!==null&&(s.selected=!0)}}function _u(o,s,l){if(s!=null&&(s=""+Kt(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+Kt(l):""}function wo(o,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(ct(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=Kt(s),o.defaultValue=l,c=o.textContent,c===l&&c!==""&&c!==null&&(o.value=c),it(o)}function An(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var vu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function La(o,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":c?o.setProperty(s,l):typeof l!="number"||l===0||vu.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function ka(o,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&l[y]!==c&&La(o,y,c)}else for(var v in s)s.hasOwnProperty(v)&&La(o,v,s[v])}function pr(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),No=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function mr(o){return No.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function li(){}var Oa=null;function Fn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Do=null,Ui=null;function Rs(o){var s=qn(o);if(s&&(o=s.stateNode)){var l=o[$t]||null;e:switch(o=s.stateNode,s.type){case"input":if(hr(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+En(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==o&&c.form===o.form){var y=c[$t]||null;if(!y)throw Error(i(90));hr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===o.form&&Cs(c)}break e;case"textarea":_u(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Io(o,!!l.multiple,s,!1)}}}var gr=!1;function Mo(o,s,l){if(gr)return o(s,l);gr=!0;try{var c=o(s);return c}finally{if(gr=!1,(Do!==null||Ui!==null)&&(hc(),Do&&(s=Do,o=Ui,Ui=Do=null,Rs(s),o)))for(s=0;s<o.length;s++)Rs(o[s])}}function ui(o,s){var l=o.stateNode;if(l===null)return null;var c=l[$t]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(o=o.type,c=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!c;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Is=!1;if(Gn)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){Is=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{Is=!1}var Li=null,Ba=null,ws=null;function qa(){if(ws)return ws;var o,s=Ba,l=s.length,c,y="value"in Li?Li.value:Li.textContent,v=y.length;for(o=0;o<l&&s[o]===y[o];o++);var S=l-o;for(c=1;c<=S&&s[l-c]===y[v-c];c++);return ws=y.slice(o,1<c?1-c:void 0)}function Ns(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function ji(){return!0}function ci(){return!1}function jt(o){function s(l,c,y,v,S){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var b in o)o.hasOwnProperty(b)&&(l=o[b],this[b]=l?l(v):v[b]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ji:ci,this.isPropagationStopped=ci,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),s}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ki=jt(eo),Po=T({},eo,{view:0,detail:0}),Fa=jt(Po),Vo,yr,Oi,_r=T({},Po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uo,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Oi&&(Oi&&o.type==="mousemove"?(Vo=o.screenX-Oi.screenX,yr=o.screenY-Oi.screenY):yr=Vo=0,Oi=o),Vo)},movementY:function(o){return"movementY"in o?o.movementY:yr}}),Ga=jt(_r),Ds=T({},_r,{dataTransfer:0}),Eu=jt(Ds),Au=T({},Po,{relatedTarget:0}),Ms=jt(Au),Ha=T({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),Su=jt(Ha),vr=T({},eo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),xu=jt(vr),Cu=T({},eo,{data:0}),Bi=jt(Cu),bu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ru={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Iu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wu(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Iu[o])?!!s[o]:!1}function Uo(){return wu}var pn=T({},Po,{key:function(o){if(o.key){var s=bu[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Ns(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ru[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uo,charCode:function(o){return o.type==="keypress"?Ns(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ns(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Nu=jt(pn),Du=T({},_r,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),to=jt(Du),m=T({},Po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uo}),E=jt(m),x=T({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=jt(x),H=T({},_r,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=jt(H),de=T({},eo,{newState:0,oldState:0}),Pe=jt(de),wt=[9,13,27,32],et=Gn&&"CompositionEvent"in window,_t=null;Gn&&"documentMode"in document&&(_t=document.documentMode);var Hn=Gn&&"TextEvent"in window&&!_t,qi=Gn&&(!et||_t&&8<_t&&11>=_t),fi=" ",di=!1;function Ps(o,s){switch(o){case"keyup":return wt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tr(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Er=!1;function sC(o,s){switch(o){case"compositionend":return Tr(s);case"keypress":return s.which!==32?null:(di=!0,fi);case"textInput":return o=s.data,o===fi&&di?null:o;default:return null}}function rC(o,s){if(Er)return o==="compositionend"||!et&&Ps(o,s)?(o=qa(),ws=Ba=Li=null,Er=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return qi&&s.locale!=="ko"?null:s.data;default:return null}}var aC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sg(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!aC[o.type]:s==="textarea"}function rg(o,s,l,c){Do?Ui?Ui.push(c):Ui=[c]:Do=c,s=Tc(s,"onChange"),0<s.length&&(l=new ki("onChange","change",null,l,c),o.push({event:l,listeners:s}))}var za=null,Ya=null;function lC(o){Gy(o,0)}function Mu(o){var s=wn(o);if(Cs(s))return o}function ag(o,s){if(o==="change")return s}var lg=!1;if(Gn){var Zf;if(Gn){var jf="oninput"in document;if(!jf){var ug=document.createElement("div");ug.setAttribute("oninput","return;"),jf=typeof ug.oninput=="function"}Zf=jf}else Zf=!1;lg=Zf&&(!document.documentMode||9<document.documentMode)}function cg(){za&&(za.detachEvent("onpropertychange",fg),Ya=za=null)}function fg(o){if(o.propertyName==="value"&&Mu(Ya)){var s=[];rg(s,Ya,o,Fn(o)),Mo(lC,s)}}function uC(o,s,l){o==="focusin"?(cg(),za=s,Ya=l,za.attachEvent("onpropertychange",fg)):o==="focusout"&&cg()}function cC(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Mu(Ya)}function fC(o,s){if(o==="click")return Mu(s)}function dC(o,s){if(o==="input"||o==="change")return Mu(s)}function hC(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var Dn=typeof Object.is=="function"?Object.is:hC;function Ja(o,s){if(Dn(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!ft.call(s,y)||!Dn(o[y],s[y]))return!1}return!0}function dg(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function hg(o,s){var l=dg(o);o=0;for(var c;l;){if(l.nodeType===3){if(c=o+l.textContent.length,o<=s&&c>=s)return{node:l,offset:s-o};o=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=dg(l)}}function pg(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?pg(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function mg(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=Vi(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=Vi(o.document)}return s}function ed(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var pC=Gn&&"documentMode"in document&&11>=document.documentMode,Ar=null,td=null,$a=null,nd=!1;function gg(o,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;nd||Ar==null||Ar!==Vi(c)||(c=Ar,"selectionStart"in c&&ed(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),$a&&Ja($a,c)||($a=c,c=Tc(td,"onSelect"),0<c.length&&(s=new ki("onSelect","select",null,s,l),o.push({event:s,listeners:c}),s.target=Ar)))}function Vs(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var Sr={animationend:Vs("Animation","AnimationEnd"),animationiteration:Vs("Animation","AnimationIteration"),animationstart:Vs("Animation","AnimationStart"),transitionrun:Vs("Transition","TransitionRun"),transitionstart:Vs("Transition","TransitionStart"),transitioncancel:Vs("Transition","TransitionCancel"),transitionend:Vs("Transition","TransitionEnd")},id={},yg={};Gn&&(yg=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);function Us(o){if(id[o])return id[o];if(!Sr[o])return o;var s=Sr[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in yg)return id[o]=s[l];return o}var _g=Us("animationend"),vg=Us("animationiteration"),Tg=Us("animationstart"),mC=Us("transitionrun"),gC=Us("transitionstart"),yC=Us("transitioncancel"),Eg=Us("transitionend"),Ag=new Map,od="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");od.push("scrollEnd");function hi(o,s){Ag.set(o,s),Mi(s,[o])}var Pu=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},zn=[],xr=0,sd=0;function Vu(){for(var o=xr,s=sd=xr=0;s<o;){var l=zn[s];zn[s++]=null;var c=zn[s];zn[s++]=null;var y=zn[s];zn[s++]=null;var v=zn[s];if(zn[s++]=null,c!==null&&y!==null){var S=c.pending;S===null?y.next=y:(y.next=S.next,S.next=y),c.pending=y}v!==0&&Sg(l,y,v)}}function Uu(o,s,l,c){zn[xr++]=o,zn[xr++]=s,zn[xr++]=l,zn[xr++]=c,sd|=c,o.lanes|=c,o=o.alternate,o!==null&&(o.lanes|=c)}function rd(o,s,l,c){return Uu(o,s,l,c),Lu(o)}function Ls(o,s){return Uu(o,null,null,s),Lu(o)}function Sg(o,s,l){o.lanes|=l;var c=o.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=o.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(o=v.stateNode,o===null||o._visibility&1||(y=!0)),o=v,v=v.return;return o.tag===3?(v=o.stateNode,y&&s!==null&&(y=31-It(l),o=v.hiddenUpdates,c=o[y],c===null?o[y]=[s]:c.push(s),s.lane=l|536870912),v):null}function Lu(o){if(50<ml)throw ml=0,mh=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var Cr={};function _C(o,s,l,c){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(o,s,l,c){return new _C(o,s,l,c)}function ad(o){return o=o.prototype,!(!o||!o.isReactComponent)}function no(o,s){var l=o.alternate;return l===null?(l=Mn(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function xg(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function ku(o,s,l,c,y,v){var S=0;if(c=o,typeof o=="function")ad(o)&&(S=1);else if(typeof o=="string")S=S1(o,l,he.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case I:return o=Mn(31,l,s,y),o.elementType=I,o.lanes=v,o;case k:return ks(l.children,y,v,s);case M:S=8,y|=24;break;case K:return o=Mn(12,l,s,y|2),o.elementType=K,o.lanes=v,o;case ce:return o=Mn(13,l,s,y),o.elementType=ce,o.lanes=v,o;case ue:return o=Mn(19,l,s,y),o.elementType=ue,o.lanes=v,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Z:S=10;break e;case te:S=9;break e;case re:S=11;break e;case N:S=14;break e;case w:S=16,c=null;break e}S=29,l=Error(i(130,o===null?"null":typeof o,"")),c=null}return s=Mn(S,l,s,y),s.elementType=o,s.type=c,s.lanes=v,s}function ks(o,s,l,c){return o=Mn(7,o,c,s),o.lanes=l,o}function ld(o,s,l){return o=Mn(6,o,null,s),o.lanes=l,o}function Cg(o){var s=Mn(18,null,null,0);return s.stateNode=o,s}function ud(o,s,l){return s=Mn(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var bg=new WeakMap;function Yn(o,s){if(typeof o=="object"&&o!==null){var l=bg.get(o);return l!==void 0?l:(s={value:o,source:s,stack:Wi(s)},bg.set(o,s),s)}return{value:o,source:s,stack:Wi(s)}}var br=[],Rr=0,Ou=null,Ka=0,Jn=[],$n=0,Lo=null,Fi=1,Gi="";function io(o,s){br[Rr++]=Ka,br[Rr++]=Ou,Ou=o,Ka=s}function Rg(o,s,l){Jn[$n++]=Fi,Jn[$n++]=Gi,Jn[$n++]=Lo,Lo=o;var c=Fi;o=Gi;var y=32-It(c)-1;c&=~(1<<y),l+=1;var v=32-It(s)+y;if(30<v){var S=y-y%5;v=(c&(1<<S)-1).toString(32),c>>=S,y-=S,Fi=1<<32-It(s)+y|l<<y|c,Gi=v+o}else Fi=1<<v|l<<y|c,Gi=o}function cd(o){o.return!==null&&(io(o,1),Rg(o,1,0))}function fd(o){for(;o===Ou;)Ou=br[--Rr],br[Rr]=null,Ka=br[--Rr],br[Rr]=null;for(;o===Lo;)Lo=Jn[--$n],Jn[$n]=null,Gi=Jn[--$n],Jn[$n]=null,Fi=Jn[--$n],Jn[$n]=null}function Ig(o,s){Jn[$n++]=Fi,Jn[$n++]=Gi,Jn[$n++]=Lo,Fi=s.id,Gi=s.overflow,Lo=o}var en=null,gt=null,$e=!1,ko=null,Kn=!1,dd=Error(i(519));function Oo(o){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qa(Yn(s,o)),dd}function wg(o){var s=o.stateNode,l=o.type,c=o.memoizedProps;switch(s[Vt]=o,s[$t]=c,l){case"dialog":Fe("cancel",s),Fe("close",s);break;case"iframe":case"object":case"embed":Fe("load",s);break;case"video":case"audio":for(l=0;l<yl.length;l++)Fe(yl[l],s);break;case"source":Fe("error",s);break;case"img":case"image":case"link":Fe("error",s),Fe("load",s);break;case"details":Fe("toggle",s);break;case"input":Fe("invalid",s),yu(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Fe("invalid",s);break;case"textarea":Fe("invalid",s),wo(s,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||Jy(s.textContent,l)?(c.popover!=null&&(Fe("beforetoggle",s),Fe("toggle",s)),c.onScroll!=null&&Fe("scroll",s),c.onScrollEnd!=null&&Fe("scrollend",s),c.onClick!=null&&(s.onclick=li),s=!0):s=!1,s||Oo(o,!0)}function Ng(o){for(en=o.return;en;)switch(en.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:en=en.return}}function Ir(o){if(o!==en)return!1;if(!$e)return Ng(o),$e=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||Nh(o.type,o.memoizedProps)),l=!l),l&&gt&&Oo(o),Ng(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));gt=t_(o)}else if(s===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));gt=t_(o)}else s===27?(s=gt,Zo(o.type)?(o=Uh,Uh=null,gt=o):gt=s):gt=en?Xn(o.stateNode.nextSibling):null;return!0}function Os(){gt=en=null,$e=!1}function hd(){var o=ko;return o!==null&&(bn===null?bn=o:bn.push.apply(bn,o),ko=null),o}function Qa(o){ko===null?ko=[o]:ko.push(o)}var pd=B(null),Bs=null,oo=null;function Bo(o,s,l){le(pd,s._currentValue),s._currentValue=l}function so(o){o._currentValue=pd.current,$(pd)}function md(o,s,l){for(;o!==null;){var c=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),o===l)break;o=o.return}}function gd(o,s,l,c){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var v=y.dependencies;if(v!==null){var S=y.child;v=v.firstContext;e:for(;v!==null;){var b=v;v=y;for(var V=0;V<s.length;V++)if(b.context===s[V]){v.lanes|=l,b=v.alternate,b!==null&&(b.lanes|=l),md(v.return,l,o),c||(S=null);break e}v=b.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(i(341));S.lanes|=l,v=S.alternate,v!==null&&(v.lanes|=l),md(S,l,o),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===o){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function wr(o,s,l,c){o=null;for(var y=s,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var b=y.type;Dn(y.pendingProps.value,S.value)||(o!==null?o.push(b):o=[b])}}else if(y===Ge.current){if(S=y.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(Al):o=[Al])}y=y.return}o!==null&&gd(s,o,l,c),s.flags|=262144}function Bu(o){for(o=o.firstContext;o!==null;){if(!Dn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function qs(o){Bs=o,oo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function tn(o){return Dg(Bs,o)}function qu(o,s){return Bs===null&&qs(o),Dg(o,s)}function Dg(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},oo===null){if(o===null)throw Error(i(308));oo=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else oo=oo.next=s;return l}var vC=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,c){o.push(c)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},TC=t.unstable_scheduleCallback,EC=t.unstable_NormalPriority,kt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yd(){return{controller:new vC,data:new Map,refCount:0}}function Xa(o){o.refCount--,o.refCount===0&&TC(EC,function(){o.controller.abort()})}var Wa=null,_d=0,Nr=0,Dr=null;function AC(o,s){if(Wa===null){var l=Wa=[];_d=0,Nr=Eh(),Dr={status:"pending",value:void 0,then:function(c){l.push(c)}}}return _d++,s.then(Mg,Mg),s}function Mg(){if(--_d===0&&Wa!==null){Dr!==null&&(Dr.status="fulfilled");var o=Wa;Wa=null,Nr=0,Dr=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function SC(o,s){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return o.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<l.length;y++)(0,l[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Pg=W.S;W.S=function(o,s){gy=hn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&AC(o,s),Pg!==null&&Pg(o,s)};var Fs=B(null);function vd(){var o=Fs.current;return o!==null?o:dt.pooledCache}function Fu(o,s){s===null?le(Fs,Fs.current):le(Fs,s.pool)}function Vg(){var o=vd();return o===null?null:{parent:kt._currentValue,pool:o}}var Mr=Error(i(460)),Td=Error(i(474)),Gu=Error(i(542)),Hu={then:function(){}};function Ug(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Lg(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(li,li),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Og(o),o;default:if(typeof s.status=="string")s.then(li,li);else{if(o=dt,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Og(o),o}throw Hs=s,Mr}}function Gs(o){try{var s=o._init;return s(o._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Hs=l,Mr):l}}var Hs=null;function kg(){if(Hs===null)throw Error(i(459));var o=Hs;return Hs=null,o}function Og(o){if(o===Mr||o===Gu)throw Error(i(483))}var Pr=null,Za=0;function zu(o){var s=Za;return Za+=1,Pr===null&&(Pr=[]),Lg(Pr,o,s)}function ja(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Yu(o,s){throw s.$$typeof===A?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function Bg(o){function s(F,O){if(o){var z=F.deletions;z===null?(F.deletions=[O],F.flags|=16):z.push(O)}}function l(F,O){if(!o)return null;for(;O!==null;)s(F,O),O=O.sibling;return null}function c(F){for(var O=new Map;F!==null;)F.key!==null?O.set(F.key,F):O.set(F.index,F),F=F.sibling;return O}function y(F,O){return F=no(F,O),F.index=0,F.sibling=null,F}function v(F,O,z){return F.index=z,o?(z=F.alternate,z!==null?(z=z.index,z<O?(F.flags|=67108866,O):z):(F.flags|=67108866,O)):(F.flags|=1048576,O)}function S(F){return o&&F.alternate===null&&(F.flags|=67108866),F}function b(F,O,z,ne){return O===null||O.tag!==6?(O=ld(z,F.mode,ne),O.return=F,O):(O=y(O,z),O.return=F,O)}function V(F,O,z,ne){var Te=z.type;return Te===k?ee(F,O,z.props.children,ne,z.key):O!==null&&(O.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===w&&Gs(Te)===O.type)?(O=y(O,z.props),ja(O,z),O.return=F,O):(O=ku(z.type,z.key,z.props,null,F.mode,ne),ja(O,z),O.return=F,O)}function Y(F,O,z,ne){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=ud(z,F.mode,ne),O.return=F,O):(O=y(O,z.children||[]),O.return=F,O)}function ee(F,O,z,ne,Te){return O===null||O.tag!==7?(O=ks(z,F.mode,ne,Te),O.return=F,O):(O=y(O,z),O.return=F,O)}function oe(F,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=ld(""+O,F.mode,z),O.return=F,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case C:return z=ku(O.type,O.key,O.props,null,F.mode,z),ja(z,O),z.return=F,z;case P:return O=ud(O,F.mode,z),O.return=F,O;case w:return O=Gs(O),oe(F,O,z)}if(ct(O)||q(O))return O=ks(O,F.mode,z,null),O.return=F,O;if(typeof O.then=="function")return oe(F,zu(O),z);if(O.$$typeof===Z)return oe(F,qu(F,O),z);Yu(F,O)}return null}function J(F,O,z,ne){var Te=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Te!==null?null:b(F,O,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return z.key===Te?V(F,O,z,ne):null;case P:return z.key===Te?Y(F,O,z,ne):null;case w:return z=Gs(z),J(F,O,z,ne)}if(ct(z)||q(z))return Te!==null?null:ee(F,O,z,ne,null);if(typeof z.then=="function")return J(F,O,zu(z),ne);if(z.$$typeof===Z)return J(F,O,qu(F,z),ne);Yu(F,z)}return null}function X(F,O,z,ne,Te){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return F=F.get(z)||null,b(O,F,""+ne,Te);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case C:return F=F.get(ne.key===null?z:ne.key)||null,V(O,F,ne,Te);case P:return F=F.get(ne.key===null?z:ne.key)||null,Y(O,F,ne,Te);case w:return ne=Gs(ne),X(F,O,z,ne,Te)}if(ct(ne)||q(ne))return F=F.get(z)||null,ee(O,F,ne,Te,null);if(typeof ne.then=="function")return X(F,O,z,zu(ne),Te);if(ne.$$typeof===Z)return X(F,O,z,qu(O,ne),Te);Yu(O,ne)}return null}function ye(F,O,z,ne){for(var Te=null,We=null,_e=O,Le=O=0,ze=null;_e!==null&&Le<z.length;Le++){_e.index>Le?(ze=_e,_e=null):ze=_e.sibling;var Ze=J(F,_e,z[Le],ne);if(Ze===null){_e===null&&(_e=ze);break}o&&_e&&Ze.alternate===null&&s(F,_e),O=v(Ze,O,Le),We===null?Te=Ze:We.sibling=Ze,We=Ze,_e=ze}if(Le===z.length)return l(F,_e),$e&&io(F,Le),Te;if(_e===null){for(;Le<z.length;Le++)_e=oe(F,z[Le],ne),_e!==null&&(O=v(_e,O,Le),We===null?Te=_e:We.sibling=_e,We=_e);return $e&&io(F,Le),Te}for(_e=c(_e);Le<z.length;Le++)ze=X(_e,F,Le,z[Le],ne),ze!==null&&(o&&ze.alternate!==null&&_e.delete(ze.key===null?Le:ze.key),O=v(ze,O,Le),We===null?Te=ze:We.sibling=ze,We=ze);return o&&_e.forEach(function(is){return s(F,is)}),$e&&io(F,Le),Te}function Ae(F,O,z,ne){if(z==null)throw Error(i(151));for(var Te=null,We=null,_e=O,Le=O=0,ze=null,Ze=z.next();_e!==null&&!Ze.done;Le++,Ze=z.next()){_e.index>Le?(ze=_e,_e=null):ze=_e.sibling;var is=J(F,_e,Ze.value,ne);if(is===null){_e===null&&(_e=ze);break}o&&_e&&is.alternate===null&&s(F,_e),O=v(is,O,Le),We===null?Te=is:We.sibling=is,We=is,_e=ze}if(Ze.done)return l(F,_e),$e&&io(F,Le),Te;if(_e===null){for(;!Ze.done;Le++,Ze=z.next())Ze=oe(F,Ze.value,ne),Ze!==null&&(O=v(Ze,O,Le),We===null?Te=Ze:We.sibling=Ze,We=Ze);return $e&&io(F,Le),Te}for(_e=c(_e);!Ze.done;Le++,Ze=z.next())Ze=X(_e,F,Le,Ze.value,ne),Ze!==null&&(o&&Ze.alternate!==null&&_e.delete(Ze.key===null?Le:Ze.key),O=v(Ze,O,Le),We===null?Te=Ze:We.sibling=Ze,We=Ze);return o&&_e.forEach(function(V1){return s(F,V1)}),$e&&io(F,Le),Te}function ut(F,O,z,ne){if(typeof z=="object"&&z!==null&&z.type===k&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case C:e:{for(var Te=z.key;O!==null;){if(O.key===Te){if(Te=z.type,Te===k){if(O.tag===7){l(F,O.sibling),ne=y(O,z.props.children),ne.return=F,F=ne;break e}}else if(O.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===w&&Gs(Te)===O.type){l(F,O.sibling),ne=y(O,z.props),ja(ne,z),ne.return=F,F=ne;break e}l(F,O);break}else s(F,O);O=O.sibling}z.type===k?(ne=ks(z.props.children,F.mode,ne,z.key),ne.return=F,F=ne):(ne=ku(z.type,z.key,z.props,null,F.mode,ne),ja(ne,z),ne.return=F,F=ne)}return S(F);case P:e:{for(Te=z.key;O!==null;){if(O.key===Te)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){l(F,O.sibling),ne=y(O,z.children||[]),ne.return=F,F=ne;break e}else{l(F,O);break}else s(F,O);O=O.sibling}ne=ud(z,F.mode,ne),ne.return=F,F=ne}return S(F);case w:return z=Gs(z),ut(F,O,z,ne)}if(ct(z))return ye(F,O,z,ne);if(q(z)){if(Te=q(z),typeof Te!="function")throw Error(i(150));return z=Te.call(z),Ae(F,O,z,ne)}if(typeof z.then=="function")return ut(F,O,zu(z),ne);if(z.$$typeof===Z)return ut(F,O,qu(F,z),ne);Yu(F,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(l(F,O.sibling),ne=y(O,z),ne.return=F,F=ne):(l(F,O),ne=ld(z,F.mode,ne),ne.return=F,F=ne),S(F)):l(F,O)}return function(F,O,z,ne){try{Za=0;var Te=ut(F,O,z,ne);return Pr=null,Te}catch(_e){if(_e===Mr||_e===Gu)throw _e;var We=Mn(29,_e,null,F.mode);return We.lanes=ne,We.return=F,We}finally{}}}var zs=Bg(!0),qg=Bg(!1),qo=!1;function Ed(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ad(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Fo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Go(o,s,l){var c=o.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=Lu(o),Sg(o,null,l),s}return Uu(o,c,s,l),Lu(o)}function el(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=o.pendingLanes,l|=c,s.lanes=l,Ra(o,l)}}function Sd(o,s){var l=o.updateQueue,c=o.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?y=v=s:v=v.next=s}else y=v=s;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var xd=!1;function tl(){if(xd){var o=Dr;if(o!==null)throw o}}function nl(o,s,l,c){xd=!1;var y=o.updateQueue;qo=!1;var v=y.firstBaseUpdate,S=y.lastBaseUpdate,b=y.shared.pending;if(b!==null){y.shared.pending=null;var V=b,Y=V.next;V.next=null,S===null?v=Y:S.next=Y,S=V;var ee=o.alternate;ee!==null&&(ee=ee.updateQueue,b=ee.lastBaseUpdate,b!==S&&(b===null?ee.firstBaseUpdate=Y:b.next=Y,ee.lastBaseUpdate=V))}if(v!==null){var oe=y.baseState;S=0,ee=Y=V=null,b=v;do{var J=b.lane&-536870913,X=J!==b.lane;if(X?(He&J)===J:(c&J)===J){J!==0&&J===Nr&&(xd=!0),ee!==null&&(ee=ee.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ye=o,Ae=b;J=s;var ut=l;switch(Ae.tag){case 1:if(ye=Ae.payload,typeof ye=="function"){oe=ye.call(ut,oe,J);break e}oe=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=Ae.payload,J=typeof ye=="function"?ye.call(ut,oe,J):ye,J==null)break e;oe=T({},oe,J);break e;case 2:qo=!0}}J=b.callback,J!==null&&(o.flags|=64,X&&(o.flags|=8192),X=y.callbacks,X===null?y.callbacks=[J]:X.push(J))}else X={lane:J,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ee===null?(Y=ee=X,V=oe):ee=ee.next=X,S|=J;if(b=b.next,b===null){if(b=y.shared.pending,b===null)break;X=b,b=X.next,X.next=null,y.lastBaseUpdate=X,y.shared.pending=null}}while(!0);ee===null&&(V=oe),y.baseState=V,y.firstBaseUpdate=Y,y.lastBaseUpdate=ee,v===null&&(y.shared.lanes=0),$o|=S,o.lanes=S,o.memoizedState=oe}}function Fg(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function Gg(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)Fg(l[o],s)}var Vr=B(null),Ju=B(0);function Hg(o,s){o=mo,le(Ju,o),le(Vr,s),mo=o|s.baseLanes}function Cd(){le(Ju,mo),le(Vr,Vr.current)}function bd(){mo=Ju.current,$(Vr),$(Ju)}var Pn=B(null),Qn=null;function Ho(o){var s=o.alternate;le(Nt,Nt.current&1),le(Pn,o),Qn===null&&(s===null||Vr.current!==null||s.memoizedState!==null)&&(Qn=o)}function Rd(o){le(Nt,Nt.current),le(Pn,o),Qn===null&&(Qn=o)}function zg(o){o.tag===22?(le(Nt,Nt.current),le(Pn,o),Qn===null&&(Qn=o)):zo()}function zo(){le(Nt,Nt.current),le(Pn,Pn.current)}function Vn(o){$(Pn),Qn===o&&(Qn=null),$(Nt)}var Nt=B(0);function $u(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Ph(l)||Vh(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var ro=0,Ve=null,at=null,Ot=null,Ku=!1,Ur=!1,Ys=!1,Qu=0,il=0,Lr=null,xC=0;function Et(){throw Error(i(321))}function Id(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!Dn(o[l],s[l]))return!1;return!0}function wd(o,s,l,c,y,v){return ro=v,Ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,W.H=o===null||o.memoizedState===null?R0:zd,Ys=!1,v=l(c,y),Ys=!1,Ur&&(v=Jg(s,l,c,y)),Yg(o),v}function Yg(o){W.H=rl;var s=at!==null&&at.next!==null;if(ro=0,Ot=at=Ve=null,Ku=!1,il=0,Lr=null,s)throw Error(i(300));o===null||Bt||(o=o.dependencies,o!==null&&Bu(o)&&(Bt=!0))}function Jg(o,s,l,c){Ve=o;var y=0;do{if(Ur&&(Lr=null),il=0,Ur=!1,25<=y)throw Error(i(301));if(y+=1,Ot=at=null,o.updateQueue!=null){var v=o.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}W.H=I0,v=s(l,c)}while(Ur);return v}function CC(){var o=W.H,s=o.useState()[0];return s=typeof s.then=="function"?ol(s):s,o=o.useState()[0],(at!==null?at.memoizedState:null)!==o&&(Ve.flags|=1024),s}function Nd(){var o=Qu!==0;return Qu=0,o}function Dd(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function Md(o){if(Ku){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}Ku=!1}ro=0,Ot=at=Ve=null,Ur=!1,il=Qu=0,Lr=null}function mn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Ve.memoizedState=Ot=o:Ot=Ot.next=o,Ot}function Dt(){if(at===null){var o=Ve.alternate;o=o!==null?o.memoizedState:null}else o=at.next;var s=Ot===null?Ve.memoizedState:Ot.next;if(s!==null)Ot=s,at=o;else{if(o===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));at=o,o={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Ot===null?Ve.memoizedState=Ot=o:Ot=Ot.next=o}return Ot}function Xu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(o){var s=il;return il+=1,Lr===null&&(Lr=[]),o=Lg(Lr,o,s),s=Ve,(Ot===null?s.memoizedState:Ot.next)===null&&(s=s.alternate,W.H=s===null||s.memoizedState===null?R0:zd),o}function Wu(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return ol(o);if(o.$$typeof===Z)return tn(o)}throw Error(i(438,String(o)))}function Pd(o){var s=null,l=Ve.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Ve.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Xu(),Ve.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),c=0;c<o;c++)l[c]=L;return s.index++,l}function ao(o,s){return typeof s=="function"?s(o):s}function Zu(o){var s=Dt();return Vd(s,at,o)}function Vd(o,s,l){var c=o.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=o.baseQueue,v=c.pending;if(v!==null){if(y!==null){var S=y.next;y.next=v.next,v.next=S}s.baseQueue=y=v,c.pending=null}if(v=o.baseState,y===null)o.memoizedState=v;else{s=y.next;var b=S=null,V=null,Y=s,ee=!1;do{var oe=Y.lane&-536870913;if(oe!==Y.lane?(He&oe)===oe:(ro&oe)===oe){var J=Y.revertLane;if(J===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),oe===Nr&&(ee=!0);else if((ro&J)===J){Y=Y.next,J===Nr&&(ee=!0);continue}else oe={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(b=V=oe,S=v):V=V.next=oe,Ve.lanes|=J,$o|=J;oe=Y.action,Ys&&l(v,oe),v=Y.hasEagerState?Y.eagerState:l(v,oe)}else J={lane:oe,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(b=V=J,S=v):V=V.next=J,Ve.lanes|=oe,$o|=oe;Y=Y.next}while(Y!==null&&Y!==s);if(V===null?S=v:V.next=b,!Dn(v,o.memoizedState)&&(Bt=!0,ee&&(l=Dr,l!==null)))throw l;o.memoizedState=v,o.baseState=S,o.baseQueue=V,c.lastRenderedState=v}return y===null&&(c.lanes=0),[o.memoizedState,c.dispatch]}function Ud(o){var s=Dt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var c=l.dispatch,y=l.pending,v=s.memoizedState;if(y!==null){l.pending=null;var S=y=y.next;do v=o(v,S.action),S=S.next;while(S!==y);Dn(v,s.memoizedState)||(Bt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,c]}function $g(o,s,l){var c=Ve,y=Dt(),v=$e;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=s();var S=!Dn((at||y).memoizedState,l);if(S&&(y.memoizedState=l,Bt=!0),y=y.queue,Od(Xg.bind(null,c,y,o),[o]),y.getSnapshot!==s||S||Ot!==null&&Ot.memoizedState.tag&1){if(c.flags|=2048,kr(9,{destroy:void 0},Qg.bind(null,c,y,l,s),null),dt===null)throw Error(i(349));v||(ro&127)!==0||Kg(c,s,l)}return l}function Kg(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=Ve.updateQueue,s===null?(s=Xu(),Ve.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function Qg(o,s,l,c){s.value=l,s.getSnapshot=c,Wg(s)&&Zg(o)}function Xg(o,s,l){return l(function(){Wg(s)&&Zg(o)})}function Wg(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!Dn(o,l)}catch{return!0}}function Zg(o){var s=Ls(o,2);s!==null&&Rn(s,o,2)}function Ld(o){var s=mn();if(typeof o=="function"){var l=o;if(o=l(),Ys){Bn(!0);try{l()}finally{Bn(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:o},s}function jg(o,s,l,c){return o.baseState=l,Vd(o,at,typeof c=="function"?c:ao)}function bC(o,s,l,c,y){if(tc(o))throw Error(i(485));if(o=s.action,o!==null){var v={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};W.T!==null?l(!0):v.isTransition=!1,c(v),l=s.pending,l===null?(v.next=s.pending=v,e0(s,v)):(v.next=l.next,s.pending=l.next=v)}}function e0(o,s){var l=s.action,c=s.payload,y=o.state;if(s.isTransition){var v=W.T,S={};W.T=S;try{var b=l(y,c),V=W.S;V!==null&&V(S,b),t0(o,s,b)}catch(Y){kd(o,s,Y)}finally{v!==null&&S.types!==null&&(v.types=S.types),W.T=v}}else try{v=l(y,c),t0(o,s,v)}catch(Y){kd(o,s,Y)}}function t0(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){n0(o,s,c)},function(c){return kd(o,s,c)}):n0(o,s,l)}function n0(o,s,l){s.status="fulfilled",s.value=l,i0(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,e0(o,l)))}function kd(o,s,l){var c=o.pending;if(o.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,i0(s),s=s.next;while(s!==c)}o.action=null}function i0(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function o0(o,s){return s}function s0(o,s){if($e){var l=dt.formState;if(l!==null){e:{var c=Ve;if($e){if(gt){t:{for(var y=gt,v=Kn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Xn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){gt=Xn(y.nextSibling),c=y.data==="F!";break e}}Oo(c)}c=!1}c&&(s=l[0])}}return l=mn(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o0,lastRenderedState:s},l.queue=c,l=x0.bind(null,Ve,c),c.dispatch=l,c=Ld(!1),v=Hd.bind(null,Ve,!1,c.queue),c=mn(),y={state:s,dispatch:null,action:o,pending:null},c.queue=y,l=bC.bind(null,Ve,y,v,l),y.dispatch=l,c.memoizedState=o,[s,l,!1]}function r0(o){var s=Dt();return a0(s,at,o)}function a0(o,s,l){if(s=Vd(o,s,o0)[0],o=Zu(ao)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ol(s)}catch(S){throw S===Mr?Gu:S}else c=s;s=Dt();var y=s.queue,v=y.dispatch;return l!==s.memoizedState&&(Ve.flags|=2048,kr(9,{destroy:void 0},RC.bind(null,y,l),null)),[c,v,o]}function RC(o,s){o.action=s}function l0(o){var s=Dt(),l=at;if(l!==null)return a0(s,l,o);Dt(),s=s.memoizedState,l=Dt();var c=l.queue.dispatch;return l.memoizedState=o,[s,c,!1]}function kr(o,s,l,c){return o={tag:o,create:l,deps:c,inst:s,next:null},s=Ve.updateQueue,s===null&&(s=Xu(),Ve.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(c=l.next,l.next=o,o.next=c,s.lastEffect=o),o}function u0(){return Dt().memoizedState}function ju(o,s,l,c){var y=mn();Ve.flags|=o,y.memoizedState=kr(1|s,{destroy:void 0},l,c===void 0?null:c)}function ec(o,s,l,c){var y=Dt();c=c===void 0?null:c;var v=y.memoizedState.inst;at!==null&&c!==null&&Id(c,at.memoizedState.deps)?y.memoizedState=kr(s,v,l,c):(Ve.flags|=o,y.memoizedState=kr(1|s,v,l,c))}function c0(o,s){ju(8390656,8,o,s)}function Od(o,s){ec(2048,8,o,s)}function IC(o){Ve.flags|=4;var s=Ve.updateQueue;if(s===null)s=Xu(),Ve.updateQueue=s,s.events=[o];else{var l=s.events;l===null?s.events=[o]:l.push(o)}}function f0(o){var s=Dt().memoizedState;return IC({ref:s,nextImpl:o}),function(){if((tt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function d0(o,s){return ec(4,2,o,s)}function h0(o,s){return ec(4,4,o,s)}function p0(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function m0(o,s,l){l=l!=null?l.concat([o]):null,ec(4,4,p0.bind(null,s,o),l)}function Bd(){}function g0(o,s){var l=Dt();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Id(s,c[1])?c[0]:(l.memoizedState=[o,s],o)}function y0(o,s){var l=Dt();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Id(s,c[1]))return c[0];if(c=o(),Ys){Bn(!0);try{o()}finally{Bn(!1)}}return l.memoizedState=[c,s],c}function qd(o,s,l){return l===void 0||(ro&1073741824)!==0&&(He&261930)===0?o.memoizedState=s:(o.memoizedState=l,o=_y(),Ve.lanes|=o,$o|=o,l)}function _0(o,s,l,c){return Dn(l,s)?l:Vr.current!==null?(o=qd(o,l,c),Dn(o,s)||(Bt=!0),o):(ro&42)===0||(ro&1073741824)!==0&&(He&261930)===0?(Bt=!0,o.memoizedState=l):(o=_y(),Ve.lanes|=o,$o|=o,s)}function v0(o,s,l,c,y){var v=ae.p;ae.p=v!==0&&8>v?v:8;var S=W.T,b={};W.T=b,Hd(o,!1,s,l);try{var V=y(),Y=W.S;if(Y!==null&&Y(b,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ee=SC(V,c);sl(o,s,ee,kn(o))}else sl(o,s,c,kn(o))}catch(oe){sl(o,s,{then:function(){},status:"rejected",reason:oe},kn())}finally{ae.p=v,S!==null&&b.types!==null&&(S.types=b.types),W.T=S}}function wC(){}function Fd(o,s,l,c){if(o.tag!==5)throw Error(i(476));var y=T0(o).queue;v0(o,y,s,ve,l===null?wC:function(){return E0(o),l(c)})}function T0(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:ve},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function E0(o){var s=T0(o);s.next===null&&(s=o.alternate.memoizedState),sl(o,s.next.queue,{},kn())}function Gd(){return tn(Al)}function A0(){return Dt().memoizedState}function S0(){return Dt().memoizedState}function NC(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=kn();o=Fo(l);var c=Go(s,o,l);c!==null&&(Rn(c,s,l),el(c,s,l)),s={cache:yd()},o.payload=s;return}s=s.return}}function DC(o,s,l){var c=kn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},tc(o)?C0(s,l):(l=rd(o,s,l,c),l!==null&&(Rn(l,o,c),b0(l,s,c)))}function x0(o,s,l){var c=kn();sl(o,s,l,c)}function sl(o,s,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(tc(o))C0(s,y);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,b=v(S,l);if(y.hasEagerState=!0,y.eagerState=b,Dn(b,S))return Uu(o,s,y,0),dt===null&&Vu(),!1}catch{}finally{}if(l=rd(o,s,y,c),l!==null)return Rn(l,o,c),b0(l,s,c),!0}return!1}function Hd(o,s,l,c){if(c={lane:2,revertLane:Eh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},tc(o)){if(s)throw Error(i(479))}else s=rd(o,l,c,2),s!==null&&Rn(s,o,2)}function tc(o){var s=o.alternate;return o===Ve||s!==null&&s===Ve}function C0(o,s){Ur=Ku=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function b0(o,s,l){if((l&4194048)!==0){var c=s.lanes;c&=o.pendingLanes,l|=c,s.lanes=l,Ra(o,l)}}var rl={readContext:tn,use:Wu,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};rl.useEffectEvent=Et;var R0={readContext:tn,use:Wu,useCallback:function(o,s){return mn().memoizedState=[o,s===void 0?null:s],o},useContext:tn,useEffect:c0,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,ju(4194308,4,p0.bind(null,s,o),l)},useLayoutEffect:function(o,s){return ju(4194308,4,o,s)},useInsertionEffect:function(o,s){ju(4,2,o,s)},useMemo:function(o,s){var l=mn();s=s===void 0?null:s;var c=o();if(Ys){Bn(!0);try{o()}finally{Bn(!1)}}return l.memoizedState=[c,s],c},useReducer:function(o,s,l){var c=mn();if(l!==void 0){var y=l(s);if(Ys){Bn(!0);try{l(s)}finally{Bn(!1)}}}else y=s;return c.memoizedState=c.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},c.queue=o,o=o.dispatch=DC.bind(null,Ve,o),[c.memoizedState,o]},useRef:function(o){var s=mn();return o={current:o},s.memoizedState=o},useState:function(o){o=Ld(o);var s=o.queue,l=x0.bind(null,Ve,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:Bd,useDeferredValue:function(o,s){var l=mn();return qd(l,o,s)},useTransition:function(){var o=Ld(!1);return o=v0.bind(null,Ve,o.queue,!0,!1),mn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var c=Ve,y=mn();if($e){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),dt===null)throw Error(i(349));(He&127)!==0||Kg(c,s,l)}y.memoizedState=l;var v={value:l,getSnapshot:s};return y.queue=v,c0(Xg.bind(null,c,v,o),[o]),c.flags|=2048,kr(9,{destroy:void 0},Qg.bind(null,c,v,l,s),null),l},useId:function(){var o=mn(),s=dt.identifierPrefix;if($e){var l=Gi,c=Fi;l=(c&~(1<<32-It(c)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Qu++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=xC++,s="_"+s+"r_"+l.toString(32)+"_";return o.memoizedState=s},useHostTransitionStatus:Gd,useFormState:s0,useActionState:s0,useOptimistic:function(o){var s=mn();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Hd.bind(null,Ve,!0,l),l.dispatch=s,[o,s]},useMemoCache:Pd,useCacheRefresh:function(){return mn().memoizedState=NC.bind(null,Ve)},useEffectEvent:function(o){var s=mn(),l={impl:o};return s.memoizedState=l,function(){if((tt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},zd={readContext:tn,use:Wu,useCallback:g0,useContext:tn,useEffect:Od,useImperativeHandle:m0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:y0,useReducer:Zu,useRef:u0,useState:function(){return Zu(ao)},useDebugValue:Bd,useDeferredValue:function(o,s){var l=Dt();return _0(l,at.memoizedState,o,s)},useTransition:function(){var o=Zu(ao)[0],s=Dt().memoizedState;return[typeof o=="boolean"?o:ol(o),s]},useSyncExternalStore:$g,useId:A0,useHostTransitionStatus:Gd,useFormState:r0,useActionState:r0,useOptimistic:function(o,s){var l=Dt();return jg(l,at,o,s)},useMemoCache:Pd,useCacheRefresh:S0};zd.useEffectEvent=f0;var I0={readContext:tn,use:Wu,useCallback:g0,useContext:tn,useEffect:Od,useImperativeHandle:m0,useInsertionEffect:d0,useLayoutEffect:h0,useMemo:y0,useReducer:Ud,useRef:u0,useState:function(){return Ud(ao)},useDebugValue:Bd,useDeferredValue:function(o,s){var l=Dt();return at===null?qd(l,o,s):_0(l,at.memoizedState,o,s)},useTransition:function(){var o=Ud(ao)[0],s=Dt().memoizedState;return[typeof o=="boolean"?o:ol(o),s]},useSyncExternalStore:$g,useId:A0,useHostTransitionStatus:Gd,useFormState:l0,useActionState:l0,useOptimistic:function(o,s){var l=Dt();return at!==null?jg(l,at,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:Pd,useCacheRefresh:S0};I0.useEffectEvent=f0;function Yd(o,s,l,c){s=o.memoizedState,l=l(c,s),l=l==null?s:T({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var Jd={enqueueSetState:function(o,s,l){o=o._reactInternals;var c=kn(),y=Fo(c);y.payload=s,l!=null&&(y.callback=l),s=Go(o,y,c),s!==null&&(Rn(s,o,c),el(s,o,c))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var c=kn(),y=Fo(c);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=Go(o,y,c),s!==null&&(Rn(s,o,c),el(s,o,c))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=kn(),c=Fo(l);c.tag=2,s!=null&&(c.callback=s),s=Go(o,c,l),s!==null&&(Rn(s,o,l),el(s,o,l))}};function w0(o,s,l,c,y,v,S){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(c,v,S):s.prototype&&s.prototype.isPureReactComponent?!Ja(l,c)||!Ja(y,v):!0}function N0(o,s,l,c){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==o&&Jd.enqueueReplaceState(s,s.state,null)}function Js(o,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(o=o.defaultProps){l===s&&(l=T({},l));for(var y in o)l[y]===void 0&&(l[y]=o[y])}return l}function D0(o){Pu(o)}function M0(o){console.error(o)}function P0(o){Pu(o)}function nc(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function V0(o,s,l){try{var c=o.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function $d(o,s,l){return l=Fo(l),l.tag=3,l.payload={element:null},l.callback=function(){nc(o,s)},l}function U0(o){return o=Fo(o),o.tag=3,o}function L0(o,s,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;o.payload=function(){return y(v)},o.callback=function(){V0(s,l,c)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(o.callback=function(){V0(s,l,c),typeof y!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function MC(o,s,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&wr(s,l,y,!0),l=Pn.current,l!==null){switch(l.tag){case 31:case 13:return Qn===null?pc():l.alternate===null&&At===0&&(At=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Hu?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),_h(o,c,y)),!1;case 22:return l.flags|=65536,c===Hu?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),_h(o,c,y)),!1}throw Error(i(435,l.tag))}return _h(o,c,y),pc(),!1}if($e)return s=Pn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==dd&&(o=Error(i(422),{cause:c}),Qa(Yn(o,l)))):(c!==dd&&(s=Error(i(423),{cause:c}),Qa(Yn(s,l))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,c=Yn(c,l),y=$d(o.stateNode,c,y),Sd(o,y),At!==4&&(At=2)),!1;var v=Error(i(520),{cause:c});if(v=Yn(v,l),pl===null?pl=[v]:pl.push(v),At!==4&&(At=2),s===null)return!0;c=Yn(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=y&-y,l.lanes|=o,o=$d(l.stateNode,c,o),Sd(l,o),!1;case 1:if(s=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ko===null||!Ko.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=U0(y),L0(y,o,l,c),Sd(l,y),!1}l=l.return}while(l!==null);return!1}var Kd=Error(i(461)),Bt=!1;function nn(o,s,l,c){s.child=o===null?qg(s,null,l,c):zs(s,o.child,l,c)}function k0(o,s,l,c,y){l=l.render;var v=s.ref;if("ref"in c){var S={};for(var b in c)b!=="ref"&&(S[b]=c[b])}else S=c;return qs(s),c=wd(o,s,l,S,v,y),b=Nd(),o!==null&&!Bt?(Dd(o,s,y),lo(o,s,y)):($e&&b&&cd(s),s.flags|=1,nn(o,s,c,y),s.child)}function O0(o,s,l,c,y){if(o===null){var v=l.type;return typeof v=="function"&&!ad(v)&&v.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=v,B0(o,s,v,c,y)):(o=ku(l.type,null,c,s,s.mode,y),o.ref=s.ref,o.return=s,s.child=o)}if(v=o.child,!nh(o,y)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:Ja,l(S,c)&&o.ref===s.ref)return lo(o,s,y)}return s.flags|=1,o=no(v,c),o.ref=s.ref,o.return=s,s.child=o}function B0(o,s,l,c,y){if(o!==null){var v=o.memoizedProps;if(Ja(v,c)&&o.ref===s.ref)if(Bt=!1,s.pendingProps=c=v,nh(o,y))(o.flags&131072)!==0&&(Bt=!0);else return s.lanes=o.lanes,lo(o,s,y)}return Qd(o,s,l,c,y)}function q0(o,s,l,c){var y=c.children,v=o!==null?o.memoizedState:null;if(o===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,o!==null){for(c=s.child=o.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,s.child=null;return F0(o,s,v,l,c)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&Fu(s,v!==null?v.cachePool:null),v!==null?Hg(s,v):Cd(),zg(s);else return c=s.lanes=536870912,F0(o,s,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Fu(s,v.cachePool),Hg(s,v),zo(),s.memoizedState=null):(o!==null&&Fu(s,null),Cd(),zo());return nn(o,s,y,l),s.child}function al(o,s){return o!==null&&o.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function F0(o,s,l,c,y){var v=vd();return v=v===null?null:{parent:kt._currentValue,pool:v},s.memoizedState={baseLanes:l,cachePool:v},o!==null&&Fu(s,null),Cd(),zg(s),o!==null&&wr(o,s,c,!0),s.childLanes=y,null}function ic(o,s){return s=sc({mode:s.mode,children:s.children},o.mode),s.ref=o.ref,o.child=s,s.return=o,s}function G0(o,s,l){return zs(s,o.child,null,l),o=ic(s,s.pendingProps),o.flags|=2,Vn(s),s.memoizedState=null,o}function PC(o,s,l){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,o===null){if($e){if(c.mode==="hidden")return o=ic(s,c),s.lanes=536870912,al(null,o);if(Rd(s),(o=gt)?(o=e_(o,Kn),o=o!==null&&o.data==="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Lo!==null?{id:Fi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=Cg(o),l.return=s,s.child=l,en=s,gt=null)):o=null,o===null)throw Oo(s);return s.lanes=536870912,null}return ic(s,c)}var v=o.memoizedState;if(v!==null){var S=v.dehydrated;if(Rd(s),y)if(s.flags&256)s.flags&=-257,s=G0(o,s,l);else if(s.memoizedState!==null)s.child=o.child,s.flags|=128,s=null;else throw Error(i(558));else if(Bt||wr(o,s,l,!1),y=(l&o.childLanes)!==0,Bt||y){if(c=dt,c!==null&&(S=Ia(c,l),S!==0&&S!==v.retryLane))throw v.retryLane=S,Ls(o,S),Rn(c,o,S),Kd;pc(),s=G0(o,s,l)}else o=v.treeContext,gt=Xn(S.nextSibling),en=s,$e=!0,ko=null,Kn=!1,o!==null&&Ig(s,o),s=ic(s,c),s.flags|=4096;return s}return o=no(o.child,{mode:c.mode,children:c.children}),o.ref=s.ref,s.child=o,o.return=s,o}function oc(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function Qd(o,s,l,c,y){return qs(s),l=wd(o,s,l,c,void 0,y),c=Nd(),o!==null&&!Bt?(Dd(o,s,y),lo(o,s,y)):($e&&c&&cd(s),s.flags|=1,nn(o,s,l,y),s.child)}function H0(o,s,l,c,y,v){return qs(s),s.updateQueue=null,l=Jg(s,c,l,y),Yg(o),c=Nd(),o!==null&&!Bt?(Dd(o,s,v),lo(o,s,v)):($e&&c&&cd(s),s.flags|=1,nn(o,s,l,v),s.child)}function z0(o,s,l,c,y){if(qs(s),s.stateNode===null){var v=Cr,S=l.contextType;typeof S=="object"&&S!==null&&(v=tn(S)),v=new l(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Jd,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},Ed(s),S=l.contextType,v.context=typeof S=="object"&&S!==null?tn(S):Cr,v.state=s.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Yd(s,l,S,c),v.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&Jd.enqueueReplaceState(v,v.state,null),nl(s,c,v,y),tl(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(o===null){v=s.stateNode;var b=s.memoizedProps,V=Js(l,b);v.props=V;var Y=v.context,ee=l.contextType;S=Cr,typeof ee=="object"&&ee!==null&&(S=tn(ee));var oe=l.getDerivedStateFromProps;ee=typeof oe=="function"||typeof v.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,ee||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b||Y!==S)&&N0(s,v,c,S),qo=!1;var J=s.memoizedState;v.state=J,nl(s,c,v,y),tl(),Y=s.memoizedState,b||J!==Y||qo?(typeof oe=="function"&&(Yd(s,l,oe,c),Y=s.memoizedState),(V=qo||w0(s,l,V,c,J,Y,S))?(ee||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=Y),v.props=c,v.state=Y,v.context=S,c=V):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,Ad(o,s),S=s.memoizedProps,ee=Js(l,S),v.props=ee,oe=s.pendingProps,J=v.context,Y=l.contextType,V=Cr,typeof Y=="object"&&Y!==null&&(V=tn(Y)),b=l.getDerivedStateFromProps,(Y=typeof b=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==oe||J!==V)&&N0(s,v,c,V),qo=!1,J=s.memoizedState,v.state=J,nl(s,c,v,y),tl();var X=s.memoizedState;S!==oe||J!==X||qo||o!==null&&o.dependencies!==null&&Bu(o.dependencies)?(typeof b=="function"&&(Yd(s,l,b,c),X=s.memoizedState),(ee=qo||w0(s,l,ee,c,J,X,V)||o!==null&&o.dependencies!==null&&Bu(o.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,X,V),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,X,V)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===o.memoizedProps&&J===o.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===o.memoizedProps&&J===o.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=X),v.props=c,v.state=X,v.context=V,c=ee):(typeof v.componentDidUpdate!="function"||S===o.memoizedProps&&J===o.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===o.memoizedProps&&J===o.memoizedState||(s.flags|=1024),c=!1)}return v=c,oc(o,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,o!==null&&c?(s.child=zs(s,o.child,null,y),s.child=zs(s,null,l,y)):nn(o,s,l,y),s.memoizedState=v.state,o=s.child):o=lo(o,s,y),o}function Y0(o,s,l,c){return Os(),s.flags|=256,nn(o,s,l,c),s.child}var Xd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wd(o){return{baseLanes:o,cachePool:Vg()}}function Zd(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=Ln),o}function J0(o,s,l){var c=s.pendingProps,y=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=o!==null&&o.memoizedState===null?!1:(Nt.current&2)!==0),S&&(y=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,o===null){if($e){if(y?Ho(s):zo(),(o=gt)?(o=e_(o,Kn),o=o!==null&&o.data!=="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Lo!==null?{id:Fi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},l=Cg(o),l.return=s,s.child=l,en=s,gt=null)):o=null,o===null)throw Oo(s);return Vh(o)?s.lanes=32:s.lanes=536870912,null}var b=c.children;return c=c.fallback,y?(zo(),y=s.mode,b=sc({mode:"hidden",children:b},y),c=ks(c,y,l,null),b.return=s,c.return=s,b.sibling=c,s.child=b,c=s.child,c.memoizedState=Wd(l),c.childLanes=Zd(o,S,l),s.memoizedState=Xd,al(null,c)):(Ho(s),jd(s,b))}var V=o.memoizedState;if(V!==null&&(b=V.dehydrated,b!==null)){if(v)s.flags&256?(Ho(s),s.flags&=-257,s=eh(o,s,l)):s.memoizedState!==null?(zo(),s.child=o.child,s.flags|=128,s=null):(zo(),b=c.fallback,y=s.mode,c=sc({mode:"visible",children:c.children},y),b=ks(b,y,l,null),b.flags|=2,c.return=s,b.return=s,c.sibling=b,s.child=c,zs(s,o.child,null,l),c=s.child,c.memoizedState=Wd(l),c.childLanes=Zd(o,S,l),s.memoizedState=Xd,s=al(null,c));else if(Ho(s),Vh(b)){if(S=b.nextSibling&&b.nextSibling.dataset,S)var Y=S.dgst;S=Y,c=Error(i(419)),c.stack="",c.digest=S,Qa({value:c,source:null,stack:null}),s=eh(o,s,l)}else if(Bt||wr(o,s,l,!1),S=(l&o.childLanes)!==0,Bt||S){if(S=dt,S!==null&&(c=Ia(S,l),c!==0&&c!==V.retryLane))throw V.retryLane=c,Ls(o,c),Rn(S,o,c),Kd;Ph(b)||pc(),s=eh(o,s,l)}else Ph(b)?(s.flags|=192,s.child=o.child,s=null):(o=V.treeContext,gt=Xn(b.nextSibling),en=s,$e=!0,ko=null,Kn=!1,o!==null&&Ig(s,o),s=jd(s,c.children),s.flags|=4096);return s}return y?(zo(),b=c.fallback,y=s.mode,V=o.child,Y=V.sibling,c=no(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,Y!==null?b=no(Y,b):(b=ks(b,y,l,null),b.flags|=2),b.return=s,c.return=s,c.sibling=b,s.child=c,al(null,c),c=s.child,b=o.child.memoizedState,b===null?b=Wd(l):(y=b.cachePool,y!==null?(V=kt._currentValue,y=y.parent!==V?{parent:V,pool:V}:y):y=Vg(),b={baseLanes:b.baseLanes|l,cachePool:y}),c.memoizedState=b,c.childLanes=Zd(o,S,l),s.memoizedState=Xd,al(o.child,c)):(Ho(s),l=o.child,o=l.sibling,l=no(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,o!==null&&(S=s.deletions,S===null?(s.deletions=[o],s.flags|=16):S.push(o)),s.child=l,s.memoizedState=null,l)}function jd(o,s){return s=sc({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function sc(o,s){return o=Mn(22,o,null,s),o.lanes=0,o}function eh(o,s,l){return zs(s,o.child,null,l),o=jd(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function $0(o,s,l){o.lanes|=s;var c=o.alternate;c!==null&&(c.lanes|=s),md(o.return,s,l)}function th(o,s,l,c,y,v){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=l,S.tailMode=y,S.treeForkCount=v)}function K0(o,s,l){var c=s.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var S=Nt.current,b=(S&2)!==0;if(b?(S=S&1|2,s.flags|=128):S&=1,le(Nt,S),nn(o,s,c,l),c=$e?Ka:0,!b&&o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&$0(o,l,s);else if(o.tag===19)$0(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(y){case"forwards":for(l=s.child,y=null;l!==null;)o=l.alternate,o!==null&&$u(o)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),th(s,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(o=y.alternate,o!==null&&$u(o)===null){s.child=y;break}o=y.sibling,y.sibling=l,l=y,y=o}th(s,!0,l,null,v,c);break;case"together":th(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function lo(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),$o|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(wr(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,l=no(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=no(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function nh(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&Bu(o)))}function VC(o,s,l){switch(s.tag){case 3:Ct(s,s.stateNode.containerInfo),Bo(s,kt,o.memoizedState.cache),Os();break;case 27:case 5:Ce(s);break;case 4:Ct(s,s.stateNode.containerInfo);break;case 10:Bo(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Rd(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Ho(s),s.flags|=128,null):(l&s.child.childLanes)!==0?J0(o,s,l):(Ho(s),o=lo(o,s,l),o!==null?o.sibling:null);Ho(s);break;case 19:var y=(o.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(wr(o,s,l,!1),c=(l&s.childLanes)!==0),y){if(c)return K0(o,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(Nt,Nt.current),c)break;return null;case 22:return s.lanes=0,q0(o,s,l,s.pendingProps);case 24:Bo(s,kt,o.memoizedState.cache)}return lo(o,s,l)}function Q0(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)Bt=!0;else{if(!nh(o,l)&&(s.flags&128)===0)return Bt=!1,VC(o,s,l);Bt=(o.flags&131072)!==0}else Bt=!1,$e&&(s.flags&1048576)!==0&&Rg(s,Ka,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(o=Gs(s.elementType),s.type=o,typeof o=="function")ad(o)?(c=Js(o,c),s.tag=1,s=z0(null,s,o,c,l)):(s.tag=0,s=Qd(null,s,o,c,l));else{if(o!=null){var y=o.$$typeof;if(y===re){s.tag=11,s=k0(null,s,o,c,l);break e}else if(y===N){s.tag=14,s=O0(null,s,o,c,l);break e}}throw s=ke(o)||o,Error(i(306,s,""))}}return s;case 0:return Qd(o,s,s.type,s.pendingProps,l);case 1:return c=s.type,y=Js(c,s.pendingProps),z0(o,s,c,y,l);case 3:e:{if(Ct(s,s.stateNode.containerInfo),o===null)throw Error(i(387));c=s.pendingProps;var v=s.memoizedState;y=v.element,Ad(o,s),nl(s,c,null,l);var S=s.memoizedState;if(c=S.cache,Bo(s,kt,c),c!==v.cache&&gd(s,[kt],l,!0),tl(),c=S.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=Y0(o,s,c,l);break e}else if(c!==y){y=Yn(Error(i(424)),s),Qa(y),s=Y0(o,s,c,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(gt=Xn(o.firstChild),en=s,$e=!0,ko=null,Kn=!0,l=qg(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Os(),c===y){s=lo(o,s,l);break e}nn(o,s,c,l)}s=s.child}return s;case 26:return oc(o,s),o===null?(l=r_(s.type,null,s.pendingProps,null))?s.memoizedState=l:$e||(l=s.type,o=s.pendingProps,c=Ec(Me.current).createElement(l),c[Vt]=s,c[$t]=o,on(c,l,o),Ut(c),s.stateNode=c):s.memoizedState=r_(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return Ce(s),o===null&&$e&&(c=s.stateNode=i_(s.type,s.pendingProps,Me.current),en=s,Kn=!0,y=gt,Zo(s.type)?(Uh=y,gt=Xn(c.firstChild)):gt=y),nn(o,s,s.pendingProps.children,l),oc(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&$e&&((y=c=gt)&&(c=c1(c,s.type,s.pendingProps,Kn),c!==null?(s.stateNode=c,en=s,gt=Xn(c.firstChild),Kn=!1,y=!0):y=!1),y||Oo(s)),Ce(s),y=s.type,v=s.pendingProps,S=o!==null?o.memoizedProps:null,c=v.children,Nh(y,v)?c=null:S!==null&&Nh(y,S)&&(s.flags|=32),s.memoizedState!==null&&(y=wd(o,s,CC,null,null,l),Al._currentValue=y),oc(o,s),nn(o,s,c,l),s.child;case 6:return o===null&&$e&&((o=l=gt)&&(l=f1(l,s.pendingProps,Kn),l!==null?(s.stateNode=l,en=s,gt=null,o=!0):o=!1),o||Oo(s)),null;case 13:return J0(o,s,l);case 4:return Ct(s,s.stateNode.containerInfo),c=s.pendingProps,o===null?s.child=zs(s,null,c,l):nn(o,s,c,l),s.child;case 11:return k0(o,s,s.type,s.pendingProps,l);case 7:return nn(o,s,s.pendingProps,l),s.child;case 8:return nn(o,s,s.pendingProps.children,l),s.child;case 12:return nn(o,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,Bo(s,s.type,c.value),nn(o,s,c.children,l),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,qs(s),y=tn(y),c=c(y),s.flags|=1,nn(o,s,c,l),s.child;case 14:return O0(o,s,s.type,s.pendingProps,l);case 15:return B0(o,s,s.type,s.pendingProps,l);case 19:return K0(o,s,l);case 31:return PC(o,s,l);case 22:return q0(o,s,l,s.pendingProps);case 24:return qs(s),c=tn(kt),o===null?(y=vd(),y===null&&(y=dt,v=yd(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),s.memoizedState={parent:c,cache:y},Ed(s),Bo(s,kt,y)):((o.lanes&l)!==0&&(Ad(o,s),nl(s,null,null,l),tl()),y=o.memoizedState,v=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Bo(s,kt,c)):(c=v.cache,Bo(s,kt,c),c!==y.cache&&gd(s,[kt],l,!0))),nn(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function uo(o){o.flags|=4}function ih(o,s,l,c,y){if((s=(o.mode&32)!==0)&&(s=!1),s){if(o.flags|=16777216,(y&335544128)===y)if(o.stateNode.complete)o.flags|=8192;else if(Ay())o.flags|=8192;else throw Hs=Hu,Td}else o.flags&=-16777217}function X0(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!f_(s))if(Ay())o.flags|=8192;else throw Hs=Hu,Td}function rc(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?du():536870912,o.lanes|=s,Fr|=s)}function ll(o,s){if(!$e)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:c.sibling=null}}function yt(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,c=0;if(s)for(var y=o.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=c,o.childLanes=l,s}function UC(o,s,l){var c=s.pendingProps;switch(fd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(s),null;case 1:return yt(s),null;case 3:return l=s.stateNode,c=null,o!==null&&(c=o.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),so(kt),ht(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(Ir(s)?uo(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,hd())),yt(s),null;case 26:var y=s.type,v=s.memoizedState;return o===null?(uo(s),v!==null?(yt(s),X0(s,v)):(yt(s),ih(s,y,null,c,l))):v?v!==o.memoizedState?(uo(s),yt(s),X0(s,v)):(yt(s),s.flags&=-16777217):(o=o.memoizedProps,o!==c&&uo(s),yt(s),ih(s,y,o,c,l)),null;case 27:if(be(s),l=Me.current,y=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==c&&uo(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return yt(s),null}o=he.current,Ir(s)?wg(s):(o=i_(y,c,l),s.stateNode=o,uo(s))}return yt(s),null;case 5:if(be(s),y=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==c&&uo(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return yt(s),null}if(v=he.current,Ir(s))wg(s);else{var S=Ec(Me.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?S.createElement(y,{is:c.is}):S.createElement(y)}}v[Vt]=s,v[$t]=c;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=v;e:switch(on(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&uo(s)}}return yt(s),ih(s,s.type,o===null?null:o.memoizedProps,s.pendingProps,l),null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==c&&uo(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(o=Me.current,Ir(s)){if(o=s.stateNode,l=s.memoizedProps,c=null,y=en,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}o[Vt]=s,o=!!(o.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||Jy(o.nodeValue,l)),o||Oo(s,!0)}else o=Ec(o).createTextNode(c),o[Vt]=s,s.stateNode=o}return yt(s),null;case 31:if(l=s.memoizedState,o===null||o.memoizedState!==null){if(c=Ir(s),l!==null){if(o===null){if(!c)throw Error(i(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[Vt]=s}else Os(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;yt(s),o=!1}else l=hd(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=l),o=!0;if(!o)return s.flags&256?(Vn(s),s):(Vn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return yt(s),null;case 13:if(c=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=Ir(s),c!==null&&c.dehydrated!==null){if(o===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Vt]=s}else Os(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;yt(s),y=!1}else y=hd(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Vn(s),s):(Vn(s),null)}return Vn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=c!==null,o=o!==null&&o.memoizedState!==null,l&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==o&&l&&(s.child.flags|=8192),rc(s,s.updateQueue),yt(s),null);case 4:return ht(),o===null&&Ch(s.stateNode.containerInfo),yt(s),null;case 10:return so(s.type),yt(s),null;case 19:if($(Nt),c=s.memoizedState,c===null)return yt(s),null;if(y=(s.flags&128)!==0,v=c.rendering,v===null)if(y)ll(c,!1);else{if(At!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(v=$u(o),v!==null){for(s.flags|=128,ll(c,!1),o=v.updateQueue,s.updateQueue=o,rc(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)xg(l,o),l=l.sibling;return le(Nt,Nt.current&1|2),$e&&io(s,c.treeForkCount),s.child}o=o.sibling}c.tail!==null&&hn()>fc&&(s.flags|=128,y=!0,ll(c,!1),s.lanes=4194304)}else{if(!y)if(o=$u(v),o!==null){if(s.flags|=128,y=!0,o=o.updateQueue,s.updateQueue=o,rc(s,o),ll(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!$e)return yt(s),null}else 2*hn()-c.renderingStartTime>fc&&l!==536870912&&(s.flags|=128,y=!0,ll(c,!1),s.lanes=4194304);c.isBackwards?(v.sibling=s.child,s.child=v):(o=c.last,o!==null?o.sibling=v:s.child=v,c.last=v)}return c.tail!==null?(o=c.tail,c.rendering=o,c.tail=o.sibling,c.renderingStartTime=hn(),o.sibling=null,l=Nt.current,le(Nt,y?l&1|2:l&1),$e&&io(s,c.treeForkCount),o):(yt(s),null);case 22:case 23:return Vn(s),bd(),c=s.memoizedState!==null,o!==null?o.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(yt(s),s.subtreeFlags&6&&(s.flags|=8192)):yt(s),l=s.updateQueue,l!==null&&rc(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),o!==null&&$(Fs),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),so(kt),yt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function LC(o,s){switch(fd(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return so(kt),ht(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return be(s),null;case 31:if(s.memoizedState!==null){if(Vn(s),s.alternate===null)throw Error(i(340));Os()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 13:if(Vn(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Os()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return $(Nt),null;case 4:return ht(),null;case 10:return so(s.type),null;case 22:case 23:return Vn(s),bd(),o!==null&&$(Fs),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return so(kt),null;case 25:return null;default:return null}}function W0(o,s){switch(fd(s),s.tag){case 3:so(kt),ht();break;case 26:case 27:case 5:be(s);break;case 4:ht();break;case 31:s.memoizedState!==null&&Vn(s);break;case 13:Vn(s);break;case 19:$(Nt);break;case 10:so(s.type);break;case 22:case 23:Vn(s),bd(),o!==null&&$(Fs);break;case 24:so(kt)}}function ul(o,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&o)===o){c=void 0;var v=l.create,S=l.inst;c=v(),S.destroy=c}l=l.next}while(l!==y)}}catch(b){st(s,s.return,b)}}function Yo(o,s,l){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&o)===o){var S=c.inst,b=S.destroy;if(b!==void 0){S.destroy=void 0,y=s;var V=l,Y=b;try{Y()}catch(ee){st(y,V,ee)}}}c=c.next}while(c!==v)}}catch(ee){st(s,s.return,ee)}}function Z0(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{Gg(s,l)}catch(c){st(o,o.return,c)}}}function j0(o,s,l){l.props=Js(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(c){st(o,s,c)}}function cl(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var c=o.stateNode;break;case 30:c=o.stateNode;break;default:c=o.stateNode}typeof l=="function"?o.refCleanup=l(c):l.current=c}}catch(y){st(o,s,y)}}function Hi(o,s){var l=o.ref,c=o.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){st(o,s,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){st(o,s,y)}else l.current=null}function ey(o){var s=o.type,l=o.memoizedProps,c=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){st(o,o.return,y)}}function oh(o,s,l){try{var c=o.stateNode;o1(c,o.type,l,s),c[$t]=s}catch(y){st(o,o.return,y)}}function ty(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Zo(o.type)||o.tag===4}function sh(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||ty(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Zo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function rh(o,s,l){var c=o.tag;if(c===5||c===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=li));else if(c!==4&&(c===27&&Zo(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(rh(o,s,l),o=o.sibling;o!==null;)rh(o,s,l),o=o.sibling}function ac(o,s,l){var c=o.tag;if(c===5||c===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(c!==4&&(c===27&&Zo(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(ac(o,s,l),o=o.sibling;o!==null;)ac(o,s,l),o=o.sibling}function ny(o){var s=o.stateNode,l=o.memoizedProps;try{for(var c=o.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);on(s,c,l),s[Vt]=o,s[$t]=l}catch(v){st(o,o.return,v)}}var co=!1,qt=!1,ah=!1,iy=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function kC(o,s){if(o=o.containerInfo,Ih=Ic,o=mg(o),ed(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,b=-1,V=-1,Y=0,ee=0,oe=o,J=null;t:for(;;){for(var X;oe!==l||y!==0&&oe.nodeType!==3||(b=S+y),oe!==v||c!==0&&oe.nodeType!==3||(V=S+c),oe.nodeType===3&&(S+=oe.nodeValue.length),(X=oe.firstChild)!==null;)J=oe,oe=X;for(;;){if(oe===o)break t;if(J===l&&++Y===y&&(b=S),J===v&&++ee===c&&(V=S),(X=oe.nextSibling)!==null)break;oe=J,J=oe.parentNode}oe=X}l=b===-1||V===-1?null:{start:b,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(wh={focusedElem:o,selectionRange:l},Ic=!1,Qt=s;Qt!==null;)if(s=Qt,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,Qt=o;else for(;Qt!==null;){switch(s=Qt,v=s.alternate,o=s.flags,s.tag){case 0:if((o&4)!==0&&(o=s.updateQueue,o=o!==null?o.events:null,o!==null))for(l=0;l<o.length;l++)y=o[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&v!==null){o=void 0,l=s,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ye=Js(l.type,y);o=c.getSnapshotBeforeUpdate(ye,v),c.__reactInternalSnapshotBeforeUpdate=o}catch(Ae){st(l,l.return,Ae)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)Mh(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Mh(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,Qt=o;break}Qt=s.return}}function oy(o,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:ho(o,l),c&4&&ul(5,l);break;case 1:if(ho(o,l),c&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(S){st(l,l.return,S)}else{var y=Js(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(y,s,o.__reactInternalSnapshotBeforeUpdate)}catch(S){st(l,l.return,S)}}c&64&&Z0(l),c&512&&cl(l,l.return);break;case 3:if(ho(o,l),c&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Gg(o,s)}catch(S){st(l,l.return,S)}}break;case 27:s===null&&c&4&&ny(l);case 26:case 5:ho(o,l),s===null&&c&4&&ey(l),c&512&&cl(l,l.return);break;case 12:ho(o,l);break;case 31:ho(o,l),c&4&&ay(o,l);break;case 13:ho(o,l),c&4&&ly(o,l),c&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=JC.bind(null,l),d1(o,l))));break;case 22:if(c=l.memoizedState!==null||co,!c){s=s!==null&&s.memoizedState!==null||qt,y=co;var v=qt;co=c,(qt=s)&&!v?po(o,l,(l.subtreeFlags&8772)!==0):ho(o,l),co=y,qt=v}break;case 30:break;default:ho(o,l)}}function sy(o){var s=o.alternate;s!==null&&(o.alternate=null,sy(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&fr(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var vt=null,Sn=!1;function fo(o,s,l){for(l=l.child;l!==null;)ry(o,s,l),l=l.sibling}function ry(o,s,l){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(oi,l)}catch{}switch(l.tag){case 26:qt||Hi(l,s),fo(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:qt||Hi(l,s);var c=vt,y=Sn;Zo(l.type)&&(vt=l.stateNode,Sn=!1),fo(o,s,l),vl(l.stateNode),vt=c,Sn=y;break;case 5:qt||Hi(l,s);case 6:if(c=vt,y=Sn,vt=null,fo(o,s,l),vt=c,Sn=y,vt!==null)if(Sn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(l.stateNode)}catch(v){st(l,s,v)}else try{vt.removeChild(l.stateNode)}catch(v){st(l,s,v)}break;case 18:vt!==null&&(Sn?(o=vt,Zy(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),Qr(o)):Zy(vt,l.stateNode));break;case 4:c=vt,y=Sn,vt=l.stateNode.containerInfo,Sn=!0,fo(o,s,l),vt=c,Sn=y;break;case 0:case 11:case 14:case 15:Yo(2,l,s),qt||Yo(4,l,s),fo(o,s,l);break;case 1:qt||(Hi(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&j0(l,s,c)),fo(o,s,l);break;case 21:fo(o,s,l);break;case 22:qt=(c=qt)||l.memoizedState!==null,fo(o,s,l),qt=c;break;default:fo(o,s,l)}}function ay(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Qr(o)}catch(l){st(s,s.return,l)}}}function ly(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Qr(o)}catch(l){st(s,s.return,l)}}function OC(o){switch(o.tag){case 31:case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new iy),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new iy),s;default:throw Error(i(435,o.tag))}}function lc(o,s){var l=OC(o);s.forEach(function(c){if(!l.has(c)){l.add(c);var y=$C.bind(null,o,c);c.then(y,y)}})}function xn(o,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=o,S=s,b=S;e:for(;b!==null;){switch(b.tag){case 27:if(Zo(b.type)){vt=b.stateNode,Sn=!1;break e}break;case 5:vt=b.stateNode,Sn=!1;break e;case 3:case 4:vt=b.stateNode.containerInfo,Sn=!0;break e}b=b.return}if(vt===null)throw Error(i(160));ry(v,S,y),vt=null,Sn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)uy(s,o),s=s.sibling}var pi=null;function uy(o,s){var l=o.alternate,c=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:xn(s,o),Cn(o),c&4&&(Yo(3,o,o.return),ul(3,o),Yo(5,o,o.return));break;case 1:xn(s,o),Cn(o),c&512&&(qt||l===null||Hi(l,l.return)),c&64&&co&&(o=o.updateQueue,o!==null&&(c=o.callbacks,c!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=pi;if(xn(s,o),Cn(o),c&512&&(qt||l===null||Hi(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=o.memoizedState,l===null)if(c===null)if(o.stateNode===null){e:{c=o.type,l=o.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[wi]||v[Vt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),on(v,c,l),v[Vt]=o,Ut(v),c=v;break e;case"link":var S=u_("link","href",y).get(c+(l.href||""));if(S){for(var b=0;b<S.length;b++)if(v=S[b],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(b,1);break t}}v=y.createElement(c),on(v,c,l),y.head.appendChild(v);break;case"meta":if(S=u_("meta","content",y).get(c+(l.content||""))){for(b=0;b<S.length;b++)if(v=S[b],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(b,1);break t}}v=y.createElement(c),on(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[Vt]=o,Ut(v),c=v}o.stateNode=c}else c_(y,o.type,o.stateNode);else o.stateNode=l_(y,c,o.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?c_(y,o.type,o.stateNode):l_(y,c,o.memoizedProps)):c===null&&o.stateNode!==null&&oh(o,o.memoizedProps,l.memoizedProps)}break;case 27:xn(s,o),Cn(o),c&512&&(qt||l===null||Hi(l,l.return)),l!==null&&c&4&&oh(o,o.memoizedProps,l.memoizedProps);break;case 5:if(xn(s,o),Cn(o),c&512&&(qt||l===null||Hi(l,l.return)),o.flags&32){y=o.stateNode;try{An(y,"")}catch(ye){st(o,o.return,ye)}}c&4&&o.stateNode!=null&&(y=o.memoizedProps,oh(o,y,l!==null?l.memoizedProps:y)),c&1024&&(ah=!0);break;case 6:if(xn(s,o),Cn(o),c&4){if(o.stateNode===null)throw Error(i(162));c=o.memoizedProps,l=o.stateNode;try{l.nodeValue=c}catch(ye){st(o,o.return,ye)}}break;case 3:if(xc=null,y=pi,pi=Ac(s.containerInfo),xn(s,o),pi=y,Cn(o),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Qr(s.containerInfo)}catch(ye){st(o,o.return,ye)}ah&&(ah=!1,cy(o));break;case 4:c=pi,pi=Ac(o.stateNode.containerInfo),xn(s,o),Cn(o),pi=c;break;case 12:xn(s,o),Cn(o);break;case 31:xn(s,o),Cn(o),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,lc(o,c)));break;case 13:xn(s,o),Cn(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(cc=hn()),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,lc(o,c)));break;case 22:y=o.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,Y=co,ee=qt;if(co=Y||y,qt=ee||V,xn(s,o),qt=ee,co=Y,Cn(o),c&8192)e:for(s=o.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(l===null||V||co||qt||$s(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){V=l=s;try{if(v=V.stateNode,y)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{b=V.stateNode;var oe=V.memoizedProps.style,J=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;b.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(ye){st(V,V.return,ye)}}}else if(s.tag===6){if(l===null){V=s;try{V.stateNode.nodeValue=y?"":V.memoizedProps}catch(ye){st(V,V.return,ye)}}}else if(s.tag===18){if(l===null){V=s;try{var X=V.stateNode;y?jy(X,!0):jy(V.stateNode,!1)}catch(ye){st(V,V.return,ye)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=o.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,lc(o,l))));break;case 19:xn(s,o),Cn(o),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,lc(o,c)));break;case 30:break;case 21:break;default:xn(s,o),Cn(o)}}function Cn(o){var s=o.flags;if(s&2){try{for(var l,c=o.return;c!==null;){if(ty(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=sh(o);ac(o,v,y);break;case 5:var S=l.stateNode;l.flags&32&&(An(S,""),l.flags&=-33);var b=sh(o);ac(o,b,S);break;case 3:case 4:var V=l.stateNode.containerInfo,Y=sh(o);rh(o,Y,V);break;default:throw Error(i(161))}}catch(ee){st(o,o.return,ee)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function cy(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;cy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function ho(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)oy(o,s.alternate,s),s=s.sibling}function $s(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:Yo(4,s,s.return),$s(s);break;case 1:Hi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&j0(s,s.return,l),$s(s);break;case 27:vl(s.stateNode);case 26:case 5:Hi(s,s.return),$s(s);break;case 22:s.memoizedState===null&&$s(s);break;case 30:$s(s);break;default:$s(s)}o=o.sibling}}function po(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=o,v=s,S=v.flags;switch(v.tag){case 0:case 11:case 15:po(y,v,l),ul(4,v);break;case 1:if(po(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){st(c,c.return,Y)}if(c=v,y=c.updateQueue,y!==null){var b=c.stateNode;try{var V=y.shared.hiddenCallbacks;if(V!==null)for(y.shared.hiddenCallbacks=null,y=0;y<V.length;y++)Fg(V[y],b)}catch(Y){st(c,c.return,Y)}}l&&S&64&&Z0(v),cl(v,v.return);break;case 27:ny(v);case 26:case 5:po(y,v,l),l&&c===null&&S&4&&ey(v),cl(v,v.return);break;case 12:po(y,v,l);break;case 31:po(y,v,l),l&&S&4&&ay(y,v);break;case 13:po(y,v,l),l&&S&4&&ly(y,v);break;case 22:v.memoizedState===null&&po(y,v,l),cl(v,v.return);break;case 30:break;default:po(y,v,l)}s=s.sibling}}function lh(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&Xa(l))}function uh(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&Xa(o))}function mi(o,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)fy(o,s,l,c),s=s.sibling}function fy(o,s,l,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:mi(o,s,l,c),y&2048&&ul(9,s);break;case 1:mi(o,s,l,c);break;case 3:mi(o,s,l,c),y&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&Xa(o)));break;case 12:if(y&2048){mi(o,s,l,c),o=s.stateNode;try{var v=s.memoizedProps,S=v.id,b=v.onPostCommit;typeof b=="function"&&b(S,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(V){st(s,s.return,V)}}else mi(o,s,l,c);break;case 31:mi(o,s,l,c);break;case 13:mi(o,s,l,c);break;case 23:break;case 22:v=s.stateNode,S=s.alternate,s.memoizedState!==null?v._visibility&2?mi(o,s,l,c):fl(o,s):v._visibility&2?mi(o,s,l,c):(v._visibility|=2,Or(o,s,l,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&lh(S,s);break;case 24:mi(o,s,l,c),y&2048&&uh(s.alternate,s);break;default:mi(o,s,l,c)}}function Or(o,s,l,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=o,S=s,b=l,V=c,Y=S.flags;switch(S.tag){case 0:case 11:case 15:Or(v,S,b,V,y),ul(8,S);break;case 23:break;case 22:var ee=S.stateNode;S.memoizedState!==null?ee._visibility&2?Or(v,S,b,V,y):fl(v,S):(ee._visibility|=2,Or(v,S,b,V,y)),y&&Y&2048&&lh(S.alternate,S);break;case 24:Or(v,S,b,V,y),y&&Y&2048&&uh(S.alternate,S);break;default:Or(v,S,b,V,y)}s=s.sibling}}function fl(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,c=s,y=c.flags;switch(c.tag){case 22:fl(l,c),y&2048&&lh(c.alternate,c);break;case 24:fl(l,c),y&2048&&uh(c.alternate,c);break;default:fl(l,c)}s=s.sibling}}var dl=8192;function Br(o,s,l){if(o.subtreeFlags&dl)for(o=o.child;o!==null;)dy(o,s,l),o=o.sibling}function dy(o,s,l){switch(o.tag){case 26:Br(o,s,l),o.flags&dl&&o.memoizedState!==null&&x1(l,pi,o.memoizedState,o.memoizedProps);break;case 5:Br(o,s,l);break;case 3:case 4:var c=pi;pi=Ac(o.stateNode.containerInfo),Br(o,s,l),pi=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=dl,dl=16777216,Br(o,s,l),dl=c):Br(o,s,l));break;default:Br(o,s,l)}}function hy(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function hl(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Qt=c,my(c,o)}hy(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)py(o),o=o.sibling}function py(o){switch(o.tag){case 0:case 11:case 15:hl(o),o.flags&2048&&Yo(9,o,o.return);break;case 3:hl(o);break;case 12:hl(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,uc(o)):hl(o);break;default:hl(o)}}function uc(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Qt=c,my(c,o)}hy(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:Yo(8,s,s.return),uc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,uc(s));break;default:uc(s)}o=o.sibling}}function my(o,s){for(;Qt!==null;){var l=Qt;switch(l.tag){case 0:case 11:case 15:Yo(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Xa(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Qt=c;else e:for(l=o;Qt!==null;){c=Qt;var y=c.sibling,v=c.return;if(sy(c),c===l){Qt=null;break e}if(y!==null){y.return=v,Qt=y;break e}Qt=v}}}var BC={getCacheForType:function(o){var s=tn(kt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l},cacheSignal:function(){return tn(kt).controller.signal}},qC=typeof WeakMap=="function"?WeakMap:Map,tt=0,dt=null,qe=null,He=0,ot=0,Un=null,Jo=!1,qr=!1,ch=!1,mo=0,At=0,$o=0,Ks=0,fh=0,Ln=0,Fr=0,pl=null,bn=null,dh=!1,cc=0,gy=0,fc=1/0,dc=null,Ko=null,Yt=0,Qo=null,Gr=null,go=0,hh=0,ph=null,yy=null,ml=0,mh=null;function kn(){return(tt&2)!==0&&He!==0?He&-He:W.T!==null?Eh():hu()}function _y(){if(Ln===0)if((He&536870912)===0||$e){var o=Es;Es<<=1,(Es&3932160)===0&&(Es=262144),Ln=o}else Ln=536870912;return o=Pn.current,o!==null&&(o.flags|=32),Ln}function Rn(o,s,l){(o===dt&&(ot===2||ot===9)||o.cancelPendingCommit!==null)&&(Hr(o,0),Xo(o,He,Ln,!1)),As(o,l),((tt&2)===0||o!==dt)&&(o===dt&&((tt&2)===0&&(Ks|=l),At===4&&Xo(o,He,Ln,!1)),zi(o))}function vy(o,s,l){if((tt&6)!==0)throw Error(i(327));var c=!l&&(s&127)===0&&(s&o.expiredLanes)===0||si(o,s),y=c?HC(o,s):yh(o,s,!0),v=c;do{if(y===0){qr&&!c&&Xo(o,s,0,!1);break}else{if(l=o.current.alternate,v&&!FC(l)){y=yh(o,s,!1),v=!1;continue}if(y===2){if(v=s,o.errorRecoveryDisabledLanes&v)var S=0;else S=o.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var b=o;y=pl;var V=b.current.memoizedState.isDehydrated;if(V&&(Hr(b,S).flags|=256),S=yh(b,S,!1),S!==2){if(ch&&!V){b.errorRecoveryDisabledLanes|=v,Ks|=v,y=4;break e}v=bn,bn=y,v!==null&&(bn===null?bn=v:bn.push.apply(bn,v))}y=S}if(v=!1,y!==2)continue}}if(y===1){Hr(o,0),Xo(o,s,0,!0);break}e:{switch(c=o,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Xo(c,s,Ln,!Jo);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=cc+300-hn(),10<y)){if(Xo(c,s,Ln,!Jo),bi(c,0,!0)!==0)break e;go=s,c.timeoutHandle=Xy(Ty.bind(null,c,l,bn,dc,dh,s,Ln,Ks,Fr,Jo,v,"Throttled",-0,0),y);break e}Ty(c,l,bn,dc,dh,s,Ln,Ks,Fr,Jo,v,null,-0,0)}}break}while(!0);zi(o)}function Ty(o,s,l,c,y,v,S,b,V,Y,ee,oe,J,X){if(o.timeoutHandle=-1,oe=s.subtreeFlags,oe&8192||(oe&16785408)===16785408){oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},dy(s,v,oe);var ye=(v&62914560)===v?cc-hn():(v&4194048)===v?gy-hn():0;if(ye=C1(oe,ye),ye!==null){go=v,o.cancelPendingCommit=ye(Iy.bind(null,o,s,v,l,c,y,S,b,V,ee,oe,null,J,X)),Xo(o,v,S,!Y);return}}Iy(o,s,v,l,c,y,S,b,V)}function FC(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!Dn(v(),y))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Xo(o,s,l,c){s&=~fh,s&=~Ks,o.suspendedLanes|=s,o.pingedLanes&=~s,c&&(o.warmLanes|=s),c=o.expirationTimes;for(var y=s;0<y;){var v=31-It(y),S=1<<v;c[v]=-1,y&=~S}l!==0&&Ss(o,l,s)}function hc(){return(tt&6)===0?(gl(0),!1):!0}function gh(){if(qe!==null){if(ot===0)var o=qe.return;else o=qe,oo=Bs=null,Md(o),Pr=null,Za=0,o=qe;for(;o!==null;)W0(o.alternate,o),o=o.return;qe=null}}function Hr(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,a1(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),go=0,gh(),dt=o,qe=l=no(o.current,null),He=s,ot=0,Un=null,Jo=!1,qr=si(o,s),ch=!1,Fr=Ln=fh=Ks=$o=At=0,bn=pl=null,dh=!1,(s&8)!==0&&(s|=s&32);var c=o.entangledLanes;if(c!==0)for(o=o.entanglements,c&=s;0<c;){var y=31-It(c),v=1<<y;s|=o[y],c&=~v}return mo=s,Vu(),l}function Ey(o,s){Ve=null,W.H=rl,s===Mr||s===Gu?(s=kg(),ot=3):s===Td?(s=kg(),ot=4):ot=s===Kd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Un=s,qe===null&&(At=1,nc(o,Yn(s,o.current)))}function Ay(){var o=Pn.current;return o===null?!0:(He&4194048)===He?Qn===null:(He&62914560)===He||(He&536870912)!==0?o===Qn:!1}function Sy(){var o=W.H;return W.H=rl,o===null?rl:o}function xy(){var o=W.A;return W.A=BC,o}function pc(){At=4,Jo||(He&4194048)!==He&&Pn.current!==null||(qr=!0),($o&134217727)===0&&(Ks&134217727)===0||dt===null||Xo(dt,He,Ln,!1)}function yh(o,s,l){var c=tt;tt|=2;var y=Sy(),v=xy();(dt!==o||He!==s)&&(dc=null,Hr(o,s)),s=!1;var S=At;e:do try{if(ot!==0&&qe!==null){var b=qe,V=Un;switch(ot){case 8:gh(),S=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(s=!0);var Y=ot;if(ot=0,Un=null,zr(o,b,V,Y),l&&qr){S=0;break e}break;default:Y=ot,ot=0,Un=null,zr(o,b,V,Y)}}GC(),S=At;break}catch(ee){Ey(o,ee)}while(!0);return s&&o.shellSuspendCounter++,oo=Bs=null,tt=c,W.H=y,W.A=v,qe===null&&(dt=null,He=0,Vu()),S}function GC(){for(;qe!==null;)Cy(qe)}function HC(o,s){var l=tt;tt|=2;var c=Sy(),y=xy();dt!==o||He!==s?(dc=null,fc=hn()+500,Hr(o,s)):qr=si(o,s);e:do try{if(ot!==0&&qe!==null){s=qe;var v=Un;t:switch(ot){case 1:ot=0,Un=null,zr(o,s,v,1);break;case 2:case 9:if(Ug(v)){ot=0,Un=null,by(s);break}s=function(){ot!==2&&ot!==9||dt!==o||(ot=7),zi(o)},v.then(s,s);break e;case 3:ot=7;break e;case 4:ot=5;break e;case 7:Ug(v)?(ot=0,Un=null,by(s)):(ot=0,Un=null,zr(o,s,v,7));break;case 5:var S=null;switch(qe.tag){case 26:S=qe.memoizedState;case 5:case 27:var b=qe;if(S?f_(S):b.stateNode.complete){ot=0,Un=null;var V=b.sibling;if(V!==null)qe=V;else{var Y=b.return;Y!==null?(qe=Y,mc(Y)):qe=null}break t}}ot=0,Un=null,zr(o,s,v,5);break;case 6:ot=0,Un=null,zr(o,s,v,6);break;case 8:gh(),At=6;break e;default:throw Error(i(462))}}zC();break}catch(ee){Ey(o,ee)}while(!0);return oo=Bs=null,W.H=c,W.A=y,tt=l,qe!==null?0:(dt=null,He=0,Vu(),At)}function zC(){for(;qe!==null&&!$f();)Cy(qe)}function Cy(o){var s=Q0(o.alternate,o,mo);o.memoizedProps=o.pendingProps,s===null?mc(o):qe=s}function by(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=H0(l,s,s.pendingProps,s.type,void 0,He);break;case 11:s=H0(l,s,s.pendingProps,s.type.render,s.ref,He);break;case 5:Md(s);default:W0(l,s),s=qe=xg(s,mo),s=Q0(l,s,mo)}o.memoizedProps=o.pendingProps,s===null?mc(o):qe=s}function zr(o,s,l,c){oo=Bs=null,Md(s),Pr=null,Za=0;var y=s.return;try{if(MC(o,y,s,l,He)){At=1,nc(o,Yn(l,o.current)),qe=null;return}}catch(v){if(y!==null)throw qe=y,v;At=1,nc(o,Yn(l,o.current)),qe=null;return}s.flags&32768?($e||c===1?o=!0:qr||(He&536870912)!==0?o=!1:(Jo=o=!0,(c===2||c===9||c===3||c===6)&&(c=Pn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ry(s,o)):mc(s)}function mc(o){var s=o;do{if((s.flags&32768)!==0){Ry(s,Jo);return}o=s.return;var l=UC(s.alternate,s,mo);if(l!==null){qe=l;return}if(s=s.sibling,s!==null){qe=s;return}qe=s=o}while(s!==null);At===0&&(At=5)}function Ry(o,s){do{var l=LC(o.alternate,o);if(l!==null){l.flags&=32767,qe=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){qe=o;return}qe=o=l}while(o!==null);At=6,qe=null}function Iy(o,s,l,c,y,v,S,b,V){o.cancelPendingCommit=null;do gc();while(Yt!==0);if((tt&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(v=s.lanes|s.childLanes,v|=sd,Xf(o,l,v,S,b,V),o===dt&&(qe=dt=null,He=0),Gr=s,Qo=o,go=l,hh=v,ph=y,yy=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,KC(bo,function(){return Py(),null})):(o.callbackNode=null,o.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,y=ae.p,ae.p=2,S=tt,tt|=4;try{kC(o,s,l)}finally{tt=S,ae.p=y,W.T=c}}Yt=1,wy(),Ny(),Dy()}}function wy(){if(Yt===1){Yt=0;var o=Qo,s=Gr,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=W.T,W.T=null;var c=ae.p;ae.p=2;var y=tt;tt|=4;try{uy(s,o);var v=wh,S=mg(o.containerInfo),b=v.focusedElem,V=v.selectionRange;if(S!==b&&b&&b.ownerDocument&&pg(b.ownerDocument.documentElement,b)){if(V!==null&&ed(b)){var Y=V.start,ee=V.end;if(ee===void 0&&(ee=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(ee,b.value.length);else{var oe=b.ownerDocument||document,J=oe&&oe.defaultView||window;if(J.getSelection){var X=J.getSelection(),ye=b.textContent.length,Ae=Math.min(V.start,ye),ut=V.end===void 0?Ae:Math.min(V.end,ye);!X.extend&&Ae>ut&&(S=ut,ut=Ae,Ae=S);var F=hg(b,Ae),O=hg(b,ut);if(F&&O&&(X.rangeCount!==1||X.anchorNode!==F.node||X.anchorOffset!==F.offset||X.focusNode!==O.node||X.focusOffset!==O.offset)){var z=oe.createRange();z.setStart(F.node,F.offset),X.removeAllRanges(),Ae>ut?(X.addRange(z),X.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),X.addRange(z))}}}}for(oe=[],X=b;X=X.parentNode;)X.nodeType===1&&oe.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<oe.length;b++){var ne=oe[b];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Ic=!!Ih,wh=Ih=null}finally{tt=y,ae.p=c,W.T=l}}o.current=s,Yt=2}}function Ny(){if(Yt===2){Yt=0;var o=Qo,s=Gr,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=W.T,W.T=null;var c=ae.p;ae.p=2;var y=tt;tt|=4;try{oy(o,s.alternate,s)}finally{tt=y,ae.p=c,W.T=l}}Yt=3}}function Dy(){if(Yt===4||Yt===3){Yt=0,ru();var o=Qo,s=Gr,l=go,c=yy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Yt=5:(Yt=0,Gr=Qo=null,My(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(Ko=null),Zi(l),s=s.stateNode,Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(oi,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=W.T,y=ae.p,ae.p=2,W.T=null;try{for(var v=o.onRecoverableError,S=0;S<c.length;S++){var b=c[S];v(b.value,{componentStack:b.stack})}}finally{W.T=s,ae.p=y}}(go&3)!==0&&gc(),zi(o),y=o.pendingLanes,(l&261930)!==0&&(y&42)!==0?o===mh?ml++:(ml=0,mh=o):ml=0,gl(0)}}function My(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,Xa(s)))}function gc(){return wy(),Ny(),Dy(),Py()}function Py(){if(Yt!==5)return!1;var o=Qo,s=hh;hh=0;var l=Zi(go),c=W.T,y=ae.p;try{ae.p=32>l?32:l,W.T=null,l=ph,ph=null;var v=Qo,S=go;if(Yt=0,Gr=Qo=null,go=0,(tt&6)!==0)throw Error(i(331));var b=tt;if(tt|=4,py(v.current),fy(v,v.current,S,l),tt=b,gl(0,!1),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(oi,v)}catch{}return!0}finally{ae.p=y,W.T=c,My(o,s)}}function Vy(o,s,l){s=Yn(l,s),s=$d(o.stateNode,s,2),o=Go(o,s,2),o!==null&&(As(o,2),zi(o))}function st(o,s,l){if(o.tag===3)Vy(o,o,l);else for(;s!==null;){if(s.tag===3){Vy(s,o,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ko===null||!Ko.has(c))){o=Yn(l,o),l=U0(2),c=Go(s,l,2),c!==null&&(L0(l,c,s,o),As(c,2),zi(c));break}}s=s.return}}function _h(o,s,l){var c=o.pingCache;if(c===null){c=o.pingCache=new qC;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(l)||(ch=!0,y.add(l),o=YC.bind(null,o,s,l),s.then(o,o))}function YC(o,s,l){var c=o.pingCache;c!==null&&c.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,dt===o&&(He&l)===l&&(At===4||At===3&&(He&62914560)===He&&300>hn()-cc?(tt&2)===0&&Hr(o,0):fh|=l,Fr===He&&(Fr=0)),zi(o)}function Uy(o,s){s===0&&(s=du()),o=Ls(o,s),o!==null&&(As(o,s),zi(o))}function JC(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),Uy(o,l)}function $C(o,s){var l=0;switch(o.tag){case 31:case 13:var c=o.stateNode,y=o.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=o.stateNode;break;case 22:c=o.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),Uy(o,l)}function KC(o,s){return Rt(o,s)}var yc=null,Yr=null,vh=!1,_c=!1,Th=!1,Wo=0;function zi(o){o!==Yr&&o.next===null&&(Yr===null?yc=Yr=o:Yr=Yr.next=o),_c=!0,vh||(vh=!0,XC())}function gl(o,s){if(!Th&&_c){Th=!0;do for(var l=!1,c=yc;c!==null;){if(o!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var S=c.suspendedLanes,b=c.pingedLanes;v=(1<<31-It(42|o)+1)-1,v&=y&~(S&~b),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,By(c,v))}else v=He,v=bi(c,c===dt?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||si(c,v)||(l=!0,By(c,v));c=c.next}while(l);Th=!1}}function QC(){Ly()}function Ly(){_c=vh=!1;var o=0;Wo!==0&&r1()&&(o=Wo);for(var s=hn(),l=null,c=yc;c!==null;){var y=c.next,v=ky(c,s);v===0?(c.next=null,l===null?yc=y:l.next=y,y===null&&(Yr=l)):(l=c,(o!==0||(v&3)!==0)&&(_c=!0)),c=y}Yt!==0&&Yt!==5||gl(o),Wo!==0&&(Wo=0)}function ky(o,s){for(var l=o.suspendedLanes,c=o.pingedLanes,y=o.expirationTimes,v=o.pendingLanes&-62914561;0<v;){var S=31-It(v),b=1<<S,V=y[S];V===-1?((b&l)===0||(b&c)!==0)&&(y[S]=Qf(b,s)):V<=s&&(o.expiredLanes|=b),v&=~b}if(s=dt,l=He,l=bi(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),c=o.callbackNode,l===0||o===s&&(ot===2||ot===9)||o.cancelPendingCommit!==null)return c!==null&&c!==null&&ii(c),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||si(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(c!==null&&ii(c),Zi(l)){case 2:case 8:l=ba;break;case 32:l=bo;break;case 268435456:l=au;break;default:l=bo}return c=Oy.bind(null,o),l=Rt(l,c),o.callbackPriority=s,o.callbackNode=l,s}return c!==null&&c!==null&&ii(c),o.callbackPriority=2,o.callbackNode=null,2}function Oy(o,s){if(Yt!==0&&Yt!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(gc()&&o.callbackNode!==l)return null;var c=He;return c=bi(o,o===dt?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),c===0?null:(vy(o,c,s),ky(o,hn()),o.callbackNode!=null&&o.callbackNode===l?Oy.bind(null,o):null)}function By(o,s){if(gc())return null;vy(o,s,!0)}function XC(){l1(function(){(tt&6)!==0?Rt(Ca,QC):Ly()})}function Eh(){if(Wo===0){var o=Nr;o===0&&(o=xi,xi<<=1,(xi&261888)===0&&(xi=256)),Wo=o}return Wo}function qy(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:mr(""+o)}function Fy(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function WC(o,s,l,c,y){if(s==="submit"&&l&&l.stateNode===y){var v=qy((y[$t]||null).action),S=c.submitter;S&&(s=(s=S[$t]||null)?qy(s.formAction):S.getAttribute("formAction"),s!==null&&(v=s,S=null));var b=new ki("action","action",null,c,y);o.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Wo!==0){var V=S?Fy(y,S):new FormData(y);Fd(l,{pending:!0,data:V,method:y.method,action:v},null,V)}}else typeof v=="function"&&(b.preventDefault(),V=S?Fy(y,S):new FormData(y),Fd(l,{pending:!0,data:V,method:y.method,action:v},v,V))},currentTarget:y}]})}}for(var Ah=0;Ah<od.length;Ah++){var Sh=od[Ah],ZC=Sh.toLowerCase(),jC=Sh[0].toUpperCase()+Sh.slice(1);hi(ZC,"on"+jC)}hi(_g,"onAnimationEnd"),hi(vg,"onAnimationIteration"),hi(Tg,"onAnimationStart"),hi("dblclick","onDoubleClick"),hi("focusin","onFocus"),hi("focusout","onBlur"),hi(mC,"onTransitionRun"),hi(gC,"onTransitionStart"),hi(yC,"onTransitionCancel"),hi(Eg,"onTransitionEnd"),Pi("onMouseEnter",["mouseout","mouseover"]),Pi("onMouseLeave",["mouseout","mouseover"]),Pi("onPointerEnter",["pointerout","pointerover"]),Pi("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yl));function Gy(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var c=o[l],y=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var S=c.length-1;0<=S;S--){var b=c[S],V=b.instance,Y=b.currentTarget;if(b=b.listener,V!==v&&y.isPropagationStopped())break e;v=b,y.currentTarget=Y;try{v(y)}catch(ee){Pu(ee)}y.currentTarget=null,v=V}else for(S=0;S<c.length;S++){if(b=c[S],V=b.instance,Y=b.currentTarget,b=b.listener,V!==v&&y.isPropagationStopped())break e;v=b,y.currentTarget=Y;try{v(y)}catch(ee){Pu(ee)}y.currentTarget=null,v=V}}}}function Fe(o,s){var l=s[cr];l===void 0&&(l=s[cr]=new Set);var c=o+"__bubble";l.has(c)||(Hy(s,o,2,!1),l.add(c))}function xh(o,s,l){var c=0;s&&(c|=4),Hy(l,o,c,s)}var vc="_reactListening"+Math.random().toString(36).slice(2);function Ch(o){if(!o[vc]){o[vc]=!0,wa.forEach(function(l){l!=="selectionchange"&&(e1.has(l)||xh(l,!1,o),xh(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[vc]||(s[vc]=!0,xh("selectionchange",!1,s))}}function Hy(o,s,l,c){switch(__(s)){case 2:var y=I1;break;case 8:y=w1;break;default:y=qh}l=y.bind(null,s,l,o),y=void 0,!Is||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?o.addEventListener(s,l,{capture:!0,passive:y}):o.addEventListener(s,l,!0):y!==void 0?o.addEventListener(s,l,{passive:y}):o.addEventListener(s,l,!1)}function bh(o,s,l,c,y){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var b=c.stateNode.containerInfo;if(b===y)break;if(S===4)for(S=c.return;S!==null;){var V=S.tag;if((V===3||V===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;b!==null;){if(S=Ni(b),S===null)return;if(V=S.tag,V===5||V===6||V===26||V===27){c=v=S;continue e}b=b.parentNode}}c=c.return}Mo(function(){var Y=v,ee=Fn(l),oe=[];e:{var J=Ag.get(o);if(J!==void 0){var X=ki,ye=o;switch(o){case"keypress":if(Ns(l)===0)break e;case"keydown":case"keyup":X=Nu;break;case"focusin":ye="focus",X=Ms;break;case"focusout":ye="blur",X=Ms;break;case"beforeblur":case"afterblur":X=Ms;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=Ga;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=E;break;case _g:case vg:case Tg:X=Su;break;case Eg:X=R;break;case"scroll":case"scrollend":X=Fa;break;case"wheel":X=Q;break;case"copy":case"cut":case"paste":X=xu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=to;break;case"toggle":case"beforetoggle":X=Pe}var Ae=(s&4)!==0,ut=!Ae&&(o==="scroll"||o==="scrollend"),F=Ae?J!==null?J+"Capture":null:J;Ae=[];for(var O=Y,z;O!==null;){var ne=O;if(z=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||z===null||F===null||(ne=ui(O,F),ne!=null&&Ae.push(_l(O,ne,z))),ut)break;O=O.return}0<Ae.length&&(J=new X(J,ye,null,l,ee),oe.push({event:J,listeners:Ae}))}}if((s&7)===0){e:{if(J=o==="mouseover"||o==="pointerover",X=o==="mouseout"||o==="pointerout",J&&l!==Oa&&(ye=l.relatedTarget||l.fromElement)&&(Ni(ye)||ye[Ii]))break e;if((X||J)&&(J=ee.window===ee?ee:(J=ee.ownerDocument)?J.defaultView||J.parentWindow:window,X?(ye=l.relatedTarget||l.toElement,X=Y,ye=ye?Ni(ye):null,ye!==null&&(ut=a(ye),Ae=ye.tag,ye!==ut||Ae!==5&&Ae!==27&&Ae!==6)&&(ye=null)):(X=null,ye=Y),X!==ye)){if(Ae=Ga,ne="onMouseLeave",F="onMouseEnter",O="mouse",(o==="pointerout"||o==="pointerover")&&(Ae=to,ne="onPointerLeave",F="onPointerEnter",O="pointer"),ut=X==null?J:wn(X),z=ye==null?J:wn(ye),J=new Ae(ne,O+"leave",X,l,ee),J.target=ut,J.relatedTarget=z,ne=null,Ni(ee)===Y&&(Ae=new Ae(F,O+"enter",ye,l,ee),Ae.target=z,Ae.relatedTarget=ut,ne=Ae),ut=ne,X&&ye)t:{for(Ae=t1,F=X,O=ye,z=0,ne=F;ne;ne=Ae(ne))z++;ne=0;for(var Te=O;Te;Te=Ae(Te))ne++;for(;0<z-ne;)F=Ae(F),z--;for(;0<ne-z;)O=Ae(O),ne--;for(;z--;){if(F===O||O!==null&&F===O.alternate){Ae=F;break t}F=Ae(F),O=Ae(O)}Ae=null}else Ae=null;X!==null&&zy(oe,J,X,Ae,!1),ye!==null&&ut!==null&&zy(oe,ut,ye,Ae,!0)}}e:{if(J=Y?wn(Y):window,X=J.nodeName&&J.nodeName.toLowerCase(),X==="select"||X==="input"&&J.type==="file")var We=ag;else if(sg(J))if(lg)We=dC;else{We=cC;var _e=uC}else X=J.nodeName,!X||X.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&pr(Y.elementType)&&(We=ag):We=fC;if(We&&(We=We(o,Y))){rg(oe,We,l,ee);break e}_e&&_e(o,J,Y),o==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&Ua(J,"number",J.value)}switch(_e=Y?wn(Y):window,o){case"focusin":(sg(_e)||_e.contentEditable==="true")&&(Ar=_e,td=Y,$a=null);break;case"focusout":$a=td=Ar=null;break;case"mousedown":nd=!0;break;case"contextmenu":case"mouseup":case"dragend":nd=!1,gg(oe,l,ee);break;case"selectionchange":if(pC)break;case"keydown":case"keyup":gg(oe,l,ee)}var Le;if(et)e:{switch(o){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Er?Ps(o,l)&&(ze="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(ze="onCompositionStart");ze&&(qi&&l.locale!=="ko"&&(Er||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Er&&(Le=qa()):(Li=ee,Ba="value"in Li?Li.value:Li.textContent,Er=!0)),_e=Tc(Y,ze),0<_e.length&&(ze=new Bi(ze,o,null,l,ee),oe.push({event:ze,listeners:_e}),Le?ze.data=Le:(Le=Tr(l),Le!==null&&(ze.data=Le)))),(Le=Hn?sC(o,l):rC(o,l))&&(ze=Tc(Y,"onBeforeInput"),0<ze.length&&(_e=new Bi("onBeforeInput","beforeinput",null,l,ee),oe.push({event:_e,listeners:ze}),_e.data=Le)),WC(oe,o,Y,l,ee)}Gy(oe,s)})}function _l(o,s,l){return{instance:o,listener:s,currentTarget:l}}function Tc(o,s){for(var l=s+"Capture",c=[];o!==null;){var y=o,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=ui(o,l),y!=null&&c.unshift(_l(o,y,v)),y=ui(o,s),y!=null&&c.push(_l(o,y,v))),o.tag===3)return c;o=o.return}return[]}function t1(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function zy(o,s,l,c,y){for(var v=s._reactName,S=[];l!==null&&l!==c;){var b=l,V=b.alternate,Y=b.stateNode;if(b=b.tag,V!==null&&V===c)break;b!==5&&b!==26&&b!==27||Y===null||(V=Y,y?(Y=ui(l,v),Y!=null&&S.unshift(_l(l,Y,V))):y||(Y=ui(l,v),Y!=null&&S.push(_l(l,Y,V)))),l=l.return}S.length!==0&&o.push({event:s,listeners:S})}var n1=/\r\n?/g,i1=/\u0000|\uFFFD/g;function Yy(o){return(typeof o=="string"?o:""+o).replace(n1,`
`).replace(i1,"")}function Jy(o,s){return s=Yy(s),Yy(o)===s}function lt(o,s,l,c,y,v){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||An(o,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&An(o,""+c);break;case"className":Nn(o,"class",c);break;case"tabIndex":Nn(o,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(o,l,c);break;case"style":ka(o,c,v);break;case"data":if(s!=="object"){Nn(o,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){o.removeAttribute(l);break}c=mr(""+c),o.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(s!=="input"&&lt(o,s,"name",y.name,y,null),lt(o,s,"formEncType",y.formEncType,y,null),lt(o,s,"formMethod",y.formMethod,y,null),lt(o,s,"formTarget",y.formTarget,y,null)):(lt(o,s,"encType",y.encType,y,null),lt(o,s,"method",y.method,y,null),lt(o,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){o.removeAttribute(l);break}c=mr(""+c),o.setAttribute(l,c);break;case"onClick":c!=null&&(o.onclick=li);break;case"onScroll":c!=null&&Fe("scroll",o);break;case"onScrollEnd":c!=null&&Fe("scrollend",o);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"multiple":o.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":o.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){o.removeAttribute("xlink:href");break}l=mr(""+c),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,""+c):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":c===!0?o.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,c):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?o.setAttribute(l,c):o.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?o.removeAttribute(l):o.setAttribute(l,c);break;case"popover":Fe("beforetoggle",o),Fe("toggle",o),dr(o,"popover",c);break;case"xlinkActuate":Lt(o,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Lt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Lt(o,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Lt(o,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Lt(o,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Lt(o,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Lt(o,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Lt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Lt(o,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":dr(o,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Tu.get(l)||l,dr(o,l,c))}}function Rh(o,s,l,c,y,v){switch(l){case"style":ka(o,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"children":typeof c=="string"?An(o,c):(typeof c=="number"||typeof c=="bigint")&&An(o,""+c);break;case"onScroll":c!=null&&Fe("scroll",o);break;case"onScrollEnd":c!=null&&Fe("scrollend",o);break;case"onClick":c!=null&&(o.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Na.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),s=l.slice(2,y?l.length-7:void 0),v=o[$t]||null,v=v!=null?v[l]:null,typeof v=="function"&&o.removeEventListener(s,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,c,y);break e}l in o?o[l]=c:c===!0?o.setAttribute(l,""):dr(o,l,c)}}}function on(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",o),Fe("load",o);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var S=l[v];if(S!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:lt(o,s,v,S,l,null)}}y&&lt(o,s,"srcSet",l.srcSet,l,null),c&&lt(o,s,"src",l.src,l,null);return;case"input":Fe("invalid",o);var b=v=S=y=null,V=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var ee=l[c];if(ee!=null)switch(c){case"name":y=ee;break;case"type":S=ee;break;case"checked":V=ee;break;case"defaultChecked":Y=ee;break;case"value":v=ee;break;case"defaultValue":b=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:lt(o,s,c,ee,l,null)}}yu(o,v,b,V,Y,S,y,!1);return;case"select":Fe("invalid",o),c=S=v=null;for(y in l)if(l.hasOwnProperty(y)&&(b=l[y],b!=null))switch(y){case"value":v=b;break;case"defaultValue":S=b;break;case"multiple":c=b;default:lt(o,s,y,b,l,null)}s=v,l=S,o.multiple=!!c,s!=null?Io(o,!!c,s,!1):l!=null&&Io(o,!!c,l,!0);return;case"textarea":Fe("invalid",o),v=y=c=null;for(S in l)if(l.hasOwnProperty(S)&&(b=l[S],b!=null))switch(S){case"value":c=b;break;case"defaultValue":y=b;break;case"children":v=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:lt(o,s,S,b,l,null)}wo(o,c,y,v);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(c=l[V],c!=null))switch(V){case"selected":o.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:lt(o,s,V,c,l,null)}return;case"dialog":Fe("beforetoggle",o),Fe("toggle",o),Fe("cancel",o),Fe("close",o);break;case"iframe":case"object":Fe("load",o);break;case"video":case"audio":for(c=0;c<yl.length;c++)Fe(yl[c],o);break;case"image":Fe("error",o),Fe("load",o);break;case"details":Fe("toggle",o);break;case"embed":case"source":case"link":Fe("error",o),Fe("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:lt(o,s,Y,c,l,null)}return;default:if(pr(s)){for(ee in l)l.hasOwnProperty(ee)&&(c=l[ee],c!==void 0&&Rh(o,s,ee,c,l,void 0));return}}for(b in l)l.hasOwnProperty(b)&&(c=l[b],c!=null&&lt(o,s,b,c,l,null))}function o1(o,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,S=null,b=null,V=null,Y=null,ee=null;for(X in l){var oe=l[X];if(l.hasOwnProperty(X)&&oe!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":V=oe;default:c.hasOwnProperty(X)||lt(o,s,X,null,c,oe)}}for(var J in c){var X=c[J];if(oe=l[J],c.hasOwnProperty(J)&&(X!=null||oe!=null))switch(J){case"type":v=X;break;case"name":y=X;break;case"checked":Y=X;break;case"defaultChecked":ee=X;break;case"value":S=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==oe&&lt(o,s,J,X,c,oe)}}hr(o,S,b,V,Y,ee,v,y);return;case"select":X=S=b=J=null;for(v in l)if(V=l[v],l.hasOwnProperty(v)&&V!=null)switch(v){case"value":break;case"multiple":X=V;default:c.hasOwnProperty(v)||lt(o,s,v,null,c,V)}for(y in c)if(v=c[y],V=l[y],c.hasOwnProperty(y)&&(v!=null||V!=null))switch(y){case"value":J=v;break;case"defaultValue":b=v;break;case"multiple":S=v;default:v!==V&&lt(o,s,y,v,c,V)}s=b,l=S,c=X,J!=null?Io(o,!!l,J,!1):!!c!=!!l&&(s!=null?Io(o,!!l,s,!0):Io(o,!!l,l?[]:"",!1));return;case"textarea":X=J=null;for(b in l)if(y=l[b],l.hasOwnProperty(b)&&y!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:lt(o,s,b,null,c,y)}for(S in c)if(y=c[S],v=l[S],c.hasOwnProperty(S)&&(y!=null||v!=null))switch(S){case"value":J=y;break;case"defaultValue":X=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&lt(o,s,S,y,c,v)}_u(o,J,X);return;case"option":for(var ye in l)if(J=l[ye],l.hasOwnProperty(ye)&&J!=null&&!c.hasOwnProperty(ye))switch(ye){case"selected":o.selected=!1;break;default:lt(o,s,ye,null,c,J)}for(V in c)if(J=c[V],X=l[V],c.hasOwnProperty(V)&&J!==X&&(J!=null||X!=null))switch(V){case"selected":o.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:lt(o,s,V,J,c,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in l)J=l[Ae],l.hasOwnProperty(Ae)&&J!=null&&!c.hasOwnProperty(Ae)&&lt(o,s,Ae,null,c,J);for(Y in c)if(J=c[Y],X=l[Y],c.hasOwnProperty(Y)&&J!==X&&(J!=null||X!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:lt(o,s,Y,J,c,X)}return;default:if(pr(s)){for(var ut in l)J=l[ut],l.hasOwnProperty(ut)&&J!==void 0&&!c.hasOwnProperty(ut)&&Rh(o,s,ut,void 0,c,J);for(ee in c)J=c[ee],X=l[ee],!c.hasOwnProperty(ee)||J===X||J===void 0&&X===void 0||Rh(o,s,ee,J,c,X);return}}for(var F in l)J=l[F],l.hasOwnProperty(F)&&J!=null&&!c.hasOwnProperty(F)&&lt(o,s,F,null,c,J);for(oe in c)J=c[oe],X=l[oe],!c.hasOwnProperty(oe)||J===X||J==null&&X==null||lt(o,s,oe,J,c,X)}function $y(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function s1(){if(typeof performance.getEntriesByType=="function"){for(var o=0,s=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,S=y.initiatorType,b=y.duration;if(v&&b&&$y(S)){for(S=0,b=y.responseEnd,c+=1;c<l.length;c++){var V=l[c],Y=V.startTime;if(Y>b)break;var ee=V.transferSize,oe=V.initiatorType;ee&&$y(oe)&&(V=V.responseEnd,S+=ee*(V<b?1:(b-Y)/(V-Y)))}if(--c,s+=8*(v+S)/(y.duration/1e3),o++,10<o)break}}if(0<o)return s/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Ih=null,wh=null;function Ec(o){return o.nodeType===9?o:o.ownerDocument}function Ky(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qy(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function Nh(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Dh=null;function r1(){var o=window.event;return o&&o.type==="popstate"?o===Dh?!1:(Dh=o,!0):(Dh=null,!1)}var Xy=typeof setTimeout=="function"?setTimeout:void 0,a1=typeof clearTimeout=="function"?clearTimeout:void 0,Wy=typeof Promise=="function"?Promise:void 0,l1=typeof queueMicrotask=="function"?queueMicrotask:typeof Wy<"u"?function(o){return Wy.resolve(null).then(o).catch(u1)}:Xy;function u1(o){setTimeout(function(){throw o})}function Zo(o){return o==="head"}function Zy(o,s){var l=s,c=0;do{var y=l.nextSibling;if(o.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){o.removeChild(y),Qr(s);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")vl(o.ownerDocument.documentElement);else if(l==="head"){l=o.ownerDocument.head,vl(l);for(var v=l.firstChild;v;){var S=v.nextSibling,b=v.nodeName;v[wi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=S}}else l==="body"&&vl(o.ownerDocument.body);l=y}while(l);Qr(s)}function jy(o,s){var l=o;o=0;do{var c=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(o===0)break;o--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||o++;l=c}while(l)}function Mh(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Mh(l),fr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function c1(o,s,l,c){for(;o.nodeType===1;){var y=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(c){if(!o[wi])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(v=o.getAttribute("rel"),v==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(v!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(v=o.getAttribute("src"),(v!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===v)return o}else return o;if(o=Xn(o.nextSibling),o===null)break}return null}function f1(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Xn(o.nextSibling),o===null))return null;return o}function e_(o,s){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!s||(o=Xn(o.nextSibling),o===null))return null;return o}function Ph(o){return o.data==="$?"||o.data==="$~"}function Vh(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function d1(o,s){var l=o.ownerDocument;if(o.data==="$~")o._reactRetry=s;else if(o.data!=="$?"||l.readyState!=="loading")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),o._reactRetry=c}}function Xn(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return o}var Uh=null;function t_(o){o=o.nextSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"||l==="/&"){if(s===0)return Xn(o.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}o=o.nextSibling}return null}function n_(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return o;s--}else l!=="/$"&&l!=="/&"||s++}o=o.previousSibling}return null}function i_(o,s,l){switch(s=Ec(l),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function vl(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);fr(o)}var Wn=new Map,o_=new Set;function Ac(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var yo=ae.d;ae.d={f:h1,r:p1,D:m1,C:g1,L:y1,m:_1,X:T1,S:v1,M:E1};function h1(){var o=yo.f(),s=hc();return o||s}function p1(o){var s=qn(o);s!==null&&s.tag===5&&s.type==="form"?E0(s):yo.r(o)}var Jr=typeof document>"u"?null:document;function s_(o,s,l){var c=Jr;if(c&&typeof s=="string"&&s){var y=En(s);y='link[rel="'+o+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),o_.has(y)||(o_.add(y),o={rel:o,crossOrigin:l,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),on(s,"link",o),Ut(s),c.head.appendChild(s)))}}function m1(o){yo.D(o),s_("dns-prefetch",o,null)}function g1(o,s){yo.C(o,s),s_("preconnect",o,s)}function y1(o,s,l){yo.L(o,s,l);var c=Jr;if(c&&o&&s){var y='link[rel="preload"][as="'+En(s)+'"]';s==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+En(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+En(l.imageSizes)+'"]')):y+='[href="'+En(o)+'"]';var v=y;switch(s){case"style":v=$r(o);break;case"script":v=Kr(o)}Wn.has(v)||(o=T({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),Wn.set(v,o),c.querySelector(y)!==null||s==="style"&&c.querySelector(Tl(v))||s==="script"&&c.querySelector(El(v))||(s=c.createElement("link"),on(s,"link",o),Ut(s),c.head.appendChild(s)))}}function _1(o,s){yo.m(o,s);var l=Jr;if(l&&o){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+En(c)+'"][href="'+En(o)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Kr(o)}if(!Wn.has(v)&&(o=T({rel:"modulepreload",href:o},s),Wn.set(v,o),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(El(v)))return}c=l.createElement("link"),on(c,"link",o),Ut(c),l.head.appendChild(c)}}}function v1(o,s,l){yo.S(o,s,l);var c=Jr;if(c&&o){var y=Di(c).hoistableStyles,v=$r(o);s=s||"default";var S=y.get(v);if(!S){var b={loading:0,preload:null};if(S=c.querySelector(Tl(v)))b.loading=5;else{o=T({rel:"stylesheet",href:o,"data-precedence":s},l),(l=Wn.get(v))&&Lh(o,l);var V=S=c.createElement("link");Ut(V),on(V,"link",o),V._p=new Promise(function(Y,ee){V.onload=Y,V.onerror=ee}),V.addEventListener("load",function(){b.loading|=1}),V.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Sc(S,s,c)}S={type:"stylesheet",instance:S,count:1,state:b},y.set(v,S)}}}function T1(o,s){yo.X(o,s);var l=Jr;if(l&&o){var c=Di(l).hoistableScripts,y=Kr(o),v=c.get(y);v||(v=l.querySelector(El(y)),v||(o=T({src:o,async:!0},s),(s=Wn.get(y))&&kh(o,s),v=l.createElement("script"),Ut(v),on(v,"link",o),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function E1(o,s){yo.M(o,s);var l=Jr;if(l&&o){var c=Di(l).hoistableScripts,y=Kr(o),v=c.get(y);v||(v=l.querySelector(El(y)),v||(o=T({src:o,async:!0,type:"module"},s),(s=Wn.get(y))&&kh(o,s),v=l.createElement("script"),Ut(v),on(v,"link",o),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function r_(o,s,l,c){var y=(y=Me.current)?Ac(y):null;if(!y)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=$r(l.href),l=Di(y).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=$r(l.href);var v=Di(y).hoistableStyles,S=v.get(o);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(o,S),(v=y.querySelector(Tl(o)))&&!v._p&&(S.instance=v,S.state.loading=5),Wn.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Wn.set(o,l),v||A1(y,o,l,S.state))),s&&c===null)throw Error(i(528,""));return S}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Kr(l),l=Di(y).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function $r(o){return'href="'+En(o)+'"'}function Tl(o){return'link[rel="stylesheet"]['+o+"]"}function a_(o){return T({},o,{"data-precedence":o.precedence,precedence:null})}function A1(o,s,l,c){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=o.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),on(s,"link",l),Ut(s),o.head.appendChild(s))}function Kr(o){return'[src="'+En(o)+'"]'}function El(o){return"script[async]"+o}function l_(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=o.querySelector('style[data-href~="'+En(l.href)+'"]');if(c)return s.instance=c,Ut(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(o.ownerDocument||o).createElement("style"),Ut(c),on(c,"style",y),Sc(c,l.precedence,o),s.instance=c;case"stylesheet":y=$r(l.href);var v=o.querySelector(Tl(y));if(v)return s.state.loading|=4,s.instance=v,Ut(v),v;c=a_(l),(y=Wn.get(y))&&Lh(c,y),v=(o.ownerDocument||o).createElement("link"),Ut(v);var S=v;return S._p=new Promise(function(b,V){S.onload=b,S.onerror=V}),on(v,"link",c),s.state.loading|=4,Sc(v,l.precedence,o),s.instance=v;case"script":return v=Kr(l.src),(y=o.querySelector(El(v)))?(s.instance=y,Ut(y),y):(c=l,(y=Wn.get(v))&&(c=T({},l),kh(c,y)),o=o.ownerDocument||o,y=o.createElement("script"),Ut(y),on(y,"link",c),o.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Sc(c,l.precedence,o));return s.instance}function Sc(o,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,S=0;S<c.length;S++){var b=c[S];if(b.dataset.precedence===s)v=b;else if(v!==y)break}v?v.parentNode.insertBefore(o,v.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function Lh(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function kh(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var xc=null;function u_(o,s,l){if(xc===null){var c=new Map,y=xc=new Map;y.set(l,c)}else y=xc,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(o))return c;for(c.set(o,null),l=l.getElementsByTagName(o),y=0;y<l.length;y++){var v=l[y];if(!(v[wi]||v[Vt]||o==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(s)||"";S=o+S;var b=c.get(S);b?b.push(v):c.set(S,[v])}}return c}function c_(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function S1(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function f_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function x1(o,s,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=$r(c.href),v=s.querySelector(Tl(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=Cc.bind(o),s.then(o,o)),l.state.loading|=4,l.instance=v,Ut(v);return}v=s.ownerDocument||s,c=a_(c),(y=Wn.get(y))&&Lh(c,y),v=v.createElement("link"),Ut(v);var S=v;S._p=new Promise(function(b,V){S.onload=b,S.onerror=V}),on(v,"link",c),l.instance=v}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(o.count++,l=Cc.bind(o),s.addEventListener("load",l),s.addEventListener("error",l))}}var Oh=0;function C1(o,s){return o.stylesheets&&o.count===0&&Rc(o,o.stylesheets),0<o.count||0<o.imgCount?function(l){var c=setTimeout(function(){if(o.stylesheets&&Rc(o,o.stylesheets),o.unsuspend){var v=o.unsuspend;o.unsuspend=null,v()}},6e4+s);0<o.imgBytes&&Oh===0&&(Oh=62500*s1());var y=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Rc(o,o.stylesheets),o.unsuspend)){var v=o.unsuspend;o.unsuspend=null,v()}},(o.imgBytes>Oh?50:800)+s);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Cc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rc(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var bc=null;function Rc(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,bc=new Map,s.forEach(b1,o),bc=null,Cc.call(o))}function b1(o,s){if(!(s.state.loading&4)){var l=bc.get(o);if(l)var c=l.get(null);else{l=new Map,bc.set(o,l);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var S=y[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),c=S)}c&&l.set(null,c)}y=s.instance,S=y.getAttribute("data-precedence"),v=l.get(S)||c,v===c&&l.set(null,y),l.set(S,y),this.count++,c=Cc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),s.state.loading|=4}}var Al={$$typeof:Z,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function R1(o,s,l,c,y,v,S,b,V){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ri(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.hiddenUpdates=Ri(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function d_(o,s,l,c,y,v,S,b,V,Y,ee,oe){return o=new R1(o,s,l,S,V,Y,ee,oe,b),s=1,v===!0&&(s|=24),v=Mn(3,null,null,s),o.current=v,v.stateNode=o,s=yd(),s.refCount++,o.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:s},Ed(v),o}function h_(o){return o?(o=Cr,o):Cr}function p_(o,s,l,c,y,v){y=h_(y),c.context===null?c.context=y:c.pendingContext=y,c=Fo(s),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Go(o,c,s),l!==null&&(Rn(l,o,s),el(l,o,s))}function m_(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function Bh(o,s){m_(o,s),(o=o.alternate)&&m_(o,s)}function g_(o){if(o.tag===13||o.tag===31){var s=Ls(o,67108864);s!==null&&Rn(s,o,67108864),Bh(o,67108864)}}function y_(o){if(o.tag===13||o.tag===31){var s=kn();s=xs(s);var l=Ls(o,s);l!==null&&Rn(l,o,s),Bh(o,s)}}var Ic=!0;function I1(o,s,l,c){var y=W.T;W.T=null;var v=ae.p;try{ae.p=2,qh(o,s,l,c)}finally{ae.p=v,W.T=y}}function w1(o,s,l,c){var y=W.T;W.T=null;var v=ae.p;try{ae.p=8,qh(o,s,l,c)}finally{ae.p=v,W.T=y}}function qh(o,s,l,c){if(Ic){var y=Fh(c);if(y===null)bh(o,s,c,wc,l),v_(o,c);else if(D1(y,o,s,l,c))c.stopPropagation();else if(v_(o,c),s&4&&-1<N1.indexOf(o)){for(;y!==null;){var v=qn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Ci(v.pendingLanes);if(S!==0){var b=v;for(b.pendingLanes|=2,b.entangledLanes|=2;S;){var V=1<<31-It(S);b.entanglements[1]|=V,S&=~V}zi(v),(tt&6)===0&&(fc=hn()+500,gl(0))}}break;case 31:case 13:b=Ls(v,2),b!==null&&Rn(b,v,2),hc(),Bh(v,2)}if(v=Fh(c),v===null&&bh(o,s,c,wc,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else bh(o,s,c,null,l)}}function Fh(o){return o=Fn(o),Gh(o)}var wc=null;function Gh(o){if(wc=null,o=Ni(o),o!==null){var s=a(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=u(s),o!==null)return o;o=null}else if(l===31){if(o=d(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return wc=o,null}function __(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ts()){case Ca:return 2;case ba:return 8;case bo:case Kf:return 32;case au:return 268435456;default:return 32}default:return 32}}var Hh=!1,jo=null,es=null,ts=null,Sl=new Map,xl=new Map,ns=[],N1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function v_(o,s){switch(o){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":Sl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":xl.delete(s.pointerId)}}function Cl(o,s,l,c,y,v){return o===null||o.nativeEvent!==v?(o={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},s!==null&&(s=qn(s),s!==null&&g_(s)),o):(o.eventSystemFlags|=c,s=o.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),o)}function D1(o,s,l,c,y){switch(s){case"focusin":return jo=Cl(jo,o,s,l,c,y),!0;case"dragenter":return es=Cl(es,o,s,l,c,y),!0;case"mouseover":return ts=Cl(ts,o,s,l,c,y),!0;case"pointerover":var v=y.pointerId;return Sl.set(v,Cl(Sl.get(v)||null,o,s,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,xl.set(v,Cl(xl.get(v)||null,o,s,l,c,y)),!0}return!1}function T_(o){var s=Ni(o.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){o.blockedOn=s,ri(o.priority,function(){y_(l)});return}}else if(s===31){if(s=d(l),s!==null){o.blockedOn=s,ri(o.priority,function(){y_(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Nc(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=Fh(o.nativeEvent);if(l===null){l=o.nativeEvent;var c=new l.constructor(l.type,l);Oa=c,l.target.dispatchEvent(c),Oa=null}else return s=qn(l),s!==null&&g_(s),o.blockedOn=l,!1;s.shift()}return!0}function E_(o,s,l){Nc(o)&&l.delete(s)}function M1(){Hh=!1,jo!==null&&Nc(jo)&&(jo=null),es!==null&&Nc(es)&&(es=null),ts!==null&&Nc(ts)&&(ts=null),Sl.forEach(E_),xl.forEach(E_)}function Dc(o,s){o.blockedOn===s&&(o.blockedOn=null,Hh||(Hh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,M1)))}var Mc=null;function A_(o){Mc!==o&&(Mc=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Mc===o&&(Mc=null);for(var s=0;s<o.length;s+=3){var l=o[s],c=o[s+1],y=o[s+2];if(typeof c!="function"){if(Gh(c||l)===null)continue;break}var v=qn(l);v!==null&&(o.splice(s,3),s-=3,Fd(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Qr(o){function s(V){return Dc(V,o)}jo!==null&&Dc(jo,o),es!==null&&Dc(es,o),ts!==null&&Dc(ts,o),Sl.forEach(s),xl.forEach(s);for(var l=0;l<ns.length;l++){var c=ns[l];c.blockedOn===o&&(c.blockedOn=null)}for(;0<ns.length&&(l=ns[0],l.blockedOn===null);)T_(l),l.blockedOn===null&&ns.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],S=y[$t]||null;if(typeof v=="function")S||A_(l);else if(S){var b=null;if(v&&v.hasAttribute("formAction")){if(y=v,S=v[$t]||null)b=S.formAction;else if(Gh(y)!==null)continue}else b=S.action;typeof b=="function"?l[c+1]=b:(l.splice(c,3),c-=3),A_(l)}}}function S_(){function o(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function zh(o){this._internalRoot=o}Pc.prototype.render=zh.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=kn();p_(l,c,o,s,null,null)},Pc.prototype.unmount=zh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;p_(o.current,2,null,o,null,null),hc(),s[Ii]=null}};function Pc(o){this._internalRoot=o}Pc.prototype.unstable_scheduleHydration=function(o){if(o){var s=hu();o={blockedOn:null,target:o,priority:s};for(var l=0;l<ns.length&&s!==0&&s<ns[l].priority;l++);ns.splice(l,0,o),l===0&&T_(o)}};var x_=e.version;if(x_!=="19.2.3")throw Error(i(527,x_,"19.2.3"));ae.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=h(s),o=o!==null?_(o):null,o=o===null?null:o.stateNode,o};var P1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{oi=Vc.inject(P1),Zt=Vc}catch{}}return Rl.createRoot=function(o,s){if(!r(o))throw Error(i(299));var l=!1,c="",y=D0,v=M0,S=P0;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=d_(o,1,!1,null,null,l,c,null,y,v,S,S_),o[Ii]=s.current,Ch(o),new zh(s)},Rl.hydrateRoot=function(o,s,l){if(!r(o))throw Error(i(299));var c=!1,y="",v=D0,S=M0,b=P0,V=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(b=l.onRecoverableError),l.formState!==void 0&&(V=l.formState)),s=d_(o,1,!0,s,l??null,c,y,V,v,S,b,S_),s.context=h_(null),l=s.current,c=kn(),c=xs(c),y=Fo(c),y.callback=null,Go(l,y,c),l=c,s.current.lanes=l,As(s,l),zi(s),o[Ii]=s.current,Ch(o),new Pc(s)},Rl.version="19.2.3",Rl}var V_;function z1(){if(V_)return Jh.exports;V_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Jh.exports=H1(),Jh.exports}var Y1=z1();const J1=U1(Y1);var Qe=Xp();const U_=[{id:"1",images:["https://picsum.photos/seed/family1/800/600"],en:{title:"First Steps!",caption:"Juval was so proud helping Theo walk in the grass today."},es:{title:"Primeros Pasos!",caption:"Juval estaba tan orgulloso ayudando a Theo a caminar en el csped hoy."},date:new Date().toLocaleDateString(),author:"Dad",tags:["Family","Juval","Theo"]},{id:"2",images:["https://picsum.photos/seed/family2/800/600"],en:{title:"Snack Time",caption:"Theo discovered that blueberries are delicious, and mostly messy!"},es:{title:"Merienda",caption:"Theo descubri que los arndanos son deliciosos, y sobre todo manchan!"},date:new Date().toLocaleDateString(),author:"Mom",tags:["Daily","Theo"]}],Wh=({post:t,variant:e="small",lang:n,onDelete:i,onOpen:r})=>{const[a,u]=Qe.useState(0),[d,g]=Qe.useState(!1),[h,_]=Qe.useState(1.333),[T,A]=Qe.useState(null),[C,P]=Qe.useState(null),k=Qe.useRef(null),M=Qe.useRef(null),K=50,te=n==="es"?"Por":"By",Z=n==="es"?"Borrar Recuerdo?":"Delete Memory?",re=t[n],ce=t.media||t.images.map($=>({url:$,type:"image"})),ue=ce[a],N=(ue==null?void 0:ue.type)==="video",w=$=>{const{naturalWidth:le,naturalHeight:he}=$.currentTarget;le&&he&&_(le/he)},I=()=>{ce.length>1&&u($=>($+1)%ce.length)},L=()=>{ce.length>1&&u($=>($-1+ce.length)%ce.length)},U=$=>{$.stopPropagation(),I()},q=$=>{$.stopPropagation(),L()},D=$=>{P(null),A($.targetTouches[0].clientX)},ke=$=>{P($.targetTouches[0].clientX)},ct=()=>{if(!T||!C)return;const $=T-C,le=$>K,he=$<-K;le?I():he&&L()},W=$=>{$.preventDefault(),$.stopPropagation(),g(!d)},ae=$=>{$.preventDefault(),$.stopPropagation(),i&&(i(t.id),g(!1))},ve=()=>{r&&!d&&r(t)},Be=$=>{const le=$.toLowerCase();return le.includes("juval")?"bg-sky-400 text-white":le.includes("theo")?"bg-rose-400 text-white":le.includes("mom")||le.includes("mam")?"bg-rose-500 text-white":le.includes("dad")||le.includes("pap")?"bg-sky-600 text-white":"bg-amber-400 text-slate-900"},Ue=e==="large";return G.jsxs("div",{className:`bg-white cartoon-border rounded-[40px] overflow-hidden transition-all relative 
        ${Ue?"max-w-5xl mx-auto shadow-2xl mb-12":"hover:translate-y-[-8px] active:translate-y-[0px] flex flex-col shadow-xl"}
        ${d?"animate-[shake_0.5s_infinite]":""}
      `,children:[G.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: rotate(0deg); }
          25% { transform: rotate(0.8deg); }
          75% { transform: rotate(-0.8deg); }
        }
      `}),i&&G.jsx("div",{className:"absolute top-2 right-2 md:top-6 md:right-6 z-[80] flex items-center gap-2",children:d?G.jsxs("div",{className:"flex gap-1 md:gap-2 animate-fade-in",children:[G.jsxs("button",{type:"button",onClick:ae,className:"bg-red-500 cartoon-border px-3 py-2 md:px-6 md:py-3 rounded-xl md:rounded-2xl font-black text-white shadow-lg hover:scale-110 active:scale-95 transition-all text-xs md:text-base uppercase flex items-center gap-1 md:gap-2",children:[" ",n==="es"?"S":"YES"]}),G.jsxs("button",{type:"button",onClick:W,className:"bg-slate-500 cartoon-border px-3 py-2 md:px-6 md:py-3 rounded-xl md:rounded-2xl font-black text-white shadow-lg hover:scale-110 active:scale-95 transition-all text-xs md:text-base uppercase flex items-center gap-1 md:gap-2",children:[" ","NO"]})]}):G.jsx("button",{type:"button",onClick:W,className:"bg-white/95 backdrop-blur-md cartoon-border w-10 h-10 md:w-14 md:h-14 rounded-full flex items-center justify-center text-xl md:text-2xl font-black text-slate-800 shadow-[4px_4px_0px_#1e293b] md:shadow-[6px_6px_0px_#1e293b] hover:scale-125 hover:bg-red-500 hover:text-white active:scale-95 transition-all cursor-pointer group",title:n==="es"?"Borrar":"Delete",children:G.jsx("span",{className:"group-hover:animate-bounce",children:""})})}),G.jsxs("div",{onClick:ve,onTouchStart:D,onTouchMove:ke,onTouchEnd:ct,className:`relative group overflow-hidden flex items-center justify-center cursor-pointer transition-all duration-500 ease-in-out border-b-4 border-slate-800
          ${d?"opacity-40 grayscale-[0.5]":""}
        `,style:{aspectRatio:Ue?"auto":`${h}`,minHeight:Ue?"auto":"350px",background:"radial-gradient(circle, #e2e8f0 1.5px, transparent 1.5px)",backgroundSize:"20px 20px"},children:[N?G.jsx("video",{ref:M,src:ue.url,controls:!0,playsInline:!0,className:`animate-fade-in transition-all duration-500 object-contain relative z-0 p-6 select-none
              ${Ue?"max-w-full max-h-[75vh] w-auto h-auto":"w-full h-full"}
            `},ue.url):G.jsx("img",{ref:k,src:ue.url,alt:re.title,onLoad:w,className:`animate-fade-in transition-all duration-500 object-contain relative z-0 p-6 select-none
              ${Ue?"max-w-full max-h-[75vh] w-auto h-auto":"w-full h-full"}
            `,draggable:"false"},ue.url),ce.length>1&&!d&&G.jsxs("div",{className:"absolute inset-0 z-10 pointer-events-none",children:[G.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center px-6 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto hidden md:flex",children:G.jsx("button",{type:"button",onClick:q,className:"bg-white border-[4px] border-slate-800 w-14 h-14 rounded-full flex items-center justify-center active:scale-90 shadow-[4px_4px_0px_#1e293b] transition-all hover:scale-110 hover:bg-amber-400",children:G.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-800",children:G.jsx("polyline",{points:"15 18 9 12 15 6"})})})}),G.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-6 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto hidden md:flex",children:G.jsx("button",{type:"button",onClick:U,className:"bg-white border-[4px] border-slate-800 w-14 h-14 rounded-full flex items-center justify-center active:scale-90 shadow-[4px_4px_0px_#1e293b] transition-all hover:scale-110 hover:bg-amber-400",children:G.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-800",children:G.jsx("polyline",{points:"9 18 15 12 9 6"})})})}),G.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 md:hidden",children:ce.map(($,le)=>G.jsx("div",{className:`w-2.5 h-2.5 rounded-full border-2 border-slate-800 transition-all ${le===a?"bg-amber-400 scale-125":"bg-white"}`},le))})]}),G.jsxs("div",{className:"absolute inset-0 z-20 pointer-events-none",children:[G.jsx("div",{className:"absolute top-3 left-3 md:top-8 md:left-8 flex flex-col gap-4 items-start pointer-events-auto",children:G.jsx("div",{className:"bg-amber-400 cartoon-border px-2 py-1 md:px-6 md:py-2 rounded-xl md:rounded-2xl text-xs md:text-base font-black shadow-lg transform -rotate-3 select-none text-slate-900",children:t.date})}),!d&&G.jsxs("div",{className:"absolute bottom-3 right-3 md:bottom-8 md:right-8 bg-sky-400 cartoon-border px-2 py-1 md:px-6 md:py-2 rounded-xl md:rounded-2xl text-xs md:text-base font-black text-white shadow-lg transform rotate-3 select-none pointer-events-auto",children:[te," ",t.author==="Dad"?n==="es"?"Pap":"Dad":n==="es"?"Mam":"Mom"]})]})]}),G.jsxs("div",{onClick:ve,className:`p-10 md:p-12 flex-grow cursor-pointer ${Ue?"text-center":""} ${d?"opacity-30":""}`,children:[G.jsx("h3",{className:`${Ue?"text-5xl md:text-7xl":"text-3xl md:text-4xl"} font-black mb-6 text-slate-800 uppercase tracking-tighter leading-none`,children:re.title}),G.jsxs("p",{className:`${Ue?"text-2xl md:text-3xl":"text-xl"} text-slate-600 leading-relaxed mb-10 italic font-semibold max-w-4xl mx-auto`,children:['"',re.caption,'"']}),G.jsx("div",{className:`flex flex-wrap gap-4 ${Ue?"justify-center":""}`,children:t.tags.map($=>G.jsxs("span",{className:`${Be($)} border-[3px] border-slate-800 px-5 py-2 rounded-2xl text-sm font-black uppercase tracking-tight shadow-[4px_4px_0px_#1e293b]`,children:["#",$]},$))})]}),d&&G.jsx("div",{className:"absolute inset-0 z-[75] flex items-center justify-center p-8 text-center pointer-events-none bg-slate-800/10 backdrop-blur-[4px]",children:G.jsxs("div",{className:"bg-white cartoon-border p-10 rounded-[50px] animate-float pointer-events-auto shadow-[20px_20px_0px_#1e293b]",children:[G.jsx("h4",{className:"text-4xl font-black text-slate-800 uppercase mb-4",children:Z}),G.jsx("p",{className:"text-slate-500 font-bold italic text-lg",children:n==="es"?"Este recuerdo saldr del lbum...":"This memory will leave the album..."})]})})]})},$1=({posts:t,activeFilter:e,onFilterChange:n,lang:i})=>{const r={all:t.length,juval:t.filter(d=>d.tags.includes("Juval")).length,theo:t.filter(d=>d.tags.includes("Theo")).length},a={all:i==="es"?"Todos":"All",juval:"Juval",theo:"Theo",title:i==="es"?"Nuestros lbumes":"Our Albums"},u=[{id:"all",label:a.all,icon:"",color:"bg-amber-400",count:r.all},{id:"juval",label:a.juval,icon:"",color:"bg-sky-400",count:r.juval},{id:"theo",label:a.theo,icon:"",color:"bg-rose-400",count:r.theo}];return G.jsxs("div",{className:"flex flex-col items-center gap-4 my-8 animate-fade-in",children:[G.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em]",children:a.title}),G.jsx("div",{className:"bg-white/40 backdrop-blur-sm cartoon-border p-2 rounded-[32px] flex gap-2",children:u.map(d=>G.jsxs("button",{onClick:()=>n(d.id),className:`
              flex items-center gap-3 px-6 py-2 rounded-2xl transition-all active:scale-95 group border-2
              ${e===d.id?d.color+" border-slate-800 shadow-[4px_4px_0px_#1e293b]":"bg-white border-transparent text-slate-400 hover:text-slate-600"}
            `,children:[G.jsx("span",{className:`text-xl transition-transform ${e===d.id?"scale-125":"group-hover:scale-110"}`,children:d.icon}),G.jsxs("div",{className:"flex flex-col items-start",children:[G.jsx("span",{className:`font-black text-sm uppercase ${e===d.id?"text-slate-900":""}`,children:d.label}),G.jsxs("span",{className:`text-[9px] font-bold opacity-60 ${e===d.id?"text-slate-800":""}`,children:[d.count," ",i==="es"?"Momentos":"Moments"]})]})]},d.id))})]})};var K1={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Q1,X1;function W1(){return{geminiUrl:Q1,vertexUrl:X1}}function Z1(t,e,n,i){var r,a;if(!(t!=null&&t.baseUrl)){const u=W1();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xo{}function pe(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const g=t[d];if(Array.isArray(n))for(let h=0;h<g.length;h++){const _=g[h];p(_,e.slice(a+1),n[h])}else for(const h of g)p(h,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const g=t[d];p(g[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function j1(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),a=i.split("."),u=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&a.length>d)for(let g=d;g<a.length;g++){const h=a[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}fp(t,r,a,0,u)}}function fp(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const g of d[u])fp(g,e,n,i+1,r)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),g={};for(const h of d)g[h]=u[h];for(const[h,_]of Object.entries(g)){const T=[];for(const A of n.slice(i))A==="*"?T.push(h):T.push(A);p(u,T,_)}for(const h of d)delete u[h]}}else{const u=t;a in u&&fp(u[a],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eb(t){const e={},n=f(t,["operationName"]);n!=null&&p(e,["operationName"],n);const i=f(t,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function tb(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],ib(u)),e}function nb(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],ob(u)),e}function ib(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>sb(u))),p(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function ob(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>rb(u))),p(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function sb(t){const e={},n=f(t,["video"]);return n!=null&&p(e,["video"],db(n)),e}function rb(t){const e={},n=f(t,["_self"]);return n!=null&&p(e,["video"],hb(n)),e}function ab(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function lb(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function ub(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],cb(u)),e}function cb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&p(e,["parent"],i);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function LE(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],fb(u)),e}function fb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&p(e,["parent"],i);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function db(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const i=f(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Wp(i));const r=f(t,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function hb(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Wp(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var L_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(L_||(L_={}));var k_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(k_||(k_={}));var O_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(O_||(O_={}));var _n;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(_n||(_n={}));var B_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(B_||(B_={}));var q_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(q_||(q_={}));var F_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(F_||(F_={}));var G_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(G_||(G_={}));var H_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(H_||(H_={}));var z_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(z_||(z_={}));var Y_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Y_||(Y_={}));var J_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(J_||(J_={}));var $_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})($_||($_={}));var K_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(K_||(K_={}));var Q_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Q_||(Q_={}));var X_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(X_||(X_={}));var W_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(W_||(W_={}));var Z_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Z_||(Z_={}));var j_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(j_||(j_={}));var tf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(tf||(tf={}));var ev;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ev||(ev={}));var tv;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(tv||(tv={}));var nv;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(nv||(nv={}));var dp;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(dp||(dp={}));var iv;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(iv||(iv={}));var ov;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(ov||(ov={}));var sv;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(sv||(sv={}));var rv;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(rv||(rv={}));var av;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(av||(av={}));var lv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(lv||(lv={}));var uv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(uv||(uv={}));var cv;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(cv||(cv={}));var fv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(fv||(fv={}));var dv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(dv||(dv={}));var hv;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(hv||(hv={}));var pv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(pv||(pv={}));var mv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(mv||(mv={}));var gv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(gv||(gv={}));var yv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(yv||(yv={}));var _v;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(_v||(_v={}));var vv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(vv||(vv={}));var Tv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Tv||(Tv={}));var Ev;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Ev||(Ev={}));var Av;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(Av||(Av={}));var Sv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Sv||(Sv={}));var xv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(xv||(xv={}));var Cv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Cv||(Cv={}));var bv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(bv||(bv={}));var Rv;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Rv||(Rv={}));var Iv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Iv||(Iv={}));var wv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(wv||(wv={}));var Nv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Nv||(Nv={}));var Dv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Dv||(Dv={}));var Mv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Mv||(Mv={}));var Pv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Pv||(Pv={}));var ia;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ia||(ia={}));class hp{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Il{get text(){var e,n,i,r,a,u,d,g;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const A of(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[C,P]of Object.entries(A))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(P!==null||P!==void 0)&&T.push(C);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;_=!0,h+=A.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,n,i,r,a,u,d,g;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[A,C]of Object.entries(T))A!=="inlineData"&&(C!==null||C!==void 0)&&_.push(A);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,r,a,u,d,g;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,r,a,u,d,g,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,r,a,u,d,g,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class Vv{}class Uv{}class pb{}class mb{}class gb{}class yb{}class Lv{}class kv{}class Ov{}class _b{}class nf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new nf;let r;const a=e;return n?r=nb(a):r=tb(a),Object.assign(i,r),i}}class Bv{}class qv{}class Fv{}class Gv{}class vb{}class Tb{}class Eb{}class Zp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Zp,a=ub(e);return Object.assign(i,a),i}}class Ab{}class Sb{}class xb{}class Hv{}class Cb{get text(){var e,n,i;let r="",a=!1;const u=[];for(const d of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(d))g!=="text"&&g!=="thought"&&h!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class bb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class jp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new jp,a=LE(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function je(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function kE(t,e){const n=je(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function OE(t){return Array.isArray(t)?t.map(e=>of(e)):[of(t)]}function of(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function BE(t){const e=of(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function qE(t){const e=of(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function FE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>zv(e)):[zv(t)]}function pp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Yv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Jv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function dn(t){if(t==null)throw new Error("ContentUnion is required");return pp(t)?t:{role:"user",parts:FE(t)}}function em(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=dn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=dn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>dn(n)):[dn(e)]}function ei(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Yv(t)||Jv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(t)]}const e=[],n=[],i=pp(t[0]);for(const r of t){const a=pp(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(Yv(r)||Jv(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:FE(n)}),e}function Rb(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(_n).includes(n[0].toUpperCase())?n[0].toUpperCase():_n.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(_n).includes(i.toUpperCase())?i.toUpperCase():_n.TYPE_UNSPECIFIED})}}function sa(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&Rb(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(_n).includes(d.toUpperCase())?d.toUpperCase():_n.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=sa(d);else if(i.includes(u)){const g=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}g.push(sa(h))}e[u]=g}else if(r.includes(u)){const g={};for(const[h,_]of Object.entries(d))g[h]=sa(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function tm(t){return sa(t)}function nm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function im(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ga(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=sa(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=sa(e.response));return t}function ya(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Ib(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Co(t,e){if(typeof e!="string")throw new Error("name must be a string");return Ib(t,e,"cachedContents")}function GE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function _s(t){return Wp(t)}function wb(t){return t!=null&&typeof t=="object"&&"name"in t}function Nb(t){return t!=null&&typeof t=="object"&&"video"in t}function Db(t){return t!=null&&typeof t=="object"&&"uri"in t}function HE(t){var e;let n;if(wb(t)&&(n=t.name),!(Db(t)&&(n=t.uri,n===void 0))&&!(Nb(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function zE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function YE(t){for(const e of["models","tunedModels","publisherModels"])if(Mb(t,e))return t[e];return[]}function Mb(t,e){return t!==null&&typeof t=="object"&&e in t}function Pb(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Vb(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=Pb(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function JE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Ub(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function $E(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function _a(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function KE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lb(t){const e={},n=f(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const i=f(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>gR(u))),p(e,["inlinedResponses"],a)}const r=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function kb(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const i=f(t,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function Ob(t){const e={},n=f(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const i=f(t,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const r=f(t,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function $c(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const r=f(t,["metadata","state"]);r!=null&&p(e,["state"],KE(r));const a=f(t,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=f(t,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(t,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const g=f(t,["metadata","model"]);g!=null&&p(e,["model"],g);const h=f(t,["metadata","output"]);return h!=null&&p(e,["dest"],Lb($E(h))),e}function mp(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=f(t,["state"]);r!=null&&p(e,["state"],KE(r));const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(t,["startTime"]);d!=null&&p(e,["startTime"],d);const g=f(t,["endTime"]);g!=null&&p(e,["endTime"],g);const h=f(t,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=f(t,["model"]);_!=null&&p(e,["model"],_);const T=f(t,["inputConfig"]);T!=null&&p(e,["src"],Bb(T));const A=f(t,["outputConfig"]);A!=null&&p(e,["dest"],kb($E(A)));const C=f(t,["completionStats"]);return C!=null&&p(e,["completionStats"],C),e}function Bb(t){const e={},n=f(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const i=f(t,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function qb(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&p(n,["fileName"],i);const r=f(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>mR(t,u))),p(n,["requests","requests"],a)}return n}function Fb(t){const e={},n=f(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const i=f(t,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const r=f(t,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Gb(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Hb(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],_a(t,i)),n}function zb(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],_a(t,i)),n}function Yb(t){const e={},n=f(t,["content"]);n!=null&&p(e,["content"],n);const i=f(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],Jb(i));const r=f(t,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const a=f(t,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const g=f(t,["index"]);g!=null&&p(e,["index"],g);const h=f(t,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=f(t,["safetyRatings"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(C=>C)),p(e,["safetyRatings"],A)}const T=f(t,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function Jb(t){const e={},n=f(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function QE(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>SR(a))),p(e,["parts"],r)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function $b(t,e){const n={},i=f(t,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Kb(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=f(t,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],Ob(Ub(r))),n}function $v(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["src"]);r!=null&&p(n,["batch","inputConfig"],qb(t,JE(t,r)));const a=f(e,["config"]);return a!=null&&$b(a,n),n}function Qb(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["model"],je(t,i));const r=f(e,["src"]);r!=null&&p(n,["inputConfig"],Fb(JE(t,r)));const a=f(e,["config"]);return a!=null&&Kb(a,n),n}function Xb(t,e){const n={},i=f(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),n}function Wb(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["src"]);r!=null&&p(n,["batch","inputConfig"],oR(t,r));const a=f(e,["config"]);return a!=null&&Xb(a,n),n}function Zb(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],_a(t,i)),n}function jb(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],_a(t,i)),n}function eR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);return a!=null&&p(e,["error"],a),e}function tR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);return a!=null&&p(e,["error"],a),e}function nR(t,e){const n={},i=f(e,["contents"]);if(i!=null){let a=em(t,i);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["requests[]","request","content"],a)}const r=f(e,["config"]);return r!=null&&(p(n,["_self"],iR(r,n)),j1(n,{"requests[].*":"requests[].request.*"})),n}function iR(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=f(t,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function oR(t,e){const n={},i=f(e,["fileName"]);i!=null&&p(n,["file_name"],i);const r=f(e,["inlinedRequests"]);return r!=null&&p(n,["requests"],nR(t,r)),n}function sR(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function rR(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aR(t){const e={},n=f(t,["mode"]);n!=null&&p(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lR(t,e,n){const i={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],QE(dn(r)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const A=f(e,["logprobs"]);A!=null&&p(i,["logprobs"],A);const C=f(e,["presencePenalty"]);C!=null&&p(i,["presencePenalty"],C);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const k=f(e,["seed"]);k!=null&&p(i,["seed"],k);const M=f(e,["responseMimeType"]);M!=null&&p(i,["responseMimeType"],M);const K=f(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],tm(K));const te=f(e,["responseJsonSchema"]);if(te!=null&&p(i,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(n!==void 0&&Z!=null){let D=Z;Array.isArray(D)&&(D=D.map(ke=>xR(ke))),p(n,["safetySettings"],D)}const re=f(e,["tools"]);if(n!==void 0&&re!=null){let D=ya(re);Array.isArray(D)&&(D=D.map(ke=>bR(ga(ke)))),p(n,["tools"],D)}const ce=f(e,["toolConfig"]);if(n!==void 0&&ce!=null&&p(n,["toolConfig"],CR(ce)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);n!==void 0&&ue!=null&&p(n,["cachedContent"],Co(t,ue));const N=f(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const w=f(e,["mediaResolution"]);w!=null&&p(i,["mediaResolution"],w);const I=f(e,["speechConfig"]);if(I!=null&&p(i,["speechConfig"],nm(I)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const U=f(e,["imageConfig"]);U!=null&&p(i,["imageConfig"],pR(U));const q=f(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function uR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>Yb(h))),p(e,["candidates"],g)}const r=f(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const a=f(t,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(t,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function cR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],_a(t,i)),n}function fR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],_a(t,i)),n}function dR(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function hR(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function pR(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=f(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function mR(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["request","model"],je(t,i));const r=f(e,["contents"]);if(r!=null){let d=ei(r);Array.isArray(d)&&(d=d.map(g=>QE(g))),p(n,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&p(n,["metadata"],a);const u=f(e,["config"]);return u!=null&&p(n,["request","generationConfig"],lR(t,u,f(n,["request"],{}))),n}function gR(t){const e={},n=f(t,["response"]);n!=null&&p(e,["response"],uR(n));const i=f(t,["error"]);return i!=null&&p(e,["error"],i),e}function yR(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function _R(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const a=f(t,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),n}function vR(t){const e={},n=f(t,["config"]);return n!=null&&yR(n,e),e}function TR(t){const e={},n=f(t,["config"]);return n!=null&&_R(n,e),e}function ER(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>$c(u))),p(e,["batchJobs"],a)}return e}function AR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>mp(u))),p(e,["batchJobs"],a)}return e}function SR(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],sR(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],rR(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&p(e,["inlineData"],Gb(g));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const _=f(t,["thought"]);_!=null&&p(e,["thought"],_);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const A=f(t,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function xR(t){const e={},n=f(t,["category"]);if(n!=null&&p(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function CR(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],aR(n));const i=f(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function bR(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=f(t,["computerUse"]);r!=null&&p(e,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],dR(d));const g=f(t,["googleSearch"]);g!=null&&p(e,["googleSearch"],hR(g));const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vo;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(vo||(vo={}));class ir{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RR extends xo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ir(vo.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=$v(this.apiClient,e),i=n._url,r=pe("{model}:batchGenerateContent",i),d=n.batch.inputConfig.requests,g=d.requests,h=[];for(const _ of g){const T=Object.assign({},_);if(T.systemInstruction){const A=T.systemInstruction;delete T.systemInstruction;const C=T.request;C.systemInstruction=A,T.request=C}h.push(T)}return d.requests=h,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Qb(this.apiClient,e);return d=pe("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>mp(_))}else{const h=$v(this.apiClient,e);return d=pe("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>$c(_))}}async createEmbeddingsInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Wb(this.apiClient,e);return a=pe("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>$c(g))}}async get(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=fR(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>mp(_))}else{const h=cR(this.apiClient,e);return d=pe("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>$c(_))}}async cancel(e){var n,i,r,a;let u="",d={};if(this.apiClient.isVertexAI()){const g=zb(this.apiClient,e);u=pe("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=Hb(this.apiClient,e);u=pe("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=TR(e);return d=pe("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=AR(_),A=new Hv;return Object.assign(A,T),A})}else{const h=vR(e);return d=pe("batches",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=ER(_),A=new Hv;return Object.assign(A,T),A})}}async delete(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=jb(this.apiClient,e);return d=pe("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>tR(_))}else{const h=Zb(this.apiClient,e);return d=pe("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>eR(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IR(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Kv(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>WR(a))),p(e,["parts"],r)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function wR(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const a=f(t,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let _=ei(u);Array.isArray(_)&&(_=_.map(T=>Kv(T))),p(e,["contents"],_)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],Kv(dn(d)));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>jR(T))),p(e,["tools"],_)}const h=f(t,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],ZR(h)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function NR(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const a=f(t,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let T=ei(u);Array.isArray(T)&&(T=T.map(A=>A)),p(e,["contents"],T)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],dn(d));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(A=>eI(A))),p(e,["tools"],T)}const h=f(t,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=f(t,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),n}function DR(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["model"],kE(t,i));const r=f(e,["config"]);return r!=null&&wR(r,n),n}function MR(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["model"],kE(t,i));const r=f(e,["config"]);return r!=null&&NR(r,n),n}function PR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Co(t,i)),n}function VR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Co(t,i)),n}function UR(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function LR(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function kR(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function OR(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function BR(t){const e={},n=f(t,["mode"]);n!=null&&p(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function qR(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&p(e,["description"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const r=f(t,["parameters"]);r!=null&&p(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&p(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function FR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Co(t,i)),n}function GR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],Co(t,i)),n}function HR(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function zR(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function YR(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function JR(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function $R(t){const e={},n=f(t,["config"]);return n!=null&&YR(n,e),e}function KR(t){const e={},n=f(t,["config"]);return n!=null&&JR(n,e),e}function QR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function XR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function WR(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],kR(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],OR(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&p(e,["inlineData"],IR(g));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const _=f(t,["thought"]);_!=null&&p(e,["thought"],_);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const A=f(t,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function ZR(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],BR(n));const i=f(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function jR(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=f(t,["computerUse"]);r!=null&&p(e,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],HR(d));const g=f(t,["googleSearch"]);g!=null&&p(e,["googleSearch"],zR(g));const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function eI(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let T=n;Array.isArray(T)&&(T=T.map(A=>qR(A))),p(e,["functionDeclarations"],T)}const i=f(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=f(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const a=f(t,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const g=f(t,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=f(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(t,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function tI(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function nI(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function iI(t,e){const n={},i=f(e,["name"]);i!=null&&p(n,["_url","name"],Co(t,i));const r=f(e,["config"]);return r!=null&&tI(r,n),n}function oI(t,e){const n={},i=f(e,["name"]);i!=null&&p(n,["_url","name"],Co(t,i));const r=f(e,["config"]);return r!=null&&nI(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sI extends xo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ir(vo.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=MR(this.apiClient,e);return d=pe("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=DR(this.apiClient,e);return d=pe("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=GR(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=FR(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=VR(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=LR(_),A=new Fv;return Object.assign(A,T),A})}else{const h=PR(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=UR(_),A=new Fv;return Object.assign(A,T),A})}}async update(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=oI(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=iI(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=KR(e);return d=pe("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=XR(_),A=new Gv;return Object.assign(A,T),A})}else{const h=$R(e);return d=pe("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=QR(_),A=new Gv;return Object.assign(A,T),A})}}}function sf(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Qv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(t){return this instanceof Ie?(this.v=t,this):new Ie(t)}function vi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(C){return function(P){return Promise.resolve(P).then(C,T)}}function d(C,P){i[C]&&(r[C]=function(k){return new Promise(function(M,K){a.push([C,k,M,K])>1||g(C,k)})},P&&(r[C]=P(r[C])))}function g(C,P){try{h(i[C](P))}catch(k){A(a[0][3],k)}}function h(C){C.value instanceof Ie?Promise.resolve(C.value.v).then(_,T):A(a[0][2],C)}function _(C){g("next",C)}function T(C){g("throw",C)}function A(C,P){C(P),a.shift(),a.length&&g(a[0][0],a[0][1])}}function Ti(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Qv=="function"?Qv(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(d,g){u=t[a](u),r(d,g,u.done,u.value)})}}function r(a,u,d,g){Promise.resolve(g).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rI(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:XE(n)}function XE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function aI(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Xv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!XE(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class lI{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new uI(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class uI{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),aI(a)}async sendMessage(e){var n;await this.sendPromise;const i=dn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,d;const g=await r,h=(u=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let A=[];_!=null&&(A=(d=_.slice(T))!==null&&d!==void 0?d:[]);const C=h?[h]:[];this.recordHistory(i,C,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=dn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?Xv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return vi(this,arguments,function*(){var r,a,u,d,g,h;const _=[];try{for(var T=!0,A=Ti(e),C;C=yield Ie(A.next()),r=C.done,!r;T=!0){d=C.value,T=!1;const P=d;if(rI(P)){const k=(h=(g=P.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;k!==void 0&&_.push(k)}yield yield Ie(P)}}catch(P){a={error:P}}finally{try{!T&&!r&&(u=A.return)&&(yield Ie(u.call(A)))}finally{if(a)throw a.error}}this.recordHistory(n,_)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...Xv(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,xf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cI(t){const e={},n=f(t,["file"]);return n!=null&&p(e,["file"],n),e}function fI(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function dI(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],HE(n)),e}function hI(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function pI(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],HE(n)),e}function mI(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function gI(t){const e={},n=f(t,["config"]);return n!=null&&mI(n,e),e}function yI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _I extends xo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ir(vo.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gI(e);return a=pe("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=yI(g),_=new Ab;return Object.assign(_,h),_})}}async createInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cI(e);return a=pe("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=fI(g),_=new Sb;return Object.assign(_,h),_})}}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pI(e);return a=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=dI(e);return a=pe("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=hI(g),_=new xb;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Kc(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function vI(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>UI(a))),p(e,["parts"],r)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function TI(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function EI(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function AI(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&p(e,["description"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const r=f(t,["parameters"]);r!=null&&p(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&p(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function SI(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=f(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=f(t,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const a=f(t,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(t,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const g=f(t,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=f(t,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=f(t,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=f(t,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const A=f(t,["responseLogprobs"]);A!=null&&p(e,["responseLogprobs"],A);const C=f(t,["responseMimeType"]);C!=null&&p(e,["responseMimeType"],C);const P=f(t,["responseModalities"]);P!=null&&p(e,["responseModalities"],P);const k=f(t,["responseSchema"]);k!=null&&p(e,["responseSchema"],k);const M=f(t,["routingConfig"]);M!=null&&p(e,["routingConfig"],M);const K=f(t,["seed"]);K!=null&&p(e,["seed"],K);const te=f(t,["speechConfig"]);te!=null&&p(e,["speechConfig"],te);const Z=f(t,["stopSequences"]);Z!=null&&p(e,["stopSequences"],Z);const re=f(t,["temperature"]);re!=null&&p(e,["temperature"],re);const ce=f(t,["thinkingConfig"]);ce!=null&&p(e,["thinkingConfig"],ce);const ue=f(t,["topK"]);ue!=null&&p(e,["topK"],ue);const N=f(t,["topP"]);if(N!=null&&p(e,["topP"],N),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function xI(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function CI(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function bI(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(t,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],im(T));const A=f(t,["thinkingConfig"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","thinkingConfig"],A);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const P=f(t,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],vI(dn(P)));const k=f(t,["tools"]);if(e!==void 0&&k!=null){let ue=ya(k);Array.isArray(ue)&&(ue=ue.map(N=>kI(ga(N)))),p(e,["setup","tools"],ue)}const M=f(t,["sessionResumption"]);e!==void 0&&M!=null&&p(e,["setup","sessionResumption"],LI(M));const K=f(t,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const te=f(t,["outputAudioTranscription"]);e!==void 0&&te!=null&&p(e,["setup","outputAudioTranscription"],te);const Z=f(t,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const re=f(t,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const ce=f(t,["proactivity"]);if(e!==void 0&&ce!=null&&p(e,["setup","proactivity"],ce),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function RI(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],SI(i));const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(t,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],im(T));const A=f(t,["thinkingConfig"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","thinkingConfig"],A);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const P=f(t,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],dn(P));const k=f(t,["tools"]);if(e!==void 0&&k!=null){let N=ya(k);Array.isArray(N)&&(N=N.map(w=>OI(ga(w)))),p(e,["setup","tools"],N)}const M=f(t,["sessionResumption"]);e!==void 0&&M!=null&&p(e,["setup","sessionResumption"],M);const K=f(t,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const te=f(t,["outputAudioTranscription"]);e!==void 0&&te!=null&&p(e,["setup","outputAudioTranscription"],te);const Z=f(t,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const re=f(t,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const ce=f(t,["proactivity"]);e!==void 0&&ce!=null&&p(e,["setup","proactivity"],ce);const ue=f(t,["explicitVadSignal"]);return e!==void 0&&ue!=null&&p(e,["setup","explicitVadSignal"],ue),n}function II(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["setup","model"],je(t,i));const r=f(e,["config"]);return r!=null&&p(n,["config"],bI(r,n)),n}function wI(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["setup","model"],je(t,i));const r=f(e,["config"]);return r!=null&&p(n,["config"],RI(r,n)),n}function NI(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function DI(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["weightedPrompts"],i)}return e}function MI(t){const e={},n=f(t,["media"]);if(n!=null){let h=OE(n);Array.isArray(h)&&(h=h.map(_=>Kc(_))),p(e,["mediaChunks"],h)}const i=f(t,["audio"]);i!=null&&p(e,["audio"],Kc(qE(i)));const r=f(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const a=f(t,["video"]);a!=null&&p(e,["video"],Kc(BE(a)));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&p(e,["activityStart"],d);const g=f(t,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function PI(t){const e={},n=f(t,["media"]);if(n!=null){let h=OE(n);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const i=f(t,["audio"]);i!=null&&p(e,["audio"],qE(i));const r=f(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const a=f(t,["video"]);a!=null&&p(e,["video"],BE(a));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&p(e,["activityStart"],d);const g=f(t,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function VI(t){const e={},n=f(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const i=f(t,["serverContent"]);i!=null&&p(e,["serverContent"],i);const r=f(t,["toolCall"]);r!=null&&p(e,["toolCall"],r);const a=f(t,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=f(t,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],BI(u));const d=f(t,["goAway"]);d!=null&&p(e,["goAway"],d);const g=f(t,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const h=f(t,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function UI(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],TI(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],EI(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&p(e,["inlineData"],Kc(g));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const _=f(t,["thought"]);_!=null&&p(e,["thought"],_);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const A=f(t,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function LI(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function kI(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=f(t,["computerUse"]);r!=null&&p(e,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],xI(d));const g=f(t,["googleSearch"]);g!=null&&p(e,["googleSearch"],CI(g));const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function OI(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let T=n;Array.isArray(T)&&(T=T.map(A=>AI(A))),p(e,["functionDeclarations"],T)}const i=f(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=f(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const a=f(t,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const g=f(t,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=f(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(t,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function BI(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const i=f(t,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const r=f(t,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const a=f(t,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=f(t,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(t,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const g=f(t,["promptTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(P=>P)),p(e,["promptTokensDetails"],C)}const h=f(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(P=>P)),p(e,["cacheTokensDetails"],C)}const _=f(t,["candidatesTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(P=>P)),p(e,["responseTokensDetails"],C)}const T=f(t,["toolUsePromptTokensDetails"]);if(T!=null){let C=T;Array.isArray(C)&&(C=C.map(P=>P)),p(e,["toolUsePromptTokensDetails"],C)}const A=f(t,["trafficType"]);return A!=null&&p(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qI(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function FI(t){const e={},n=f(t,["content"]);n!=null&&p(e,["content"],n);const i=f(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],GI(i));const r=f(t,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const a=f(t,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const g=f(t,["index"]);g!=null&&p(e,["index"],g);const h=f(t,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=f(t,["safetyRatings"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(C=>C)),p(e,["safetyRatings"],A)}const T=f(t,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function GI(t){const e={},n=f(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function HI(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["contents"]);if(r!=null){let a=ei(r);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["contents"],a)}return n}function zI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),p(e,["tokensInfo"],r)}return e}function YI(t){const e={},n=f(t,["values"]);n!=null&&p(e,["values"],n);const i=f(t,["statistics"]);return i!=null&&p(e,["statistics"],JI(i)),e}function JI(t){const e={},n=f(t,["truncated"]);n!=null&&p(e,["truncated"],n);const i=f(t,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function Cf(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>t2(a))),p(e,["parts"],r)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function $I(t){const e={},n=f(t,["controlType"]);n!=null&&p(e,["controlType"],n);const i=f(t,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function KI(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function QI(t,e){const n={},i=f(t,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],dn(i));const r=f(t,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>eA(d))),p(e,["tools"],u)}const a=f(t,["generationConfig"]);return e!==void 0&&a!=null&&p(e,["generationConfig"],qw(a)),n}function XI(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["contents"]);if(r!=null){let u=ei(r);Array.isArray(u)&&(u=u.map(d=>Cf(d))),p(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&KI(a),n}function WI(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["contents"]);if(r!=null){let u=ei(r);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&QI(a,n),n}function ZI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const r=f(t,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function jI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function ew(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],je(t,i)),n}function tw(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],je(t,i)),n}function nw(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function iw(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function ow(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const g=f(t,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=f(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const A=f(t,["includeRaiReason"]);e!==void 0&&A!=null&&p(e,["parameters","includeRaiReason"],A);const C=f(t,["language"]);e!==void 0&&C!=null&&p(e,["parameters","language"],C);const P=f(t,["outputMimeType"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","mimeType"],P);const k=f(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","compressionQuality"],k);const M=f(t,["addWatermark"]);e!==void 0&&M!=null&&p(e,["parameters","addWatermark"],M);const K=f(t,["labels"]);e!==void 0&&K!=null&&p(e,["labels"],K);const te=f(t,["editMode"]);e!==void 0&&te!=null&&p(e,["parameters","editMode"],te);const Z=f(t,["baseSteps"]);return e!==void 0&&Z!=null&&p(e,["parameters","editConfig","baseSteps"],Z),n}function sw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(g=>a2(g))),p(n,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&ow(u,n),n}function rw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>bf(a))),p(e,["generatedImages"],r)}return e}function aw(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=f(t,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function lw(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const r=f(t,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const a=f(t,["outputDimensionality"]);e!==void 0&&a!=null&&p(e,["parameters","outputDimensionality"],a);const u=f(t,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const d=f(t,["autoTruncate"]);return e!==void 0&&d!=null&&p(e,["parameters","autoTruncate"],d),n}function uw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["contents"]);if(r!=null){let d=em(t,r);Array.isArray(d)&&(d=d.map(g=>g)),p(n,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&aw(a,n);const u=f(e,["model"]);return u!==void 0&&p(n,["requests[]","model"],je(t,u)),n}function cw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["contents"]);if(r!=null){let u=em(t,r);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&lw(a,n),n}function fw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["embeddings"],a)}const r=f(t,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function dw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>YI(u))),p(e,["embeddings"],a)}const r=f(t,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function hw(t){const e={},n=f(t,["endpoint"]);n!=null&&p(e,["name"],n);const i=f(t,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function pw(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function mw(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gw(t){const e={},n=f(t,["mode"]);n!=null&&p(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yw(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&p(e,["description"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const r=f(t,["parameters"]);r!=null&&p(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&p(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function _w(t,e,n){const i={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],Cf(dn(r)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const A=f(e,["logprobs"]);A!=null&&p(i,["logprobs"],A);const C=f(e,["presencePenalty"]);C!=null&&p(i,["presencePenalty"],C);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const k=f(e,["seed"]);k!=null&&p(i,["seed"],k);const M=f(e,["responseMimeType"]);M!=null&&p(i,["responseMimeType"],M);const K=f(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],tm(K));const te=f(e,["responseJsonSchema"]);if(te!=null&&p(i,["responseJsonSchema"],te),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=f(e,["safetySettings"]);if(n!==void 0&&Z!=null){let D=Z;Array.isArray(D)&&(D=D.map(ke=>l2(ke))),p(n,["safetySettings"],D)}const re=f(e,["tools"]);if(n!==void 0&&re!=null){let D=ya(re);Array.isArray(D)&&(D=D.map(ke=>m2(ga(ke)))),p(n,["tools"],D)}const ce=f(e,["toolConfig"]);if(n!==void 0&&ce!=null&&p(n,["toolConfig"],p2(ce)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=f(e,["cachedContent"]);n!==void 0&&ue!=null&&p(n,["cachedContent"],Co(t,ue));const N=f(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const w=f(e,["mediaResolution"]);w!=null&&p(i,["mediaResolution"],w);const I=f(e,["speechConfig"]);if(I!=null&&p(i,["speechConfig"],nm(I)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const U=f(e,["imageConfig"]);U!=null&&p(i,["imageConfig"],Yw(U));const q=f(e,["enableEnhancedCivicAnswers"]);return q!=null&&p(i,["enableEnhancedCivicAnswers"],q),i}function vw(t,e,n){const i={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],dn(r));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const A=f(e,["logprobs"]);A!=null&&p(i,["logprobs"],A);const C=f(e,["presencePenalty"]);C!=null&&p(i,["presencePenalty"],C);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const k=f(e,["seed"]);k!=null&&p(i,["seed"],k);const M=f(e,["responseMimeType"]);M!=null&&p(i,["responseMimeType"],M);const K=f(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],tm(K));const te=f(e,["responseJsonSchema"]);te!=null&&p(i,["responseJsonSchema"],te);const Z=f(e,["routingConfig"]);Z!=null&&p(i,["routingConfig"],Z);const re=f(e,["modelSelectionConfig"]);re!=null&&p(i,["modelConfig"],re);const ce=f(e,["safetySettings"]);if(n!==void 0&&ce!=null){let W=ce;Array.isArray(W)&&(W=W.map(ae=>ae)),p(n,["safetySettings"],W)}const ue=f(e,["tools"]);if(n!==void 0&&ue!=null){let W=ya(ue);Array.isArray(W)&&(W=W.map(ae=>eA(ga(ae)))),p(n,["tools"],W)}const N=f(e,["toolConfig"]);n!==void 0&&N!=null&&p(n,["toolConfig"],N);const w=f(e,["labels"]);n!==void 0&&w!=null&&p(n,["labels"],w);const I=f(e,["cachedContent"]);n!==void 0&&I!=null&&p(n,["cachedContent"],Co(t,I));const L=f(e,["responseModalities"]);L!=null&&p(i,["responseModalities"],L);const U=f(e,["mediaResolution"]);U!=null&&p(i,["mediaResolution"],U);const q=f(e,["speechConfig"]);q!=null&&p(i,["speechConfig"],nm(q));const D=f(e,["audioTimestamp"]);D!=null&&p(i,["audioTimestamp"],D);const ke=f(e,["thinkingConfig"]);ke!=null&&p(i,["thinkingConfig"],ke);const ct=f(e,["imageConfig"]);if(ct!=null&&p(i,["imageConfig"],Jw(ct)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function Wv(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["contents"]);if(r!=null){let u=ei(r);Array.isArray(u)&&(u=u.map(d=>Cf(d))),p(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&p(n,["generationConfig"],_w(t,a,n)),n}function Zv(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["contents"]);if(r!=null){let u=ei(r);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&p(n,["generationConfig"],vw(t,a,n)),n}function jv(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>FI(h))),p(e,["candidates"],g)}const r=f(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const a=f(t,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(t,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function eT(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const r=f(t,["createTime"]);r!=null&&p(e,["createTime"],r);const a=f(t,["modelVersion"]);a!=null&&p(e,["modelVersion"],a);const u=f(t,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const d=f(t,["responseId"]);d!=null&&p(e,["responseId"],d);const g=f(t,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function Tw(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=f(t,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const a=f(t,["guidanceScale"]);if(e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const g=f(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=f(t,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const T=f(t,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const A=f(t,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&p(e,["parameters","outputOptions","compressionQuality"],A),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=f(t,["imageSize"]);if(e!==void 0&&C!=null&&p(e,["parameters","sampleImageSize"],C),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Ew(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const g=f(t,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=f(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const A=f(t,["includeRaiReason"]);e!==void 0&&A!=null&&p(e,["parameters","includeRaiReason"],A);const C=f(t,["language"]);e!==void 0&&C!=null&&p(e,["parameters","language"],C);const P=f(t,["outputMimeType"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","mimeType"],P);const k=f(t,["outputCompressionQuality"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","compressionQuality"],k);const M=f(t,["addWatermark"]);e!==void 0&&M!=null&&p(e,["parameters","addWatermark"],M);const K=f(t,["labels"]);e!==void 0&&K!=null&&p(e,["labels"],K);const te=f(t,["imageSize"]);e!==void 0&&te!=null&&p(e,["parameters","sampleImageSize"],te);const Z=f(t,["enhancePrompt"]);return e!==void 0&&Z!=null&&p(e,["parameters","enhancePrompt"],Z),n}function Aw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const a=f(e,["config"]);return a!=null&&Tw(a,n),n}function Sw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const a=f(e,["config"]);return a!=null&&Ew(a,n),n}function xw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Lw(u))),p(e,["generatedImages"],a)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],ZE(r)),e}function Cw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>bf(u))),p(e,["generatedImages"],a)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],jE(r)),e}function bw(t,e){const n={},i=f(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(t,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=f(t,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const d=f(t,["personGeneration"]);if(e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(t,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const h=f(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(t,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],Rf(_));const T=f(t,["referenceImages"]);if(e!==void 0&&T!=null){let A=T;Array.isArray(A)&&(A=A.map(C=>I2(C))),p(e,["instances[0]","referenceImages"],A)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Rw(t,e){const n={},i=f(t,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const a=f(t,["fps"]);e!==void 0&&a!=null&&p(e,["parameters","fps"],a);const u=f(t,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const g=f(t,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const h=f(t,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=f(t,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const A=f(t,["negativePrompt"]);e!==void 0&&A!=null&&p(e,["parameters","negativePrompt"],A);const C=f(t,["enhancePrompt"]);e!==void 0&&C!=null&&p(e,["parameters","enhancePrompt"],C);const P=f(t,["generateAudio"]);e!==void 0&&P!=null&&p(e,["parameters","generateAudio"],P);const k=f(t,["lastFrame"]);e!==void 0&&k!=null&&p(e,["instances[0]","lastFrame"],Si(k));const M=f(t,["referenceImages"]);if(e!==void 0&&M!=null){let Z=M;Array.isArray(Z)&&(Z=Z.map(re=>w2(re))),p(e,["instances[0]","referenceImages"],Z)}const K=f(t,["mask"]);e!==void 0&&K!=null&&p(e,["instances[0]","mask"],R2(K));const te=f(t,["compressionQuality"]);return e!==void 0&&te!=null&&p(e,["parameters","compressionQuality"],te),n}function Iw(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],Mw(u)),e}function ww(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],Pw(u)),e}function Nw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const a=f(e,["image"]);a!=null&&p(n,["instances[0]","image"],Rf(a));const u=f(e,["video"]);u!=null&&p(n,["instances[0]","video"],tA(u));const d=f(e,["source"]);d!=null&&Vw(d,n);const g=f(e,["config"]);return g!=null&&bw(g,n),n}function Dw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const a=f(e,["image"]);a!=null&&p(n,["instances[0]","image"],Si(a));const u=f(e,["video"]);u!=null&&p(n,["instances[0]","video"],nA(u));const d=f(e,["source"]);d!=null&&Uw(d,n);const g=f(e,["config"]);return g!=null&&Rw(g,n),n}function Mw(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Ow(u))),p(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function Pw(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Bw(u))),p(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function Vw(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=f(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Rf(r));const a=f(t,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],tA(a)),n}function Uw(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=f(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Si(r));const a=f(t,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],nA(a)),n}function Lw(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["image"],$w(n));const i=f(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=f(t,["_self"]);return r!=null&&p(e,["safetyAttributes"],ZE(r)),e}function bf(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["image"],WE(n));const i=f(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=f(t,["_self"]);r!=null&&p(e,["safetyAttributes"],jE(r));const a=f(t,["prompt"]);return a!=null&&p(e,["enhancedPrompt"],a),e}function kw(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["mask"],WE(n));const i=f(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),p(e,["labels"],r)}return e}function Ow(t){const e={},n=f(t,["video"]);return n!=null&&p(e,["video"],C2(n)),e}function Bw(t){const e={},n=f(t,["_self"]);return n!=null&&p(e,["video"],b2(n)),e}function qw(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=f(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=f(t,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const a=f(t,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(t,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const g=f(t,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=f(t,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=f(t,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=f(t,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const A=f(t,["responseLogprobs"]);A!=null&&p(e,["responseLogprobs"],A);const C=f(t,["responseMimeType"]);C!=null&&p(e,["responseMimeType"],C);const P=f(t,["responseModalities"]);P!=null&&p(e,["responseModalities"],P);const k=f(t,["responseSchema"]);k!=null&&p(e,["responseSchema"],k);const M=f(t,["routingConfig"]);M!=null&&p(e,["routingConfig"],M);const K=f(t,["seed"]);K!=null&&p(e,["seed"],K);const te=f(t,["speechConfig"]);te!=null&&p(e,["speechConfig"],te);const Z=f(t,["stopSequences"]);Z!=null&&p(e,["stopSequences"],Z);const re=f(t,["temperature"]);re!=null&&p(e,["temperature"],re);const ce=f(t,["thinkingConfig"]);ce!=null&&p(e,["thinkingConfig"],ce);const ue=f(t,["topK"]);ue!=null&&p(e,["topK"],ue);const N=f(t,["topP"]);if(N!=null&&p(e,["topP"],N),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Fw(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],je(t,i)),n}function Gw(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],je(t,i)),n}function Hw(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function zw(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function Yw(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=f(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function Jw(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=f(t,["imageSize"]);i!=null&&p(e,["imageSize"],i);const r=f(t,["outputMimeType"]);r!=null&&p(e,["imageOutputOptions","mimeType"],r);const a=f(t,["outputCompressionQuality"]);return a!=null&&p(e,["imageOutputOptions","compressionQuality"],a),e}function $w(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],_s(n));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function WE(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],_s(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Rf(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],_s(n));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Si(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=f(t,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],_s(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Kw(t,e,n){const i={},r=f(e,["pageSize"]);n!==void 0&&r!=null&&p(n,["_query","pageSize"],r);const a=f(e,["pageToken"]);n!==void 0&&a!=null&&p(n,["_query","pageToken"],a);const u=f(e,["filter"]);n!==void 0&&u!=null&&p(n,["_query","filter"],u);const d=f(e,["queryBase"]);return n!==void 0&&d!=null&&p(n,["_url","models_url"],zE(t,d)),i}function Qw(t,e,n){const i={},r=f(e,["pageSize"]);n!==void 0&&r!=null&&p(n,["_query","pageSize"],r);const a=f(e,["pageToken"]);n!==void 0&&a!=null&&p(n,["_query","pageToken"],a);const u=f(e,["filter"]);n!==void 0&&u!=null&&p(n,["_query","filter"],u);const d=f(e,["queryBase"]);return n!==void 0&&d!=null&&p(n,["_url","models_url"],zE(t,d)),i}function Xw(t,e){const n={},i=f(e,["config"]);return i!=null&&Kw(t,i,n),n}function Ww(t,e){const n={},i=f(e,["config"]);return i!=null&&Qw(t,i,n),n}function Zw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["_self"]);if(r!=null){let a=YE(r);Array.isArray(a)&&(a=a.map(u=>gp(u))),p(e,["models"],a)}return e}function jw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["_self"]);if(r!=null){let a=YE(r);Array.isArray(a)&&(a=a.map(u=>yp(u))),p(e,["models"],a)}return e}function e2(t){const e={},n=f(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const i=f(t,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const r=f(t,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function gp(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=f(t,["description"]);r!=null&&p(e,["description"],r);const a=f(t,["version"]);a!=null&&p(e,["version"],a);const u=f(t,["_self"]);u!=null&&p(e,["tunedModelInfo"],g2(u));const d=f(t,["inputTokenLimit"]);d!=null&&p(e,["inputTokenLimit"],d);const g=f(t,["outputTokenLimit"]);g!=null&&p(e,["outputTokenLimit"],g);const h=f(t,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=f(t,["temperature"]);_!=null&&p(e,["temperature"],_);const T=f(t,["maxTemperature"]);T!=null&&p(e,["maxTemperature"],T);const A=f(t,["topP"]);A!=null&&p(e,["topP"],A);const C=f(t,["topK"]);C!=null&&p(e,["topK"],C);const P=f(t,["thinking"]);return P!=null&&p(e,["thinking"],P),e}function yp(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=f(t,["description"]);r!=null&&p(e,["description"],r);const a=f(t,["versionId"]);a!=null&&p(e,["version"],a);const u=f(t,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(A=>hw(A))),p(e,["endpoints"],T)}const d=f(t,["labels"]);d!=null&&p(e,["labels"],d);const g=f(t,["_self"]);g!=null&&p(e,["tunedModelInfo"],y2(g));const h=f(t,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=f(t,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>A)),p(e,["checkpoints"],T)}return e}function t2(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],pw(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],mw(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&p(e,["inlineData"],qI(g));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const _=f(t,["thought"]);_!=null&&p(e,["thought"],_);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const A=f(t,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function n2(t){const e={},n=f(t,["productImage"]);return n!=null&&p(e,["image"],Si(n)),e}function i2(t,e){const n={},i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=f(t,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=f(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const h=f(t,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const T=f(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const A=f(t,["enhancePrompt"]);e!==void 0&&A!=null&&p(e,["parameters","enhancePrompt"],A);const C=f(t,["labels"]);return e!==void 0&&C!=null&&p(e,["labels"],C),n}function o2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["source"]);r!=null&&r2(r,n);const a=f(e,["config"]);return a!=null&&i2(a,n),n}function s2(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>bf(r))),p(e,["generatedImages"],i)}return e}function r2(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=f(t,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],Si(r));const a=f(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>n2(d))),p(e,["instances[0]","productImages"],u)}return n}function a2(t){const e={},n=f(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Si(n));const i=f(t,["referenceId"]);i!=null&&p(e,["referenceId"],i);const r=f(t,["referenceType"]);r!=null&&p(e,["referenceType"],r);const a=f(t,["maskImageConfig"]);a!=null&&p(e,["maskImageConfig"],e2(a));const u=f(t,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],$I(u));const d=f(t,["styleImageConfig"]);d!=null&&p(e,["styleImageConfig"],d);const g=f(t,["subjectImageConfig"]);return g!=null&&p(e,["subjectImageConfig"],g),e}function ZE(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=f(t,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function jE(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=f(t,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function l2(t){const e={},n=f(t,["category"]);if(n!=null&&p(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function u2(t){const e={},n=f(t,["image"]);return n!=null&&p(e,["image"],Si(n)),e}function c2(t,e){const n={},i=f(t,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const r=f(t,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const a=f(t,["confidenceThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","confidenceThreshold"],a);const u=f(t,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const d=f(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&p(e,["parameters","binaryColorThreshold"],d);const g=f(t,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),n}function f2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["source"]);r!=null&&h2(r,n);const a=f(e,["config"]);return a!=null&&c2(a,n),n}function d2(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>kw(r))),p(e,["generatedMasks"],i)}return e}function h2(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=f(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Si(r));const a=f(t,["scribbleImage"]);return e!==void 0&&a!=null&&p(e,["instances[0]","scribble"],u2(a)),n}function p2(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],gw(n));const i=f(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function m2(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=f(t,["computerUse"]);r!=null&&p(e,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],Hw(d));const g=f(t,["googleSearch"]);g!=null&&p(e,["googleSearch"],zw(g));const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function eA(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let T=n;Array.isArray(T)&&(T=T.map(A=>yw(A))),p(e,["functionDeclarations"],T)}const i=f(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=f(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const a=f(t,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const g=f(t,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=f(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(t,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function g2(t){const e={},n=f(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&p(e,["createTime"],i);const r=f(t,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function y2(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&p(e,["createTime"],i);const r=f(t,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function _2(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=f(t,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),n}function v2(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=f(t,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),n}function T2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","name"],je(t,i));const r=f(e,["config"]);return r!=null&&_2(r,n),n}function E2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["config"]);return r!=null&&v2(r,n),n}function A2(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=f(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const a=f(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const u=f(t,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const g=f(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const h=f(t,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=f(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=f(t,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const A=f(t,["numberOfImages"]);e!==void 0&&A!=null&&p(e,["parameters","sampleCount"],A);const C=f(t,["mode"]);return e!==void 0&&C!=null&&p(e,["parameters","mode"],C),n}function S2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],je(t,i));const r=f(e,["image"]);r!=null&&p(n,["instances[0]","image"],Si(r));const a=f(e,["upscaleFactor"]);a!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&A2(u,n),n}function x2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>bf(a))),p(e,["generatedImages"],r)}return e}function C2(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const i=f(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],_s(i));const r=f(t,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function b2(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],_s(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function R2(t){const e={},n=f(t,["image"]);n!=null&&p(e,["_self"],Si(n));const i=f(t,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function I2(t){const e={},n=f(t,["image"]);n!=null&&p(e,["image"],Rf(n));const i=f(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function w2(t){const e={},n=f(t,["image"]);n!=null&&p(e,["image"],Si(n));const i=f(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function tA(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const i=f(t,["videoBytes"]);i!=null&&p(e,["encodedVideo"],_s(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function nA(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const i=f(t,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],_s(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function N2(t,e){const n={},i=f(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),n}function D2(t){const e={},n=f(t,["config"]);return n!=null&&N2(n,e),e}function M2(t,e){const n={},i=f(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function P2(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&M2(i,e),e}function V2(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function U2(t,e){const n={},i=f(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),n}function L2(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],O2(u)),e}function k2(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=f(t,["fileName"]);i!=null&&p(e,["fileName"],i);const r=f(t,["config"]);return r!=null&&U2(r,e),e}function O2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&p(e,["parent"],i);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function B2(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function q2(t){const e={},n=f(t,["config"]);return n!=null&&B2(n,e),e}function F2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function iA(t,e){const n={},i=f(t,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const a=f(t,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(g=>g)),p(e,["customMetadata"],d)}const u=f(t,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),n}function G2(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=f(t,["config"]);return i!=null&&iA(i,e),e}function H2(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z2="Content-Type",Y2="X-Server-Timeout",J2="User-Agent",_p="x-goog-api-client",$2="1.34.0",K2=`google-genai-sdk/${$2}`,Q2="v1beta1",X2="v1beta";class W2{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Q2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:X2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>a.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&Z2(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await tT(r),new hp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await tT(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return vi(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Ie(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(_,{stream:!0});try{const P=JSON.parse(T);if("error"in P){const k=JSON.parse(JSON.stringify(P.error)),M=k.status,K=k.code,te=`got status: ${M}. ${JSON.stringify(P)}`;if(K>=400&&K<600)throw new xf({message:te,status:K})}}catch(P){if(P.name==="ApiError")throw P}u+=T;let A=-1,C=0;for(;;){A=-1,C=0;for(const M of g){const K=u.indexOf(M);K!==-1&&(A===-1||K<A)&&(A=K,C=M.length)}if(A===-1)break;const P=u.substring(0,A);u=u.substring(A+C);const k=P.trim();if(k.startsWith(d)){const M=k.substring(d.length).trim();try{const K=new Response(M,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ie(new hp(K))}catch(K){throw new Error(`exception parsing stream chunk ${M}. ${K}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=K2+" "+this.clientOptions.userAgentExtra;return e[J2]=n,e[_p]=n,e[z2]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(Y2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const d=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},h=this.getFileName(e),_=pe("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,h,g,n==null?void 0:n.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,n,i){var r;const a=this.clientOptions.uploader,u=await a.stat(n),d=String(u.size),g=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),T={};i!=null&&iA(i,T);const A=await this.fetchUploadUrl(h,d,g,_,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,A,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,a,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function tT(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new xf({message:r,status:n}):new Error(r)}}function Z2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const h=u[g],_=d[g];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[g]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[g]=h)}return d}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j2="mcp_used/unknown";let eN=!1;function oA(t){for(const e of t)if(tN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return eN}function sA(t){var e;const n=(e=t[_p])!==null&&e!==void 0?e:"";t[_p]=(n+` ${j2}`).trimStart()}function tN(t){return t!==null&&typeof t=="object"&&t instanceof om}function nN(t){return vi(this,arguments,function*(n,i=100){let r,a=0;for(;a<i;){const u=yield Ie(n.listTools({cursor:r}));for(const d of u.tools)yield yield Ie(d),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class om{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new om(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,g=(n=void 0,Ti(nN(_))),h;h=await g.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const T=r;u.push(T);const A=T.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=_}}catch(T){n={error:T}}finally{try{!d&&!e&&(i=g.return)&&await i.call(g)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Vb(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function iN(t,e,n){const i=new bb;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class oN{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=aN(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(Z=>{h=Z}),T=e.callbacks,A=function(){h({})},C=this.apiClient,P={onopen:A,onmessage:Z=>{iN(C,T.onmessage,Z)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(Z){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(Z){}},k=this.webSocketFactory.create(g,rN(u),P);k.connect(),await _;const te={setup:{model:je(this.apiClient,e.model)}};return k.send(JSON.stringify(te)),new sN(k,this.apiClient)}}class sN{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=DI(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=NI(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ia.PLAY)}pause(){this.sendPlaybackControl(ia.PAUSE)}stop(){this.sendPlaybackControl(ia.STOP)}resetContext(){this.sendPlaybackControl(ia.RESET_CONTEXT)}close(){this.conn.close()}}function rN(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function aN(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function uN(t,e,n){const i=new Cb;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const u=VI(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class cN{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new oN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&oA(e.config.tools)&&sA(T);const A=pN(T);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,_);else{const I=this.apiClient.getApiKey();let L="BidiGenerateContent",U="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",U="access_token"),_=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${U}=${I}`}let C=()=>{};const P=new Promise(I=>{C=I}),k=e.callbacks,M=function(){var I;(I=k==null?void 0:k.onopen)===null||I===void 0||I.call(k),C({})},K=this.apiClient,te={onopen:M,onmessage:I=>{uN(K,k.onmessage,I)},onerror:(n=k==null?void 0:k.onerror)!==null&&n!==void 0?n:function(I){},onclose:(i=k==null?void 0:k.onclose)!==null&&i!==void 0?i:function(I){}},Z=this.webSocketFactory.create(_,hN(A),te);Z.connect(),await P;let re=je(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const I=this.apiClient.getProject(),L=this.apiClient.getLocation();re=`projects/${I}/locations/${L}/`+re}let ce={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[tf.AUDIO]}:e.config.responseModalities=[tf.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const I of ue)if(this.isCallableTool(I)){const L=I;N.push(await L.tool())}else N.push(I);N.length>0&&(e.config.tools=N);const w={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ce=wI(this.apiClient,w):ce=II(this.apiClient,w),delete ce.config,Z.send(JSON.stringify(ce)),new dN(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const fN={turnComplete:!0};class dN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=ei(n.turns),e.isVertexAI()||(i=i.map(r=>Cf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(lN)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},fN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:PI(e)}:n={realtimeInput:MI(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function hN(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function pN(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nT=10;function iT(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ra(u)){r=!0;break}if(!r)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ra(t){return"callTool"in t&&typeof t.callTool=="function"}function mN(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ra(r)))!==null&&i!==void 0?i:!1}function oT(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(ra(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(r)}),n}function sT(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gN extends xo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,u,d;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!mN(n)||iT(n.config))return await this.generateContentInternal(g);const h=oT(n);if(h.length>0){const k=h.map(M=>`tools[${M}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let _,T;const A=ei(g.contents),C=(a=(r=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:nT;let P=0;for(;P<C&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const k=_.candidates[0].content,M=[];for(const K of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ra(K)){const Z=await K.callTool(_.functionCalls);M.push(...Z)}P++,T={role:"user",parts:M},g.contents=ei(g.contents),g.contents.push(k),g.contents.push(T),sT(g.config)&&(A.push(k),A.push(T))}return sT(g.config)&&(_.automaticFunctionCallingHistory=A),_},this.generateContentStream=async n=>{var i,r,a,u,d;if(this.maybeMoveToResponseJsonSchem(n),iT(n.config)){const T=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(T)}const g=oT(n);if(g.length>0){const T=g.map(A=>`tools[${A}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:u.push(g);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new ir(vo.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,a,u,d,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((g=(d=n.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async g=>ra(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&oA(e.config.tools)){const g=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),sA(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(ra(u)){const d=u,g=await d.tool();for(const h of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:nT;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(h,_,T){return vi(this,arguments,function*(){for(var A,C,P,k,M,K;d<a;){u&&(d++,u=!1);const ce=yield Ie(h.processParamsMaybeAddMcpUsage(T)),ue=yield Ie(h.generateContentStreamInternal(ce)),N=[],w=[];try{for(var te=!0,Z=(C=void 0,Ti(ue)),re;re=yield Ie(Z.next()),A=re.done,!A;te=!0){k=re.value,te=!1;const I=k;if(yield yield Ie(I),I.candidates&&(!((M=I.candidates[0])===null||M===void 0)&&M.content)){w.push(I.candidates[0].content);for(const L of(K=I.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(L.functionCall.name)){const U=yield Ie(_.get(L.functionCall.name).callTool([L.functionCall]));N.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(I){C={error:I}}finally{try{!te&&!A&&(P=Z.return)&&(yield Ie(P.call(Z)))}finally{if(C)throw C.error}}if(N.length>0){u=!0;const I=new Il;I.candidates=[{content:{role:"user",parts:N}}],yield yield Ie(I);const L=[];L.push(...w),L.push({role:"user",parts:N});const U=ei(T.contents).concat(L);T.contents=U}else break}})})(this,g,e)}async generateContentInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Zv(this.apiClient,e);return d=pe("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=eT(_),A=new Il;return Object.assign(A,T),A})}else{const h=Wv(this.apiClient,e);return d=pe("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=jv(_),A=new Il;return Object.assign(A,T),A})}}async generateContentStreamInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Zv(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return vi(this,arguments,function*(){var A,C,P,k;try{for(var M=!0,K=Ti(T),te;te=yield Ie(K.next()),A=te.done,!A;M=!0){k=te.value,M=!1;const Z=k,re=eT(yield Ie(Z.json()));re.sdkHttpResponse={headers:Z.headers};const ce=new Il;Object.assign(ce,re),yield yield Ie(ce)}}catch(Z){C={error:Z}}finally{try{!M&&!A&&(P=K.return)&&(yield Ie(P.call(K)))}finally{if(C)throw C.error}}})})}else{const h=Wv(this.apiClient,e);return d=pe("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return vi(this,arguments,function*(){var A,C,P,k;try{for(var M=!0,K=Ti(T),te;te=yield Ie(K.next()),A=te.done,!A;M=!0){k=te.value,M=!1;const Z=k,re=jv(yield Ie(Z.json()));re.sdkHttpResponse={headers:Z.headers};const ce=new Il;Object.assign(ce,re),yield yield Ie(ce)}}catch(Z){C={error:Z}}finally{try{!M&&!A&&(P=K.return)&&(yield Ie(P.call(K)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=cw(this.apiClient,e);return d=pe("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=dw(_),A=new Vv;return Object.assign(A,T),A})}else{const h=uw(this.apiClient,e);return d=pe("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=fw(_),A=new Vv;return Object.assign(A,T),A})}}async generateImagesInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Sw(this.apiClient,e);return d=pe("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=Cw(_),A=new Uv;return Object.assign(A,T),A})}else{const h=Aw(this.apiClient,e);return d=pe("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=xw(_),A=new Uv;return Object.assign(A,T),A})}}async editImageInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=sw(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=rw(g),_=new pb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=S2(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=x2(g),_=new mb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=o2(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=s2(g),_=new gb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=f2(this.apiClient,e);return a=pe("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=d2(g),_=new yb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Gw(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>yp(_))}else{const h=Fw(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>gp(_))}}async listInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Ww(this.apiClient,e);return d=pe("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=jw(_),A=new Lv;return Object.assign(A,T),A})}else{const h=Xw(this.apiClient,e);return d=pe("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=Zw(_),A=new Lv;return Object.assign(A,T),A})}}async update(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=E2(this.apiClient,e);return d=pe("{model}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>yp(_))}else{const h=T2(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>gp(_))}}async delete(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=tw(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=iw(_),A=new kv;return Object.assign(A,T),A})}else{const h=ew(this.apiClient,e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=nw(_),A=new kv;return Object.assign(A,T),A})}}async countTokens(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=WI(this.apiClient,e);return d=pe("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=jI(_),A=new Ov;return Object.assign(A,T),A})}else{const h=XI(this.apiClient,e);return d=pe("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=ZI(_),A=new Ov;return Object.assign(A,T),A})}}async computeTokens(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=HI(this.apiClient,e);return a=pe("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=zI(g),_=new _b;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Dw(this.apiClient,e);return d=pe("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=ww(_),A=new nf;return Object.assign(A,T),A})}else{const h=Nw(this.apiClient,e);return d=pe("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const T=Iw(_),A=new nf;return Object.assign(A,T),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yN extends xo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=lb(e);return d=pe("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=ab(e);return d=pe("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=eb(e);return a=pe("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _N(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function vN(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>IN(a))),p(e,["parts"],r)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function TN(t,e,n){const i={},r=f(e,["expireTime"]);n!==void 0&&r!=null&&p(n,["expireTime"],r);const a=f(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&p(n,["newSessionExpireTime"],a);const u=f(e,["uses"]);n!==void 0&&u!=null&&p(n,["uses"],u);const d=f(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&p(n,["bidiGenerateContentSetup"],RN(t,d));const g=f(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&p(n,["fieldMask"],g),i}function EN(t,e){const n={},i=f(e,["config"]);return i!=null&&p(n,["config"],TN(t,i,n)),n}function AN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function SN(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function CN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function bN(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(t,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],im(T));const A=f(t,["thinkingConfig"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","thinkingConfig"],A);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const P=f(t,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],vN(dn(P)));const k=f(t,["tools"]);if(e!==void 0&&k!=null){let ue=ya(k);Array.isArray(ue)&&(ue=ue.map(N=>NN(ga(N)))),p(e,["setup","tools"],ue)}const M=f(t,["sessionResumption"]);e!==void 0&&M!=null&&p(e,["setup","sessionResumption"],wN(M));const K=f(t,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const te=f(t,["outputAudioTranscription"]);e!==void 0&&te!=null&&p(e,["setup","outputAudioTranscription"],te);const Z=f(t,["realtimeInputConfig"]);e!==void 0&&Z!=null&&p(e,["setup","realtimeInputConfig"],Z);const re=f(t,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const ce=f(t,["proactivity"]);if(e!==void 0&&ce!=null&&p(e,["setup","proactivity"],ce),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function RN(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["setup","model"],je(t,i));const r=f(e,["config"]);return r!=null&&p(n,["config"],bN(r,n)),n}function IN(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],AN(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],SN(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&p(e,["inlineData"],_N(g));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const _=f(t,["thought"]);_!=null&&p(e,["thought"],_);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const A=f(t,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function wN(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NN(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=f(t,["computerUse"]);r!=null&&p(e,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],xN(d));const g=f(t,["googleSearch"]);g!=null&&p(e,["googleSearch"],CN(g));const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DN(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function MN(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=DN(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const g=[];a&&g.push(a),d.length>0&&g.push(...d),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class PN extends xo{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=EN(this.apiClient,e);a=pe("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=MN(d,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VN(t,e){const n={},i=f(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function UN(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&VN(i,e),e}function LN(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function kN(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function ON(t){const e={},n=f(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const i=f(t,["config"]);return i!=null&&kN(i,e),e}function BN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qN extends xo{constructor(e){super(),this.apiClient=e,this.list=async n=>new ir(vo.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=LN(e);return a=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=UN(e);r=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=ON(e);return a=pe("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=BN(g),_=new vb;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FN extends xo{constructor(e,n=new qN(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new ir(vo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=D2(e);return a=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=V2(e);return a=pe("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=P2(e);r=pe("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=q2(e);return a=pe("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=F2(g),_=new Tb;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=G2(e);return a=pe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=H2(g),_=new Eb;return Object.assign(_,h),_})}}async importFile(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=k2(e);return a=pe("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=L2(g),_=new Zp;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let rA=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return rA=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const GN=()=>rA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const Tp=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ti extends Error{}class vn extends ti{constructor(e,n,i,r){super(`${vn.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new If({message:i,cause:Tp(n)});const a=n;return e===400?new lA(e,a,i,r):e===401?new uA(e,a,i,r):e===403?new cA(e,a,i,r):e===404?new fA(e,a,i,r):e===409?new dA(e,a,i,r):e===422?new hA(e,a,i,r):e===429?new pA(e,a,i,r):e>=500?new mA(e,a,i,r):new vn(e,a,i,r)}}class Ep extends vn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class If extends vn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class aA extends If{constructor({message:e}={}){super({message:e??"Request timed out."})}}class lA extends vn{}class uA extends vn{}class cA extends vn{}class fA extends vn{}class dA extends vn{}class hA extends vn{}class pA extends vn{}class mA extends vn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const HN=/^[a-z][a-z0-9+.-]*:/i,zN=t=>HN.test(t);let Ap=t=>(Ap=Array.isArray,Ap(t));const YN=Ap;let JN=YN;const rT=JN;function $N(t){if(!t)return!0;for(const e in t)return!1;return!0}function KN(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const QN=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ti(`${t} must be an integer`);if(e<0)throw new ti(`${t} must be a positive integer`);return e},XN=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const WN=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ZN(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const jN=()=>{var t,e,n,i,r;const a=ZN();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wr,"X-Stainless-OS":lT(Deno.build.os),"X-Stainless-Arch":aT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wr,"X-Stainless-OS":lT((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":aT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=eD();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Wr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function eD(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const aT=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",lT=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Uc;const tD=()=>Uc??(Uc=jN());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nD(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function gA(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function iD(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return gA({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function yA(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function oD(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sD=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _A=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Zh(t,e,n){return _A(),new File(t,e??"unknown_file",n)}function rD(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const aD=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vA=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",lD=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&vA(t),uD=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function cD(t,e,n){if(_A(),t=await t,lD(t))return t instanceof File?t:Zh([await t.arrayBuffer()],t.name);if(uD(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Zh(await Sp(r),e,n)}const i=await Sp(t);if(e||(e=rD(t)),!(n!=null&&n.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Zh(i,e,n)}async function Sp(t){var e,n,i,r,a;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(vA(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(aD(t))try{for(var d=!0,g=Ti(t),h;h=await g.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const _=r;u.push(...await Sp(_))}}catch(_){n={error:_}}finally{try{!d&&!e&&(i=g.return)&&await i.call(g)}finally{if(n)throw n.error}}else{const _=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${fD(t)}`)}return u}function fD(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TA{constructor(e){this._client=e}}TA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EA(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const uT=Object.freeze(Object.create(null)),dD=(t=EA)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const a=[],u=n.reduce((_,T,A)=>{var C,P,k;/[?#]/.test(T)&&(r=!0);const M=i[A];let K=(r?encodeURIComponent:t)(""+M);return A!==i.length&&(M==null||typeof M=="object"&&M.toString===((k=Object.getPrototypeOf((P=Object.getPrototypeOf((C=M.hasOwnProperty)!==null&&C!==void 0?C:uT))!==null&&P!==void 0?P:uT))===null||k===void 0?void 0:k.toString))&&(K=M+"",a.push({start:_.length+T.length,length:K.length,error:`Value of type ${Object.prototype.toString.call(M).slice(8,-1)} is not a valid path parameter`})),_+T+(A===i.length?"":K)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((A,C)=>{const P=" ".repeat(C.start-_),k="^".repeat(C.length);return _=C.start+C.length,A+P+k},"");throw new ti(`Path parameters result in path with invalid segments:
${a.map(A=>A.error).join(`
`)}
${u}
${T}`)}return u}),Lc=dD(EA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AA extends TA{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,a=sf(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new ti("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new ti("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Lc`/${r}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Lc`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Lc`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const a=n??{},{api_version:u=this._client.apiVersion}=a,d=sf(a,["api_version"]);return this._client.get(Lc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}AA._key=Object.freeze(["interactions"]);class SA extends AA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hD(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let kc;function sm(t){let e;return(kc??(e=new globalThis.TextEncoder,kc=e.encode.bind(e)))(t)}let Oc;function cT(t){let e;return(Oc??(e=new globalThis.TextDecoder,Oc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?sm(e):e;this.buffer=hD([this.buffer,n]);const i=[];let r;for(;(r=pD(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(cT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=cT(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}wf.NEWLINE_CHARS=new Set([`
`,"\r"]);wf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function pD(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function mD(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rf={off:0,error:200,warn:300,info:400,debug:500},fT=(t,e,n)=>{if(t){if(KN(rf,t))return t;yn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(rf))}`)}};function Dl(){}function Bc(t,e,n){return!e||rf[t]>rf[n]?Dl:e[t].bind(e)}const gD={error:Dl,warn:Dl,info:Dl,debug:Dl};let dT=new WeakMap;function yn(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return gD;const r=dT.get(n);if(r&&r[0]===i)return r[1];const a={error:Bc("error",n,i),warn:Bc("warn",n,i),info:Bc("info",n,i),debug:Bc("debug",n,i)};return dT.set(n,[i,a]),a}const Qs=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oa{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const a=i?yn(i):console;function u(){return vi(this,arguments,function*(){var g,h,_,T;if(r)throw new ti("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let A=!1;try{try{for(var C=!0,P=Ti(yD(e,n)),k;k=yield Ie(P.next()),g=k.done,!g;C=!0){T=k.value,C=!1;const M=T;if(!A)if(M.data.startsWith("[DONE]")){A=!0;continue}else try{yield yield Ie(JSON.parse(M.data))}catch(K){throw a.error("Could not parse message into JSON:",M.data),a.error("From chunk:",M.raw),K}}}catch(M){h={error:M}}finally{try{!C&&!g&&(_=P.return)&&(yield Ie(_.call(P)))}finally{if(h)throw h.error}}A=!0}catch(M){if(vp(M))return yield Ie(void 0);throw M}finally{A||n.abort()}})}return new oa(u,n,i)}static fromReadableStream(e,n,i){let r=!1;function a(){return vi(this,arguments,function*(){var g,h,_,T;const A=new wf,C=yA(e);try{for(var P=!0,k=Ti(C),M;M=yield Ie(k.next()),g=M.done,!g;P=!0){T=M.value,P=!1;const K=T;for(const te of A.decode(K))yield yield Ie(te)}}catch(K){h={error:K}}finally{try{!P&&!g&&(_=k.return)&&(yield Ie(_.call(k)))}finally{if(h)throw h.error}}for(const K of A.flush())yield yield Ie(K)})}function u(){return vi(this,arguments,function*(){var g,h,_,T;if(r)throw new ti("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let A=!1;try{try{for(var C=!0,P=Ti(a()),k;k=yield Ie(P.next()),g=k.done,!g;C=!0){T=k.value,C=!1;const M=T;A||M&&(yield yield Ie(JSON.parse(M)))}}catch(M){h={error:M}}finally{try{!C&&!g&&(_=P.return)&&(yield Ie(_.call(P)))}finally{if(h)throw h.error}}A=!0}catch(M){if(vp(M))return yield Ie(void 0);throw M}finally{A||n.abort()}})}return new oa(u,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),n.push(u)}return a.shift()}});return[new oa(()=>r(e),this.controller,this.client),new oa(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return gA({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await n.next();if(a)return i.close();const u=sm(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function yD(t,e){return vi(this,arguments,function*(){var i,r,a,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ti("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ti("Attempted to iterate over a response with no body");const d=new vD,g=new wf,h=yA(t.body);try{for(var _=!0,T=Ti(_D(h)),A;A=yield Ie(T.next()),i=A.done,!i;_=!0){u=A.value,_=!1;const C=u;for(const P of g.decode(C)){const k=d.decode(P);k&&(yield yield Ie(k))}}}catch(C){r={error:C}}finally{try{!_&&!i&&(a=T.return)&&(yield Ie(a.call(T)))}finally{if(r)throw r.error}}for(const C of g.flush()){const P=d.decode(C);P&&(yield yield Ie(P))}})}function _D(t){return vi(this,arguments,function*(){var n,i,r,a;let u=new Uint8Array;try{for(var d=!0,g=Ti(t),h;h=yield Ie(g.next()),n=h.done,!n;d=!0){a=h.value,d=!1;const _=a;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?sm(_):_;let A=new Uint8Array(u.length+T.length);A.set(u),A.set(T,u.length),u=A;let C;for(;(C=mD(u))!==-1;)yield yield Ie(u.slice(0,C)),u=u.slice(C)}}catch(_){i={error:_}}finally{try{!d&&!n&&(r=g.return)&&(yield Ie(r.call(g)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Ie(u))})}class vD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=TD(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function TD(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ED(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return yn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):oa.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),h=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await n.json():await n.text()})();return yn(t).debug(`[${i}] response parsed`,Qs({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rm extends Promise{constructor(e,n,i=ED){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new rm(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xA=Symbol("brand.privateNullableHeaders");function*AD(t){if(!t)return;if(xA in t){const{values:i,nulls:r}=t;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():rT(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=rT(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const wl=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[a,u]of AD(i)){const d=a.toLowerCase();r.has(d)||(e.delete(a),r.add(d)),u===null?(e.delete(a),n.add(d)):(e.append(a,u),n.delete(d))}}return{[xA]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jh=t=>{var e,n,i,r,a,u;if(typeof globalThis.process<"u")return(i=(n=(e=K1)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var CA;class Nf{constructor(e){var n,i,r,a,u,d,g,{baseURL:h=jh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=jh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:T="v1beta"}=e,A=sf(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:_,apiVersion:T},A),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(i=C.timeout)!==null&&i!==void 0?i:Nf.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const P="warn";this.logLevel=P,this.logLevel=(u=(a=fT(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:fT(jh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:P,this.fetchOptions=C.fetchOptions,this.maxRetries=(d=C.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=C.fetch)!==null&&g!==void 0?g:nD(),this.encoder=sD,this._options=C,this.apiKey=_,this.apiVersion=T,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=wl([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return wl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return wl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new ti(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Wr}`}defaultIdempotencyKey(){return`stainless-node-retry-${GN()}`}makeStatusError(e,n,i,r){return vn.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=zN(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return $N(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new rm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,a,u;const d=await e,g=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=g),await this.prepareOptions(d);const{req:h,url:_,timeout:T}=await this.buildRequest(d,{retryCount:g-n});await this.prepareRequest(h,{url:_,options:d});const A="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=i===void 0?"":`, retryOf: ${i}`,P=Date.now();if(yn(this).debug(`[${A}] sending request`,Qs({retryOfRequestLogID:i,method:d.method,url:_,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new Ep;const k=new AbortController,M=await this.fetchWithTimeout(_,h,T,k).catch(Tp),K=Date.now();if(M instanceof globalThis.Error){const Z=`retrying, ${n} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new Ep;const re=vp(M)||/timed? ?out/i.test(String(M)+("cause"in M?String(M.cause):""));if(n)return yn(this).info(`[${A}] connection ${re?"timed out":"failed"} - ${Z}`),yn(this).debug(`[${A}] connection ${re?"timed out":"failed"} (${Z})`,Qs({retryOfRequestLogID:i,url:_,durationMs:K-P,message:M.message})),this.retryRequest(d,n,i??A);throw yn(this).info(`[${A}] connection ${re?"timed out":"failed"} - error; no more retries left`),yn(this).debug(`[${A}] connection ${re?"timed out":"failed"} (error; no more retries left)`,Qs({retryOfRequestLogID:i,url:_,durationMs:K-P,message:M.message})),re?new aA:new If({cause:M})}const te=`[${A}${C}] ${h.method} ${_} ${M.ok?"succeeded":"failed"} with status ${M.status} in ${K-P}ms`;if(!M.ok){const Z=await this.shouldRetry(M);if(n&&Z){const I=`retrying, ${n} attempts remaining`;return await oD(M.body),yn(this).info(`${te} - ${I}`),yn(this).debug(`[${A}] response error (${I})`,Qs({retryOfRequestLogID:i,url:M.url,status:M.status,headers:M.headers,durationMs:K-P})),this.retryRequest(d,n,i??A,M.headers)}const re=Z?"error; no more retries left":"error; not retryable";yn(this).info(`${te} - ${re}`);const ce=await M.text().catch(I=>Tp(I).message),ue=XN(ce),N=ue?void 0:ce;throw yn(this).debug(`[${A}] response error (${re})`,Qs({retryOfRequestLogID:i,url:M.url,status:M.status,headers:M.headers,message:N,durationMs:Date.now()-P})),this.makeStatusError(M.status,ue,N,M.headers)}return yn(this).info(te),yn(this).debug(`[${A}] response start`,Qs({retryOfRequestLogID:i,url:M.url,status:M.status,headers:M.headers,durationMs:K-P})),{response:M,options:d,controller:k,requestLogID:A,retryOfRequestLogID:i,startTime:P}}async fetchWithTimeout(e,n,i,r){const a=n||{},{signal:u,method:d}=a,g=sf(a,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);d&&(T.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var a;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const h=parseFloat(g);Number.isNaN(h)?u=Date.parse(g)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,h)}return await WN(u),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,a;const u=Object.assign({},e),{method:d,path:g,query:h,defaultBaseURL:_}=u,T=this.buildURL(g,h,_);"timeout"in u&&QN("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:A,body:C}=this.buildBody({options:u}),P=await this.buildHeaders({options:e,method:d,bodyHeaders:A,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:P},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=wl([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),tD()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=wl([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:iD(e)}:this.encoder({body:e,headers:i})}}Nf.DEFAULT_TIMEOUT=6e4;class Wt extends Nf{constructor(){super(...arguments),this.interactions=new SA(this)}}CA=Wt;Wt.GeminiNextGenAPIClient=CA;Wt.GeminiNextGenAPIClientError=ti;Wt.APIError=vn;Wt.APIConnectionError=If;Wt.APIConnectionTimeoutError=aA;Wt.APIUserAbortError=Ep;Wt.NotFoundError=fA;Wt.ConflictError=dA;Wt.RateLimitError=pA;Wt.BadRequestError=lA;Wt.AuthenticationError=uA;Wt.InternalServerError=mA;Wt.PermissionDeniedError=cA;Wt.UnprocessableEntityError=hA;Wt.toFile=cD;Wt.Interactions=SA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SD(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function xD(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function CD(t,e){const n={},i=f(t,["sdkHttpResponse"]);return i!=null&&p(n,["sdkHttpResponse"],i),n}function bD(t,e){const n={},i=f(t,["sdkHttpResponse"]);return i!=null&&p(n,["sdkHttpResponse"],i),n}function RD(t,e,n){const i={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(t,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(t,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(t,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function ID(t,e,n){const i={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const C=f(t,["validationDataset"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec"],hT(C))}else if(r==="PREFERENCE_TUNING"){const C=f(t,["validationDataset"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec"],hT(C))}const a=f(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=f(t,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=f(t,["epochCount"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(d==="PREFERENCE_TUNING"){const C=f(t,["epochCount"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let g=f(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const C=f(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(g==="PREFERENCE_TUNING"){const C=f(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=f(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=f(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=f(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let _=f(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const C=f(t,["adapterSize"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(_==="PREFERENCE_TUNING"){const C=f(t,["adapterSize"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(t,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const A=f(t,["beta"]);return e!==void 0&&A!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],A),i}function wD(t,e){const n={},i=f(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const r=f(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const a=f(t,["trainingDataset"]);a!=null&&qD(a);const u=f(t,["config"]);return u!=null&&RD(u,n),n}function ND(t,e){const n={},i=f(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const r=f(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const a=f(t,["trainingDataset"]);a!=null&&FD(a,n,e);const u=f(t,["config"]);return u!=null&&ID(u,n,e),n}function DD(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function MD(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function PD(t,e,n){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function VD(t,e,n){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function UD(t,e){const n={},i=f(t,["config"]);return i!=null&&PD(i,n),n}function LD(t,e){const n={},i=f(t,["config"]);return i!=null&&VD(i,n),n}function kD(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const a=f(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>bA(d))),p(n,["tuningJobs"],u)}return n}function OD(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const a=f(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>xp(d))),p(n,["tuningJobs"],u)}return n}function BD(t,e){const n={},i=f(t,["name"]);i!=null&&p(n,["model"],i);const r=f(t,["name"]);return r!=null&&p(n,["endpoint"],r),n}function qD(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),p(n,["examples","examples"],r)}return n}function FD(t,e,n){const i={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function bA(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const a=f(t,["state"]);a!=null&&p(n,["state"],GE(a));const u=f(t,["createTime"]);u!=null&&p(n,["createTime"],u);const d=f(t,["tuningTask","startTime"]);d!=null&&p(n,["startTime"],d);const g=f(t,["tuningTask","completeTime"]);g!=null&&p(n,["endTime"],g);const h=f(t,["updateTime"]);h!=null&&p(n,["updateTime"],h);const _=f(t,["description"]);_!=null&&p(n,["description"],_);const T=f(t,["baseModel"]);T!=null&&p(n,["baseModel"],T);const A=f(t,["_self"]);return A!=null&&p(n,["tunedModel"],BD(A)),n}function xp(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const a=f(t,["state"]);a!=null&&p(n,["state"],GE(a));const u=f(t,["createTime"]);u!=null&&p(n,["createTime"],u);const d=f(t,["startTime"]);d!=null&&p(n,["startTime"],d);const g=f(t,["endTime"]);g!=null&&p(n,["endTime"],g);const h=f(t,["updateTime"]);h!=null&&p(n,["updateTime"],h);const _=f(t,["error"]);_!=null&&p(n,["error"],_);const T=f(t,["description"]);T!=null&&p(n,["description"],T);const A=f(t,["baseModel"]);A!=null&&p(n,["baseModel"],A);const C=f(t,["tunedModel"]);C!=null&&p(n,["tunedModel"],C);const P=f(t,["preTunedModel"]);P!=null&&p(n,["preTunedModel"],P);const k=f(t,["supervisedTuningSpec"]);k!=null&&p(n,["supervisedTuningSpec"],k);const M=f(t,["preferenceOptimizationSpec"]);M!=null&&p(n,["preferenceOptimizationSpec"],M);const K=f(t,["tuningDataStats"]);K!=null&&p(n,["tuningDataStats"],K);const te=f(t,["encryptionSpec"]);te!=null&&p(n,["encryptionSpec"],te);const Z=f(t,["partnerModelTuningSpec"]);Z!=null&&p(n,["partnerModelTuningSpec"],Z);const re=f(t,["customBaseModel"]);re!=null&&p(n,["customBaseModel"],re);const ce=f(t,["experiment"]);ce!=null&&p(n,["experiment"],ce);const ue=f(t,["labels"]);ue!=null&&p(n,["labels"],ue);const N=f(t,["outputUri"]);N!=null&&p(n,["outputUri"],N);const w=f(t,["pipelineJob"]);w!=null&&p(n,["pipelineJob"],w);const I=f(t,["serviceAccount"]);I!=null&&p(n,["serviceAccount"],I);const L=f(t,["tunedModelDisplayName"]);L!=null&&p(n,["tunedModelDisplayName"],L);const U=f(t,["veoTuningSpec"]);return U!=null&&p(n,["veoTuningSpec"],U),n}function GD(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const a=f(t,["metadata"]);a!=null&&p(n,["metadata"],a);const u=f(t,["done"]);u!=null&&p(n,["done"],u);const d=f(t,["error"]);return d!=null&&p(n,["error"],d),n}function hT(t,e){const n={},i=f(t,["gcsUri"]);i!=null&&p(n,["validationDatasetUri"],i);const r=f(t,["vertexDatasetResource"]);return r!=null&&p(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HD extends xo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new ir(vo.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:dp.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=MD(e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>xp(_))}else{const h=DD(e);return d=pe("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>bA(_))}}async listInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=LD(e);return d=pe("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=OD(_),A=new Bv;return Object.assign(A,T),A})}else{const h=UD(e);return d=pe("tunedModels",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=kD(_),A=new Bv;return Object.assign(A,T),A})}}async cancel(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=xD(e);return d=pe("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=bD(_),A=new qv;return Object.assign(A,T),A})}else{const h=SD(e);return d=pe("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=CD(_),A=new qv;return Object.assign(A,T),A})}}async tuneInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=ND(e,e);return a=pe("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>xp(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wD(e);return a=pe("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>GD(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zD{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const YD=1024*1024*8,JD=3,$D=1e3,KD=2,af="x-goog-upload-status";async function QD(t,e,n){var i;const r=await RA(t,e,n),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[af])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function XD(t,e,n){var i;const r=await RA(t,e,n),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[af])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=LE(a),d=new jp;return Object.assign(d,u),d}async function RA(t,e,n){var i,r;let a=0,u=0,d=new hp(new Response),g="upload";for(a=t.size;u<a;){const h=Math.min(YD,a-u),_=t.slice(u,u+h);u+h>=a&&(g+=", finalize");let T=0,A=$D;for(;T<JD&&(d=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[af]));)T++,await ZD(A),A=A*KD;if(u+=h,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[af])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function WD(t){return{size:t.size,type:t.type}}function ZD(t){return new Promise(e=>setTimeout(e,t))}class jD{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await QD(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await XD(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await WD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eM{create(e,n,i){return new tM(e,n,i)}}class tM{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pT="x-goog-api-key";class nM{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(pT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(pT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iM="gl-node/";class oM{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Wt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=Z1(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new nM(this.apiKey);this.apiClient=new W2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:iM+"web",uploader:new jD,downloader:new zD}),this.models=new gN(this.apiClient),this.live=new cN(this.apiClient,r,new eM),this.batches=new RR(this.apiClient),this.chats=new lI(this.models,this.apiClient),this.caches=new sI(this.apiClient),this.files=new _I(this.apiClient),this.operations=new yN(this.apiClient),this.authTokens=new PN(this.apiClient),this.tunings=new HD(this.apiClient),this.fileSearchStores=new FN(this.apiClient)}}async function sM(t,e,n,i=[]){try{const r=new oM({apiKey:"AIzaSyBKPXWnz3kfrVopkcKKUUMoZa6ms42x_eY"}),a=i.filter(T=>T==="Juval"||T==="Theo"),d=`You are a warm, loving family storyteller documenting the life of two brothers, Juval and Theo.
    
    CHARACTER CONTEXT:
    - Juval: The older brother. He's curious, protective, and learning new things every day.
    - Theo: The younger brother. He's energetic, exploring the world with wide eyes, and often imitating Juval.
    
    ${a.length>0?`This memory features: ${a.join(" and ")}.`:"The photos show the daily lives of two brothers, Juval and Theo."}
    ${n?`CONTEXT FROM THE PARENT: "${n}"`:""}

    Analyze the photos and generate a heartfelt, realistic scrapbook entry:
    1. A short, sweet title (1-3 words).
    2. A warm, funny, or observational sentence about this specific family moment.
    
    CRITICAL RULES:
    - Keep it realistic. Avoid "superhero" or "spy" themes. Focus on "growing up," "playing," "learning," or "brotherly love."
    - DO NOT mention a boy if he is not present or tagged.
    
    Provide the output in BOTH English and Spanish.
    The parent writing this is: ${e}.`,g=t.map(T=>({inlineData:{mimeType:"image/jpeg",data:T.split(",")[1]}})),h=await r.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[...g,{text:d}]},config:{responseMimeType:"application/json",responseSchema:{type:_n.OBJECT,properties:{en:{type:_n.OBJECT,properties:{title:{type:_n.STRING},caption:{type:_n.STRING}},required:["title","caption"]},es:{type:_n.OBJECT,properties:{title:{type:_n.STRING},caption:{type:_n.STRING}},required:["title","caption"]}},required:["en","es"]}}});return JSON.parse(h.text||"{}")}catch(r){return console.error("Gemini Generation Error:",r),{en:{title:"A Special Moment",caption:"Capturing another beautiful day in our lives."},es:{title:"Un Momento Especial",caption:"Capturando otro hermoso da en nuestras vidas."}}}}const rM=({pin:t,onPinChange:e,maxLength:n=4,lang:i,autoSubmit:r=!0,onSubmit:a})=>{const u=d=>{if(d==="C")e("");else if(d==="")e(t.slice(0,-1));else if(t.length<n){const g=t+d;e(g),r&&g.length===n&&a&&requestAnimationFrame(()=>{setTimeout(()=>a(),100)})}};return G.jsxs("div",{className:"w-full",children:[G.jsx("div",{className:"flex justify-center gap-6 mb-12",children:[...Array(n)].map((d,g)=>G.jsx("div",{className:`w-10 h-10 rounded-full border-[8px] border-slate-800 transition-all ${t.length>g?"bg-slate-800 scale-125":"bg-white"}`},g))}),G.jsx("div",{className:"grid grid-cols-3 gap-6 max-w-sm mx-auto",children:["1","2","3","4","5","6","7","8","9","C","0",""].map(d=>G.jsx("button",{onClick:()=>u(d),className:"aspect-square bg-white border-[6px] border-slate-800 shadow-[4px_4px_0px_#1e293b] flex items-center justify-center text-4xl font-black text-slate-800 hover:bg-amber-400 active:translate-y-1 transition-all rounded-[24px]",children:d},d))})]})},aM={};var Cp=null;function lM(t){try{return crypto.getRandomValues(new Uint8Array(t))}catch{}try{return aM.randomBytes(t)}catch{}if(!Cp)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Cp(t)}function uM(t){Cp=t}function am(t,e){if(t=t||lm,typeof t!="number")throw Error("Illegal arguments: "+typeof t+", "+typeof e);t<4?t=4:t>31&&(t=31);var n=[];return n.push("$2b$"),t<10&&n.push("0"),n.push(t.toString()),n.push("$"),n.push(lf(lM(Gl),Gl)),n.join("")}function IA(t,e,n){if(typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),typeof t>"u")t=lm;else if(typeof t!="number")throw Error("illegal arguments: "+typeof t);function i(r){gi(function(){try{r(null,am(t))}catch(a){r(a)}})}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);i(n)}else return new Promise(function(r,a){i(function(u,d){if(u){a(u);return}r(d)})})}function wA(t,e){if(typeof e>"u"&&(e=lm),typeof e=="number"&&(e=am(e)),typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return bp(t,e)}function NA(t,e,n,i){function r(a){typeof t=="string"&&typeof e=="number"?IA(e,function(u,d){bp(t,d,a,i)}):typeof t=="string"&&typeof e=="string"?bp(t,e,a,i):gi(a.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)))}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(a,u){r(function(d,g){if(d){u(d);return}a(g)})})}function DA(t,e){for(var n=t.length^e.length,i=0;i<t.length;++i)n|=t.charCodeAt(i)^e.charCodeAt(i);return n===0}function cM(t,e){if(typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return e.length!==60?!1:DA(wA(t,e.substring(0,e.length-31)),e)}function fM(t,e,n,i){function r(a){if(typeof t!="string"||typeof e!="string"){gi(a.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)));return}if(e.length!==60){gi(a.bind(this,null,!1));return}NA(t,e.substring(0,29),function(u,d){u?a(u):a(null,DA(d,e))},i)}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(a,u){r(function(d,g){if(d){u(d);return}a(g)})})}function dM(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return parseInt(t.split("$")[2],10)}function hM(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);if(t.length!==60)throw Error("Illegal hash length: "+t.length+" != 60");return t.substring(0,29)}function pM(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return MA(t)>72}var gi=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;function MA(t){for(var e=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?e+=1:n<2048?e+=2:(n&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320?(++i,e+=4):e+=3;return e}function mM(t){for(var e=0,n,i,r=new Array(MA(t)),a=0,u=t.length;a<u;++a)n=t.charCodeAt(a),n<128?r[e++]=n:n<2048?(r[e++]=n>>6|192,r[e++]=n&63|128):(n&64512)===55296&&((i=t.charCodeAt(a+1))&64512)===56320?(n=65536+((n&1023)<<10)+(i&1023),++a,r[e++]=n>>18|240,r[e++]=n>>12&63|128,r[e++]=n>>6&63|128,r[e++]=n&63|128):(r[e++]=n>>12|224,r[e++]=n>>6&63|128,r[e++]=n&63|128);return r}var Xr="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),os=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function lf(t,e){var n=0,i=[],r,a;if(e<=0||e>t.length)throw Error("Illegal len: "+e);for(;n<e;){if(r=t[n++]&255,i.push(Xr[r>>2&63]),r=(r&3)<<4,n>=e){i.push(Xr[r&63]);break}if(a=t[n++]&255,r|=a>>4&15,i.push(Xr[r&63]),r=(a&15)<<2,n>=e){i.push(Xr[r&63]);break}a=t[n++]&255,r|=a>>6&3,i.push(Xr[r&63]),i.push(Xr[a&63])}return i.join("")}function PA(t,e){var n=0,i=t.length,r=0,a=[],u,d,g,h,_,T;if(e<=0)throw Error("Illegal len: "+e);for(;n<i-1&&r<e&&(T=t.charCodeAt(n++),u=T<os.length?os[T]:-1,T=t.charCodeAt(n++),d=T<os.length?os[T]:-1,!(u==-1||d==-1||(_=u<<2>>>0,_|=(d&48)>>4,a.push(String.fromCharCode(_)),++r>=e||n>=i)||(T=t.charCodeAt(n++),g=T<os.length?os[T]:-1,g==-1)||(_=(d&15)<<4>>>0,_|=(g&60)>>2,a.push(String.fromCharCode(_)),++r>=e||n>=i)));)T=t.charCodeAt(n++),h=T<os.length?os[T]:-1,_=(g&3)<<6>>>0,_|=h,a.push(String.fromCharCode(_)),++r;var A=[];for(n=0;n<r;n++)A.push(a[n].charCodeAt(0));return A}var Gl=16,lm=10,gM=16,yM=100,mT=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],gT=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],VA=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Hl(t,e,n,i){var r,a=t[e],u=t[e+1];return a^=n[0],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[1],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[2],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[3],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[4],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[5],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[6],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[7],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[8],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[9],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[10],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[11],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[12],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[13],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[14],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[15],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[16],t[e]=u^n[gM+1],t[e+1]=a,t}function Zr(t,e){for(var n=0,i=0;n<4;++n)i=i<<8|t[e]&255,e=(e+1)%t.length;return{key:i,offp:e}}function yT(t,e,n){for(var i=0,r=[0,0],a=e.length,u=n.length,d,g=0;g<a;g++)d=Zr(t,i),i=d.offp,e[g]=e[g]^d.key;for(g=0;g<a;g+=2)r=Hl(r,0,e,n),e[g]=r[0],e[g+1]=r[1];for(g=0;g<u;g+=2)r=Hl(r,0,e,n),n[g]=r[0],n[g+1]=r[1]}function _M(t,e,n,i){for(var r=0,a=[0,0],u=n.length,d=i.length,g,h=0;h<u;h++)g=Zr(e,r),r=g.offp,n[h]=n[h]^g.key;for(r=0,h=0;h<u;h+=2)g=Zr(t,r),r=g.offp,a[0]^=g.key,g=Zr(t,r),r=g.offp,a[1]^=g.key,a=Hl(a,0,n,i),n[h]=a[0],n[h+1]=a[1];for(h=0;h<d;h+=2)g=Zr(t,r),r=g.offp,a[0]^=g.key,g=Zr(t,r),r=g.offp,a[1]^=g.key,a=Hl(a,0,n,i),i[h]=a[0],i[h+1]=a[1]}function _T(t,e,n,i,r){var a=VA.slice(),u=a.length,d;if(n<4||n>31)if(d=Error("Illegal number of rounds (4-31): "+n),i){gi(i.bind(this,d));return}else throw d;if(e.length!==Gl)if(d=Error("Illegal salt length: "+e.length+" != "+Gl),i){gi(i.bind(this,d));return}else throw d;n=1<<n>>>0;var g,h,_=0,T;typeof Int32Array=="function"?(g=new Int32Array(mT),h=new Int32Array(gT)):(g=mT.slice(),h=gT.slice()),_M(e,t,g,h);function A(){if(r&&r(_/n),_<n)for(var P=Date.now();_<n&&(_=_+1,yT(t,g,h),yT(e,g,h),!(Date.now()-P>yM)););else{for(_=0;_<64;_++)for(T=0;T<u>>1;T++)Hl(a,T<<1,g,h);var k=[];for(_=0;_<u;_++)k.push((a[_]>>24&255)>>>0),k.push((a[_]>>16&255)>>>0),k.push((a[_]>>8&255)>>>0),k.push((a[_]&255)>>>0);if(i){i(null,k);return}else return k}i&&gi(A)}if(typeof i<"u")A();else for(var C;;)if(typeof(C=A())<"u")return C||[]}function bp(t,e,n,i){var r;if(typeof t!="string"||typeof e!="string")if(r=Error("Invalid string / salt: Not a string"),n){gi(n.bind(this,r));return}else throw r;var a,u;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(r=Error("Invalid salt version: "+e.substring(0,2)),n){gi(n.bind(this,r));return}else throw r;if(e.charAt(2)==="$")a="\0",u=3;else{if(a=e.charAt(2),a!=="a"&&a!=="b"&&a!=="y"||e.charAt(3)!=="$")if(r=Error("Invalid salt revision: "+e.substring(2,4)),n){gi(n.bind(this,r));return}else throw r;u=4}if(e.charAt(u+2)>"$")if(r=Error("Missing salt rounds"),n){gi(n.bind(this,r));return}else throw r;var d=parseInt(e.substring(u,u+1),10)*10,g=parseInt(e.substring(u+1,u+2),10),h=d+g,_=e.substring(u+3,u+25);t+=a>="a"?"\0":"";var T=mM(t),A=PA(_,Gl);function C(P){var k=[];return k.push("$2"),a>="a"&&k.push(a),k.push("$"),h<10&&k.push("0"),k.push(h.toString()),k.push("$"),k.push(lf(A,A.length)),k.push(lf(P,VA.length*4-1)),k.join("")}if(typeof n>"u")return C(_T(T,A,h));_T(T,A,h,function(P,k){P?n(P,null):n(null,C(k))},i)}function vM(t,e){return lf(t,e)}function TM(t,e){return PA(t,e)}const UA={setRandomFallback:uM,genSaltSync:am,genSalt:IA,hashSync:wA,hash:NA,compareSync:cM,compare:fM,getRounds:dM,getSalt:hM,truncates:pM,encodeBase64:vM,decodeBase64:TM},EM=()=>{};var vT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},AM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],u=t[n++],d=t[n++],g=((r&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|u&63)}}return e.join("")},kA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const a=t[r],u=r+1<t.length,d=u?t[r+1]:0,g=r+2<t.length,h=g?t[r+2]:0,_=a>>2,T=(a&3)<<4|d>>4;let A=(d&15)<<2|h>>6,C=h&63;g||(C=64,u||(A=64)),i.push(n[_],n[T],n[A],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):AM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],d=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const T=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||d==null||h==null||T==null)throw new SM;const A=a<<2|d>>4;if(i.push(A),h!==64){const C=d<<4&240|h>>2;if(i.push(C),T!==64){const P=h<<6&192|T;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xM=function(t){const e=LA(t);return kA.encodeByteArray(e,!0)},uf=function(t){return xM(t).replace(/\./g,"")},CM=function(t){try{return kA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=()=>bM().__FIREBASE_DEFAULTS__,IM=()=>{if(typeof process>"u"||typeof vT>"u")return;const t=vT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&CM(t[1]);return e&&JSON.parse(e)},um=()=>{try{return EM()||RM()||IM()||wM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NM=t=>{var e,n;return(n=(e=um())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},OA=t=>{const e=NM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},BA=()=>{var t;return(t=um())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function qA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[uf(JSON.stringify(n)),uf(JSON.stringify(u)),""].join(".")}const Ll={};function MM(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ll))Ll[e]?t.emulator.push(e):t.prod.push(e);return t}function PM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let TT=!1;function GA(t,e){if(typeof window>"u"||typeof document>"u"||!jl(window.location.host)||Ll[t]===e||Ll[t]||TT)return;Ll[t]=e;function n(A){return`__firebase__banner__${A}`}const i="__firebase__banner",a=MM().prod.length>0;function u(){const A=document.getElementById(i);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,C){A.setAttribute("width","24"),A.setAttribute("id",C),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function h(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{TT=!0,u()},A}function _(A,C){A.setAttribute("id",C),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=PM(i),C=n("text"),P=document.getElementById(C)||document.createElement("span"),k=n("learnmore"),M=document.getElementById(k)||document.createElement("a"),K=n("preprendIcon"),te=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Z=A.element;d(Z),_(M,k);const re=h();g(te,K),Z.append(te,P,M,re),document.body.appendChild(Z)}a?(P.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UM(){var e;const t=(e=um())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LM(){return!UM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kM(){try{return typeof indexedDB=="object"}catch{return!1}}function OM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM="FirebaseError";class or extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=BM,Object.setPrototypeOf(this,or.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,HA.prototype.create)}}class HA{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],u=a?qM(a,i):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new or(r,d,i)}}function qM(t,e){return t.replace(FM,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const FM=/\{\$([^}]+)}/g;function cf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const a=t[r],u=e[r];if(ET(a)&&ET(u)){if(!cf(a,u))return!1}else if(a!==u)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function ET(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(t){return t&&t._delegate?t._delegate:t}class ua{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new DM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zM(e))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=Xs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Xs){return this.instances.has(e)}getOptions(e=Xs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:HM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Xs){return this.component?this.component.multipleInstances?e:Xs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HM(t){return t===Xs?void 0:t}function zM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Xe||(Xe={}));const JM={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},$M=Xe.INFO,KM={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},QM=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=KM[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zA{constructor(e){this.name=e,this._logLevel=$M,this._logHandler=QM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const XM=(t,e)=>e.some(n=>t instanceof n);let AT,ST;function WM(){return AT||(AT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZM(){return ST||(ST=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YA=new WeakMap,Rp=new WeakMap,JA=new WeakMap,ep=new WeakMap,cm=new WeakMap;function jM(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(as(t.result)),r()},u=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&YA.set(n,t)}).catch(()=>{}),cm.set(e,t),e}function e4(t){if(Rp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),r()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Rp.set(t,e)}let Ip={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||JA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return as(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function t4(t){Ip=t(Ip)}function n4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(tp(this),e,...n);return JA.set(i,e.sort?e.sort():[e]),as(i)}:ZM().includes(t)?function(...e){return t.apply(tp(this),e),as(YA.get(this))}:function(...e){return as(t.apply(tp(this),e))}}function i4(t){return typeof t=="function"?n4(t):(t instanceof IDBTransaction&&e4(t),XM(t,WM())?new Proxy(t,Ip):t)}function as(t){if(t instanceof IDBRequest)return jM(t);if(ep.has(t))return ep.get(t);const e=i4(t);return e!==t&&(ep.set(t,e),cm.set(e,t)),e}const tp=t=>cm.get(t);function o4(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(t,e),d=as(u);return i&&u.addEventListener("upgradeneeded",g=>{i(as(u.result),g.oldVersion,g.newVersion,as(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{a&&g.addEventListener("close",()=>a()),r&&g.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const s4=["get","getKey","getAll","getAllKeys","count"],r4=["put","add","delete","clear"],np=new Map;function xT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(np.get(e))return np.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=r4.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||s4.includes(n)))return;const a=async function(u,...d){const g=this.transaction(u,r?"readwrite":"readonly");let h=g.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),r&&g.done]))[0]};return np.set(e,a),a}t4(t=>({...t,get:(e,n,i)=>xT(e,n)||t.get(e,n,i),has:(e,n)=>!!xT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(l4(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function l4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wp="@firebase/app",CT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To=new zA("@firebase/app"),u4="@firebase/app-compat",c4="@firebase/analytics-compat",f4="@firebase/analytics",d4="@firebase/app-check-compat",h4="@firebase/app-check",p4="@firebase/auth",m4="@firebase/auth-compat",g4="@firebase/database",y4="@firebase/data-connect",_4="@firebase/database-compat",v4="@firebase/functions",T4="@firebase/functions-compat",E4="@firebase/installations",A4="@firebase/installations-compat",S4="@firebase/messaging",x4="@firebase/messaging-compat",C4="@firebase/performance",b4="@firebase/performance-compat",R4="@firebase/remote-config",I4="@firebase/remote-config-compat",w4="@firebase/storage",N4="@firebase/storage-compat",D4="@firebase/firestore",M4="@firebase/ai",P4="@firebase/firestore-compat",V4="firebase",U4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="[DEFAULT]",L4={[wp]:"fire-core",[u4]:"fire-core-compat",[f4]:"fire-analytics",[c4]:"fire-analytics-compat",[h4]:"fire-app-check",[d4]:"fire-app-check-compat",[p4]:"fire-auth",[m4]:"fire-auth-compat",[g4]:"fire-rtdb",[y4]:"fire-data-connect",[_4]:"fire-rtdb-compat",[v4]:"fire-fn",[T4]:"fire-fn-compat",[E4]:"fire-iid",[A4]:"fire-iid-compat",[S4]:"fire-fcm",[x4]:"fire-fcm-compat",[C4]:"fire-perf",[b4]:"fire-perf-compat",[R4]:"fire-rc",[I4]:"fire-rc-compat",[w4]:"fire-gcs",[N4]:"fire-gcs-compat",[D4]:"fire-fst",[P4]:"fire-fst-compat",[M4]:"fire-vertex","fire-js":"fire-js",[V4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff=new Map,k4=new Map,Dp=new Map;function bT(t,e){try{t.container.addComponent(e)}catch(n){To.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zl(t){const e=t.name;if(Dp.has(e))return To.debug(`There were multiple attempts to register component ${e}.`),!1;Dp.set(e,t);for(const n of ff.values())bT(n,t);for(const n of k4.values())bT(n,t);return!0}function $A(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function KA(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ls=new HA("app","Firebase",O4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ua("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA=U4;function XA(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Np,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw ls.create("bad-app-name",{appName:String(r)});if(n||(n=BA()),!n)throw ls.create("no-options");const a=ff.get(r);if(a){if(cf(n,a.options)&&cf(i,a.config))return a;throw ls.create("duplicate-app",{appName:r})}const u=new YM(r);for(const g of Dp.values())u.addComponent(g);const d=new B4(n,i,u);return ff.set(r,d),d}function WA(t=Np){const e=ff.get(t);if(!e&&t===Np&&BA())return XA();if(!e)throw ls.create("no-app",{appName:t});return e}function us(t,e,n){let i=L4[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),To.warn(u.join(" "));return}zl(new ua(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q4="firebase-heartbeat-database",F4=1,Yl="firebase-heartbeat-store";let ip=null;function ZA(){return ip||(ip=o4(q4,F4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Yl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ls.create("idb-open",{originalErrorMessage:t.message})})),ip}async function G4(t){try{const n=(await ZA()).transaction(Yl),i=await n.objectStore(Yl).get(jA(t));return await n.done,i}catch(e){if(e instanceof or)To.warn(e.message);else{const n=ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});To.warn(n.message)}}}async function RT(t,e){try{const i=(await ZA()).transaction(Yl,"readwrite");await i.objectStore(Yl).put(e,jA(t)),await i.done}catch(n){if(n instanceof or)To.warn(n.message);else{const i=ls.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});To.warn(i.message)}}}function jA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=1024,z4=30;class Y4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $4(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=IT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>z4){const u=K4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){To.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=IT(),{heartbeatsToSend:i,unsentEntries:r}=J4(this._heartbeatsCache.heartbeats),a=uf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return To.warn(n),""}}}function IT(){return new Date().toISOString().substring(0,10)}function J4(t,e=H4){const n=[];let i=t.slice();for(const r of t){const a=n.find(u=>u.agent===r.agent);if(a){if(a.dates.push(r.date),wT(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),wT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class $4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kM()?OM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await G4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return RT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return RT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function wT(t){return uf(JSON.stringify({version:2,heartbeats:t})).length}function K4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t){zl(new ua("platform-logger",e=>new a4(e),"PRIVATE")),zl(new ua("heartbeat",e=>new Y4(e),"PRIVATE")),us(wp,CT,t),us(wp,CT,"esm2020"),us("fire-js","")}Q4("");var NT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cs,eS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,w){function I(){}I.prototype=w.prototype,N.F=w.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(L,U,q){for(var D=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)D[ke-2]=arguments[ke];return w.prototype[U].apply(L,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,w,I){I||(I=0);const L=Array(16);if(typeof w=="string")for(var U=0;U<16;++U)L[U]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(U=0;U<16;++U)L[U]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=N.g[0],I=N.g[1],U=N.g[2];let q=N.g[3],D;D=w+(q^I&(U^q))+L[0]+3614090360&4294967295,w=I+(D<<7&4294967295|D>>>25),D=q+(U^w&(I^U))+L[1]+3905402710&4294967295,q=w+(D<<12&4294967295|D>>>20),D=U+(I^q&(w^I))+L[2]+606105819&4294967295,U=q+(D<<17&4294967295|D>>>15),D=I+(w^U&(q^w))+L[3]+3250441966&4294967295,I=U+(D<<22&4294967295|D>>>10),D=w+(q^I&(U^q))+L[4]+4118548399&4294967295,w=I+(D<<7&4294967295|D>>>25),D=q+(U^w&(I^U))+L[5]+1200080426&4294967295,q=w+(D<<12&4294967295|D>>>20),D=U+(I^q&(w^I))+L[6]+2821735955&4294967295,U=q+(D<<17&4294967295|D>>>15),D=I+(w^U&(q^w))+L[7]+4249261313&4294967295,I=U+(D<<22&4294967295|D>>>10),D=w+(q^I&(U^q))+L[8]+1770035416&4294967295,w=I+(D<<7&4294967295|D>>>25),D=q+(U^w&(I^U))+L[9]+2336552879&4294967295,q=w+(D<<12&4294967295|D>>>20),D=U+(I^q&(w^I))+L[10]+4294925233&4294967295,U=q+(D<<17&4294967295|D>>>15),D=I+(w^U&(q^w))+L[11]+2304563134&4294967295,I=U+(D<<22&4294967295|D>>>10),D=w+(q^I&(U^q))+L[12]+1804603682&4294967295,w=I+(D<<7&4294967295|D>>>25),D=q+(U^w&(I^U))+L[13]+4254626195&4294967295,q=w+(D<<12&4294967295|D>>>20),D=U+(I^q&(w^I))+L[14]+2792965006&4294967295,U=q+(D<<17&4294967295|D>>>15),D=I+(w^U&(q^w))+L[15]+1236535329&4294967295,I=U+(D<<22&4294967295|D>>>10),D=w+(U^q&(I^U))+L[1]+4129170786&4294967295,w=I+(D<<5&4294967295|D>>>27),D=q+(I^U&(w^I))+L[6]+3225465664&4294967295,q=w+(D<<9&4294967295|D>>>23),D=U+(w^I&(q^w))+L[11]+643717713&4294967295,U=q+(D<<14&4294967295|D>>>18),D=I+(q^w&(U^q))+L[0]+3921069994&4294967295,I=U+(D<<20&4294967295|D>>>12),D=w+(U^q&(I^U))+L[5]+3593408605&4294967295,w=I+(D<<5&4294967295|D>>>27),D=q+(I^U&(w^I))+L[10]+38016083&4294967295,q=w+(D<<9&4294967295|D>>>23),D=U+(w^I&(q^w))+L[15]+3634488961&4294967295,U=q+(D<<14&4294967295|D>>>18),D=I+(q^w&(U^q))+L[4]+3889429448&4294967295,I=U+(D<<20&4294967295|D>>>12),D=w+(U^q&(I^U))+L[9]+568446438&4294967295,w=I+(D<<5&4294967295|D>>>27),D=q+(I^U&(w^I))+L[14]+3275163606&4294967295,q=w+(D<<9&4294967295|D>>>23),D=U+(w^I&(q^w))+L[3]+4107603335&4294967295,U=q+(D<<14&4294967295|D>>>18),D=I+(q^w&(U^q))+L[8]+1163531501&4294967295,I=U+(D<<20&4294967295|D>>>12),D=w+(U^q&(I^U))+L[13]+2850285829&4294967295,w=I+(D<<5&4294967295|D>>>27),D=q+(I^U&(w^I))+L[2]+4243563512&4294967295,q=w+(D<<9&4294967295|D>>>23),D=U+(w^I&(q^w))+L[7]+1735328473&4294967295,U=q+(D<<14&4294967295|D>>>18),D=I+(q^w&(U^q))+L[12]+2368359562&4294967295,I=U+(D<<20&4294967295|D>>>12),D=w+(I^U^q)+L[5]+4294588738&4294967295,w=I+(D<<4&4294967295|D>>>28),D=q+(w^I^U)+L[8]+2272392833&4294967295,q=w+(D<<11&4294967295|D>>>21),D=U+(q^w^I)+L[11]+1839030562&4294967295,U=q+(D<<16&4294967295|D>>>16),D=I+(U^q^w)+L[14]+4259657740&4294967295,I=U+(D<<23&4294967295|D>>>9),D=w+(I^U^q)+L[1]+2763975236&4294967295,w=I+(D<<4&4294967295|D>>>28),D=q+(w^I^U)+L[4]+1272893353&4294967295,q=w+(D<<11&4294967295|D>>>21),D=U+(q^w^I)+L[7]+4139469664&4294967295,U=q+(D<<16&4294967295|D>>>16),D=I+(U^q^w)+L[10]+3200236656&4294967295,I=U+(D<<23&4294967295|D>>>9),D=w+(I^U^q)+L[13]+681279174&4294967295,w=I+(D<<4&4294967295|D>>>28),D=q+(w^I^U)+L[0]+3936430074&4294967295,q=w+(D<<11&4294967295|D>>>21),D=U+(q^w^I)+L[3]+3572445317&4294967295,U=q+(D<<16&4294967295|D>>>16),D=I+(U^q^w)+L[6]+76029189&4294967295,I=U+(D<<23&4294967295|D>>>9),D=w+(I^U^q)+L[9]+3654602809&4294967295,w=I+(D<<4&4294967295|D>>>28),D=q+(w^I^U)+L[12]+3873151461&4294967295,q=w+(D<<11&4294967295|D>>>21),D=U+(q^w^I)+L[15]+530742520&4294967295,U=q+(D<<16&4294967295|D>>>16),D=I+(U^q^w)+L[2]+3299628645&4294967295,I=U+(D<<23&4294967295|D>>>9),D=w+(U^(I|~q))+L[0]+4096336452&4294967295,w=I+(D<<6&4294967295|D>>>26),D=q+(I^(w|~U))+L[7]+1126891415&4294967295,q=w+(D<<10&4294967295|D>>>22),D=U+(w^(q|~I))+L[14]+2878612391&4294967295,U=q+(D<<15&4294967295|D>>>17),D=I+(q^(U|~w))+L[5]+4237533241&4294967295,I=U+(D<<21&4294967295|D>>>11),D=w+(U^(I|~q))+L[12]+1700485571&4294967295,w=I+(D<<6&4294967295|D>>>26),D=q+(I^(w|~U))+L[3]+2399980690&4294967295,q=w+(D<<10&4294967295|D>>>22),D=U+(w^(q|~I))+L[10]+4293915773&4294967295,U=q+(D<<15&4294967295|D>>>17),D=I+(q^(U|~w))+L[1]+2240044497&4294967295,I=U+(D<<21&4294967295|D>>>11),D=w+(U^(I|~q))+L[8]+1873313359&4294967295,w=I+(D<<6&4294967295|D>>>26),D=q+(I^(w|~U))+L[15]+4264355552&4294967295,q=w+(D<<10&4294967295|D>>>22),D=U+(w^(q|~I))+L[6]+2734768916&4294967295,U=q+(D<<15&4294967295|D>>>17),D=I+(q^(U|~w))+L[13]+1309151649&4294967295,I=U+(D<<21&4294967295|D>>>11),D=w+(U^(I|~q))+L[4]+4149444226&4294967295,w=I+(D<<6&4294967295|D>>>26),D=q+(I^(w|~U))+L[11]+3174756917&4294967295,q=w+(D<<10&4294967295|D>>>22),D=U+(w^(q|~I))+L[2]+718787259&4294967295,U=q+(D<<15&4294967295|D>>>17),D=I+(q^(U|~w))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(U+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+U&4294967295,N.g[3]=N.g[3]+q&4294967295}i.prototype.v=function(N,w){w===void 0&&(w=N.length);const I=w-this.blockSize,L=this.C;let U=this.h,q=0;for(;q<w;){if(U==0)for(;q<=I;)r(this,N,q),q+=this.blockSize;if(typeof N=="string"){for(;q<w;)if(L[U++]=N.charCodeAt(q++),U==this.blockSize){r(this,L),U=0;break}}else for(;q<w;)if(L[U++]=N[q++],U==this.blockSize){r(this,L),U=0;break}}this.h=U,this.o+=w},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,I=0;I<4;++I)for(let L=0;L<32;L+=8)N[w++]=this.g[I]>>>L&255;return N};function a(N,w){var I=d;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=w(N)}function u(N,w){this.h=w;const I=[];let L=!0;for(let U=N.length-1;U>=0;U--){const q=N[U]|0;L&&q==w||(I[U]=q,L=!1)}this.g=I}var d={};function g(N){return-128<=N&&N<128?a(N,function(w){return new u([w|0],w<0?-1:0)}):new u([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return M(h(-N));const w=[];let I=1;for(let L=0;N>=I;L++)w[L]=N/I|0,I*=4294967296;return new u(w,0)}function _(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return M(_(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(w,8));let L=T;for(let q=0;q<N.length;q+=8){var U=Math.min(8,N.length-q);const D=parseInt(N.substring(q,q+U),w);U<8?(U=h(Math.pow(w,U)),L=L.j(U).add(h(D))):(L=L.j(I),L=L.add(h(D)))}return L}var T=g(0),A=g(1),C=g(16777216);t=u.prototype,t.m=function(){if(k(this))return-M(this).m();let N=0,w=1;for(let I=0;I<this.g.length;I++){const L=this.i(I);N+=(L>=0?L:4294967296+L)*w,w*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(k(this))return"-"+M(this).toString(N);const w=h(Math.pow(N,6));var I=this;let L="";for(;;){const U=re(I,w).g;I=K(I,U.j(w));let q=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=U,P(I))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function k(N){return N.h==-1}t.l=function(N){return N=K(this,N),k(N)?-1:P(N)?0:1};function M(N){const w=N.g.length,I=[];for(let L=0;L<w;L++)I[L]=~N.g[L];return new u(I,~N.h).add(A)}t.abs=function(){return k(this)?M(this):this},t.add=function(N){const w=Math.max(this.g.length,N.g.length),I=[];let L=0;for(let U=0;U<=w;U++){let q=L+(this.i(U)&65535)+(N.i(U)&65535),D=(q>>>16)+(this.i(U)>>>16)+(N.i(U)>>>16);L=D>>>16,q&=65535,D&=65535,I[U]=D<<16|q}return new u(I,I[I.length-1]&-2147483648?-1:0)};function K(N,w){return N.add(M(w))}t.j=function(N){if(P(this)||P(N))return T;if(k(this))return k(N)?M(this).j(M(N)):M(M(this).j(N));if(k(N))return M(this.j(M(N)));if(this.l(C)<0&&N.l(C)<0)return h(this.m()*N.m());const w=this.g.length+N.g.length,I=[];for(var L=0;L<2*w;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(let U=0;U<N.g.length;U++){const q=this.i(L)>>>16,D=this.i(L)&65535,ke=N.i(U)>>>16,ct=N.i(U)&65535;I[2*L+2*U]+=D*ct,te(I,2*L+2*U),I[2*L+2*U+1]+=q*ct,te(I,2*L+2*U+1),I[2*L+2*U+1]+=D*ke,te(I,2*L+2*U+1),I[2*L+2*U+2]+=q*ke,te(I,2*L+2*U+2)}for(N=0;N<w;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=w;N<2*w;N++)I[N]=0;return new u(I,0)};function te(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function Z(N,w){this.g=N,this.h=w}function re(N,w){if(P(w))throw Error("division by zero");if(P(N))return new Z(T,T);if(k(N))return w=re(M(N),w),new Z(M(w.g),M(w.h));if(k(w))return w=re(N,M(w)),new Z(M(w.g),w.h);if(N.g.length>30){if(k(N)||k(w))throw Error("slowDivide_ only works with positive integers.");for(var I=A,L=w;L.l(N)<=0;)I=ce(I),L=ce(L);var U=ue(I,1),q=ue(L,1);for(L=ue(L,2),I=ue(I,2);!P(L);){var D=q.add(L);D.l(N)<=0&&(U=U.add(I),q=D),L=ue(L,1),I=ue(I,1)}return w=K(N,U.j(w)),new Z(U,w)}for(U=T;N.l(w)>=0;){for(I=Math.max(1,Math.floor(N.m()/w.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=h(I),D=q.j(w);k(D)||D.l(N)>0;)I-=L,q=h(I),D=q.j(w);P(q)&&(q=A),U=U.add(q),N=K(N,D)}return new Z(U,N)}t.B=function(N){return re(this,N).h},t.and=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let L=0;L<w;L++)I[L]=this.i(L)&N.i(L);return new u(I,this.h&N.h)},t.or=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let L=0;L<w;L++)I[L]=this.i(L)|N.i(L);return new u(I,this.h|N.h)},t.xor=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let L=0;L<w;L++)I[L]=this.i(L)^N.i(L);return new u(I,this.h^N.h)};function ce(N){const w=N.g.length+1,I=[];for(let L=0;L<w;L++)I[L]=N.i(L)<<1|N.i(L-1)>>>31;return new u(I,N.h)}function ue(N,w){const I=w>>5;w%=32;const L=N.g.length-I,U=[];for(let q=0;q<L;q++)U[q]=w>0?N.i(q+I)>>>w|N.i(q+I+1)<<32-w:N.i(q+I);return new u(U,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,eS=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,cs=u}).apply(typeof NT<"u"?NT:typeof self<"u"?self:typeof window<"u"?window:{});var qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tS,Ml,nS,Qc,Mp,iS,oS,sS;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof qc=="object"&&qc];for(var E=0;E<m.length;++E){var x=m[E];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(m,E){if(E)e:{var x=i;m=m.split(".");for(var R=0;R<m.length-1;R++){var H=m[R];if(!(H in x))break e;x=x[H]}m=m[m.length-1],R=x[m],E=E(R),E!=R&&E!=null&&e(x,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var x=[],R;for(R in E)Object.prototype.hasOwnProperty.call(E,R)&&x.push([R,E[R]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,x){return m.call.apply(m.bind,arguments)}function h(m,E,x){return h=g,h.apply(null,arguments)}function _(m,E){var x=Array.prototype.slice.call(arguments,1);return function(){var R=x.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function T(m,E){function x(){}x.prototype=E.prototype,m.Z=E.prototype,m.prototype=new x,m.prototype.constructor=m,m.Ob=function(R,H,Q){for(var de=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)de[Pe-2]=arguments[Pe];return E.prototype[H].apply(R,de)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function C(m){const E=m.length;if(E>0){const x=Array(E);for(let R=0;R<E;R++)x[R]=m[R];return x}return[]}function P(m,E){for(let R=1;R<arguments.length;R++){const H=arguments[R];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=m.length||0;const Q=H.length||0;m.length=x+Q;for(let de=0;de<Q;de++)m[x+de]=H[de]}else m.push(H)}}class k{constructor(E,x){this.i=E,this.j=x,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function M(m){u.setTimeout(()=>{throw m},0)}function K(){var m=N;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class te{constructor(){this.h=this.g=null}add(E,x){const R=Z.get();R.set(E,x),this.h?this.h.next=R:this.g=R,this.h=R}}var Z=new k(()=>new re,m=>m.reset());class re{constructor(){this.next=this.g=this.h=null}set(E,x){this.h=E,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ue=!1,N=new te,w=()=>{const m=Promise.resolve(void 0);ce=()=>{m.then(I)}};function I(){for(var m;m=K();){try{m.h.call(m.g)}catch(x){M(x)}var E=Z;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}ue=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const x=()=>{};u.addEventListener("test",x,E),u.removeEventListener("test",x,E)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function ke(m,E){U.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(ke,U),ke.prototype.init=function(m,E){const x=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(x=="mouseover"?E=m.fromElement:x=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ct="closure_listenable_"+(Math.random()*1e6|0),W=0;function ae(m,E,x,R,H){this.listener=m,this.proxy=null,this.src=E,this.type=x,this.capture=!!R,this.ha=H,this.key=++W,this.da=this.fa=!1}function ve(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Be(m,E,x){for(const R in m)E.call(x,m[R],R,m)}function Ue(m,E){for(const x in m)E.call(void 0,m[x],x,m)}function B(m){const E={};for(const x in m)E[x]=m[x];return E}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(m,E){let x,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(x in R)m[x]=R[x];for(let Q=0;Q<$.length;Q++)x=$[Q],Object.prototype.hasOwnProperty.call(R,x)&&(m[x]=R[x])}}function he(m){this.src=m,this.g={},this.h=0}he.prototype.add=function(m,E,x,R,H){const Q=m.toString();m=this.g[Q],m||(m=this.g[Q]=[],this.h++);const de=Me(m,E,R,H);return de>-1?(E=m[de],x||(E.fa=!1)):(E=new ae(E,this.src,Q,!!R,H),E.fa=x,m.push(E)),E};function Se(m,E){const x=E.type;if(x in m.g){var R=m.g[x],H=Array.prototype.indexOf.call(R,E,void 0),Q;(Q=H>=0)&&Array.prototype.splice.call(R,H,1),Q&&(ve(E),m.g[x].length==0&&(delete m.g[x],m.h--))}}function Me(m,E,x,R){for(let H=0;H<m.length;++H){const Q=m[H];if(!Q.da&&Q.listener==E&&Q.capture==!!x&&Q.ha==R)return H}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ct={};function ht(m,E,x,R,H){if(Array.isArray(E)){for(let Q=0;Q<E.length;Q++)ht(m,E[Q],x,R,H);return null}return x=Wi(x),m&&m[ct]?m.J(E,x,d(R)?!!R.capture:!1,H):Ce(m,E,x,!1,R,H)}function Ce(m,E,x,R,H,Q){if(!E)throw Error("Invalid event type");const de=d(H)?!!H.capture:!!H;let Pe=bt(m);if(Pe||(m[Ge]=Pe=new he(m)),x=Pe.add(E,x,R,de,Q),x.proxy)return x;if(R=be(),x.proxy=R,R.src=m,R.listener=x,m.addEventListener)q||(H=de),H===void 0&&(H=!1),m.addEventListener(E.toString(),R,H);else if(m.attachEvent)m.attachEvent(Re(E.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return x}function be(){function m(x){return E.call(m.src,m.listener,x)}const E=Oe;return m}function j(m,E,x,R,H){if(Array.isArray(E))for(var Q=0;Q<E.length;Q++)j(m,E[Q],x,R,H);else R=d(R)?!!R.capture:!!R,x=Wi(x),m&&m[ct]?(m=m.i,Q=String(E).toString(),Q in m.g&&(E=m.g[Q],x=Me(E,x,R,H),x>-1&&(ve(E[x]),Array.prototype.splice.call(E,x,1),E.length==0&&(delete m.g[Q],m.h--)))):m&&(m=bt(m))&&(E=m.g[E.toString()],m=-1,E&&(m=Me(E,x,R,H)),(x=m>-1?E[m]:null)&&fe(x))}function fe(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[ct])Se(E.i,m);else{var x=m.type,R=m.proxy;E.removeEventListener?E.removeEventListener(x,R,m.capture):E.detachEvent?E.detachEvent(Re(x),R):E.addListener&&E.removeListener&&E.removeListener(R),(x=bt(E))?(Se(x,m),x.h==0&&(x.src=null,E[Ge]=null)):ve(m)}}}function Re(m){return m in Ct?Ct[m]:Ct[m]="on"+m}function Oe(m,E){if(m.da)m=!0;else{E=new ke(E,this);const x=m.listener,R=m.ha||m.src;m.fa&&fe(m),m=x.call(R,E)}return m}function bt(m){return m=m[Ge],m instanceof he?m:null}var Tn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Wi(m){return typeof m=="function"?m:(m[Tn]||(m[Tn]=function(E){return m.handleEvent(E)}),m[Tn])}function ft(){L.call(this),this.i=new he(this),this.M=this,this.G=null}T(ft,L),ft.prototype[ct]=!0,ft.prototype.removeEventListener=function(m,E,x,R){j(this,m,E,x,R)};function Rt(m,E){var x,R=m.G;if(R)for(x=[];R;R=R.G)x.push(R);if(m=m.M,R=E.type||E,typeof E=="string")E=new U(E,m);else if(E instanceof U)E.target=E.target||m;else{var H=E;E=new U(R,m),le(E,H)}H=!0;let Q,de;if(x)for(de=x.length-1;de>=0;de--)Q=E.g=x[de],H=ii(Q,R,!0,E)&&H;if(Q=E.g=m,H=ii(Q,R,!0,E)&&H,H=ii(Q,R,!1,E)&&H,x)for(de=0;de<x.length;de++)Q=E.g=x[de],H=ii(Q,R,!1,E)&&H}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const x=m.g[E];for(let R=0;R<x.length;R++)ve(x[R]);delete m.g[E],m.h--}}this.G=null},ft.prototype.J=function(m,E,x,R){return this.i.add(String(m),E,!1,x,R)},ft.prototype.K=function(m,E,x,R){return this.i.add(String(m),E,!0,x,R)};function ii(m,E,x,R){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let H=!0;for(let Q=0;Q<E.length;++Q){const de=E[Q];if(de&&!de.da&&de.capture==x){const Pe=de.listener,wt=de.ha||de.src;de.fa&&Se(m.i,de),H=Pe.call(wt,R)!==!1&&H}}return H&&!R.defaultPrevented}function $f(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(m,E||0)}function ru(m){m.g=$f(()=>{m.g=null,m.i&&(m.i=!1,ru(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class hn extends L{constructor(E,x){super(),this.m=E,this.l=x,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ru(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(m){L.call(this),this.h=m,this.g={}}T(Ts,L);var Ca=[];function ba(m){Be(m.g,function(E,x){this.g.hasOwnProperty(x)&&fe(E)},m),m.g={}}Ts.prototype.N=function(){Ts.Z.N.call(this),ba(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var bo=u.JSON.stringify,Kf=u.JSON.parse,au=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function lu(){}function uu(){}var oi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Zt(){U.call(this,"d")}T(Zt,U);function Bn(){U.call(this,"c")}T(Bn,U);var It={},cu=null;function ur(){return cu=cu||new ft}It.Ia="serverreachability";function fu(m){U.call(this,It.Ia,m)}T(fu,U);function xi(m){const E=ur();Rt(E,new fu(E))}It.STAT_EVENT="statevent";function Es(m,E){U.call(this,It.STAT_EVENT,m),this.stat=E}T(Es,U);function Pt(m){const E=ur();Rt(E,new Es(E,m))}It.Ja="timingevent";function Ci(m,E){U.call(this,It.Ja,m),this.size=E}T(Ci,U);function bi(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function si(){this.g=!0}si.prototype.ua=function(){this.g=!1};function Qf(m,E,x,R,H,Q){m.info(function(){if(m.g)if(Q){var de="",Pe=Q.split("&");for(let et=0;et<Pe.length;et++){var wt=Pe[et].split("=");if(wt.length>1){const _t=wt[0];wt=wt[1];const Hn=_t.split("_");de=Hn.length>=2&&Hn[1]=="type"?de+(_t+"="+wt+"&"):de+(_t+"=redacted&")}}}else de=null;else de=Q;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+E+`
`+x+`
`+de})}function du(m,E,x,R,H,Q,de){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+E+`
`+x+`
`+Q+" "+de})}function Ri(m,E,x,R){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Xf(m,x)+(R?" "+R:"")})}function As(m,E){m.info(function(){return"TIMEOUT: "+E})}si.prototype.info=function(){};function Xf(m,E){if(!m.g)return E;if(!E)return null;try{const Q=JSON.parse(E);if(Q){for(m=0;m<Q.length;m++)if(Array.isArray(Q[m])){var x=Q[m];if(!(x.length<2)){var R=x[1];if(Array.isArray(R)&&!(R.length<1)){var H=R[0];if(H!="noop"&&H!="stop"&&H!="close")for(let de=1;de<R.length;de++)R[de]=""}}}}return bo(Q)}catch{return E}}var Ss={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ra={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ia;function xs(){}T(xs,lu),xs.prototype.g=function(){return new XMLHttpRequest},Ia=new xs;function Zi(m){return encodeURIComponent(String(m))}function hu(m){var E=1;m=m.split(":");const x=[];for(;E>0&&m.length;)x.push(m.shift()),E--;return m.length&&x.push(m.join(":")),x}function ri(m,E,x,R){this.j=m,this.i=E,this.l=x,this.S=R||1,this.V=new Ts(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}var Vt={},$t={};function Ii(m,E,x){m.M=1,m.A=Cs(Lt(E)),m.u=x,m.R=!0,cr(m,null)}function cr(m,E){m.F=Date.now(),wi(m),m.B=Lt(m.A);var x=m.B,R=m.S;Array.isArray(R)||(R=[String(R)]),pr(x.i,"t",R),m.C=0,x=m.j.L,m.h=new ai,m.g=Iu(m.j,x?E:null,!m.u),m.P>0&&(m.O=new hn(h(m.Y,m,m.g),m.P)),E=m.V,x=m.g,R=m.ba;var H="readystatechange";Array.isArray(H)||(H&&(Ca[0]=H.toString()),H=Ca);for(let Q=0;Q<H.length;Q++){const de=ht(x,H[Q],R||E.handleEvent,!1,E.h||E);if(!de)break;E.g[de.key]=de}E=m.J?B(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),xi(),Qf(m.i,m.v,m.B,m.l,m.S,m.u)}ri.prototype.ba=function(m){m=m.target;const E=this.O;E&&ci(m)==3?E.j():this.Y(m)},ri.prototype.Y=function(m){try{if(m==this.g)e:{const Pe=ci(this.g),wt=this.g.ya(),et=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||jt(this.g)))){this.K||Pe!=4||wt==7||(wt==8||et<=0?xi(3):xi(2)),Ni(this);var E=this.g.ca();this.X=E;var x=Wf(this);if(this.o=E==200,du(this.i,this.v,this.B,this.l,this.S,Pe,E),this.o){if(this.U&&!this.L){t:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var Q=R;break t}}Q=null}if(m=Q)Ri(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Di(this,m);else{this.o=!1,this.m=3,Pt(12),wn(this),qn(this);break e}}if(this.R){m=!0;let _t;for(;!this.K&&this.C<x.length;)if(_t=mu(this,x),_t==$t){Pe==4&&(this.m=4,Pt(14),m=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Vt){this.m=4,Pt(15),Ri(this.i,this.l,x,"[Invalid Chunk]"),m=!1;break}else Ri(this.i,this.l,_t,null),Di(this,_t);if(pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||x.length!=0||this.h.h||(this.m=1,Pt(16),m=!1),this.o=this.o&&m,!m)Ri(this.i,this.l,x,"[Invalid Chunked Response]"),wn(this),qn(this);else if(x.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Ha(de),de.P=!0,Pt(11))}}else Ri(this.i,this.l,x,null),Di(this,x);Pe==4&&wn(this),this.o&&!this.K&&(Pe==4?xu(this.j,this):(this.o=!1,wi(this)))}else eo(this.g),E==400&&x.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),wn(this),qn(this)}}}catch{}finally{}};function Wf(m){if(!pu(m))return m.g.la();const E=jt(m.g);if(E==="")return"";let x="";const R=E.length,H=ci(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return wn(m),qn(m),"";m.h.i=new u.TextDecoder}for(let Q=0;Q<R;Q++)m.h.h=!0,x+=m.h.i.decode(E[Q],{stream:!(H&&Q==R-1)});return E.length=0,m.h.g+=x,m.C=0,m.h.g}function pu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function mu(m,E){var x=m.C,R=E.indexOf(`
`,x);return R==-1?$t:(x=Number(E.substring(x,R)),isNaN(x)?Vt:(R+=1,R+x>E.length?$t:(E=E.slice(R,R+x),m.C=R+x,E)))}ri.prototype.cancel=function(){this.K=!0,wn(this)};function wi(m){m.T=Date.now()+m.H,fr(m,m.H)}function fr(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=bi(h(m.aa,m),E)}function Ni(m){m.D&&(u.clearTimeout(m.D),m.D=null)}ri.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(As(this.i,this.B),this.M!=2&&(xi(),Pt(17)),wn(this),this.m=2,qn(this)):fr(this,this.T-m)};function qn(m){m.j.I==0||m.K||xu(m.j,m)}function wn(m){Ni(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,ba(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Di(m,E){try{var x=m.j;if(x.I!=0&&(x.g==m||Pi(x.h,m))){if(!m.L&&Pi(x.h,m)&&x.I==3){try{var R=x.Ba.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<m.F)vr(x),Vo(x);else break e;Ms(x),Pt(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=bi(h(x.Va,x),6e3));Mi(x.h)<=1&&x.ta&&(x.ta=void 0)}else Bi(x,11)}else if((m.L||x.g==m)&&vr(x),!D(E))for(H=x.Ba.g.parse(E),E=0;E<H.length;E++){let et=H[E];const _t=et[0];if(!(_t<=x.K))if(x.K=_t,et=et[1],x.I==2)if(et[0]=="c"){x.M=et[1],x.ba=et[2];const Hn=et[3];Hn!=null&&(x.ka=Hn,x.j.info("VER="+x.ka));const qi=et[4];qi!=null&&(x.za=qi,x.j.info("SVER="+x.za));const fi=et[5];fi!=null&&typeof fi=="number"&&fi>0&&(R=1.5*fi,x.O=R,x.j.info("backChannelRequestTimeoutMs_="+R)),R=x;const di=m.g;if(di){const Ps=di.g?di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ps){var Q=R.h;Q.g||Ps.indexOf("spdy")==-1&&Ps.indexOf("quic")==-1&&Ps.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Da(Q,Q.h),Q.h=null))}if(R.G){const Tr=di.g?di.g.getResponseHeader("X-HTTP-Session-Id"):null;Tr&&(R.wa=Tr,it(R.J,R.G,Tr))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-m.F,x.j.info("Handshake RTT: "+x.T+"ms")),R=x;var de=m;if(R.na=Ru(R,R.L?R.ba:null,R.W),de.L){Ma(R.h,de);var Pe=de,wt=R.O;wt&&(Pe.H=wt),Pe.D&&(Ni(Pe),wi(Pe)),R.g=de}else Au(R);x.i.length>0&&Oi(x)}else et[0]!="stop"&&et[0]!="close"||Bi(x,7);else x.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Bi(x,7):Fa(x):et[0]!="noop"&&x.l&&x.l.qa(et),x.A=0)}}xi(4)}catch{}}var Ut=class{constructor(m,E){this.g=m,this.map=E}};function wa(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Na(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function Mi(m){return m.h?1:m.g?m.g.size:0}function Pi(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Da(m,E){m.g?m.g.add(E):m.h=E}function Ma(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}wa.prototype.cancel=function(){if(this.i=Pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Pa(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const x of m.g.values())E=E.concat(x.G);return E}return C(m.i)}var gu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dr(m,E){if(m){m=m.split("&");for(let x=0;x<m.length;x++){const R=m[x].indexOf("=");let H,Q=null;R>=0?(H=m[x].substring(0,R),Q=m[x].substring(R+1)):H=m[x],E(H,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Nn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof Nn?(this.l=m.l,Kt(this,m.j),this.o=m.o,this.g=m.g,Ro(this,m.u),this.h=m.h,Va(this,Tu(m.i)),this.m=m.m):m&&(E=String(m).match(gu))?(this.l=!1,Kt(this,E[1]||"",!0),this.o=Vi(E[2]||""),this.g=Vi(E[3]||"",!0),Ro(this,E[4]),this.h=Vi(E[5]||"",!0),Va(this,E[6]||"",!0),this.m=Vi(E[7]||"")):(this.l=!1,this.i=new wo(null,this.l))}Nn.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(bs(E,hr,!0),":");var x=this.g;return(x||E=="file")&&(m.push("//"),(E=this.o)&&m.push(bs(E,hr,!0),"@"),m.push(Zi(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&m.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&m.push("/"),m.push(bs(x,x.charAt(0)=="/"?Ua:yu,!0))),(x=this.i.toString())&&m.push("?",x),(x=this.m)&&m.push("#",bs(x,_u)),m.join("")},Nn.prototype.resolve=function(m){const E=Lt(this);let x=!!m.j;x?Kt(E,m.j):x=!!m.o,x?E.o=m.o:x=!!m.g,x?E.g=m.g:x=m.u!=null;var R=m.h;if(x)Ro(E,m.u);else if(x=!!m.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var H=E.h.lastIndexOf("/");H!=-1&&(R=E.h.slice(0,H+1)+R)}if(H=R,H==".."||H==".")R="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){R=H.lastIndexOf("/",0)==0,H=H.split("/");const Q=[];for(let de=0;de<H.length;){const Pe=H[de++];Pe=="."?R&&de==H.length&&Q.push(""):Pe==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),R&&de==H.length&&Q.push("")):(Q.push(Pe),R=!0)}R=Q.join("/")}else R=H}return x?E.h=R:x=m.i.toString()!=="",x?Va(E,Tu(m.i)):x=!!m.m,x&&(E.m=m.m),E};function Lt(m){return new Nn(m)}function Kt(m,E,x){m.j=x?Vi(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function Ro(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Va(m,E,x){E instanceof wo?(m.i=E,mr(m.i,m.l)):(x||(E=bs(E,Io)),m.i=new wo(E,m.l))}function it(m,E,x){m.i.set(E,x)}function Cs(m){return it(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Vi(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function bs(m,E,x){return typeof m=="string"?(m=encodeURI(m).replace(E,En),x&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function En(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var hr=/[#\/\?@]/g,yu=/[#\?:]/g,Ua=/[#\?]/g,Io=/[#\?@]/g,_u=/#/g;function wo(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function An(m){m.g||(m.g=new Map,m.h=0,m.i&&dr(m.i,function(E,x){m.add(decodeURIComponent(E.replace(/\+/g," ")),x)}))}t=wo.prototype,t.add=function(m,E){An(this),this.i=null,m=No(this,m);let x=this.g.get(m);return x||this.g.set(m,x=[]),x.push(E),this.h+=1,this};function vu(m,E){An(m),E=No(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function La(m,E){return An(m),E=No(m,E),m.g.has(E)}t.forEach=function(m,E){An(this),this.g.forEach(function(x,R){x.forEach(function(H){m.call(E,H,R,this)},this)},this)};function ka(m,E){An(m);let x=[];if(typeof E=="string")La(m,E)&&(x=x.concat(m.g.get(No(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)x=x.concat(m[E]);return x}t.set=function(m,E){return An(this),this.i=null,m=No(this,m),La(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},t.get=function(m,E){return m?(m=ka(this,m),m.length>0?String(m[0]):E):E};function pr(m,E,x){vu(m,E),x.length>0&&(m.i=null,m.g.set(No(m,E),C(x)),m.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let R=0;R<E.length;R++){var x=E[R];const H=Zi(x);x=ka(this,x);for(let Q=0;Q<x.length;Q++){let de=H;x[Q]!==""&&(de+="="+Zi(x[Q])),m.push(de)}}return this.i=m.join("&")};function Tu(m){const E=new wo;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function No(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function mr(m,E){E&&!m.j&&(An(m),m.i=null,m.g.forEach(function(x,R){const H=R.toLowerCase();R!=H&&(vu(this,R),pr(this,H,x))},m)),m.j=E}function li(m,E){const x=new si;if(u.Image){const R=new Image;R.onload=_(Fn,x,"TestLoadImage: loaded",!0,E,R),R.onerror=_(Fn,x,"TestLoadImage: error",!1,E,R),R.onabort=_(Fn,x,"TestLoadImage: abort",!1,E,R),R.ontimeout=_(Fn,x,"TestLoadImage: timeout",!1,E,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else E(!1)}function Oa(m,E){const x=new si,R=new AbortController,H=setTimeout(()=>{R.abort(),Fn(x,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:R.signal}).then(Q=>{clearTimeout(H),Q.ok?Fn(x,"TestPingServer: ok",!0,E):Fn(x,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),Fn(x,"TestPingServer: error",!1,E)})}function Fn(m,E,x,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(x)}catch{}}function Do(){this.g=new au}function Ui(m){this.i=m.Sb||null,this.h=m.ab||!1}T(Ui,lu),Ui.prototype.g=function(){return new Rs(this.i,this.h)};function Rs(m,E){ft.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Rs,ft),t=Rs.prototype,t.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,ui(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Mo(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function gr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Mo(this):ui(this),this.readyState==3&&gr(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,Mo(this))},t.Na=function(m){this.g&&(this.response=m,Mo(this))},t.ga=function(){this.g&&Mo(this)};function Mo(m){m.readyState=4,m.l=null,m.j=null,m.B=null,ui(m)}t.setRequestHeader=function(m,E){this.A.append(m,E)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var x=E.next();!x.done;)x=x.value,m.push(x[0]+": "+x[1]),x=E.next();return m.join(`\r
`)};function ui(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Gn(m){let E="";return Be(m,function(x,R){E+=R,E+=":",E+=x,E+=`\r
`}),E}function Is(m,E,x){e:{for(R in x){var R=!1;break e}R=!0}R||(x=Gn(x),typeof m=="string"?x!=null&&Zi(x):it(m,E,x))}function rt(m){ft.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(rt,ft);var Li=/^https?$/i,Ba=["POST","PUT"];t=rt.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,E,x,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ia.g(),this.g.onreadystatechange=A(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(Q){ws(this,Q);return}if(m=x||"",x=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)x.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const Q of R.keys())x.set(Q,R.get(Q));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(x.keys()).find(Q=>Q.toLowerCase()=="content-type"),H=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(Ba,E,void 0)>=0)||R||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,de]of x)this.g.setRequestHeader(Q,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Q){ws(this,Q)}};function ws(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,qa(m),ji(m)}function qa(m){m.A||(m.A=!0,Rt(m,"complete"),Rt(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Rt(this,"complete"),Rt(this,"abort"),ji(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ns(this):this.Xa())},t.Xa=function(){Ns(this)};function Ns(m){if(m.h&&typeof a<"u"){if(m.v&&ci(m)==4)setTimeout(m.Ca.bind(m),0);else if(Rt(m,"readystatechange"),ci(m)==4){m.h=!1;try{const Q=m.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var x;if(!(x=E)){var R;if(R=Q===0){let de=String(m.D).match(gu)[1]||null;!de&&u.self&&u.self.location&&(de=u.self.location.protocol.slice(0,-1)),R=!Li.test(de?de.toLowerCase():"")}x=R}if(x)Rt(m,"complete"),Rt(m,"success");else{m.o=6;try{var H=ci(m)>2?m.g.statusText:""}catch{H=""}m.l=H+" ["+m.ca()+"]",qa(m)}}finally{ji(m)}}}}function ji(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const x=m.g;m.g=null,E||Rt(m,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ci(m){return m.g?m.g.readyState:0}t.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Kf(E)}};function jt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function eo(m){const E={};m=(m.g&&ci(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(D(m[R]))continue;var x=hu(m[R]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Q=E[H]||[];E[H]=Q,Q.push(x)}Ue(E,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(m,E,x){return x&&x.internalChannelParams&&x.internalChannelParams[m]||E}function Po(m){this.za=0,this.i=[],this.j=new si,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,m),this.Za=ki("retryDelaySeedMs",1e4,m),this.Ta=ki("forwardChannelMaxRetries",2,m),this.va=ki("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new wa(m&&m.concurrentRequestLimit),this.Ba=new Do,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Po.prototype,t.ka=8,t.I=1,t.connect=function(m,E,x,R){Pt(0),this.W=m,this.H=E||{},x&&R!==void 0&&(this.H.OSID=x,this.H.OAID=R),this.F=this.X,this.J=Ru(this,null,this.W),Oi(this)};function Fa(m){if(yr(m),m.I==3){var E=m.V++,x=Lt(m.J);if(it(x,"SID",m.M),it(x,"RID",E),it(x,"TYPE","terminate"),Ds(m,x),E=new ri(m,m.j,E),E.M=2,E.A=Cs(Lt(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=E.A,x=!0),x||(E.g=Iu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),wi(E)}bu(m)}function Vo(m){m.g&&(Ha(m),m.g.cancel(),m.g=null)}function yr(m){Vo(m),m.v&&(u.clearTimeout(m.v),m.v=null),vr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function Oi(m){if(!Na(m.h)&&!m.m){m.m=!0;var E=m.Ea;ce||w(),ue||(ce(),ue=!0),N.add(E,m),m.D=0}}function _r(m,E){return Mi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=bi(h(m.Ea,m,E),Cu(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const H=new ri(this,this.j,m);let Q=this.o;if(this.U&&(Q?(Q=B(Q),le(Q,this.U)):Q=this.U),this.u!==null||this.R||(H.J=Q,Q=null),this.S)e:{for(var E=0,x=0;x<this.i.length;x++){t:{var R=this.i[x];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,E>4096){E=x;break e}if(E===4096||x===this.i.length-1){E=x+1;break e}}E=1e3}else E=1e3;E=Eu(this,H,E),x=Lt(this.J),it(x,"RID",m),it(x,"CVER",22),this.G&&it(x,"X-HTTP-Session-Id",this.G),Ds(this,x),Q&&(this.R?E="headers="+Zi(Gn(Q))+"&"+E:this.u&&Is(x,this.u,Q)),Da(this.h,H),this.Ra&&it(x,"TYPE","init"),this.S?(it(x,"$req",E),it(x,"SID","null"),H.U=!0,Ii(H,x,null)):Ii(H,x,E),this.I=2}}else this.I==3&&(m?Ga(this,m):this.i.length==0||Na(this.h)||Ga(this))};function Ga(m,E){var x;E?x=E.l:x=m.V++;const R=Lt(m.J);it(R,"SID",m.M),it(R,"RID",x),it(R,"AID",m.K),Ds(m,R),m.u&&m.o&&Is(R,m.u,m.o),x=new ri(m,m.j,x,m.D+1),m.u===null&&(x.J=m.o),E&&(m.i=E.G.concat(m.i)),E=Eu(m,x,1e3),x.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Da(m.h,x),Ii(x,R,E)}function Ds(m,E){m.H&&Be(m.H,function(x,R){it(E,R,x)}),m.l&&Be({},function(x,R){it(E,R,x)})}function Eu(m,E,x){x=Math.min(m.i.length,x);const R=m.l?h(m.l.Ka,m.l,m):null;e:{var H=m.i;let Pe=-1;for(;;){const wt=["count="+x];Pe==-1?x>0?(Pe=H[0].g,wt.push("ofs="+Pe)):Pe=0:wt.push("ofs="+Pe);let et=!0;for(let _t=0;_t<x;_t++){var Q=H[_t].g;const Hn=H[_t].map;if(Q-=Pe,Q<0)Pe=Math.max(0,H[_t].g-100),et=!1;else try{Q="req"+Q+"_"||"";try{var de=Hn instanceof Map?Hn:Object.entries(Hn);for(const[qi,fi]of de){let di=fi;d(fi)&&(di=bo(fi)),wt.push(Q+qi+"="+encodeURIComponent(di))}}catch(qi){throw wt.push(Q+"type="+encodeURIComponent("_badmap")),qi}}catch{R&&R(Hn)}}if(et){de=wt.join("&");break e}}de=void 0}return m=m.i.splice(0,x),E.G=m,de}function Au(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;ce||w(),ue||(ce(),ue=!0),N.add(E,m),m.A=0}}function Ms(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=bi(h(m.Da,m),Cu(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,Su(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=bi(h(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),Vo(this),Su(this))};function Ha(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function Su(m){m.g=new ri(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=Lt(m.na);it(E,"RID","rpc"),it(E,"SID",m.M),it(E,"AID",m.K),it(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&it(E,"TO",m.ia),it(E,"TYPE","xmlhttp"),Ds(m,E),m.u&&m.o&&Is(E,m.u,m.o),m.O&&(m.g.H=m.O);var x=m.g;m=m.ba,x.M=1,x.A=Cs(Lt(E)),x.u=null,x.R=!0,cr(x,m)}t.Va=function(){this.C!=null&&(this.C=null,Vo(this),Ms(this),Pt(19))};function vr(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function xu(m,E){var x=null;if(m.g==E){vr(m),Ha(m),m.g=null;var R=2}else if(Pi(m.h,E))x=E.G,Ma(m.h,E),R=1;else return;if(m.I!=0){if(E.o)if(R==1){x=E.u?E.u.length:0,E=Date.now()-E.F;var H=m.D;R=ur(),Rt(R,new Ci(R,x)),Oi(m)}else Au(m);else if(H=E.m,H==3||H==0&&E.X>0||!(R==1&&_r(m,E)||R==2&&Ms(m)))switch(x&&x.length>0&&(E=m.h,E.i=E.i.concat(x)),H){case 1:Bi(m,5);break;case 4:Bi(m,10);break;case 3:Bi(m,6);break;default:Bi(m,2)}}}function Cu(m,E){let x=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(x*=2),x*E}function Bi(m,E){if(m.j.info("Error code "+E),E==2){var x=h(m.bb,m),R=m.Ua;const H=!R;R=new Nn(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Kt(R,"https"),Cs(R),H?li(R.toString(),x):Oa(R.toString(),x)}else Pt(2);m.I=0,m.l&&m.l.pa(E),bu(m),yr(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function bu(m){if(m.I=0,m.ja=[],m.l){const E=Pa(m.h);(E.length!=0||m.i.length!=0)&&(P(m.ja,E),P(m.ja,m.i),m.h.i.length=0,C(m.i),m.i.length=0),m.l.oa()}}function Ru(m,E,x){var R=x instanceof Nn?Lt(x):new Nn(x);if(R.g!="")E&&(R.g=E+"."+R.g),Ro(R,R.u);else{var H=u.location;R=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;const Q=new Nn(null);R&&Kt(Q,R),E&&(Q.g=E),H&&Ro(Q,H),x&&(Q.h=x),R=Q}return x=m.G,E=m.wa,x&&E&&it(R,x,E),it(R,"VER",m.ka),Ds(m,R),R}function Iu(m,E,x){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new rt(new Ui({ab:x})):new rt(m.ma),E.Fa(m.L),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wu(){}t=wu.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Uo(){}Uo.prototype.g=function(m,E){return new pn(m,E)};function pn(m,E){ft.call(this),this.g=new Po(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new to(this)}T(pn,ft),pn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){Fa(this.g)},pn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var x={};x.__data__=m,m=x}else this.v&&(x={},x.__data__=bo(m),m=x);E.i.push(new Ut(E.Ya++,m)),E.I==3&&Oi(E)},pn.prototype.N=function(){this.g.l=null,delete this.j,Fa(this.g),delete this.g,pn.Z.N.call(this)};function Nu(m){Zt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const x in E){m=x;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(Nu,Zt);function Du(){Bn.call(this),this.status=1}T(Du,Bn);function to(m){this.g=m}T(to,wu),to.prototype.ra=function(){Rt(this.g,"a")},to.prototype.qa=function(m){Rt(this.g,new Nu(m))},to.prototype.pa=function(m){Rt(this.g,new Du)},to.prototype.oa=function(){Rt(this.g,"b")},Uo.prototype.createWebChannel=Uo.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,sS=function(){return new Uo},oS=function(){return ur()},iS=It,Mp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ss.NO_ERROR=0,Ss.TIMEOUT=8,Ss.HTTP_ERROR=6,Qc=Ss,Ra.COMPLETE="complete",nS=Ra,uu.EventType=oi,oi.OPEN="a",oi.CLOSE="b",oi.ERROR="c",oi.MESSAGE="d",ft.prototype.listen=ft.prototype.J,Ml=uu,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,tS=rt}).apply(typeof qc<"u"?qc:typeof self<"u"?self:typeof window<"u"?window:{});const DT="@firebase/firestore",MT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let va="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er=new zA("@firebase/firestore");function jr(){return er.logLevel}function ge(t,...e){if(er.logLevel<=Xe.DEBUG){const n=e.map(fm);er.debug(`Firestore (${va}): ${t}`,...n)}}function Eo(t,...e){if(er.logLevel<=Xe.ERROR){const n=e.map(fm);er.error(`Firestore (${va}): ${t}`,...n)}}function ca(t,...e){if(er.logLevel<=Xe.WARN){const n=e.map(fm);er.warn(`Firestore (${va}): ${t}`,...n)}}function fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,rS(t,i,n)}function rS(t,e,n){let i=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Eo(i),new Error(i)}function nt(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||rS(e,r,i)}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class me extends or{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(cn.UNAUTHENTICATED)))}shutdown(){}}class W4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Z4{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let i=this.i;const r=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let a=new _o;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new _o,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=a;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new _o)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string",31837,{l:i}),new aS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new cn(e)}}class j4{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class e6{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new j4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(cn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class PT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class t6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,KA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const i=a=>{a.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new PT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new PT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=n6(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=e.charAt(r[a]%62))}return i}}function Ye(t,e){return t<e?-1:t>e?1:0}function Pp(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),a=e.charAt(i);if(r!==a)return op(r)===op(a)?Ye(r,a):op(r)?1:-1}return Ye(t.length,e.length)}const i6=55296,o6=57343;function op(t){const e=t.charCodeAt(0);return e>=i6&&e<=o6}function fa(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="__name__";class Yi{constructor(e,n,i){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&xe(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Yi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yi?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const a=Yi.compareSegments(e.get(r),n.get(r));if(a!==0)return a}return Ye(e.length,n.length)}static compareSegments(e,n){const i=Yi.isNumericId(e),r=Yi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Yi.extractNumericId(e).compare(Yi.extractNumericId(n)):Pp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return cs.fromString(e.substring(4,e.length-2))}}class pt extends Yi{construct(e,n,i){return new pt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new me(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new pt(n)}static emptyPath(){return new pt([])}}const s6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Yi{construct(e,n,i){return new rn(e,n,i)}static isValidIdentifier(e){return s6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===VT}static keyField(){return new rn([VT])}static fromServerFormat(e){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new me(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new me(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(i+=d,r++):(a(),r++)}if(a(),u)throw new me(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(n)}static emptyPath(){return new rn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(pt.fromString(e))}static fromName(e){return new Ee(pt.fromString(e).popFirst(5))}static empty(){return new Ee(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new pt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(t,e,n){if(!n)throw new me(ie.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function r6(t,e,n,i){if(e===!0&&i===!0)throw new me(ie.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function UT(t){if(!Ee.isDocumentKey(t))throw new me(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LT(t){if(Ee.isDocumentKey(t))throw new me(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function uS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Df(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe(12329,{type:typeof t})}function Ao(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new me(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Df(t);throw new me(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function a6(t,e){if(e<=0)throw new me(ie.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t,e){const n={typeString:t};return e&&(n.value=e),n}function eu(t,e){if(!uS(t))throw new me(ie.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const u=t[i];if(r&&typeof u!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&u!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new me(ie.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=-62135596800,OT=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*OT);return new mt(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new me(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kT)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new me(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/OT}_compareTo(e){return this.seconds===e.seconds?Ye(this.nanoseconds,e.nanoseconds):Ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(eu(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Ht("string",mt._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new mt(0,0))}static max(){return new we(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=-1;function l6(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=we.fromTimestamp(i===1e9?new mt(n+1,0):new mt(n,i));return new ds(r,Ee.empty(),e)}function u6(t){return new ds(t.readTime,t.key,Jl)}class ds{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ds(we.min(),Ee.empty(),Jl)}static max(){return new ds(we.max(),Ee.empty(),Jl)}}function c6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ee.comparator(t.documentKey,e.documentKey),n!==0?n:Ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ta(t){if(t.code!==ie.FAILED_PRECONDITION||t.message!==f6)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,i)=>{n(e)}))}static reject(e){return new se(((n,i)=>{i(e)}))}static waitFor(e){return new se(((n,i)=>{let r=0,a=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++a,u&&a===r&&n()}),(g=>i(g)))})),u=!0,a===r&&n()}))}static or(e){let n=se.resolve(!1);for(const i of e)n=n.next((r=>r?se.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,a)=>{i.push(n.call(this,r,a))})),this.waitFor(i)}static mapArray(e,n){return new se(((i,r)=>{const a=e.length,u=new Array(a);let d=0;for(let g=0;g<a;g++){const h=g;n(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>r(_)))}}))}static doWhile(e,n){return new se(((i,r)=>{const a=()=>{e()===!0?n().next((()=>{a()}),r):i()};a()}))}}function h6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ea(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=-1;function Pf(t){return t==null}function df(t){return t===0&&1/t==-1/0}function p6(t){return typeof t=="number"&&Number.isInteger(t)&&!df(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="";function m6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=BT(e)),e=g6(t.get(n),e);return BT(e)}function g6(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const a=t.charAt(r);switch(a){case"\0":n+="";break;case cS:n+="";break;default:n+=a}}return n}function BT(t){return t+cS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function sr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function fS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n){this.comparator=e,this.root=n||sn.EMPTY}insert(e,n){return new Tt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fc(this.root,e,this.comparator,!0)}}class Fc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,n,i,r,a){this.key=e,this.value=n,this.color=i??sn.RED,this.left=r??sn.EMPTY,this.right=a??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,a){return new sn(e??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return sn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,i,r,a){return this}insert(e,n,i){return new sn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new FT(this.data.getIterator())}getIteratorFrom(e){return new FT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class FT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new yi([])}unionWith(e){let n=new Jt(rn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new yi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return fa(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new dS("Invalid base64 string: "+a):a}})(e);return new an(n)}static fromUint8Array(e){const n=(function(r){let a="";for(let u=0;u<r.length;++u)a+=String.fromCharCode(r[u]);return a})(e);return new an(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const y6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(t){if(nt(!!t,39018),typeof t=="string"){let e=0;const n=y6.exec(t);if(nt(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ps(t){return typeof t=="string"?an.fromBase64String(t):an.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="server_timestamp",pS="__type__",mS="__previous_value__",gS="__local_write_time__";function pm(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[pS])==null?void 0:i.stringValue)===hS}function Vf(t){const e=t.mapValue.fields[mS];return pm(e)?Vf(e):e}function $l(t){const e=hs(t.mapValue.fields[gS].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,n,i,r,a,u,d,g,h,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=h,this.isUsingEmulator=_}}const hf="(default)";class Kl{constructor(e,n){this.projectId=e,this.database=n||hf}static empty(){return new Kl("","")}get isDefaultDatabase(){return this.database===hf}isEqual(e){return e instanceof Kl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="__type__",v6="__max__",Gc={mapValue:{}},_S="__vector__",pf="value";function ms(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?pm(t)?4:E6(t)?9007199254740991:T6(t)?10:11:xe(28295,{value:t})}function Xi(t,e){if(t===e)return!0;const n=ms(t);if(n!==ms(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $l(t).isEqual($l(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const u=hs(r.timestampValue),d=hs(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,a){return ps(r.bytesValue).isEqual(ps(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,a){return Mt(r.geoPointValue.latitude)===Mt(a.geoPointValue.latitude)&&Mt(r.geoPointValue.longitude)===Mt(a.geoPointValue.longitude)})(t,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Mt(r.integerValue)===Mt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const u=Mt(r.doubleValue),d=Mt(a.doubleValue);return u===d?df(u)===df(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return fa(t.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return(function(r,a){const u=r.mapValue.fields||{},d=a.mapValue.fields||{};if(qT(u)!==qT(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Xi(u[g],d[g])))return!1;return!0})(t,e);default:return xe(52216,{left:t})}}function Ql(t,e){return(t.values||[]).find((n=>Xi(n,e)))!==void 0}function da(t,e){if(t===e)return 0;const n=ms(t),i=ms(e);if(n!==i)return Ye(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ye(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=Mt(a.integerValue||a.doubleValue),g=Mt(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(t,e);case 3:return GT(t.timestampValue,e.timestampValue);case 4:return GT($l(t),$l(e));case 5:return Pp(t.stringValue,e.stringValue);case 6:return(function(a,u){const d=ps(a),g=ps(u);return d.compareTo(g)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),g=u.split("/");for(let h=0;h<d.length&&h<g.length;h++){const _=Ye(d[h],g[h]);if(_!==0)return _}return Ye(d.length,g.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Ye(Mt(a.latitude),Mt(u.latitude));return d!==0?d:Ye(Mt(a.longitude),Mt(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return HT(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var A,C,P,k;const d=a.fields||{},g=u.fields||{},h=(A=d[pf])==null?void 0:A.arrayValue,_=(C=g[pf])==null?void 0:C.arrayValue,T=Ye(((P=h==null?void 0:h.values)==null?void 0:P.length)||0,((k=_==null?void 0:_.values)==null?void 0:k.length)||0);return T!==0?T:HT(h,_)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Gc.mapValue&&u===Gc.mapValue)return 0;if(a===Gc.mapValue)return 1;if(u===Gc.mapValue)return-1;const d=a.fields||{},g=Object.keys(d),h=u.fields||{},_=Object.keys(h);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const A=Pp(g[T],_[T]);if(A!==0)return A;const C=da(d[g[T]],h[_[T]]);if(C!==0)return C}return Ye(g.length,_.length)})(t.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function GT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ye(t,e);const n=hs(t),i=hs(e),r=Ye(n.seconds,i.seconds);return r!==0?r:Ye(n.nanos,i.nanos)}function HT(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=da(n[r],i[r]);if(a)return a}return Ye(n.length,i.length)}function ha(t){return Vp(t)}function Vp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=hs(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ps(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ee.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=Vp(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const u of i)a?a=!1:r+=",",r+=`${u}:${Vp(n.fields[u])}`;return r+"}"})(t.mapValue):xe(61005,{value:t})}function Xc(t){switch(ms(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vf(t);return e?16+Xc(e):16;case 5:return 2*t.stringValue.length;case 6:return ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+Xc(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return sr(i.fields,((a,u)=>{r+=a.length+Xc(u)})),r})(t.mapValue);default:throw xe(13486,{value:t})}}function zT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Up(t){return!!t&&"integerValue"in t}function mm(t){return!!t&&"arrayValue"in t}function YT(t){return!!t&&"nullValue"in t}function JT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wc(t){return!!t&&"mapValue"in t}function T6(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[yS])==null?void 0:i.stringValue)===_S}function kl(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return sr(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=kl(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=kl(t.arrayValue.values[n]);return e}return{...t}}function E6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===v6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this.value=e}static empty(){return new Zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Wc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=kl(n)}setAll(e){let n=rn.emptyPath(),i={},r=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,i,r),i={},r=[],n=d.popLast()}u?i[d.lastSegment()]=kl(u):r.push(d.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(e){const n=this.field(e.popLast());Wc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Wc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){sr(n,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new Zn(kl(this.value))}}function vS(t){const e=[];return sr(t.fields,((n,i)=>{const r=new rn([n]);if(Wc(i)){const a=vS(i.mapValue).fields;if(a.length===0)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)})),new yi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,i,r,a,u,d){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new fn(e,0,we.min(),we.min(),we.min(),Zn.empty(),0)}static newFoundDocument(e,n,i,r){return new fn(e,1,n,we.min(),i,r,0)}static newNoDocument(e,n){return new fn(e,2,n,we.min(),we.min(),Zn.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,we.min(),we.min(),Zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n){this.position=e,this.inclusive=n}}function $T(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const a=e[r],u=t.position[r];if(a.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),n.key):i=da(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function KT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Xi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n="asc"){this.field=e,this.dir=n}}function A6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{}class Gt extends TS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new x6(e,n,i):n==="array-contains"?new R6(e,i):n==="in"?new I6(e,i):n==="not-in"?new w6(e,i):n==="array-contains-any"?new N6(e,i):new Gt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new C6(e,i):new b6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(da(n,this.value)):n!==null&&ms(this.value)===ms(n)&&this.matchesComparison(da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ai extends TS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ai(e,n)}matches(e){return ES(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ES(t){return t.op==="and"}function AS(t){return S6(t)&&ES(t)}function S6(t){for(const e of t.filters)if(e instanceof Ai)return!1;return!0}function Lp(t){if(t instanceof Gt)return t.field.canonicalString()+t.op.toString()+ha(t.value);if(AS(t))return t.filters.map((e=>Lp(e))).join(",");{const e=t.filters.map((n=>Lp(n))).join(",");return`${t.op}(${e})`}}function SS(t,e){return t instanceof Gt?(function(i,r){return r instanceof Gt&&i.op===r.op&&i.field.isEqual(r.field)&&Xi(i.value,r.value)})(t,e):t instanceof Ai?(function(i,r){return r instanceof Ai&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,u,d)=>a&&SS(u,r.filters[d])),!0):!1})(t,e):void xe(19439)}function xS(t){return t instanceof Gt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ha(n.value)}`})(t):t instanceof Ai?(function(n){return n.op.toString()+" {"+n.getFilters().map(xS).join(" ,")+"}"})(t):"Filter"}class x6 extends Gt{constructor(e,n,i){super(e,n,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const n=Ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class C6 extends Gt{constructor(e,n){super(e,"in",n),this.keys=CS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class b6 extends Gt{constructor(e,n){super(e,"not-in",n),this.keys=CS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function CS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class R6 extends Gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mm(n)&&Ql(n.arrayValue,this.value)}}class I6 extends Gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ql(this.value.arrayValue,n)}}class w6 extends Gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ql(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ql(this.value.arrayValue,n)}}class N6 extends Gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Ql(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,n=null,i=[],r=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function QT(t,e=null,n=[],i=[],r=null,a=null,u=null){return new D6(t,e,n,i,r,a,u)}function gm(t){const e=De(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Lp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Pf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>ha(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>ha(i))).join(",")),e.Te=n}return e.Te}function ym(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!A6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!SS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!KT(t.startAt,e.startAt)&&KT(t.endAt,e.endAt)}function kp(t){return Ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n=null,i=[],r=[],a=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function M6(t,e,n,i,r,a,u,d){return new Aa(t,e,n,i,r,a,u,d)}function _m(t){return new Aa(t)}function XT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bS(t){return t.collectionGroup!==null}function Ol(t){const e=De(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Jt(rn.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Xl(a,i))})),n.has(rn.keyField().canonicalString())||e.Ie.push(new Xl(rn.keyField(),i))}return e.Ie}function Ji(t){const e=De(t);return e.Ee||(e.Ee=P6(e,Ol(t))),e.Ee}function P6(t,e){if(t.limitType==="F")return QT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new Xl(r.field,a)}));const n=t.endAt?new mf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new mf(t.startAt.position,t.startAt.inclusive):null;return QT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Op(t,e){const n=t.filters.concat([e]);return new Aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gf(t,e,n){return new Aa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uf(t,e){return ym(Ji(t),Ji(e))&&t.limitType===e.limitType}function RS(t){return`${gm(Ji(t))}|lt:${t.limitType}`}function ea(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>xS(r))).join(", ")}]`),Pf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>ha(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>ha(r))).join(",")),`Target(${i})`})(Ji(t))}; limitType=${t.limitType})`}function Lf(t,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ee.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,r){for(const a of Ol(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(u,d,g){const h=$T(u,d,g);return u.inclusive?h<=0:h<0})(i.startAt,Ol(i),r)||i.endAt&&!(function(u,d,g){const h=$T(u,d,g);return u.inclusive?h>=0:h>0})(i.endAt,Ol(i),r))})(t,e)}function V6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IS(t){return(e,n)=>{let i=!1;for(const r of Ol(t)){const a=U6(r,e,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function U6(t,e,n){const i=t.field.isKeyField()?Ee.comparator(e.key,n.key):(function(a,u,d){const g=u.data.field(a),h=d.data.field(a);return g!==null&&h!==null?da(g,h):xe(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sr(this.inner,((n,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return fS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6=new Tt(Ee.comparator);function So(){return L6}const wS=new Tt(Ee.comparator);function Pl(...t){let e=wS;for(const n of t)e=e.insert(n.key,n);return e}function NS(t){let e=wS;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Ws(){return Bl()}function DS(){return Bl()}function Bl(){return new rr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const k6=new Tt(Ee.comparator),O6=new Jt(Ee.comparator);function Je(...t){let e=O6;for(const n of t)e=e.add(n);return e}const B6=new Jt(Ye);function q6(){return B6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:df(e)?"-0":e}}function MS(t){return{integerValue:""+t}}function F6(t,e){return p6(e)?MS(e):vm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this._=void 0}}function G6(t,e,n){return t instanceof yf?(function(r,a){const u={fields:{[pS]:{stringValue:hS},[gS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&pm(a)&&(a=Vf(a)),a&&(u.fields[mS]=a),{mapValue:u}})(n,e):t instanceof Wl?VS(t,e):t instanceof Zl?US(t,e):(function(r,a){const u=PS(r,a),d=WT(u)+WT(r.Ae);return Up(u)&&Up(r.Ae)?MS(d):vm(r.serializer,d)})(t,e)}function H6(t,e,n){return t instanceof Wl?VS(t,e):t instanceof Zl?US(t,e):n}function PS(t,e){return t instanceof _f?(function(i){return Up(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class yf extends kf{}class Wl extends kf{constructor(e){super(),this.elements=e}}function VS(t,e){const n=LS(e);for(const i of t.elements)n.some((r=>Xi(r,i)))||n.push(i);return{arrayValue:{values:n}}}class Zl extends kf{constructor(e){super(),this.elements=e}}function US(t,e){let n=LS(e);for(const i of t.elements)n=n.filter((r=>!Xi(r,i)));return{arrayValue:{values:n}}}class _f extends kf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function WT(t){return Mt(t.integerValue||t.doubleValue)}function LS(t){return mm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function z6(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof Wl&&r instanceof Wl||i instanceof Zl&&r instanceof Zl?fa(i.elements,r.elements,Xi):i instanceof _f&&r instanceof _f?Xi(i.Ae,r.Ae):i instanceof yf&&r instanceof yf})(t.transform,e.transform)}class Y6{constructor(e,n){this.version=e,this.transformResults=n}}class Ei{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ei}static exists(e){return new Ei(void 0,e)}static updateTime(e){return new Ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Of{}function kS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Tm(t.key,Ei.none()):new tu(t.key,t.data,Ei.none());{const n=t.data,i=Zn.empty();let r=new Jt(rn.comparator);for(let a of e.fields)if(!r.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),r=r.add(a)}return new ar(t.key,i,new yi(r.toArray()),Ei.none())}}function J6(t,e,n){t instanceof tu?(function(r,a,u){const d=r.value.clone(),g=jT(r.fieldTransforms,a,u.transformResults);d.setAll(g),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof ar?(function(r,a,u){if(!Zc(r.precondition,a))return void a.convertToUnknownDocument(u.version);const d=jT(r.fieldTransforms,a,u.transformResults),g=a.data;g.setAll(OS(r)),g.setAll(d),a.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(t,e,n):(function(r,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function ql(t,e,n,i){return t instanceof tu?(function(a,u,d,g){if(!Zc(a.precondition,u))return d;const h=a.value.clone(),_=eE(a.fieldTransforms,g,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof ar?(function(a,u,d,g){if(!Zc(a.precondition,u))return d;const h=eE(a.fieldTransforms,g,u),_=u.data;return _.setAll(OS(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(t,e,n,i):(function(a,u,d){return Zc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function $6(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),a=PS(i.transform,r||null);a!=null&&(n===null&&(n=Zn.empty()),n.set(i.field,a))}return n||null}function ZT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&fa(i,r,((a,u)=>z6(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tu extends Of{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ar extends Of{constructor(e,n,i,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function OS(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function jT(t,e,n){const i=new Map;nt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const a=t[r],u=a.transform,d=e.data.field(a.field);i.set(a.field,H6(u,d,n[r]))}return i}function eE(t,e,n){const i=new Map;for(const r of t){const a=r.transform,u=n.data.field(r.field);i.set(r.field,G6(a,u,e))}return i}class Tm extends Of{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class K6 extends Of{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&J6(a,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=ql(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=ql(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=DS();return this.mutations.forEach((r=>{const a=e.get(r.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=n.has(r.key)?null:d;const g=kS(u,d);g!==null&&i.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(we.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&fa(this.mutations,e.mutations,((n,i)=>ZT(n,i)))&&fa(this.baseMutations,e.baseMutations,((n,i)=>ZT(n,i)))}}class Em{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){nt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return k6})();const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,i[u].version);return new Em(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Ke;function Z6(t){switch(t){case ie.OK:return xe(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return xe(15467,{code:t})}}function BS(t){if(t===void 0)return Eo("GRPC error has no .code"),ie.UNKNOWN;switch(t){case Ft.OK:return ie.OK;case Ft.CANCELLED:return ie.CANCELLED;case Ft.UNKNOWN:return ie.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return ie.INTERNAL;case Ft.UNAVAILABLE:return ie.UNAVAILABLE;case Ft.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Ft.NOT_FOUND:return ie.NOT_FOUND;case Ft.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Ft.ABORTED:return ie.ABORTED;case Ft.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Ft.DATA_LOSS:return ie.DATA_LOSS;default:return xe(39323,{code:t})}}(Ke=Ft||(Ft={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3=new cs([4294967295,4294967295],0);function tE(t){const e=j6().encode(t),n=new eS;return n.update(e),new Uint8Array(n.digest())}function nE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new cs([n,i],0),new cs([r,a],0)]}class Am{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Vl(`Invalid padding: ${n}`);if(i<0)throw new Vl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=cs.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(cs.fromNumber(i)));return r.compare(e3)===1&&(r=new cs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=tE(e),[i,r]=nE(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);if(!this.we(u))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Am(a,r,n);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const n=tE(e),[i,r]=nE(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);this.Se(u)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,n,i,r,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Bf(we.min(),r,new Tt(Ye),So(),Je())}}class nu{constructor(e,n,i,r,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new nu(i,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class qS{constructor(e,n){this.targetId=e,this.Ce=n}}class FS{constructor(e,n,i=an.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class iE{constructor(){this.ve=0,this.Fe=oE(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),i=Je();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:xe(38017,{changeType:a})}})),new nu(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=oE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class t3{constructor(e){this.Ge=e,this.ze=new Map,this.je=So(),this.Je=Hc(),this.He=Hc(),this.Ye=new Tt(Ye)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const a=r.target;if(kp(a))if(i===0){const u=new Ee(a.path);this.et(n,u,fn.newNoDocument(u,we.min()))}else nt(i===1,20013,{expectedCount:i});else{const u=this._t(n);if(u!==i){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(n);const h=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let u,d;try{u=ps(i).toUint8Array()}catch(g){if(g instanceof dS)return ca("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Am(u,r,a)}catch(g){return ca(g instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(n,a,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&kp(d.target)){const g=new Ee(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,fn.newNoDocument(g,e))}a.Be&&(n.set(u,a.ke()),a.qe())}}));let i=Je();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((g=>{const h=this.ot(g);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const r=new Bf(e,n,this.Ye,this.je,i);return this.je=So(),this.Je=Hc(),this.He=Hc(),this.Ye=new Tt(Ye),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new iE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Jt(Ye),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Jt(Ye),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new iE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hc(){return new Tt(Ee.comparator)}function oE(){return new Tt(Ee.comparator)}const n3={asc:"ASCENDING",desc:"DESCENDING"},i3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o3={and:"AND",or:"OR"};class s3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bp(t,e){return t.useProto3Json||Pf(e)?e:{value:e}}function vf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function r3(t,e){return vf(t,e.toTimestamp())}function $i(t){return nt(!!t,49232),we.fromTimestamp((function(n){const i=hs(n);return new mt(i.seconds,i.nanos)})(t))}function Sm(t,e){return qp(t,e).canonicalString()}function qp(t,e){const n=(function(r){return new pt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function HS(t){const e=pt.fromString(t);return nt(KS(e),10190,{key:e.toString()}),e}function Fp(t,e){return Sm(t.databaseId,e.path)}function sp(t,e){const n=HS(e);if(n.get(1)!==t.databaseId.projectId)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new me(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ee(YS(n))}function zS(t,e){return Sm(t.databaseId,e)}function a3(t){const e=HS(t);return e.length===4?pt.emptyPath():YS(e)}function Gp(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function YS(t){return nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function sE(t,e,n){return{name:Fp(t,e),fields:n.value.mapValue.fields}}function l3(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:xe(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(nt(_===void 0||typeof _=="string",58123),an.fromBase64String(_||"")):(nt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),an.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?ie.UNKNOWN:BS(h.code);return new me(_,h.message||"")})(u);n=new FS(i,r,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=sp(t,i.document.name),a=$i(i.document.updateTime),u=i.document.createTime?$i(i.document.createTime):we.min(),d=new Zn({mapValue:{fields:i.document.fields}}),g=fn.newFoundDocument(r,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];n=new jc(h,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=sp(t,i.document),a=i.readTime?$i(i.readTime):we.min(),u=fn.newNoDocument(r,a),d=i.removedTargetIds||[];n=new jc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=sp(t,i.document),a=i.removedTargetIds||[];n=new jc([],a,r,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,u=new W6(r,a),d=i.targetId;n=new qS(d,u)}}return n}function u3(t,e){let n;if(e instanceof tu)n={update:sE(t,e.key,e.value)};else if(e instanceof Tm)n={delete:Fp(t,e.key)};else if(e instanceof ar)n={update:sE(t,e.key,e.data),updateMask:_3(e.fieldMask)};else{if(!(e instanceof K6))return xe(16599,{Vt:e.type});n={verify:Fp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof yf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Wl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Zl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof _f)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw xe(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:r3(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:xe(27497)})(t,e.precondition)),n}function c3(t,e){return t&&t.length>0?(nt(e!==void 0,14353),t.map((n=>(function(r,a){let u=r.updateTime?$i(r.updateTime):$i(a);return u.isEqual(we.min())&&(u=$i(a)),new Y6(u,r.transformResults||[])})(n,e)))):[]}function f3(t,e){return{documents:[zS(t,e.path)]}}function d3(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=zS(t,r);const a=(function(h){if(h.length!==0)return $S(Ai.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(A){return{field:ta(A.field),direction:m3(A.dir)}})(_)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=Bp(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:r}}function h3(t){let e=a3(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){nt(i===1,65062);const _=n.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let a=[];n.where&&(a=(function(T){const A=JS(T);return A instanceof Ai&&AS(A)?A.getFilters():[A]})(n.where));let u=[];n.orderBy&&(u=(function(T){return T.map((A=>(function(P){return new Xl(na(P.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(A)))})(n.orderBy));let d=null;n.limit&&(d=(function(T){let A;return A=typeof T=="object"?T.value:T,Pf(A)?null:A})(n.limit));let g=null;n.startAt&&(g=(function(T){const A=!!T.before,C=T.values||[];return new mf(C,A)})(n.startAt));let h=null;return n.endAt&&(h=(function(T){const A=!T.before,C=T.values||[];return new mf(C,A)})(n.endAt)),M6(e,r,u,a,d,"F",g,h)}function p3(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function JS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=na(n.unaryFilter.field);return Gt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=na(n.unaryFilter.field);return Gt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=na(n.unaryFilter.field);return Gt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=na(n.unaryFilter.field);return Gt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Gt.create(na(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ai.create(n.compositeFilter.filters.map((i=>JS(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(n.compositeFilter.op))})(t):xe(30097,{filter:t})}function m3(t){return n3[t]}function g3(t){return i3[t]}function y3(t){return o3[t]}function ta(t){return{fieldPath:t.canonicalString()}}function na(t){return rn.fromServerFormat(t.fieldPath)}function $S(t){return t instanceof Gt?(function(n){if(n.op==="=="){if(JT(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NAN"}};if(YT(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(JT(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NAN"}};if(YT(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(n.field),op:g3(n.op),value:n.value}}})(t):t instanceof Ai?(function(n){const i=n.getFilters().map((r=>$S(r)));return i.length===1?i[0]:{compositeFilter:{op:y3(n.op),filters:i}}})(t):xe(54877,{filter:t})}function _3(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function KS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e,n,i,r,a=we.min(),u=we.min(),d=an.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new rs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e){this.yt=e}}function T3(t){const e=h3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.Cn=new A3}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(ds.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(ds.min())}updateCollectionGroup(e,n,i){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class A3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Jt(pt.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Jt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QS=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(QS,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pa(0)}static cr(){return new pa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="LruGarbageCollector",S3=1048576;function lE([t,e],[n,i]){const r=Ye(t,n);return r===0?Ye(e,i):r}class x3{constructor(e){this.Ir=e,this.buffer=new Jt(lE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();lE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class C3{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(aE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ea(n)?ge(aE,"Ignoring IndexedDB error during garbage collection: ",n):await Ta(n)}await this.Vr(3e5)}))}}class b3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Mf.ce);const i=new x3(n);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(rE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,a,u,d,g,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,n)))).next((T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),jr()<=Xe.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(d-u)+`ms
	Removed ${a} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(h-g)+`ms
Total Duration: ${h-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T}))))}}function R3(t,e){return new b3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.changes=new rr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?se.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&ql(i.mutation,r,yi.empty(),mt.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,Je()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=Je()){const r=Ws();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((a=>{let u=Pl();return a.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=Ws();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,Je())))}populateOverlays(e,n,i){const r=[];return i.forEach((a=>{n.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,i,r){let a=So();const u=Bl(),d=(function(){return Bl()})();return n.forEach(((g,h)=>{const _=i.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof ar)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),ql(_.mutation,h,_.mutation.getFieldMask(),mt.now())):u.set(h.key,yi.empty())})),this.recalculateAndSaveOverlays(e,a).next((g=>(g.forEach(((h,_)=>u.set(h,_))),n.forEach(((h,_)=>d.set(h,new w3(_,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,n){const i=Bl();let r=new Tt(((u,d)=>u-d)),a=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((g=>{const h=n.get(g);if(h===null)return;let _=i.get(g)||yi.empty();_=d.applyToLocalView(h,_),i.set(g,_);const T=(r.get(d.batchId)||Je()).add(g);r=r.insert(d.batchId,T)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),h=g.key,_=g.value,T=DS();_.forEach((A=>{if(!a.has(A)){const C=kS(n.get(A),i.get(A));C!==null&&T.set(A,C),a=a.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((a=>{const u=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-a.size):se.resolve(Ws());let d=Jl,g=a;return u.next((h=>se.forEach(h,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{g=g.insert(_,A)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,g,h,Je()))).next((_=>({batchId:d,changes:NS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ee(n)).next((i=>{let r=Pl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const a=n.collectionGroup;let u=Pl();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(g=>{const h=(function(T,A){return new Aa(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((_=>{_.forEach(((T,A)=>{u=u.insert(T,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,r)))).next((u=>{a.forEach(((g,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,fn.newInvalidDocument(_)))}));let d=Pl();return u.forEach(((g,h)=>{const _=a.get(g);_!==void 0&&ql(_.mutation,h,yi.empty(),mt.now()),Lf(n,h)&&(d=d.insert(g,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:$i(r.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:T3(r.bundledQuery),readTime:$i(r.readTime)}})(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.overlays=new Tt(Ee.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Ws();return se.forEach(n,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,a)=>{this.St(e,n,a)})),se.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,n,i){const r=Ws(),a=n.length+1,u=new Ee(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,h=g.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&g.largestBatchId>i&&r.set(g.getKey(),g)}return se.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let a=new Tt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=Ws(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=Ws(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=r)););return se.resolve(d)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new X6(n,i));let a=this.qr.get(n);a===void 0&&(a=Je(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(){this.Qr=new Jt(Xt.$r),this.Ur=new Jt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new Xt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new Xt(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Ee(new pt([])),i=new Xt(n,e),r=new Xt(n,e+1),a=[];return this.Ur.forEachInRange([i,r],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ee(new pt([])),i=new Xt(n,e),r=new Xt(n,e+1);let a=Je();return this.Ur.forEachInRange([i,r],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new Xt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ee.comparator(e.key,n.key)||Ye(e.Yr,n.Yr)}static Kr(e,n){return Ye(e.Yr,n.Yr)||Ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Jt(Xt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Q6(a,n,i,r);this.mutationQueue.push(u);for(const d of r)this.Zr=this.Zr.add(new Xt(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),a=r<0?0:r;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?hm:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Xt(n,0),r=new Xt(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(u=>{const d=this.Xr(u.Yr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Jt(Ye);return n.forEach((r=>{const a=new Xt(r,0),u=new Xt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let a=i;Ee.isDocumentKey(a)||(a=a.child(""));const u=new Xt(new Ee(a),0);let d=new Jt(Ye);return this.Zr.forEachWhile((g=>{const h=g.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(d=d.add(g.Yr)),!0)}),u),se.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){nt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(n.mutations,(r=>{const a=new Xt(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new Xt(n,0),r=this.Zr.firstAfterOrEqual(i);return se.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.ri=e,this.docs=(function(){return new Tt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,u=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return se.resolve(i?i.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let i=So();return n.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():fn.newInvalidDocument(r))})),se.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let a=So();const u=n.path,d=new Ee(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:h,value:{document:_}}=g.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||c6(u6(_),i)<=0||(r.has(_.key)||Lf(n,_))&&(a=a.insert(_.key,_.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,n,i,r){xe(9500)}ii(e,n){return se.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new L3(this)}getSize(e){return se.resolve(this.size)}}class L3 extends I3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e){this.persistence=e,this.si=new rr((n=>gm(n)),ym),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new xm,this.targetCount=0,this.ai=pa.ur()}forEachTarget(e,n){return this.si.forEach(((i,r)=>n(r))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new pa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,i){let r=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),se.waitFor(a).next((()=>r))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return se.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),se.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach((u=>{a.push(r.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return se.resolve(i)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mf(0),this.li=!1,this.li=!0,this.hi=new P3,this.referenceDelegate=e(this),this.Pi=new k3(this),this.indexManager=new E3,this.remoteDocumentCache=(function(r){return new U3(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new v3(n),this.Ii=new D3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new M3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new V3(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ge("MemoryPersistence","Starting transaction:",e);const r=new O3(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(e,n){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class O3 extends d6{constructor(e){super(),this.currentSequenceNumber=e}}class Cm{constructor(e){this.persistence=e,this.Ri=new xm,this.Vi=null}static mi(e){return new Cm(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),se.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const r=Ee.fromPath(i);return this.gi(e,r).next((a=>{a||n.removeEntry(r,we.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Tf{constructor(e,n){this.persistence=e,this.pi=new rr((i=>m6(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=R3(this,n)}static mi(e,n){return new Tf(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((i,r)=>this.br(e,i,r).next((a=>a?se.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,n).next((d=>{d||(i++,a.removeEntry(u,we.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Xc(e.data.value)),n}br(e,n,i){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return se.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Je(),r=Je();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new bm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return LM()?8:h6(VM())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const a={result:null};return this.ys(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,n,r,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new B3;return this.Ss(e,n,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,n,u,d.size)}))})).next((()=>a.result))}bs(e,n,i,r){return i.documentReadCount<this.fs?(jr()<=Xe.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(jr()<=Xe.DEBUG&&ge("QueryEngine","Query:",ea(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(jr()<=Xe.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(n))):se.resolve())}ys(e,n){if(XT(n))return se.resolve(null);let i=Ji(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=gf(n,null,"F"),i=Ji(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Je(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((g=>{const h=this.Ds(n,d);return this.Cs(n,h,u,g.readTime)?this.ys(e,gf(n,null,"F")):this.vs(e,h,n,g)}))))})))))}ws(e,n,i,r){return XT(n)||r.isEqual(we.min())?se.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(n,a);return this.Cs(n,u,i,r)?se.resolve(null):(jr()<=Xe.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ea(n)),this.vs(e,u,n,l6(r,Jl)).next((d=>d)))}))}Ds(e,n){let i=new Jt(IS(e));return n.forEach(((r,a)=>{Lf(e,a)&&(i=i.add(a))})),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,n,i){return jr()<=Xe.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",ea(n)),this.ps.getDocumentsMatchingQuery(e,n,ds.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="LocalStore",F3=3e8;class G3{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Tt(Ye),this.xs=new rr((a=>gm(a)),ym),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new N3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function H3(t,e,n,i){return new G3(t,e,n,i)}async function WS(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let g=Je();for(const h of r){u.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(i,g).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function z3(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,h,_){const T=h.batch,A=T.keys();let C=se.resolve();return A.forEach((P=>{C=C.next((()=>_.getEntry(g,P))).next((k=>{const M=h.docVersions.get(P);nt(M!==null,48541),k.version.compareTo(M)<0&&(T.applyToRemoteDocument(k,h),k.isValidDocument()&&(k.setReadTime(h.commitVersion),_.addEntry(k)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(g,T)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let g=Je();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(g=g.add(d.batch.mutations[h].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function ZS(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Y3(t,e){const n=De(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const A=r.get(T);if(!A)return;d.push(n.Pi.removeMatchingKeys(a,_.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(a,_.addedDocuments,T))));let C=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(an.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),r=r.insert(T,C),(function(k,M,K){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=F3?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(A,C,_)&&d.push(n.Pi.updateTargetData(a,C))}));let g=So(),h=Je();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(J3(a,u,e.documentUpdates).next((_=>{g=_.ks,h=_.qs}))),!i.isEqual(we.min())){const _=n.Pi.getLastRemoteSnapshotVersion(a).next((T=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,g,h))).next((()=>g))})).then((a=>(n.Ms=r,a)))}function J3(t,e,n){let i=Je(),r=Je();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let u=So();return n.forEach(((d,g)=>{const h=a.get(d);g.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(we.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!h.isValidDocument()||g.version.compareTo(h.version)>0||g.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):ge(Rm,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",g.version)})),{ks:u,qs:r}}))}function $3(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=hm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function K3(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.Pi.getTargetData(i,e).next((a=>a?(r=a,se.resolve(r)):n.Pi.allocateTargetId(i).next((u=>(r=new rs(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Hp(t,e,n){const i=De(t),r=i.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!Ea(u))throw u;ge(Rm,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function uE(t,e,n){const i=De(t);let r=we.min(),a=Je();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,h,_){const T=De(g),A=T.xs.get(_);return A!==void 0?se.resolve(T.Ms.get(A)):T.Pi.getTargetData(h,_)})(i,u,Ji(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((g=>{a=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,n?r:we.min(),n?a:Je()))).next((d=>(Q3(i,V6(e),d),{documents:d,Qs:a})))))}function Q3(t,e,n){let i=t.Os.get(e)||we.min();n.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.Os.set(e,i)}class cE{constructor(){this.activeTargetIds=q6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class X3{constructor(){this.Mo=new cE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new cE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="ConnectivityMonitor";class dE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(fE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(fE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc=null;function zp(){return zc===null?zc=(function(){return 268435456+Math.round(2147483648*Math.random())})():zc++,"0x"+zc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp="RestConnection",Z3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class j3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===hf?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,a){const u=zp(),d=this.zo(e,n.toUriEncodedString());ge(rp,`Sending RPC '${e}' ${u}:`,d,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,a);const{host:h}=new URL(d),_=jl(h);return this.Jo(e,d,g,i,_).then((T=>(ge(rp,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw ca(rp,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,n,i,r,a,u){return this.Go(e,n,i,r,a)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+va})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}zo(e,n){const i=Z3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class tP extends j3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,a){const u=zp();return new Promise(((d,g)=>{const h=new tS;h.setWithCredentials(!0),h.listenOnce(nS.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Qc.NO_ERROR:const T=h.getResponseJson();ge(un,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Qc.TIMEOUT:ge(un,`RPC '${e}' ${u} timed out`),g(new me(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Qc.HTTP_ERROR:const A=h.getStatus();if(ge(un,`RPC '${e}' ${u} failed with status:`,A,"response text:",h.getResponseText()),A>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const P=C==null?void 0:C.error;if(P&&P.status&&P.message){const k=(function(K){const te=K.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(te)>=0?te:ie.UNKNOWN})(P.status);g(new me(k,P.message))}else g(new me(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else g(new me(ie.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ge(un,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ge(un,`RPC '${e}' ${u} sending request:`,r),h.send(n,"POST",_,i,15)}))}T_(e,n,i){const r=zp(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=sS(),d=oS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(g.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const _=a.join("");ge(un,`Creating RPC '${e}' stream ${r}: ${_}`,g);const T=u.createWebChannel(_,g);this.I_(T);let A=!1,C=!1;const P=new eP({Yo:M=>{C?ge(un,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(A||(ge(un,`Opening RPC '${e}' stream ${r} transport.`),T.open(),A=!0),ge(un,`RPC '${e}' stream ${r} sending:`,M),T.send(M))},Zo:()=>T.close()}),k=(M,K,te)=>{M.listen(K,(Z=>{try{te(Z)}catch(re){setTimeout((()=>{throw re}),0)}}))};return k(T,Ml.EventType.OPEN,(()=>{C||(ge(un,`RPC '${e}' stream ${r} transport opened.`),P.o_())})),k(T,Ml.EventType.CLOSE,(()=>{C||(C=!0,ge(un,`RPC '${e}' stream ${r} transport closed`),P.a_(),this.E_(T))})),k(T,Ml.EventType.ERROR,(M=>{C||(C=!0,ca(un,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),P.a_(new me(ie.UNAVAILABLE,"The operation could not be completed")))})),k(T,Ml.EventType.MESSAGE,(M=>{var K;if(!C){const te=M.data[0];nt(!!te,16349);const Z=te,re=(Z==null?void 0:Z.error)||((K=Z[0])==null?void 0:K.error);if(re){ge(un,`RPC '${e}' stream ${r} received error:`,re);const ce=re.status;let ue=(function(I){const L=Ft[I];if(L!==void 0)return BS(L)})(ce),N=re.message;ue===void 0&&(ue=ie.INTERNAL,N="Unknown error status: "+ce+" with message "+re.message),C=!0,P.a_(new me(ue,N)),T.close()}else ge(un,`RPC '${e}' stream ${r} received:`,te),P.u_(te)}})),k(d,iS.STAT_EVENT,(M=>{M.stat===Mp.PROXY?ge(un,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===Mp.NOPROXY&&ge(un,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function ap(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t){return new s3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(e,n,i=1e3,r=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&ge("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="PersistentStream";class ex{constructor(e,n,i,r,a,u,d,g){this.Mi=e,this.S_=i,this.b_=r,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ie.RESOURCE_EXHAUSTED?(Eo(n.toString()),Eo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===n&&this.G_(i,r)}),(i=>{e((()=>{const r=new me(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ge(hE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ge(hE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nP extends ex{constructor(e,n,i,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,u),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=l3(this.serializer,e),i=(function(a){if(!("targetChange"in a))return we.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?we.min():u.readTime?$i(u.readTime):we.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Gp(this.serializer),n.addTarget=(function(a,u){let d;const g=u.target;if(d=kp(g)?{documents:f3(a,g)}:{query:d3(a,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=GS(a,u.resumeToken);const h=Bp(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(we.min())>0){d.readTime=vf(a,u.snapshotVersion.toTimestamp());const h=Bp(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=p3(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Gp(this.serializer),n.removeTarget=e,this.q_(n)}}class iP extends ex{constructor(e,n,i,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=c3(e.writeResults,e.commitTime),i=$i(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Gp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>u3(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{}class sP extends oP{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,qp(n,i),r,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new me(ie.UNKNOWN,a.toString())}))}Ho(e,n,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,qp(n,i),r,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new me(ie.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class rP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Eo(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr="RemoteStore";class aP{constructor(e,n,i,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{lr(this)&&(ge(tr,"Restarting streams for network reachability change."),await(async function(g){const h=De(g);h.Ea.add(4),await iu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Ff(h)})(this))}))})),this.Ra=new rP(i,r)}}async function Ff(t){if(lr(t))for(const e of t.da)await e(!0)}async function iu(t){for(const e of t.da)await e(!1)}function tx(t,e){const n=De(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Dm(n)?Nm(n):Sa(n).O_()&&wm(n,e))}function Im(t,e){const n=De(t),i=Sa(n);n.Ia.delete(e),i.O_()&&nx(n,e),n.Ia.size===0&&(i.O_()?i.L_():lr(n)&&n.Ra.set("Unknown"))}function wm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sa(t).Y_(e)}function nx(t,e){t.Va.Ue(e),Sa(t).Z_(e)}function Nm(t){t.Va=new t3({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sa(t).start(),t.Ra.ua()}function Dm(t){return lr(t)&&!Sa(t).x_()&&t.Ia.size>0}function lr(t){return De(t).Ea.size===0}function ix(t){t.Va=void 0}async function lP(t){t.Ra.set("Online")}async function uP(t){t.Ia.forEach(((e,n)=>{wm(t,e)}))}async function cP(t,e){ix(t),Dm(t)?(t.Ra.ha(e),Nm(t)):t.Ra.set("Unknown")}async function fP(t,e,n){if(t.Ra.set("Online"),e instanceof FS&&e.state===2&&e.cause)try{await(async function(r,a){const u=a.cause;for(const d of a.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.Ia.delete(d),r.Va.removeTarget(d))})(t,e)}catch(i){ge(tr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Ef(t,i)}else if(e instanceof jc?t.Va.Ze(e):e instanceof qS?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const i=await ZS(t.localStore);n.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((g,h)=>{if(g.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,h)=>{const _=a.Ia.get(g);if(!_)return;a.Ia.set(g,_.withResumeToken(an.EMPTY_BYTE_STRING,_.snapshotVersion)),nx(a,g);const T=new rs(_.target,g,h,_.sequenceNumber);wm(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(i){ge(tr,"Failed to raise snapshot:",i),await Ef(t,i)}}async function Ef(t,e,n){if(!Ea(e))throw e;t.Ea.add(1),await iu(t),t.Ra.set("Offline"),n||(n=()=>ZS(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ge(tr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ff(t)}))}function ox(t,e){return e().catch((n=>Ef(t,n,e)))}async function Gf(t){const e=De(t),n=gs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hm;for(;dP(e);)try{const r=await $3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,hP(e,r)}catch(r){await Ef(e,r)}sx(e)&&rx(e)}function dP(t){return lr(t)&&t.Ta.length<10}function hP(t,e){t.Ta.push(e);const n=gs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function sx(t){return lr(t)&&!gs(t).x_()&&t.Ta.length>0}function rx(t){gs(t).start()}async function pP(t){gs(t).ra()}async function mP(t){const e=gs(t);for(const n of t.Ta)e.ea(n.mutations)}async function gP(t,e,n){const i=t.Ta.shift(),r=Em.from(i,e,n);await ox(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Gf(t)}async function yP(t,e){e&&gs(t).X_&&await(async function(i,r){if((function(u){return Z6(u)&&u!==ie.ABORTED})(r.code)){const a=i.Ta.shift();gs(i).B_(),await ox(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await Gf(i)}})(t,e),sx(t)&&rx(t)}async function pE(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),ge(tr,"RemoteStore received new credentials");const i=lr(n);n.Ea.add(3),await iu(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ff(n)}async function _P(t,e){const n=De(t);e?(n.Ea.delete(2),await Ff(n)):e||(n.Ea.add(2),await iu(n),n.Ra.set("Unknown"))}function Sa(t){return t.ma||(t.ma=(function(n,i,r){const a=De(n);return a.sa(),new nP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(t.datastore,t.asyncQueue,{Xo:lP.bind(null,t),t_:uP.bind(null,t),r_:cP.bind(null,t),H_:fP.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),Dm(t)?Nm(t):t.Ra.set("Unknown")):(await t.ma.stop(),ix(t))}))),t.ma}function gs(t){return t.fa||(t.fa=(function(n,i,r){const a=De(n);return a.sa(),new iP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:pP.bind(null,t),r_:yP.bind(null,t),ta:mP.bind(null,t),na:gP.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Gf(t)):(await t.fa.stop(),t.Ta.length>0&&(ge(tr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n,i,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new _o,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,a){const u=Date.now()+i,d=new Mm(e,n,u,r,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new me(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pm(t,e){if(Eo("AsyncQueue",`${e}: ${t}`),Ea(t))return new me(ie.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{static emptySet(e){return new aa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Ee.comparator(n.key,i.key):(n,i)=>Ee.comparator(n.key,i.key),this.keyedMap=Pl(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof aa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new aa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(){this.ga=new Tt(Ee.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class ma{constructor(e,n,i,r,a,u,d,g,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,a){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new ma(e,n,aa.emptySet(n),u,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class TP{constructor(){this.queries=gE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=De(n),a=r.queries;r.queries=gE(),a.forEach(((u,d)=>{for(const g of d.Sa)g.onError(i)}))})(this,new me(ie.ABORTED,"Firestore shutting down"))}}function gE(){return new rr((t=>RS(t)),Uf)}async function ax(t,e){const n=De(t);let i=3;const r=e.query;let a=n.queries.get(r);a?!a.ba()&&e.Da()&&(i=2):(a=new vP,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(r,!0);break;case 1:a.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(u){const d=Pm(u,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(d)}n.queries.set(r,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Vm(n)}async function lx(t,e){const n=De(t),i=e.query;let r=3;const a=n.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?r=e.Da()?0:1:!a.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function EP(t,e){const n=De(t);let i=!1;for(const r of e){const a=r.query,u=n.queries.get(a);if(u){for(const d of u.Sa)d.Fa(r)&&(i=!0);u.wa=r}}i&&Vm(n)}function AP(t,e,n){const i=De(t),r=i.queries.get(e);if(r)for(const a of r.Sa)a.onError(n);i.queries.delete(e)}function Vm(t){t.Ca.forEach((e=>{e.next()}))}var Yp,yE;(yE=Yp||(Yp={})).Ma="default",yE.Cache="cache";class ux{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ma(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ma.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.key=e}}class fx{constructor(e){this.key=e}}class SP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=IS(e),this.tu=new aa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new mE,r=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,u=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const A=r.get(_),C=Lf(this.query,T)?T:null,P=!!A&&this.mutatedKeys.has(A.key),k=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let M=!1;A&&C?A.data.isEqual(C.data)?P!==k&&(i.track({type:3,doc:C}),M=!0):this.su(A,C)||(i.track({type:2,doc:C}),M=!0,(g&&this.eu(C,g)>0||h&&this.eu(C,h)<0)&&(d=!0)):!A&&C?(i.track({type:0,doc:C}),M=!0):A&&!C&&(i.track({type:1,doc:A}),M=!0,(g||h)&&(d=!0)),M&&(C?(u=u.add(C),a=k?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(C,P){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:M})}};return k(C)-k(P)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),r=r??!1;const d=n&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,h=g!==this.Za;return this.Za=g,u.length!==0||h?{snapshot:new ma(this.query,e.tu,a,u,e.mutatedKeys,g===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new mE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new fx(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new cx(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ma.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Um="SyncEngine";class xP{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class CP{constructor(e){this.key=e,this.hu=!1}}class bP{constructor(e,n,i,r,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new rr((d=>RS(d)),Uf),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(Ee.comparator),this.Au=new Map,this.Ru=new xm,this.Vu={},this.mu=new Map,this.fu=pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function RP(t,e,n=!0){const i=yx(t);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await dx(i,e,n,!0),r}async function IP(t,e){const n=yx(t);await dx(n,e,!0,!1)}async function dx(t,e,n,i){const r=await K3(t.localStore,Ji(e)),a=r.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let d;return i&&(d=await wP(t,e,a,u==="current",r.resumeToken)),t.isPrimaryClient&&n&&tx(t.remoteStore,r),d}async function wP(t,e,n,i,r){t.pu=(T,A,C)=>(async function(k,M,K,te){let Z=M.view.ru(K);Z.Cs&&(Z=await uE(k.localStore,M.query,!1).then((({documents:N})=>M.view.ru(N,Z))));const re=te&&te.targetChanges.get(M.targetId),ce=te&&te.targetMismatches.get(M.targetId)!=null,ue=M.view.applyChanges(Z,k.isPrimaryClient,re,ce);return vE(k,M.targetId,ue.au),ue.snapshot})(t,T,A,C);const a=await uE(t.localStore,e,!0),u=new SP(e,a.Qs),d=u.ru(a.documents),g=nu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=u.applyChanges(d,t.isPrimaryClient,g);vE(t,n,h.au);const _=new xP(e,n,u);return t.Tu.set(e,_),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function NP(t,e,n){const i=De(t),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((u=>!Uf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Hp(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Im(i.remoteStore,r.targetId),Jp(i,r.targetId)})).catch(Ta)):(Jp(i,r.targetId),await Hp(i.localStore,r.targetId,!0))}async function DP(t,e){const n=De(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Im(n.remoteStore,i.targetId))}async function MP(t,e,n){const i=BP(t);try{const r=await(function(u,d){const g=De(u),h=mt.now(),_=d.reduce(((C,P)=>C.add(P.key)),Je());let T,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let P=So(),k=Je();return g.Ns.getEntries(C,_).next((M=>{P=M,P.forEach(((K,te)=>{te.isValidDocument()||(k=k.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,P))).next((M=>{T=M;const K=[];for(const te of d){const Z=$6(te,T.get(te.key).overlayedDocument);Z!=null&&K.push(new ar(te.key,Z,vS(Z.value.mapValue),Ei.exists(!0)))}return g.mutationQueue.addMutationBatch(C,h,K,d)})).next((M=>{A=M;const K=M.applyToLocalDocumentSet(T,k);return g.documentOverlayCache.saveOverlays(C,M.batchId,K)}))})).then((()=>({batchId:A.batchId,changes:NS(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,d,g){let h=u.Vu[u.currentUser.toKey()];h||(h=new Tt(Ye)),h=h.insert(d,g),u.Vu[u.currentUser.toKey()]=h})(i,r.batchId,n),await ou(i,r.changes),await Gf(i.remoteStore)}catch(r){const a=Pm(r,"Failed to persist write");n.reject(a)}}async function hx(t,e){const n=De(t);try{const i=await Y3(n.localStore,e);e.targetChanges.forEach(((r,a)=>{const u=n.Au.get(a);u&&(nt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?nt(u.hu,14607):r.removedDocuments.size>0&&(nt(u.hu,42227),u.hu=!1))})),await ou(n,i,e)}catch(i){await Ta(i)}}function _E(t,e,n){const i=De(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const g=De(u);g.onlineState=d;let h=!1;g.queries.forEach(((_,T)=>{for(const A of T.Sa)A.va(d)&&(h=!0)})),h&&Vm(g)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function PP(t,e,n){const i=De(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),a=r&&r.key;if(a){let u=new Tt(Ee.comparator);u=u.insert(a,fn.newNoDocument(a,we.min()));const d=Je().add(a),g=new Bf(we.min(),new Map,new Tt(Ye),u,d);await hx(i,g),i.du=i.du.remove(a),i.Au.delete(e),Lm(i)}else await Hp(i.localStore,e,!1).then((()=>Jp(i,e,n))).catch(Ta)}async function VP(t,e){const n=De(t),i=e.batch.batchId;try{const r=await z3(n.localStore,e);mx(n,i,null),px(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await ou(n,r)}catch(r){await Ta(r)}}async function UP(t,e,n){const i=De(t);try{const r=await(function(u,d){const g=De(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return g.mutationQueue.lookupMutationBatch(h,d).next((T=>(nt(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(h,T)))).next((()=>g.mutationQueue.performConsistencyCheck(h))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>g.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);mx(i,e,n),px(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await ou(i,r)}catch(r){await Ta(r)}}function px(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function mx(t,e,n){const i=De(t);let r=i.Vu[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Jp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||gx(t,i)}))}function gx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Im(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Lm(t))}function vE(t,e,n){for(const i of n)i instanceof cx?(t.Ru.addReference(i.key,e),LP(t,i)):i instanceof fx?(ge(Um,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||gx(t,i.key)):xe(19791,{wu:i})}function LP(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ge(Um,"New document in limbo: "+n),t.Eu.add(i),Lm(t))}function Lm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ee(pt.fromString(e)),i=t.fu.next();t.Au.set(i,new CP(n)),t.du=t.du.insert(n,i),tx(t.remoteStore,new rs(Ji(_m(n.path)),i,"TargetPurposeLimboResolution",Mf.ce))}}async function ou(t,e,n){const i=De(t),r=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,g)=>{u.push(i.pu(g,e,n).then((h=>{var _;if((h||n)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(h){r.push(h);const T=bm.As(g.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.H_(r),await(async function(g,h){const _=De(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(h,(A=>se.forEach(A.Es,(C=>_.persistence.referenceDelegate.addReference(T,A.targetId,C))).next((()=>se.forEach(A.ds,(C=>_.persistence.referenceDelegate.removeReference(T,A.targetId,C)))))))))}catch(T){if(!Ea(T))throw T;ge(Rm,"Failed to update sequence numbers: "+T)}for(const T of h){const A=T.targetId;if(!T.fromCache){const C=_.Ms.get(A),P=C.snapshotVersion,k=C.withLastLimboFreeSnapshotVersion(P);_.Ms=_.Ms.insert(A,k)}}})(i.localStore,a))}async function kP(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){ge(Um,"User change. New user:",e.toKey());const i=await WS(n.localStore,e);n.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((g=>{g.reject(new me(ie.CANCELLED,u))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ou(n,i.Ls)}}function OP(t,e){const n=De(t),i=n.Au.get(e);if(i&&i.hu)return Je().add(i.key);{let r=Je();const a=n.Iu.get(e);if(!a)return r;for(const u of a){const d=n.Tu.get(u);r=r.unionWith(d.view.nu)}return r}}function yx(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PP.bind(null,e),e.Pu.H_=EP.bind(null,e.eventManager),e.Pu.yu=AP.bind(null,e.eventManager),e}function BP(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UP.bind(null,e),e}class Af{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return H3(this.persistence,new q3,e.initialUser,this.serializer)}Cu(e){return new XS(Cm.mi,this.serializer)}Du(e){return new X3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Af.provider={build:()=>new Af};class qP extends Af{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){nt(this.persistence.referenceDelegate instanceof Tf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new C3(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new XS((i=>Tf.mi(i,n)),this.serializer)}}class $p{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_E(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=kP.bind(null,this.syncEngine),await _P(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new TP})()}createDatastore(e){const n=qf(e.databaseInfo.databaseId),i=(function(a){return new tP(a)})(e.databaseInfo);return(function(a,u,d,g){return new sP(a,u,d,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,a,u,d){return new aP(i,r,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>_E(this.syncEngine,n,0)),(function(){return dE.v()?new dE:new W3})())}createSyncEngine(e,n){return(function(r,a,u,d,g,h,_){const T=new bP(r,a,u,d,g,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const a=De(r);ge(tr,"RemoteStore shutting down."),a.Ea.add(5),await iu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}$p.provider={build:()=>new $p};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Eo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="FirestoreClient";class FP{constructor(e,n,i,r,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=cn.UNAUTHENTICATED,this.clientId=dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ge(ys,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ge(ys,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _o;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Pm(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function lp(t,e){t.asyncQueue.verifyOperationInProgress(),ge(ys,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await WS(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function TE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await GP(t);ge(ys,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>pE(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>pE(e.remoteStore,r))),t._onlineComponents=e}async function GP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(ys,"Using user provided OfflineComponentProvider");try{await lp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ie.FAILED_PRECONDITION||r.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;ca("Error using user provided cache. Falling back to memory cache: "+n),await lp(t,new Af)}}else ge(ys,"Using default OfflineComponentProvider"),await lp(t,new qP(void 0));return t._offlineComponents}async function vx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(ys,"Using user provided OnlineComponentProvider"),await TE(t,t._uninitializedComponentsProvider._online)):(ge(ys,"Using default OnlineComponentProvider"),await TE(t,new $p))),t._onlineComponents}function HP(t){return vx(t).then((e=>e.syncEngine))}async function Tx(t){const e=await vx(t),n=e.eventManager;return n.onListen=RP.bind(null,e.syncEngine),n.onUnlisten=NP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=IP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=DP.bind(null,e.syncEngine),n}function zP(t,e,n={}){const i=new _o;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,g,h){const _=new _x({next:A=>{_.Nu(),u.enqueueAndForget((()=>lx(a,T)));const C=A.docs.has(d);!C&&A.fromCache?h.reject(new me(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&A.fromCache&&g&&g.source==="server"?h.reject(new me(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(A)},error:A=>h.reject(A)}),T=new ux(_m(d.path),_,{includeMetadataChanges:!0,qa:!0});return ax(a,T)})(await Tx(t),t.asyncQueue,e,n,i))),i.promise}function YP(t,e,n={}){const i=new _o;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,g,h){const _=new _x({next:A=>{_.Nu(),u.enqueueAndForget((()=>lx(a,T))),A.fromCache&&g.source==="server"?h.reject(new me(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(A)},error:A=>h.reject(A)}),T=new ux(d,_,{includeMetadataChanges:!0,qa:!0});return ax(a,T)})(await Tx(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="firestore.googleapis.com",AE=!0;class SE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new me(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ax,this.ssl=AE}else this.host=e.host,this.ssl=e.ssl??AE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<S3)throw new me(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}r6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ex(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new me(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new SE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new me(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new me(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new SE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new X4;switch(i.type){case"firstParty":return new e6(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new me(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=EE.get(n);i&&(ge("ComponentProvider","Removing Datastore"),EE.delete(n),i.terminate())})(this),Promise.resolve()}}function JP(t,e,n,i={}){var h;t=Ao(t,Hf);const r=jl(e),a=t._getSettings(),u={...a,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;r&&(qA(`https://${d}`),GA("Firestore",!0)),a.host!==Ax&&a.host!==d&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...a,host:d,ssl:r,emulatorOptions:i};if(!cf(g,u)&&(t._setSettings(g),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=cn.MOCK_USER;else{_=FA(i.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new me(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new cn(A)}t._authCredentials=new W4(new aS(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class zt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zt(this.firestore,e,this._key)}toJSON(){return{type:zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(eu(n,zt._jsonSchema))return new zt(e,i||null,new Ee(pt.fromString(n.referencePath)))}}zt._jsonSchemaVersion="firestore/documentReference/1.0",zt._jsonSchema={type:Ht("string",zt._jsonSchemaVersion),referencePath:Ht("string")};class fs extends vs{constructor(e,n,i){super(e,n,_m(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zt(this.firestore,null,new Ee(e))}withConverter(e){return new fs(this.firestore,e,this._path)}}function Sx(t,e,...n){if(t=ni(t),lS("collection","path",e),t instanceof Hf){const i=pt.fromString(e,...n);return LT(i),new fs(t,null,i)}{if(!(t instanceof zt||t instanceof fs))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...n));return LT(i),new fs(t.firestore,null,i)}}function zf(t,e,...n){if(t=ni(t),arguments.length===1&&(e=dm.newId()),lS("doc","path",e),t instanceof Hf){const i=pt.fromString(e,...n);return UT(i),new zt(t,null,new Ee(i))}{if(!(t instanceof zt||t instanceof fs))throw new me(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...n));return UT(i),new zt(t.firestore,t instanceof fs?t.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xE="AsyncQueue";class CE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jS(this,"async_queue_retry"),this._c=()=>{const i=ap();i&&ge(xE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=ap();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ap();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new _o;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ea(e))throw e;ge(xE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Eo("INTERNAL UNHANDLED ERROR: ",bE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Mm.createAndSchedule(this,e,n,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&xe(47125,{Pc:bE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function bE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class xa extends Hf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new CE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new CE(e),this._firestoreClient=void 0,await e}}}function $P(t,e){const n=typeof t=="object"?t:WA(),i=typeof t=="string"?t:hf,r=$A(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=OA("firestore");a&&JP(r,...a)}return r}function km(t){if(t._terminated)throw new me(ie.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||KP(t),t._firestoreClient}function KP(t){var i,r,a;const e=t._freezeSettings(),n=(function(d,g,h,_){return new _6(d,g,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,Ex(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new FP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(an.fromBase64String(e))}catch(n){throw new me(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(eu(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:Ht("string",jn._jsonSchemaVersion),bytes:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new me(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new me(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new me(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ye(this._lat,e._lat)||Ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ki._jsonSchemaVersion}}static fromJSON(e){if(eu(e,Ki._jsonSchema))return new Ki(e.latitude,e.longitude)}}Ki._jsonSchemaVersion="firestore/geoPoint/1.0",Ki._jsonSchema={type:Ht("string",Ki._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Qi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(eu(e,Qi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Qi(e.vectorValues);throw new me(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Qi._jsonSchemaVersion="firestore/vectorValue/1.0",Qi._jsonSchema={type:Ht("string",Qi._jsonSchemaVersion),vectorValues:Ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP=/^__.*__$/;class XP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new tu(e,this.data,n,this.fieldTransforms)}}function Cx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:t})}}class Bm{constructor(e,n,i,r,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Bm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Sf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Cx(this.Ac)&&QP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class WP{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||qf(e)}Cc(e,n,i,r=!1){return new Bm({Ac:e,methodName:n,Dc:i,path:rn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qm(t){const e=t._freezeSettings(),n=qf(t._databaseId);return new WP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bx(t,e,n,i,r,a={}){const u=t.Cc(a.merge||a.mergeFields?2:0,e,n,r);wx("Data must be an object, but it was:",u,i);const d=Rx(i,u);let g,h;if(a.merge)g=new yi(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const T of a.mergeFields){const A=jP(e,T,n);if(!u.contains(A))throw new me(ie.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);tV(_,A)||_.push(A)}g=new yi(_),h=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,h=u.fieldTransforms;return new XP(new Zn(d),g,h)}function ZP(t,e,n,i=!1){return Fm(n,t.Cc(i?4:3,e))}function Fm(t,e){if(Ix(t=ni(t)))return wx("Unsupported field value:",e,t),Rx(t,e);if(t instanceof xx)return(function(i,r){if(!Cx(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const a=[];let u=0;for(const d of i){let g=Fm(d,r.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),a.push(g),u++}return{arrayValue:{values:a}}})(t,e)}return(function(i,r){if((i=ni(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return F6(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=mt.fromDate(i);return{timestampValue:vf(r.serializer,a)}}if(i instanceof mt){const a=new mt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:vf(r.serializer,a)}}if(i instanceof Ki)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jn)return{bytesValue:GS(r.serializer,i._byteString)};if(i instanceof zt){const a=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Sm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Qi)return(function(u,d){return{mapValue:{fields:{[yS]:{stringValue:_S},[pf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return vm(d.serializer,h)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Df(i)}`)})(t,e)}function Rx(t,e){const n={};return fS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sr(t,((i,r)=>{const a=Fm(r,e.mc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function Ix(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof mt||t instanceof Ki||t instanceof jn||t instanceof zt||t instanceof xx||t instanceof Qi)}function wx(t,e,n){if(!Ix(n)||!uS(n)){const i=Df(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function jP(t,e,n){if((e=ni(e))instanceof Om)return e._internalPath;if(typeof e=="string")return Nx(t,e);throw Sf("Field path arguments must be of type string or ",t,!1,void 0,n)}const eV=new RegExp("[~\\*/\\[\\]]");function Nx(t,e,n){if(e.search(eV)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Om(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sf(t,e,n,i,r){const a=i&&!i.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(a||u)&&(g+=" (found",a&&(g+=` in field ${i}`),u&&(g+=` in document ${r}`),g+=")"),new me(ie.INVALID_ARGUMENT,d+t+g)}function tV(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n,i,r,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Gm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nV extends Dx{data(){return super.data()}}function Gm(t,e){return typeof e=="string"?Nx(t,e):e instanceof Om?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new me(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hm{}class zm extends Hm{}function oV(t,e,...n){let i=[];e instanceof Hm&&i.push(e),i=i.concat(n),(function(a){const u=a.filter((g=>g instanceof Jm)).length,d=a.filter((g=>g instanceof Ym)).length;if(u>1||u>0&&d>0)throw new me(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)t=r._apply(t);return t}class Ym extends zm{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Ym(e,n,i)}_apply(e){const n=this._parse(e);return Mx(e._query,n),new vs(e.firestore,e.converter,Op(e._query,n))}_parse(e){const n=qm(e.firestore);return(function(a,u,d,g,h,_,T){let A;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new me(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){IE(T,_);const P=[];for(const k of T)P.push(RE(g,a,k));A={arrayValue:{values:P}}}else A=RE(g,a,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||IE(T,_),A=ZP(d,u,T,_==="in"||_==="not-in");return Gt.create(h,_,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Jm extends Hm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Jm(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:Ai.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,a){let u=r;const d=a.getFlattenedFilters();for(const g of d)Mx(u,g),u=Op(u,g)})(e._query,n),new vs(e.firestore,e.converter,Op(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $m extends zm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $m(e,n)}_apply(e){const n=(function(r,a,u){if(r.startAt!==null)throw new me(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new me(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xl(a,u)})(e._query,this._field,this._direction);return new vs(e.firestore,e.converter,(function(r,a){const u=r.explicitOrderBy.concat([a]);return new Aa(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,n))}}function sV(t,e="asc"){const n=e,i=Gm("orderBy",t);return $m._create(i,n)}class Km extends zm{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new Km(e,n,i)}_apply(e){return new vs(e.firestore,e.converter,gf(e._query,this._limit,this._limitType))}}function rV(t){return a6("limit",t),Km._create("limit",t,"F")}function RE(t,e,n){if(typeof(n=ni(n))=="string"){if(n==="")throw new me(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bS(e)&&n.indexOf("/")!==-1)throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(pt.fromString(n));if(!Ee.isDocumentKey(i))throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return zT(t,new Ee(i))}if(n instanceof zt)return zT(t,n._key);throw new me(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Df(n)}.`)}function IE(t,e){if(!Array.isArray(t)||t.length===0)throw new me(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Mx(t,e){const n=(function(r,a){for(const u of r)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new me(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class aV{convertValue(e,n="none"){switch(ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return sr(e,((r,a)=>{i[r]=this.convertValue(a,n)})),i}convertVectorValue(e){var i,r,a;const n=(a=(r=(i=e.fields)==null?void 0:i[pf].arrayValue)==null?void 0:r.values)==null?void 0:a.map((u=>Mt(u.doubleValue)));return new Qi(n)}convertGeoPoint(e){return new Ki(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Vf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp($l(e));default:return null}}convertTimestamp(e){const n=hs(e);return new mt(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=pt.fromString(e);nt(KS(i),9688,{name:e});const r=new Kl(i.get(1),i.get(3)),a=new Ee(i.popFirst(5));return r.isEqual(n)||Eo(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Ul{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zs extends Dx{constructor(e,n,i,r,a,u){super(e,n,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Gm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zs._jsonSchema={type:Ht("string",Zs._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class ef extends Zs{data(e={}){return super.data(e)}}class la{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Ul(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new ef(this._firestore,this._userDataWriter,i.key,i,new Ul(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new me(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const g=new ef(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ul(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const g=new ef(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ul(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:lV(d.type),doc:g,oldIndex:h,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new me(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=la._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t){t=Ao(t,zt);const e=Ao(t.firestore,xa);return zP(km(e),t._key).then((n=>pV(e,t,n)))}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:Ht("string",la._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class Vx extends aV{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new zt(this.firestore,null,n)}}function cV(t){t=Ao(t,vs);const e=Ao(t.firestore,xa),n=km(e),i=new Vx(e);return iV(t._query),YP(n,t._query).then((r=>new la(e,i,t,r)))}function fV(t,e,n){t=Ao(t,zt);const i=Ao(t.firestore,xa),r=Px(t.converter,e);return Qm(i,[bx(qm(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ei.none())])}function dV(t){return Qm(Ao(t.firestore,xa),[new Tm(t._key,Ei.none())])}function hV(t,e){const n=Ao(t.firestore,xa),i=zf(t),r=Px(t.converter,e);return Qm(n,[bx(qm(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Ei.exists(!1))]).then((()=>i))}function Qm(t,e){return(function(i,r){const a=new _o;return i.asyncQueue.enqueueAndForget((async()=>MP(await HP(i),r,a))),a.promise})(km(t),e)}function pV(t,e,n){const i=n.docs.get(e._key),r=new Vx(t);return new Zs(t,r,e._key,i,new Ul(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){va=r})(QA),zl(new ua("firestore",((i,{instanceIdentifier:r,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new xa(new Z4(i.getProvider("auth-internal")),new t6(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new me(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(h.options.projectId,_)})(u,r),u);return a={useFetchStreams:n,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),us(DT,MT,e),us(DT,MT,"esm2020")})();var mV="firebase",gV="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */us(mV,gV,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firebasestorage.googleapis.com",Lx="storageBucket",yV=120*1e3,_V=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt extends or{constructor(e,n,i=0){super(up(e),`Firebase Storage: ${n} (${up(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return up(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var St;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(St||(St={}));function up(t){return"storage/"+t}function Xm(){const t="An unknown error occurred, please check the error payload for server response.";return new xt(St.UNKNOWN,t)}function vV(t){return new xt(St.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function TV(t){return new xt(St.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function EV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new xt(St.UNAUTHENTICATED,t)}function AV(){return new xt(St.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function SV(t){return new xt(St.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function xV(){return new xt(St.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function CV(){return new xt(St.CANCELED,"User canceled the upload/download.")}function bV(t){return new xt(St.INVALID_URL,"Invalid URL '"+t+"'.")}function RV(t){return new xt(St.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function IV(){return new xt(St.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Lx+"' property when initializing the app?")}function wV(){return new xt(St.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NV(){return new xt(St.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function DV(t){return new xt(St.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Kp(t){return new xt(St.INVALID_ARGUMENT,t)}function kx(){return new xt(St.APP_DELETED,"The Firebase app was deleted.")}function MV(t){return new xt(St.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Fl(t,e){return new xt(St.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Nl(t){throw new xt(St.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=On.makeFromUrl(e,n)}catch{return new On(e,"")}if(i.path==="")return i;throw RV(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function a(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+r+u,"i"),g={bucket:1,path:3};function h(re){re.path_=decodeURIComponent(re.path)}const _="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",C=new RegExp(`^https?://${T}/${_}/b/${r}/o${A}`,"i"),P={bucket:1,path:3},k=n===Ux?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",K=new RegExp(`^https?://${k}/${r}/${M}`,"i"),Z=[{regex:d,indices:g,postModify:a},{regex:C,indices:P,postModify:h},{regex:K,indices:{bucket:1,path:2},postModify:h}];for(let re=0;re<Z.length;re++){const ce=Z[re],ue=ce.regex.exec(e);if(ue){const N=ue[ce.indices.bucket];let w=ue[ce.indices.path];w||(w=""),i=new On(N,w),ce.postModify(i);break}}if(i==null)throw bV(e);return i}}class PV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(t,e,n){let i=1,r=null,a=null,u=!1,d=0;function g(){return d===2}let h=!1;function _(...M){h||(h=!0,e.apply(null,M))}function T(M){r=setTimeout(()=>{r=null,t(C,g())},M)}function A(){a&&clearTimeout(a)}function C(M,...K){if(h){A();return}if(M){A(),_.call(null,M,...K);return}if(g()||u){A(),_.call(null,M,...K);return}i<64&&(i*=2);let Z;d===1?(d=2,Z=0):Z=(i+Math.random())*1e3,T(Z)}let P=!1;function k(M){P||(P=!0,A(),!h&&(r!==null?(M||(d=2),clearTimeout(r),T(0)):M||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,k(!0)},n),k}function UV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t){return t!==void 0}function kV(t){return typeof t=="object"&&!Array.isArray(t)}function Wm(t){return typeof t=="string"||t instanceof String}function wE(t){return Zm()&&t instanceof Blob}function Zm(){return typeof Blob<"u"}function NE(t,e,n,i){if(i<e)throw Kp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Kp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function Ox(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var js;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(js||(js={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||r||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BV{constructor(e,n,i,r,a,u,d,g,h,_,T,A=!0,C=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=g,this.timeout_=h,this.progressCallback_=_,this.connectionFactory_=T,this.retry=A,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,k)=>{this.resolve_=P,this.reject_=k,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Yc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const g=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,h)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===js.NO_ERROR,g=a.getStatus();if(!d||OV(g,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===js.ABORT;i(!1,new Yc(!1,null,_));return}const h=this.successCodes_.indexOf(g)!==-1;i(!0,new Yc(h,a))})},n=(i,r)=>{const a=this.resolve_,u=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());LV(g)?a(g):a()}catch(g){u(g)}else if(d!==null){const g=Xm();g.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,g)):u(g)}else if(r.canceled){const g=this.appDelete_?kx():CV();u(g)}else{const g=xV();u(g)}};this.canceled_?n(!1,new Yc(!1,null,!0)):this.backoffId_=VV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&UV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function qV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function FV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function GV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function HV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function zV(t,e,n,i,r,a,u=!0,d=!1){const g=Ox(t.urlParams),h=t.url+g,_=Object.assign({},t.headers);return GV(_,e),qV(_,n),FV(_,a),HV(_,i),new BV(h,t.method,_,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function JV(...t){const e=YV();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Zm())return new Blob(t);throw new xt(St.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function $V(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(t){if(typeof atob>"u")throw DV("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cp{constructor(e,n){this.data=e,this.contentType=n||null}}function Bx(t,e){switch(t){case _i.RAW:return new cp(qx(e));case _i.BASE64:case _i.BASE64URL:return new cp(Fx(t,e));case _i.DATA_URL:return new cp(XV(e),WV(e))}throw Xm()}function qx(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=t.charCodeAt(++n);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function QV(t){let e;try{e=decodeURIComponent(t)}catch{throw Fl(_i.DATA_URL,"Malformed data URL.")}return qx(e)}function Fx(t,e){switch(t){case _i.BASE64:{const r=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(r||a)throw Fl(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case _i.BASE64URL:{const r=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(r||a)throw Fl(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=KV(e)}catch(r){throw r.message.includes("polyfill")?r:Fl(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class Gx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Fl(_i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=ZV(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function XV(t){const e=new Gx(t);return e.base64?Fx(_i.BASE64,e.rest):QV(e.rest)}function WV(t){return new Gx(t).contentType}function ZV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){let i=0,r="";wE(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(wE(this.data_)){const i=this.data_,r=$V(i,e,n);return r===null?null:new ss(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new ss(i,!0)}}static getBlob(...e){if(Zm()){const n=e.map(i=>i instanceof ss?i.data_:i);return new ss(JV.apply(null,n))}else{const n=e.map(u=>Wm(u)?Bx(_i.RAW,u).data:u.data_);let i=0;n.forEach(u=>{i+=u.byteLength});const r=new Uint8Array(i);let a=0;return n.forEach(u=>{for(let d=0;d<u.length;d++)r[a++]=u[d]}),new ss(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(t){let e;try{e=JSON.parse(t)}catch{return null}return kV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function eU(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function zx(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t,e){return e}class gn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||tU}}let Jc=null;function nU(t){return!Wm(t)||t.length<2?t:zx(t)}function Yx(){if(Jc)return Jc;const t=[];t.push(new gn("bucket")),t.push(new gn("generation")),t.push(new gn("metageneration")),t.push(new gn("name","fullPath",!0));function e(a,u){return nU(u)}const n=new gn("name");n.xform=e,t.push(n);function i(a,u){return u!==void 0?Number(u):u}const r=new gn("size");return r.xform=i,t.push(r),t.push(new gn("timeCreated")),t.push(new gn("updated")),t.push(new gn("md5Hash",null,!0)),t.push(new gn("cacheControl",null,!0)),t.push(new gn("contentDisposition",null,!0)),t.push(new gn("contentEncoding",null,!0)),t.push(new gn("contentLanguage",null,!0)),t.push(new gn("contentType",null,!0)),t.push(new gn("metadata","customMetadata",!0)),Jc=t,Jc}function iU(t,e){function n(){const i=t.bucket,r=t.fullPath,a=new On(i,r);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function oU(t,e,n){const i={};i.type="file";const r=n.length;for(let a=0;a<r;a++){const u=n[a];i[u.local]=u.xform(i,e[u.server])}return iU(i,t),i}function Jx(t,e,n){const i=Hx(e);return i===null?null:oU(t,i,n)}function sU(t,e,n,i){const r=Hx(e);if(r===null||!Wm(r.downloadTokens))return null;const a=r.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(h=>{const _=t.bucket,T=t.fullPath,A="/b/"+u(_)+"/o/"+u(T),C=Yf(A,n,i),P=Ox({alt:"media",token:h});return C+P})[0]}function rU(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const a=e[r];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class jm{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(t){if(!t)throw Xm()}function aU(t,e){function n(i,r){const a=Jx(t,r,e);return $x(a!==null),a}return n}function lU(t,e){function n(i,r){const a=Jx(t,r,e);return $x(a!==null),sU(a,r,t.host,t._protocol)}return n}function Kx(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=AV():r=EV():n.getStatus()===402?r=TV(t.bucket):n.getStatus()===403?r=SV(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Qx(t){const e=Kx(t);function n(i,r){let a=e(i,r);return i.getStatus()===404&&(a=vV(t.path)),a.serverResponse=r.serverResponse,a}return n}function uU(t,e,n){const i=e.fullServerUrl(),r=Yf(i,t.host,t._protocol),a="GET",u=t.maxOperationRetryTime,d=new jm(r,a,lU(t,n),u);return d.errorHandler=Qx(e),d}function cU(t,e){const n=e.fullServerUrl(),i=Yf(n,t.host,t._protocol),r="DELETE",a=t.maxOperationRetryTime;function u(g,h){}const d=new jm(i,r,u,a);return d.successCodes=[200,204],d.errorHandler=Qx(e),d}function fU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function dU(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=fU(null,e)),i}function hU(t,e,n,i,r){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let Z="";for(let re=0;re<2;re++)Z=Z+Math.random().toString().slice(2);return Z}const g=d();u["Content-Type"]="multipart/related; boundary="+g;const h=dU(e,i,r),_=rU(h,n),T="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+g+`\r
Content-Type: `+h.contentType+`\r
\r
`,A=`\r
--`+g+"--",C=ss.getBlob(T,i,A);if(C===null)throw wV();const P={name:h.fullPath},k=Yf(a,t.host,t._protocol),M="POST",K=t.maxUploadRetryTime,te=new jm(k,M,aU(t,n),K);return te.urlParams=P,te.headers=u,te.body=C.uploadData(),te.errorHandler=Kx(e),te}class pU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=js.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=js.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=js.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,a){if(this.sent_)throw Nl("cannot .send() more than once");if(jl(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Nl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class mU extends pU{initXhr(){this.xhr_.responseType="text"}}function eg(){return new mU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,n){this._service=e,n instanceof On?this._location=n:this._location=On.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new nr(e,n)}get root(){const e=new On(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zx(this._location.path)}get storage(){return this._service}get parent(){const e=jV(this._location.path);if(e===null)return null;const n=new On(this._location.bucket,e);return new nr(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw MV(e)}}function Xx(t,e,n){t._throwIfRoot("uploadBytes");const i=hU(t.storage,t._location,Yx(),new ss(e,!0),n);return t.storage.makeRequestWithTokens(i,eg).then(r=>({metadata:r,ref:t}))}function gU(t,e,n=_i.RAW,i){t._throwIfRoot("uploadString");const r=Bx(n,e),a={...i};return a.contentType==null&&r.contentType!=null&&(a.contentType=r.contentType),Xx(t,r.data,a)}function yU(t){t._throwIfRoot("getDownloadURL");const e=uU(t.storage,t._location,Yx());return t.storage.makeRequestWithTokens(e,eg).then(n=>{if(n===null)throw NV();return n})}function _U(t){t._throwIfRoot("deleteObject");const e=cU(t.storage,t._location);return t.storage.makeRequestWithTokens(e,eg)}function vU(t,e){const n=eU(t._location.path,e),i=new On(t._location.bucket,n);return new nr(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TU(t){return/^[A-Za-z]+:\/\//.test(t)}function EU(t,e){return new nr(t,e)}function Wx(t,e){if(t instanceof tg){const n=t;if(n._bucket==null)throw IV();const i=new nr(n,n._bucket);return e!=null?Wx(i,e):i}else return e!==void 0?vU(t,e):t}function AU(t,e){if(e&&TU(e)){if(t instanceof tg)return EU(t,e);throw Kp("To use ref(service, url), the first argument must be a Storage instance.")}else return Wx(t,e)}function DE(t,e){const n=e==null?void 0:e[Lx];return n==null?null:On.makeFromBucketSpec(n,t)}function SU(t,e,n,i={}){t.host=`${e}:${n}`;const r=jl(e);r&&(qA(`https://${t.host}/b`),GA("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:FA(a,t.app.options.projectId))}class tg{constructor(e,n,i,r,a,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=Ux,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yV,this._maxUploadRetryTime=_V,this._requests=new Set,r!=null?this._bucket=On.makeFromBucketSpec(r,this._host):this._bucket=DE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=On.makeFromBucketSpec(this._url,e):this._bucket=DE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(KA(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new nr(this,e)}_makeRequest(e,n,i,r,a=!0){if(this._deleted)return new PV(kx());{const u=zV(e,this._appId,i,r,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const ME="@firebase/storage",PE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="storage";function xU(t,e,n){return t=ni(t),Xx(t,e,n)}function CU(t,e,n,i){return t=ni(t),gU(t,e,n,i)}function jx(t){return t=ni(t),yU(t)}function bU(t){return t=ni(t),_U(t)}function ng(t,e){return t=ni(t),AU(t,e)}function RU(t=WA(),e){t=ni(t);const i=$A(t,Zx).getImmediate({identifier:e}),r=OA("storage");return r&&IU(i,...r),i}function IU(t,e,n,i={}){SU(t,e,n,i)}function wU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new tg(n,i,r,e,QA)}function NU(){zl(new ua(Zx,wU,"PUBLIC").setMultipleInstances(!0)),us(ME,PE,""),us(ME,PE,"esm2020")}NU();const DU={apiKey:"AIzaSyD4Aw02INIjhiryvBFocolup1HGP29CtNw",authDomain:"juvalandtheo.firebaseapp.com",projectId:"juvalandtheo",storageBucket:"juvalandtheo.firebasestorage.app",messagingSenderId:"395659208490",appId:"1:395659208490:web:65e98f38fd48ffed72a053"},eC=XA(DU),su=$P(eC),ig=RU(eC),tC="settings/auth",MU=10;function Qp(t){try{return UA.hashSync(t,MU)}catch(e){throw console.error("Error hashing PIN:",e),e}}function PU(t,e){try{return UA.compareSync(t,e)}catch(n){return console.error("Error verifying PIN:",n),!1}}async function Jf(){try{const t=zf(su,tC),e=await uV(t);return e.exists()?e.data():null}catch(t){return console.error("[AUTH] Error reading auth data:",t),null}}async function nC(t){try{const e=zf(su,tC);await fV(e,t),console.log("[AUTH] Auth data saved to Firestore")}catch(e){throw console.error("[AUTH] Error saving auth data:",e),e}}async function VU(t="0000",e="5555"){const n=Qp(t),i=Qp(e);await nC({dadHash:n,momHash:i,initialized:!0,needsUpdate:t==="0000"&&e==="5555"})}async function UU(){const t=await Jf();return(t==null?void 0:t.initialized)===!0}async function LU(){try{return await UU()?!1:(await VU("0000","5555"),console.log("[AUTH] Migrated to Firebase auth with default PINs"),!0)}catch(t){return console.error("[AUTH] Error during auth migration:",t),!1}}async function iC(t,e){try{const n=await Jf();if(!n)return console.error("[AUTH] No auth data found"),!1;const i=t==="Dad"?n.dadHash:n.momHash;return PU(e,i)}catch(n){return console.error("[AUTH] Error verifying login:",n),!1}}async function kU(t,e){try{const n=await Jf();if(!n)throw new Error("Auth data not found");const i=Qp(e);t==="Dad"?n.dadHash=i:n.momHash=i,n.needsUpdate=!1,await nC(n),console.log("[AUTH] PIN updated for",t)}catch(n){throw console.error("[AUTH] Error updating PIN:",n),n}}async function VE(){try{const t=await Jf();return(t==null?void 0:t.needsUpdate)===!0}catch(t){return console.error("[AUTH] Error checking PIN update status:",t),!1}}const OU=({lang:t,user:e,theme:n,onBack:i})=>{const[r,a]=Qe.useState("verify"),[u,d]=Qe.useState(""),[g,h]=Qe.useState(""),[_,T]=Qe.useState(""),A={settings:t==="es"?"Configuracin":"Settings",changePin:t==="es"?"Cambiar Cdigo Secreto":"Change Secret Code",enterCurrent:t==="es"?"Ingresa tu cdigo actual":"Enter your current code",enterNew:t==="es"?"Ingresa tu nuevo cdigo":"Enter your new code",confirmNew:t==="es"?"Confirma tu nuevo cdigo":"Confirm your new code",wrongPin:t==="es"?"Cdigo incorrecto!":"Wrong code!",noMatch:t==="es"?"Los cdigos no coinciden!":"Codes do not match!",success:t==="es"?"Cdigo actualizado!":"Code updated!",back:t==="es"?" Volver":" Back"},C=()=>{u.length===4&&(iC(e,u)?(d(""),a("new")):(alert(A.wrongPin),d("")))},P=()=>{u.length===4&&(h(u),d(""),a("confirm"))},k=()=>{u.length===4&&(u===g?(kU(e,g),a("success"),setTimeout(()=>{i()},2e3)):(alert(A.noMatch),d(""),h(""),a("new")))},M=()=>{switch(r){case"verify":C();break;case"new":P();break;case"confirm":k();break}};Qe.useEffect(()=>{if(u.length===4){const ce=setTimeout(()=>{M()},150);return()=>clearTimeout(ce)}},[u]);const K=n==="evening"?"text-white":"text-slate-800",te=e==="Dad"?"bg-sky-500":"bg-rose-400",Z=e==="Dad"?"":"";if(r==="success")return G.jsx("div",{className:"py-10 px-4 max-w-4xl mx-auto",children:G.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:G.jsxs("div",{className:"bg-white cartoon-border p-12 rounded-[50px] text-center animate-fade-in shadow-2xl",children:[G.jsx("span",{className:"text-9xl mb-6 block",children:""}),G.jsx("h2",{className:"text-4xl font-black text-green-600 uppercase",children:A.success})]})})});const re=()=>{switch(r){case"verify":return A.enterCurrent;case"new":return A.enterNew;case"confirm":return A.confirmNew;default:return""}};return G.jsxs("div",{className:"py-10 px-4 max-w-4xl mx-auto",children:[G.jsx("button",{onClick:i,className:"bg-white text-slate-800 cartoon-border px-8 py-4 rounded-2xl font-black text-xl mb-12 cartoon-button shadow-md",children:A.back}),G.jsx("h1",{className:`text-5xl font-black ${K} uppercase mb-12 text-center`,children:A.settings}),G.jsxs("div",{className:`${te} cartoon-border p-10 rounded-[50px] max-w-md mx-auto text-center animate-fade-in shadow-2xl`,children:[G.jsx("span",{className:"text-7xl mb-4 block",children:Z}),G.jsx("h2",{className:"text-3xl font-black text-white uppercase mb-2",children:A.changePin}),G.jsx("p",{className:"text-xl font-bold text-white/80 mb-8 italic",children:re()}),G.jsx(rM,{pin:u,onPinChange:d,lang:t,autoSubmit:!1})]})]})};async function BU(t,e=800,n=.7){return new Promise((i,r)=>{const a=new Image;a.onload=()=>{let u=a.width,d=a.height;u>e&&(d=d*e/u,u=e);const g=document.createElement("canvas");g.width=u,g.height=d;const h=g.getContext("2d");if(!h){r(new Error("Could not get canvas context"));return}h.drawImage(a,0,0,u,d);const _=g.toDataURL("image/jpeg",n);i(_)},a.onerror=()=>{r(new Error("Failed to load image"))},a.src=t})}async function qU(t,e=800,n=.7){return Promise.all(t.map(i=>BU(i,e,n)))}const og="posts";async function FU(t){try{const e=await hV(Sx(su,og),{...t,createdAt:mt.now()});return console.log("[FIRESTORE] Post added with ID:",e.id),e.id}catch(e){throw console.error("[FIRESTORE] Error adding post:",e),e}}async function GU(t=50){try{const e=oV(Sx(su,og),sV("createdAt","desc"),rV(t)),n=await cV(e),i=[];return n.forEach(r=>{const a=r.data();i.push({id:r.id,images:a.images,media:a.media,en:a.en,es:a.es,date:a.date,author:a.author,tags:a.tags})}),console.log("[FIRESTORE] Loaded",i.length,"posts"),i}catch(e){throw console.error("[FIRESTORE] Error getting posts:",e),e}}async function HU(t){try{await dV(zf(su,og,t)),console.log("[FIRESTORE] Post deleted:",t)}catch(e){throw console.error("[FIRESTORE] Error deleting post:",e),e}}async function zU(t,e){try{const n=ng(ig,e),i=await CU(n,t,"data_url"),r=await jx(i.ref);return console.log("[STORAGE] Image uploaded:",e),r}catch(n){throw console.error("[STORAGE] Error uploading image:",n),n}}async function YU(t){try{const n=new URL(t).pathname.match(/\/o\/(.+)\?/);if(!n)throw new Error("Invalid image URL");const i=decodeURIComponent(n[1]),r=ng(ig,i);await bU(r),console.log("[STORAGE] Image deleted:",i)}catch(e){throw console.error("[STORAGE] Error deleting image:",e),e}}async function JU(t){try{const e=t.map(n=>YU(n));await Promise.all(e),console.log("[STORAGE] Deleted",t.length,"images")}catch(e){console.error("[STORAGE] Error deleting images:",e)}}async function $U(t,e){try{const n=ng(ig,e),i=await xU(n,t),r=await jx(i.ref);return console.log("[STORAGE] Video uploaded:",e),r}catch(n){throw console.error("[STORAGE] Error uploading video:",n),n}}async function KU(t,e){try{const n=t.map(async(r,a)=>{const u=r.type.startsWith("video/"),h=`posts/${e}/${u?"video":"image"}_${a}.${u?"mp4":"jpg"}`;if(u)return{url:await $U(r,h),type:"video"};{const _=await QU(r);return{url:await zU(_,h),type:"image"}}}),i=await Promise.all(n);return console.log("[STORAGE] Uploaded",i.length,"media items for post",e),i}catch(n){throw console.error("[STORAGE] Error uploading media:",n),n}}function QU(t){return new Promise((e,n)=>{const i=new FileReader;i.onloadend=()=>e(i.result),i.onerror=n,i.readAsDataURL(t)})}const XU=12,UE=["space","ocean","jungle","sports","pokemon","dinosaur"],WU=()=>{const[t,e]=Qe.useState("home"),[n,i]=Qe.useState("en"),[r,a]=Qe.useState([]),[u,d]=Qe.useState(null),[g,h]=Qe.useState("idle"),[_,T]=Qe.useState(null),[A,C]=Qe.useState(""),[P,k]=Qe.useState(null),[M,K]=Qe.useState("space"),[te,Z]=Qe.useState("all"),[re,ce]=Qe.useState(!1),[ue,N]=Qe.useState([]),[w,I]=Qe.useState([]),[L,U]=Qe.useState(""),[q,D]=Qe.useState([]),[ke,ct]=Qe.useState(new Date().toISOString().split("T")[0]),W=Qe.useRef(!1),ae={club:"Juval & Theo",welcome:n==="es"?"Bienvenidos a nuestro mundo!":"Welcome to our world!",dadCorner:n==="es"?"Pap":"Dad",momCorner:n==="es"?"Mam":"Mom",back:n==="es"?" Volver":" Back",fresh:n==="es"?"ltimo Momento":"Latest Moment",archives:n==="es"?"Recuerdos Pasados":"Memory Lane",mixingColors:n==="es"?"Guardando fotos...":"Saving photos...",done:n==="es"?"Recuerdo Guardado!":"Memory Saved!",multipleHint:n==="es"?"Elige las fotos para el lbum":"Pick photos for the album",whoAreYou:n==="es"?"Quin eres?":"Who are you?",enterPin:n==="es"?"Cdigo Secreto":"Secret Code",tellStory:n==="es"?"Qu pas hoy?":"What happened today?",placeholderContext:n==="es"?"Cuntanos un poco sobre este momento...":"Tell us a bit about this moment...",startMission:n==="es"?" GUARDAR RECUERDO":" SAVE MEMORY",selectHeroes:n==="es"?"Quin sale en las fotos?":"Who is in these photos?",selectDate:n==="es"?" Cundo pas esto?":" When did this happen?"},ve=Qe.useMemo(()=>{if(te==="all")return r;const Ce=te.charAt(0).toUpperCase()+te.slice(1);return r.filter(be=>be.tags.includes(Ce))},[r,te]);Qe.useEffect(()=>{(async()=>{try{await LU(),await VE()&&_&&ce(!0)}catch(fe){console.error("[AUTH] initialization failed:",fe)}})();const be=UE[Math.floor(Math.random()*UE.length)];K(be);try{const fe=localStorage.getItem("juval-theo-lang"),Re=localStorage.getItem("juval-theo-user");(fe==="en"||fe==="es")&&i(fe),Re&&T(Re)}catch(fe){console.error("[INIT] Failed to load user preferences",fe)}(async()=>{try{console.log("[INIT] Loading posts from Firebase...");const fe=await GU(XU);fe.length>0?(a(fe),console.log("[INIT] Loaded",fe.length,"posts from Firebase")):(a(U_),console.log("[INIT] No posts in Firebase, showing initial posts"))}catch(fe){console.error("[INIT] Failed to load posts from Firebase:",fe),a(U_)}})(),W.current=!0},[]);const Be=()=>{const Ce=n==="en"?"es":"en";i(Ce),localStorage.setItem("juval-theo-lang",Ce)},Ue=()=>{T(null),localStorage.removeItem("juval-theo-user"),e("login")},B=async Ce=>{const be=A+Ce;if(be.length<=4&&C(be),be.length===4)if(await iC(P,be)){T(P),localStorage.setItem("juval-theo-user",P);const fe=await VE();e(fe?"settings":"home"),k(null),C("")}else C(""),alert(n==="es"?"Cdigo incorrecto!":"Wrong code!")},$=Qe.useCallback(async Ce=>{try{const be=r.find(j=>j.id===Ce);be&&(await JU(be.images),await HU(Ce),a(j=>j.filter(fe=>fe.id!==Ce)),d(j=>(j==null?void 0:j.id)===Ce?null:j),e(j=>j==="detail"||j==="latest"?"home":j),console.log("[DELETE] Post deleted successfully:",Ce))}catch(be){console.error("[DELETE] Failed to delete post:",be),alert(n==="es"?"Error al borrar el recuerdo. Intenta de nuevo.":"Error deleting memory. Please try again.")}},[r,n]),le=async Ce=>{const be=Ce.target.files;if(!be||be.length===0)return;const j=Array.from(be);I(j);const fe=j.map(Oe=>new Promise(bt=>{if(Oe.type.startsWith("video/"))bt(URL.createObjectURL(Oe));else{const Tn=new FileReader;Tn.onloadend=async()=>{const Wi=Tn.result,ft=await qU([Wi],800,.7);bt(ft[0])},Tn.readAsDataURL(Oe)}})),Re=await Promise.all(fe);N(Re),ct(new Date().toISOString().split("T")[0])},he=async()=>{if(!(ue.length===0||!_)){h("uploading");try{console.log("[SUBMIT] Generating content with AI...");const Ce=ue.filter((ft,Rt)=>{var ii;return!((ii=w[Rt])!=null&&ii.type.startsWith("video/"))}),be=await sM(Ce.length>0?Ce:ue,_,L,q),j=ke.split("-"),fe=new Date(parseInt(j[0]),parseInt(j[1])-1,parseInt(j[2])).toLocaleDateString(),Re=Date.now().toString();console.log("[SUBMIT] Uploading media to Firebase Storage...");const Oe=await KU(w,Re),bt=Oe.map(ft=>ft.url);console.log("[SUBMIT] Saving post to Firestore...");const Tn=await FU({images:bt,media:Oe,en:be.en,es:be.es,date:fe,author:_,tags:["Moment",_,...q]}),Wi={id:Tn,images:bt,media:Oe,en:be.en,es:be.es,date:fe,author:_,tags:["Moment",_,...q]};a(ft=>[Wi,...ft]),console.log("[SUBMIT] Post saved successfully:",Tn),h("success"),setTimeout(()=>{N([]),I([]),U(""),D([]),e("home"),h("idle"),window.scrollTo({top:0,behavior:"smooth"})},1500)}catch(Ce){console.error("[SUBMIT] Error saving post:",Ce),h("idle"),alert(n==="es"?"Error al guardar el recuerdo. Intenta de nuevo.":"Error saving memory. Please try again.")}}},Se=Qe.useCallback(Ce=>{d(Ce),e("detail"),window.scrollTo(0,0)},[]),Me=Qe.useMemo(()=>{const Ce=[];if(M.length,M==="space"){for(let j=0;j<20;j++){const fe=j*13%100,Re=j*23%100,Oe=40+j*7%40,bt=-(j*10)%60;Ce.push(G.jsx("div",{className:"bg-star",style:{top:`${fe}%`,left:`${Re}%`,animationDuration:`${Oe}s`,animationDelay:`${bt}s`},children:""},`s-${j}`))}const be=["","",""];for(let j=0;j<3;j++){const fe=20+j*25,Re=180+j*60;Ce.push(G.jsx("div",{className:"bg-planet",style:{top:`${fe}%`,animationDuration:`${Re}s`},children:be[j]},`p-${j}`))}}else if(M==="ocean"){const be=["","","","",""];for(let j=0;j<8;j++){const fe=j*15%100,Re=15+j*5%20,Oe=-(j*3)%15;Ce.push(G.jsx("div",{className:"bg-fish",style:{left:`${fe}%`,animationDuration:`${Re}s`,animationDelay:`${Oe}s`},children:be[j%be.length]},`f-${j}`))}for(let j=0;j<12;j++){const fe=j*11%100,Re=8+j*2%8,Oe=-(j*2)%10;Ce.push(G.jsx("div",{className:"bg-bubble",style:{left:`${fe}%`,animationDuration:`${Re}s`,animationDelay:`${Oe}s`},children:""},`b-${j}`))}}else if(M==="jungle"){const be=["","","","","",""];for(let j=0;j<6;j++){const fe=j*18%100,Re=25+j*5%15,Oe=-(j*4)%20;Ce.push(G.jsx("div",{className:"bg-animal",style:{left:`${fe}%`,animationDuration:`${Re}s`,animationDelay:`${Oe}s`},children:be[j]},`a-${j}`))}for(let j=0;j<8;j++){const fe=j*13%100,Re=120+j*25%60,Oe=-(j*30)%100;Ce.push(G.jsx("div",{className:"bg-leaf",style:{left:`${fe}%`,animationDuration:`${Re}s`,animationDelay:`${Oe}s`},children:""},`l-${j}`))}}else if(M==="sports"){const be=["","","","",""];for(let j=0;j<8;j++){const fe=j*14%100,Re=3+j*.5%2,Oe=-(j*.5)%3;Ce.push(G.jsx("div",{className:"bg-ball",style:{left:`${fe}%`,animationDuration:`${Re}s`,animationDelay:`${Oe}s`},children:be[j%be.length]},`ball-${j}`))}}else if(M==="pokemon"){const be=["","","",""],j=["","","","",""];for(let fe=0;fe<6;fe++){const Re=fe*18%80,Oe=20+fe*5%15,bt=-(fe*4)%20;Ce.push(G.jsx("div",{className:"bg-pokemon-fly",style:{top:`${Re}%`,animationDuration:`${Oe}s`,animationDelay:`${bt}s`},children:be[fe%be.length]},`fp-${fe}`))}for(let fe=0;fe<5;fe++){const Re=fe*20%100,Oe=4+fe*.5%2,bt=-(fe*.8)%4;Ce.push(G.jsx("div",{className:"bg-pokeball",style:{left:`${Re}%`,animationDuration:`${Oe}s`,animationDelay:`${bt}s`},children:""},`pb-${fe}`))}for(let fe=0;fe<8;fe++){const Re=fe*15%100,Oe=fe*13%100,bt=30+fe*5%20,Tn=-(fe*5)%25;Ce.push(G.jsx("div",{className:"bg-pokemon-element",style:{top:`${Re}%`,left:`${Oe}%`,animationDuration:`${bt}s`,animationDelay:`${Tn}s`},children:j[fe%j.length]},`elem-${fe}`))}}else if(M==="dinosaur"){const be=["","","",""];for(let j=0;j<6;j++){const fe=60+j*8%30,Re=25+j*5%15,Oe=-(j*5)%20;Ce.push(G.jsx("div",{className:"bg-dino-walk",style:{top:`${fe}%`,animationDuration:`${Re}s`,animationDelay:`${Oe}s`},children:be[j%be.length]},`dino-${j}`))}for(let j=0;j<4;j++){const fe=10+j*15%40,Re=18+j*3%12,Oe=-(j*4)%15;Ce.push(G.jsx("div",{className:"bg-pterodactyl",style:{top:`${fe}%`,animationDuration:`${Re}s`,animationDelay:`${Oe}s`},children:""},`ptero-${j}`))}for(let j=0;j<5;j++){const fe=j*22%100,Re=8+j*2%6,Oe=-(j*3)%10;Ce.push(G.jsx("div",{className:"bg-meteor",style:{left:`${fe}%`,animationDuration:`${Re}s`,animationDelay:`${Oe}s`},children:""},`meteor-${j}`))}}return Ce},[M]),Ge=()=>G.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden z-0",children:Me}),Ct={space:"bg-[#0f172a]",ocean:"bg-[#0ea5e9]",jungle:"bg-[#15803d]",sports:"bg-[#38bdf8]",pokemon:"bg-[#fee140]",dinosaur:"bg-[#c2410c]"},ht=()=>{switch(t){case"login":return G.jsx("div",{className:"min-h-[80vh] flex flex-col items-center justify-center p-4",children:P?G.jsxs("div",{className:"bg-white cartoon-border p-10 rounded-[50px] w-full max-w-md text-center animate-fade-in shadow-2xl",children:[G.jsx("h3",{className:"text-4xl font-black mb-2 uppercase text-slate-800",children:P==="Dad"?ae.dadCorner:ae.momCorner}),G.jsx("p",{className:"text-xl font-bold text-slate-500 mb-8 italic",children:ae.enterPin}),G.jsx("div",{className:"flex justify-center gap-6 mb-12",children:[...Array(4)].map((j,fe)=>G.jsx("div",{className:`w-10 h-10 rounded-full border-[8px] border-slate-800 transition-all ${A.length>fe?"bg-slate-800 scale-125":"bg-white"}`},fe))}),G.jsx("div",{className:"grid grid-cols-3 gap-6 max-w-sm mx-auto",children:["1","2","3","4","5","6","7","8","9","C","0",""].map(j=>G.jsx("button",{onClick:()=>{j==="C"?C(""):j===""?C(A.slice(0,-1)):B(j)},className:"aspect-square bg-white border-[6px] border-slate-800 shadow-[4px_4px_0px_#1e293b] flex items-center justify-center text-4xl font-black text-slate-800 hover:bg-amber-400 active:translate-y-1 transition-all rounded-[24px]",children:j},j))}),G.jsx("button",{onClick:()=>k(null),className:"mt-12 text-slate-800 hover:text-red-600 font-black text-xl uppercase transition-all",children:ae.back})]}):G.jsxs(G.Fragment,{children:[G.jsx("h2",{className:"text-6xl font-black text-slate-800 mb-12 uppercase text-center drop-shadow-lg",children:ae.whoAreYou}),G.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 w-full max-w-4xl",children:[G.jsxs("button",{onClick:()=>k("Dad"),className:"bg-sky-500 cartoon-border p-12 rounded-[50px] hover:scale-105 active:scale-95 group transition-all",children:[G.jsx("span",{className:"text-9xl mb-6 block group-hover:animate-float",children:""}),G.jsx("h4",{className:"text-4xl font-black text-white uppercase",children:ae.dadCorner})]}),G.jsxs("button",{onClick:()=>k("Mom"),className:"bg-rose-400 cartoon-border p-12 rounded-[50px] hover:scale-105 active:scale-95 group transition-all",children:[G.jsx("span",{className:"text-9xl mb-6 block group-hover:animate-float",children:""}),G.jsx("h4",{className:"text-4xl font-black text-white uppercase",children:ae.momCorner})]})]})]})});case"home":const[Ce,...be]=ve;return G.jsxs("div",{className:"py-10 px-4 max-w-5xl mx-auto",children:[G.jsxs("div",{className:"text-center mb-8",children:[G.jsx("h1",{className:`text-6xl md:text-8xl font-black ${M==="evening"?"text-white":"text-slate-800"} uppercase mb-4 drop-shadow-xl tracking-tighter`,children:ae.club}),G.jsx("p",{className:`text-2xl ${M==="evening"?"text-slate-300":"text-slate-500"} font-black italic`,children:ae.welcome})]}),G.jsx($1,{posts:r,activeFilter:te,onFilterChange:Z,lang:n}),Ce?G.jsxs("div",{className:"mb-24 animate-fade-in",children:[G.jsx("div",{className:"inline-block bg-amber-500 text-white cartoon-border px-8 py-3 rounded-2xl text-2xl font-black uppercase mb-6 transform -rotate-1 shadow-lg",children:ae.fresh}),G.jsx(Wh,{post:Ce,variant:"large",lang:n,onDelete:_?$:void 0,onOpen:Se})]}):G.jsx("div",{className:`text-center py-20 font-black text-3xl opacity-50 uppercase ${M==="evening"?"text-white":"text-slate-800"}`,children:"No memories yet..."}),be.length>0&&G.jsxs("div",{className:"pb-20",children:[G.jsx("h3",{className:`text-4xl font-black ${M==="evening"?"text-white":"text-slate-800"} mb-12 uppercase text-center md:text-left`,children:ae.archives}),G.jsx("div",{className:"flex flex-col gap-16",children:be.map(j=>G.jsx(Wh,{post:j,lang:n,onDelete:_?$:void 0,onOpen:Se},j.id))})]})]});case"upload":return G.jsx("div",{className:"py-10 px-4 max-w-4xl mx-auto",children:ue.length===0?G.jsxs("div",{className:"text-center animate-fade-in",children:[G.jsx("h2",{className:`text-5xl font-black mb-4 uppercase ${M==="evening"?"text-white":"text-slate-800"}`,children:"Add Memory"}),G.jsx("p",{className:`text-xl font-bold mb-12 italic ${M==="evening"?"text-slate-300":"text-slate-500"}`,children:ae.multipleHint}),G.jsxs("label",{className:"cursor-pointer group block",children:[G.jsxs("div",{className:`cartoon-border p-16 rounded-[50px] transition-all group-hover:scale-105 shadow-2xl ${_==="Dad"?"bg-sky-500":"bg-rose-400"}`,children:[G.jsx("span",{className:"text-9xl mb-6 block group-hover:animate-float",children:_==="Dad"?"":""}),G.jsx("h4",{className:"text-4xl font-black text-white uppercase",children:_==="Dad"?ae.dadCorner:ae.momCorner}),G.jsx("div",{className:"mt-8 bg-white text-slate-800 px-8 py-4 rounded-3xl font-black text-xl uppercase cartoon-border inline-block hover:bg-amber-400 transition-colors",children:" Choose Photos"})]}),G.jsx("input",{type:"file",multiple:!0,className:"hidden",accept:"image/*,video/*",onChange:le})]}),G.jsx("button",{onClick:()=>e("home"),className:`mt-16 font-black text-2xl uppercase transition-all hover:scale-110 ${M==="evening"?"text-white":"text-slate-800"}`,children:ae.back})]}):G.jsxs("div",{className:"animate-fade-in pb-24",children:[G.jsx("h2",{className:`text-4xl font-black uppercase mb-8 ${M==="evening"?"text-white":"text-slate-800"}`,children:ae.tellStory}),G.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:ue.map((j,fe)=>{var Oe;const Re=(Oe=w[fe])==null?void 0:Oe.type.startsWith("video/");return G.jsxs("div",{className:"aspect-square cartoon-border rounded-2xl overflow-hidden bg-white shadow-md hover:scale-105 transition-transform relative",children:[Re?G.jsx("video",{src:j,className:"w-full h-full object-cover",muted:!0,playsInline:!0}):G.jsx("img",{src:j,className:"w-full h-full object-cover",alt:"p"}),Re&&G.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:G.jsx("span",{className:"text-4xl",children:""})})]},fe)})}),G.jsxs("div",{className:"bg-white/90 cartoon-border p-8 rounded-[40px] mb-8 shadow-xl",children:[G.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase mb-4 text-center",children:ae.selectDate}),G.jsx("input",{type:"date",value:ke,onChange:j=>ct(j.target.value),className:"w-full bg-slate-50 cartoon-border px-6 py-4 rounded-3xl text-2xl font-black text-slate-800 focus:outline-none focus:bg-amber-50 transition-colors cursor-pointer"})]}),G.jsxs("div",{className:"bg-white/90 cartoon-border p-8 rounded-[40px] mb-8 shadow-xl",children:[G.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase mb-4 text-center",children:ae.selectHeroes}),G.jsx("div",{className:"flex justify-center gap-6",children:["Juval","Theo"].map(j=>G.jsxs("button",{onClick:()=>D(fe=>fe.includes(j)?fe.filter(Re=>Re!==j):[...fe,j]),className:`cartoon-border px-8 py-4 rounded-3xl text-xl font-black transition-all active:scale-95 ${q.includes(j)?(j==="Juval"?"bg-sky-400":"bg-rose-400")+" text-white scale-110 shadow-lg":"bg-white text-slate-400 opacity-60"}`,children:[j==="Juval"?" ":" ",j.toUpperCase()]},j))})]}),G.jsx("div",{className:"bg-white cartoon-border p-6 rounded-[30px] mb-12 shadow-xl",children:G.jsx("textarea",{className:"w-full h-48 p-4 text-2xl font-semibold text-slate-700 focus:outline-none bg-transparent resize-none placeholder:text-slate-200",placeholder:ae.placeholderContext,value:L,onChange:j=>U(j.target.value)})}),G.jsxs("div",{className:"text-center flex flex-col gap-6",children:[G.jsx("button",{onClick:he,className:"bg-rose-500 text-white cartoon-border px-16 py-8 rounded-[40px] text-4xl font-black cartoon-button mx-auto shadow-2xl",children:ae.startMission}),G.jsx("button",{onClick:()=>N([]),className:`font-black uppercase text-xl transition-all hover:scale-110 ${M==="evening"?"text-white hover:text-rose-400":"text-slate-800 hover:text-rose-600"}`,children:"Reset Selection"})]})]})});case"detail":return G.jsxs("div",{className:"py-10 px-4 max-w-5xl mx-auto animate-fade-in",children:[G.jsx("button",{onClick:()=>e("home"),className:"bg-white text-slate-800 cartoon-border px-8 py-4 rounded-2xl font-black text-xl mb-12 cartoon-button shadow-md",children:ae.back}),u?G.jsx(Wh,{post:u,variant:"large",lang:n,onDelete:_?$:void 0}):G.jsx("div",{className:"text-white text-center text-2xl",children:"Missing moment."})]});case"settings":return _?G.jsx(OU,{lang:n,user:_,theme:M,onBack:()=>{ce(!1),e("home")}}):null;default:return null}};return G.jsxs("div",{className:`min-h-screen pb-32 relative transition-colors duration-1000 ${Ct[M]}`,children:[Ge(),G.jsx("nav",{className:"bg-white/95 backdrop-blur-md border-b-4 border-slate-800 p-5 sticky top-0 z-50 shadow-sm",children:G.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[G.jsxs("div",{onClick:()=>e("home"),className:"flex items-center gap-3 cartoon-button cursor-pointer group",children:[G.jsx("div",{className:"bg-amber-400 p-3 rounded-2xl border-4 border-slate-800 transform group-hover:rotate-12 transition-transform shadow-md",children:G.jsx("span",{className:"text-3xl font-black text-slate-800",children:"JT"})}),G.jsx("span",{className:"hidden sm:block text-2xl font-black text-slate-800 uppercase ml-2 tracking-tighter",children:ae.club})]}),G.jsxs("div",{className:"flex items-center gap-4",children:[G.jsx("button",{onClick:Be,className:"bg-slate-100 text-slate-800 cartoon-border px-4 py-2 rounded-xl font-black text-sm uppercase hover:bg-slate-200 transition-colors shadow-sm",children:n==="en"?"ES ":"EN "}),_?G.jsxs(G.Fragment,{children:[G.jsx("button",{onClick:()=>e("settings"),className:"bg-slate-100 text-slate-800 cartoon-border px-4 py-2 rounded-xl font-black text-sm uppercase hover:bg-slate-200 transition-colors shadow-sm",title:n==="es"?"Configuracin":"Settings",children:""}),G.jsx("button",{onClick:Ue,className:"text-slate-400 font-black text-sm uppercase ml-4 hover:text-red-600 transition-colors",children:"Logout"})]}):G.jsx("button",{onClick:()=>e("login"),className:"bg-sky-500 text-white cartoon-border px-6 py-2 rounded-xl font-black text-sm uppercase hover:bg-sky-600 transition-colors shadow-sm",children:"Login"})]})]})}),re&&_&&G.jsxs("div",{className:"bg-amber-400 border-b-4 border-slate-800 p-4 text-center sticky top-[72px] z-40 animate-fade-in",children:[G.jsx("p",{className:"text-slate-800 font-black text-lg",children:n==="es"?" Por favor cambia tu cdigo secreto en Configuracin":" Please change your secret code in Settings"}),G.jsx("button",{onClick:()=>{ce(!1),e("settings")},className:"bg-slate-800 text-white px-6 py-2 rounded-xl font-black text-sm uppercase mt-2 hover:bg-slate-700 transition-colors",children:n==="es"?"Ir a Configuracin":"Go to Settings"})]}),G.jsx("main",{className:"relative z-10",children:ht()}),t!=="upload"&&t!=="login"&&g==="idle"&&G.jsx("button",{onClick:()=>{e(_?"upload":"login")},className:"fixed bottom-10 right-10 w-24 h-24 bg-rose-500 text-white rounded-full flex items-center justify-center text-5xl cartoon-border z-40 hover:scale-110 active:scale-95 shadow-2xl transition-all",children:""}),g!=="idle"&&G.jsx("div",{className:"fixed inset-0 bg-amber-400/95 z-[100] flex items-center justify-center p-6 backdrop-blur-sm animate-fade-in",children:G.jsx("div",{className:"bg-white cartoon-border p-12 rounded-[60px] animate-bounce text-center max-w-md shadow-[20px_20px_0px_#1e293b]",children:g==="uploading"?G.jsxs(G.Fragment,{children:[G.jsx("span",{className:"text-8xl block mb-8",children:""}),G.jsx("span",{className:"text-4xl font-black text-slate-800 uppercase tracking-tighter",children:ae.mixingColors})]}):G.jsxs(G.Fragment,{children:[G.jsx("span",{className:"text-8xl block mb-8",children:""}),G.jsx("span",{className:"text-4xl font-black text-green-600 uppercase tracking-tighter",children:ae.done})]})})})]})},oC=document.getElementById("root");if(!oC)throw new Error("Could not find root element to mount to");const ZU=J1.createRoot(oC);ZU.render(G.jsx(WU,{}));
