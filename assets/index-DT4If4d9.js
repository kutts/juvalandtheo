(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function b1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Hh={exports:{}},Cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v_;function R1(){if(v_)return Cl;v_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:u,ref:r!==void 0?r:null,props:a}}return Cl.Fragment=e,Cl.jsx=n,Cl.jsxs=n,Cl}var T_;function I1(){return T_||(T_=1,Hh.exports=R1()),Hh.exports}var q=I1(),zh={exports:{}},bl={},Yh={exports:{}},Jh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function w1(){return E_||(E_=1,(function(t){function e($,ue){var le=$.length;$.push(ue);e:for(;0<le;){var Ce=le-1>>>1,qe=$[Ce];if(0<r(qe,ue))$[Ce]=ue,$[le]=qe,le=Ce;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var ue=$[0],le=$.pop();if(le!==ue){$[0]=le;e:for(var Ce=0,qe=$.length,B=qe>>>1;Ce<B;){var ne=2*(Ce+1)-1,de=$[ne],me=ne+1,Ie=$[me];if(0>r(de,le))me<qe&&0>r(Ie,de)?($[Ce]=Ie,$[me]=le,Ce=me):($[Ce]=de,$[ne]=le,Ce=ne);else if(me<qe&&0>r(Ie,le))$[Ce]=Ie,$[me]=le,Ce=me;else break e}}return ue}function r($,ue){var le=$.sortIndex-ue.sortIndex;return le!==0?le:$.id-ue.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var g=[],h=[],_=1,T=null,A=3,C=!1,P=!1,V=!1,M=!1,K=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function re($){for(var ue=n(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=$)i(h),ue.sortIndex=ue.expirationTime,e(g,ue);else break;ue=n(h)}}function fe($){if(V=!1,re($),!P)if(n(g)!==null)P=!0,ae||(ae=!0,F());else{var ue=n(h);ue!==null&&be(fe,ue.startTime-$)}}var ae=!1,N=-1,w=5,I=-1;function L(){return M?!0:!(t.unstable_now()-I<w)}function k(){if(M=!1,ae){var $=t.unstable_now();I=$;var ue=!0;try{e:{P=!1,V&&(V=!1,ee(N),N=-1),C=!0;var le=A;try{t:{for(re($),T=n(g);T!==null&&!(T.expirationTime>$&&L());){var Ce=T.callback;if(typeof Ce=="function"){T.callback=null,A=T.priorityLevel;var qe=Ce(T.expirationTime<=$);if($=t.unstable_now(),typeof qe=="function"){T.callback=qe,re($),ue=!0;break t}T===n(g)&&i(g),re($)}else i(g);T=n(g)}if(T!==null)ue=!0;else{var B=n(h);B!==null&&be(fe,B.startTime-$),ue=!1}}break e}finally{T=null,A=le,C=!1}ue=void 0}}finally{ue?F():ae=!1}}}var F;if(typeof W=="function")F=function(){W(k)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,ke=D.port2;D.port1.onmessage=k,F=function(){ke.postMessage(null)}}else F=function(){K(k,0)};function be($,ue){N=K(function(){$(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_next=function($){switch(A){case 1:case 2:case 3:var ue=3;break;default:ue=A}var le=A;A=ue;try{return $()}finally{A=le}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function($,ue){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var le=A;A=$;try{return ue()}finally{A=le}},t.unstable_scheduleCallback=function($,ue,le){var Ce=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Ce+le:Ce):le=Ce,$){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=le+qe,$={id:_++,callback:ue,priorityLevel:$,startTime:le,expirationTime:qe,sortIndex:-1},le>Ce?($.sortIndex=le,e(h,$),n(g)===null&&$===n(h)&&(V?(ee(N),N=-1):V=!0,be(fe,le-Ce))):($.sortIndex=qe,e(g,$),P||C||(P=!0,ae||(ae=!0,F()))),$},t.unstable_shouldYield=L,t.unstable_wrapCallback=function($){var ue=A;return function(){var le=A;A=ue;try{return $.apply(this,arguments)}finally{A=le}}}})(Jh)),Jh}var A_;function N1(){return A_||(A_=1,Yh.exports=w1()),Yh.exports}var $h={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S_;function D1(){if(S_)return Me;S_=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),A=Symbol.iterator;function C(B){return B===null||typeof B!="object"?null:(B=A&&B[A]||B["@@iterator"],typeof B=="function"?B:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,M={};function K(B,ne,de){this.props=B,this.context=ne,this.refs=M,this.updater=de||P}K.prototype.isReactComponent={},K.prototype.setState=function(B,ne){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ne,"setState")},K.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function ee(){}ee.prototype=K.prototype;function W(B,ne,de){this.props=B,this.context=ne,this.refs=M,this.updater=de||P}var re=W.prototype=new ee;re.constructor=W,V(re,K.prototype),re.isPureReactComponent=!0;var fe=Array.isArray;function ae(){}var N={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function I(B,ne,de){var me=de.ref;return{$$typeof:t,type:B,key:ne,ref:me!==void 0?me:null,props:de}}function L(B,ne){return I(B.type,ne,B.props)}function k(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function F(B){var ne={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(de){return ne[de]})}var D=/\/+/g;function ke(B,ne){return typeof B=="object"&&B!==null&&B.key!=null?F(""+B.key):ne.toString(36)}function be(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(ae,ae):(B.status="pending",B.then(function(ne){B.status==="pending"&&(B.status="fulfilled",B.value=ne)},function(ne){B.status==="pending"&&(B.status="rejected",B.reason=ne)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function $(B,ne,de,me,Ie){var De=typeof B;(De==="undefined"||De==="boolean")&&(B=null);var He=!1;if(B===null)He=!0;else switch(De){case"bigint":case"string":case"number":He=!0;break;case"object":switch(B.$$typeof){case t:case e:He=!0;break;case _:return He=B._init,$(He(B._payload),ne,de,me,Ie)}}if(He)return Ie=Ie(B),He=me===""?"."+ke(B,0):me,fe(Ie)?(de="",He!=null&&(de=He.replace(D,"$&/")+"/"),$(Ie,ne,de,"",function(Q){return Q})):Ie!=null&&(k(Ie)&&(Ie=L(Ie,de+(Ie.key==null||B&&B.key===Ie.key?"":(""+Ie.key).replace(D,"$&/")+"/")+He)),ne.push(Ie)),1;He=0;var Te=me===""?".":me+":";if(fe(B))for(var ve=0;ve<B.length;ve++)me=B[ve],De=Te+ke(me,ve),He+=$(me,ne,de,De,Ie);else if(ve=C(B),typeof ve=="function")for(B=ve.call(B),ve=0;!(me=B.next()).done;)me=me.value,De=Te+ke(me,ve++),He+=$(me,ne,de,De,Ie);else if(De==="object"){if(typeof B.then=="function")return $(be(B),ne,de,me,Ie);throw ne=String(B),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return He}function ue(B,ne,de){if(B==null)return B;var me=[],Ie=0;return $(B,me,"","",function(De){return ne.call(de,De,Ie++)}),me}function le(B){if(B._status===-1){var ne=B._result;ne=ne(),ne.then(function(de){(B._status===0||B._status===-1)&&(B._status=1,B._result=de)},function(de){(B._status===0||B._status===-1)&&(B._status=2,B._result=de)}),B._status===-1&&(B._status=0,B._result=ne)}if(B._status===1)return B._result.default;throw B._result}var Ce=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},qe={map:ue,forEach:function(B,ne,de){ue(B,function(){ne.apply(this,arguments)},de)},count:function(B){var ne=0;return ue(B,function(){ne++}),ne},toArray:function(B){return ue(B,function(ne){return ne})||[]},only:function(B){if(!k(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Me.Activity=T,Me.Children=qe,Me.Component=K,Me.Fragment=n,Me.Profiler=r,Me.PureComponent=W,Me.StrictMode=i,Me.Suspense=g,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Me.__COMPILER_RUNTIME={__proto__:null,c:function(B){return N.H.useMemoCache(B)}},Me.cache=function(B){return function(){return B.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(B,ne,de){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var me=V({},B.props),Ie=B.key;if(ne!=null)for(De in ne.key!==void 0&&(Ie=""+ne.key),ne)!w.call(ne,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&ne.ref===void 0||(me[De]=ne[De]);var De=arguments.length-2;if(De===1)me.children=de;else if(1<De){for(var He=Array(De),Te=0;Te<De;Te++)He[Te]=arguments[Te+2];me.children=He}return I(B.type,Ie,me)},Me.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:a,_context:B},B},Me.createElement=function(B,ne,de){var me,Ie={},De=null;if(ne!=null)for(me in ne.key!==void 0&&(De=""+ne.key),ne)w.call(ne,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ie[me]=ne[me]);var He=arguments.length-2;if(He===1)Ie.children=de;else if(1<He){for(var Te=Array(He),ve=0;ve<He;ve++)Te[ve]=arguments[ve+2];Ie.children=Te}if(B&&B.defaultProps)for(me in He=B.defaultProps,He)Ie[me]===void 0&&(Ie[me]=He[me]);return I(B,De,Ie)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(B){return{$$typeof:d,render:B}},Me.isValidElement=k,Me.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:le}},Me.memo=function(B,ne){return{$$typeof:h,type:B,compare:ne===void 0?null:ne}},Me.startTransition=function(B){var ne=N.T,de={};N.T=de;try{var me=B(),Ie=N.S;Ie!==null&&Ie(de,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ae,Ce)}catch(De){Ce(De)}finally{ne!==null&&de.types!==null&&(ne.types=de.types),N.T=ne}},Me.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Me.use=function(B){return N.H.use(B)},Me.useActionState=function(B,ne,de){return N.H.useActionState(B,ne,de)},Me.useCallback=function(B,ne){return N.H.useCallback(B,ne)},Me.useContext=function(B){return N.H.useContext(B)},Me.useDebugValue=function(){},Me.useDeferredValue=function(B,ne){return N.H.useDeferredValue(B,ne)},Me.useEffect=function(B,ne){return N.H.useEffect(B,ne)},Me.useEffectEvent=function(B){return N.H.useEffectEvent(B)},Me.useId=function(){return N.H.useId()},Me.useImperativeHandle=function(B,ne,de){return N.H.useImperativeHandle(B,ne,de)},Me.useInsertionEffect=function(B,ne){return N.H.useInsertionEffect(B,ne)},Me.useLayoutEffect=function(B,ne){return N.H.useLayoutEffect(B,ne)},Me.useMemo=function(B,ne){return N.H.useMemo(B,ne)},Me.useOptimistic=function(B,ne){return N.H.useOptimistic(B,ne)},Me.useReducer=function(B,ne,de){return N.H.useReducer(B,ne,de)},Me.useRef=function(B){return N.H.useRef(B)},Me.useState=function(B){return N.H.useState(B)},Me.useSyncExternalStore=function(B,ne,de){return N.H.useSyncExternalStore(B,ne,de)},Me.useTransition=function(){return N.H.useTransition()},Me.version="19.2.3",Me}var x_;function Qp(){return x_||(x_=1,$h.exports=D1()),$h.exports}var Kh={exports:{}},rn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C_;function M1(){if(C_)return rn;C_=1;var t=Qp();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(g,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:h,implementation:_}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return rn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,rn.createPortal=function(g,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(g,h,null,_)},rn.flushSync=function(g){var h=u.T,_=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=h,i.p=_,i.d.f()}},rn.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(g,h))},rn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},rn.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin),A=typeof h.integrity=="string"?h.integrity:void 0,C=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?i.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:C}):_==="script"&&i.d.X(g,{crossOrigin:T,integrity:A,fetchPriority:C,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},rn.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=d(h.as,h.crossOrigin);i.d.M(g,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(g)},rn.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=d(_,h.crossOrigin);i.d.L(g,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},rn.preloadModule=function(g,h){if(typeof g=="string")if(h){var _=d(h.as,h.crossOrigin);i.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(g)},rn.requestFormReset=function(g){i.d.r(g)},rn.unstable_batchedUpdates=function(g,h){return g(h)},rn.useFormState=function(g,h,_){return u.H.useFormState(g,h,_)},rn.useFormStatus=function(){return u.H.useHostTransitionStatus()},rn.version="19.2.3",rn}var b_;function P1(){if(b_)return Kh.exports;b_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Kh.exports=M1(),Kh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_;function V1(){if(R_)return bl;R_=1;var t=N1(),e=Qp(),n=P1();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,l=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(l=s.return),o=s.return;while(o)}return s.tag===3?l:null}function u(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function d(o){if(o.tag===31){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function g(o){if(a(o)!==o)throw Error(i(188))}function h(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var l=o,c=s;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return g(y),o;if(v===c)return g(y),s;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var S=!1,b=y.child;b;){if(b===l){S=!0,l=y,c=v;break}if(b===c){S=!0,c=y,l=v;break}b=b.sibling}if(!S){for(b=v.child;b;){if(b===l){S=!0,l=v,c=y;break}if(b===c){S=!0,c=v,l=y;break}b=b.sibling}if(!S)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?o:s}function _(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=_(o),s!==null)return s;o=o.sibling}return null}var T=Object.assign,A=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),W=Symbol.for("react.context"),re=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function F(o){return o===null||typeof o!="object"?null:(o=k&&o[k]||o["@@iterator"],typeof o=="function"?o:null)}var D=Symbol.for("react.client.reference");function ke(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===D?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case V:return"Fragment";case K:return"Profiler";case M:return"StrictMode";case fe:return"Suspense";case ae:return"SuspenseList";case I:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case P:return"Portal";case W:return o.displayName||"Context";case ee:return(o._context.displayName||"Context")+".Consumer";case re:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case N:return s=o.displayName||null,s!==null?s:ke(o.type)||"Memo";case w:s=o._payload,o=o._init;try{return ke(o(s))}catch{}}return null}var be=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Ce=[],qe=-1;function B(o){return{current:o}}function ne(o){0>qe||(o.current=Ce[qe],Ce[qe]=null,qe--)}function de(o,s){qe++,Ce[qe]=o.current,o.current=s}var me=B(null),Ie=B(null),De=B(null),He=B(null);function Te(o,s){switch(de(De,s),de(Ie,o),de(me,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?Gy(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=Gy(s),o=Hy(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ne(me),de(me,o)}function ve(){ne(me),ne(Ie),ne(De)}function Q(o){o.memoizedState!==null&&de(He,o);var s=me.current,l=Hy(s,o.type);s!==l&&(de(Ie,o),de(me,l))}function ge(o){Ie.current===o&&(ne(me),ne(Ie)),He.current===o&&(ne(He),El._currentValue=le)}var Oe,Ke;function vt(o){if(Oe===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Oe=s&&s[1]||"",Ke=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Oe+o+Ke}var bn=!1;function ys(o,s){if(!o||bn)return"";bn=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var J=Z}Reflect.construct(o,[],ie)}else{try{ie.call()}catch(Z){J=Z}o.call(ie.prototype)}}else{try{throw Error()}catch(Z){J=Z}(ie=o())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&J&&typeof Z.stack=="string")return[Z.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),S=v[0],b=v[1];if(S&&b){var U=S.split(`
`),Y=b.split(`
`);for(y=c=0;c<U.length&&!U[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===U.length||y===Y.length)for(c=U.length-1,y=Y.length-1;1<=c&&0<=y&&U[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(U[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||U[c]!==Y[y]){var j=`
`+U[c].replace(" at new "," at ");return o.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",o.displayName)),j}while(1<=c&&0<=y);break}}}finally{bn=!1,Error.prepareStackTrace=l}return(l=o?o.displayName||o.name:"")?vt(l):""}function Aa(o,s){switch(o.tag){case 26:case 27:case 5:return vt(o.type);case 16:return vt("Lazy");case 13:return o.child!==s&&s!==null?vt("Suspense Fallback"):vt("Suspense");case 19:return vt("SuspenseList");case 0:case 15:return ys(o.type,!1);case 11:return ys(o.type.render,!1);case 1:return ys(o.type,!0);case 31:return vt("Activity");default:return""}}function Sa(o){try{var s="",l=null;do s+=Aa(o,l),l=o,o=o.return;while(o);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var wt=Object.prototype.hasOwnProperty,Ft=t.unstable_scheduleCallback,Eo=t.unstable_cancelCallback,Yf=t.unstable_shouldYield,ou=t.unstable_requestPaint,fn=t.unstable_now,_s=t.unstable_getCurrentPriorityLevel,xa=t.unstable_ImmediatePriority,Ca=t.unstable_UserBlockingPriority,Ao=t.unstable_NormalPriority,Jf=t.unstable_LowPriority,su=t.unstable_IdlePriority,ru=t.log,au=t.unstable_setDisableYieldValue,ei=null,Xt=null;function kn(o){if(typeof ru=="function"&&au(o),Xt&&typeof Xt.setStrictMode=="function")try{Xt.setStrictMode(ei,o)}catch{}}var xt=Math.clz32?Math.clz32:uu,lu=Math.log,rr=Math.LN2;function uu(o){return o>>>=0,o===0?32:31-(lu(o)/rr|0)|0}var Ei=256,vs=262144,Nt=4194304;function Ai(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Si(o,s,l){var c=o.pendingLanes;if(c===0)return 0;var y=0,v=o.suspendedLanes,S=o.pingedLanes;o=o.warmLanes;var b=c&134217727;return b!==0?(c=b&~v,c!==0?y=Ai(c):(S&=b,S!==0?y=Ai(S):l||(l=b&~o,l!==0&&(y=Ai(l))))):(b=c&~v,b!==0?y=Ai(b):S!==0?y=Ai(S):l||(l=c&~o,l!==0&&(y=Ai(l)))),y===0?0:s!==0&&s!==y&&(s&v)===0&&(v=y&-y,l=s&-s,v>=l||v===32&&(l&4194048)!==0)?s:y}function ti(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function $f(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cu(){var o=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),o}function xi(o){for(var s=[],l=0;31>l;l++)s.push(o);return s}function Ts(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Kf(o,s,l,c,y,v){var S=o.pendingLanes;o.pendingLanes=l,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=l,o.entangledLanes&=l,o.errorRecoveryDisabledLanes&=l,o.shellSuspendCounter=0;var b=o.entanglements,U=o.expirationTimes,Y=o.hiddenUpdates;for(l=S&~l;0<l;){var j=31-xt(l),ie=1<<j;b[j]=0,U[j]=-1;var J=Y[j];if(J!==null)for(Y[j]=null,j=0;j<J.length;j++){var Z=J[j];Z!==null&&(Z.lane&=-536870913)}l&=~ie}c!==0&&Es(o,c,0),v!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=v&~(S&~s))}function Es(o,s,l){o.pendingLanes|=s,o.suspendedLanes&=~s;var c=31-xt(s);o.entangledLanes|=s,o.entanglements[c]=o.entanglements[c]|1073741824|l&261930}function ba(o,s){var l=o.entangledLanes|=s;for(o=o.entanglements;l;){var c=31-xt(l),y=1<<c;y&s|o[c]&s&&(o[c]|=s),l&=~y}}function Ra(o,s){var l=s&-s;return l=(l&42)!==0?1:As(l),(l&(o.suspendedLanes|s))!==0?0:l}function As(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Qi(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function fu(){var o=ue.p;return o!==0?o:(o=window.event,o===void 0?32:d_(o.type))}function ni(o,s){var l=ue.p;try{return ue.p=o,s()}finally{ue.p=l}}var ii=Math.random().toString(36).slice(2),Dt="__reactFiber$"+ii,zt="__reactProps$"+ii,Ci="__reactContainer$"+ii,ar="__reactEvents$"+ii,Qf="__reactListeners$"+ii,du="__reactHandles$"+ii,hu="__reactResources$"+ii,bi="__reactMarker$"+ii;function lr(o){delete o[Dt],delete o[zt],delete o[ar],delete o[Qf],delete o[du]}function Ri(o){var s=o[Dt];if(s)return s;for(var l=o.parentNode;l;){if(s=l[Ci]||l[Dt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(o=Xy(o);o!==null;){if(l=o[Dt])return l;o=Xy(o)}return s}o=l,l=o.parentNode}return null}function On(o){if(o=o[Dt]||o[Ci]){var s=o.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return o}return null}function Rn(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function Ii(o){var s=o[hu];return s||(s=o[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Mt(o){o[bi]=!0}var Ia=new Set,wa={};function wi(o,s){Ni(o,s),Ni(o+"Capture",s)}function Ni(o,s){for(wa[o]=s,o=0;o<s.length;o++)Ia.add(s[o])}var Na=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Da={},Ma={};function pu(o){return wt.call(Ma,o)?!0:wt.call(Da,o)?!1:Na.test(o)?Ma[o]=!0:(Da[o]=!0,!1)}function ur(o,s,l){if(pu(s))if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+l)}}function In(o,s,l){if(l===null)o.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+l)}}function Pt(o,s,l,c){if(c===null)o.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(l);return}o.setAttributeNS(s,l,""+c)}}function Yt(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function So(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Pa(o,s,l){var c=Object.getOwnPropertyDescriptor(o.constructor.prototype,s);if(!o.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return y.call(this)},set:function(S){l=""+S,v.call(this,S)}}),Object.defineProperty(o,s,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function ot(o){if(!o._valueTracker){var s=So(o)?"checked":"value";o._valueTracker=Pa(o,s,""+o[s])}}function Ss(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return o&&(c=So(o)?o.checked?"true":"false":o.value),o=c,o!==l?(s.setValue(o),!0):!1}function Di(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var xs=/[\n"\\]/g;function _n(o){return o.replace(xs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function cr(o,s,l,c,y,v,S,b){o.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?o.type=S:o.removeAttribute("type"),s!=null?S==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+Yt(s)):o.value!==""+Yt(s)&&(o.value=""+Yt(s)):S!=="submit"&&S!=="reset"||o.removeAttribute("value"),s!=null?Va(o,S,Yt(s)):l!=null?Va(o,S,Yt(l)):c!=null&&o.removeAttribute("value"),y==null&&v!=null&&(o.defaultChecked=!!v),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?o.name=""+Yt(b):o.removeAttribute("name")}function mu(o,s,l,c,y,v,S,b){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(o.type=v),s!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||s!=null)){ot(o);return}l=l!=null?""+Yt(l):"",s=s!=null?""+Yt(s):l,b||s===o.value||(o.value=s),o.defaultValue=s}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,o.checked=b?o.checked:!!c,o.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(o.name=S),ot(o)}function Va(o,s,l){s==="number"&&Di(o.ownerDocument)===o||o.defaultValue===""+l||(o.defaultValue=""+l)}function xo(o,s,l,c){if(o=o.options,s){s={};for(var y=0;y<l.length;y++)s["$"+l[y]]=!0;for(l=0;l<o.length;l++)y=s.hasOwnProperty("$"+o[l].value),o[l].selected!==y&&(o[l].selected=y),y&&c&&(o[l].defaultSelected=!0)}else{for(l=""+Yt(l),s=null,y=0;y<o.length;y++){if(o[y].value===l){o[y].selected=!0,c&&(o[y].defaultSelected=!0);return}s!==null||o[y].disabled||(s=o[y])}s!==null&&(s.selected=!0)}}function gu(o,s,l){if(s!=null&&(s=""+Yt(s),s!==o.value&&(o.value=s),l==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=l!=null?""+Yt(l):""}function Co(o,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(be(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=Yt(s),o.defaultValue=l,c=o.textContent,c===l&&c!==""&&c!==null&&(o.value=c),ot(o)}function vn(o,s){if(s){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=s;return}}o.textContent=s}var yu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ua(o,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":c?o.setProperty(s,l):typeof l!="number"||l===0||yu.has(s)?s==="float"?o.cssFloat=l:o[s]=(""+l).trim():o[s]=l+"px"}function La(o,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?o.setProperty(c,""):c==="float"?o.cssFloat="":o[c]="");for(var y in s)c=s[y],s.hasOwnProperty(y)&&l[y]!==c&&Ua(o,y,c)}else for(var v in s)s.hasOwnProperty(v)&&Ua(o,v,s[v])}function fr(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _u=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function dr(o){return bo.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function oi(){}var ka=null;function Bn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Ro=null,Mi=null;function Cs(o){var s=On(o);if(s&&(o=s.stateNode)){var l=o[zt]||null;e:switch(o=s.stateNode,s.type){case"input":if(cr(o,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+_n(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==o&&c.form===o.form){var y=c[zt]||null;if(!y)throw Error(i(90));cr(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===o.form&&Ss(c)}break e;case"textarea":gu(o,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&xo(o,!!l.multiple,s,!1)}}}var hr=!1;function Io(o,s,l){if(hr)return o(s,l);hr=!0;try{var c=o(s);return c}finally{if(hr=!1,(Ro!==null||Mi!==null)&&(fc(),Ro&&(s=Ro,o=Mi,Mi=Ro=null,Cs(s),o)))for(s=0;s<o.length;s++)Cs(o[s])}}function si(o,s){var l=o.stateNode;if(l===null)return null;var c=l[zt]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(o=o.type,c=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!c;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bs=!1;if(qn)try{var at={};Object.defineProperty(at,"passive",{get:function(){bs=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{bs=!1}var Pi=null,Oa=null,Rs=null;function Ba(){if(Rs)return Rs;var o,s=Oa,l=s.length,c,y="value"in Pi?Pi.value:Pi.textContent,v=y.length;for(o=0;o<l&&s[o]===y[o];o++);var S=l-o;for(c=1;c<=S&&s[l-c]===y[v-c];c++);return Rs=y.slice(o,1<c?1-c:void 0)}function Is(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function Xi(){return!0}function ri(){return!1}function Wt(o){function s(l,c,y,v,S){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=S,this.currentTarget=null;for(var b in o)o.hasOwnProperty(b)&&(l=o[b],this[b]=l?l(v):v[b]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Xi:ri,this.isPropagationStopped=ri,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),s}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vi=Wt(Wi),wo=T({},Wi,{view:0,detail:0}),qa=Wt(wo),No,pr,Ui,mr=T({},wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Do,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Ui&&(Ui&&o.type==="mousemove"?(No=o.screenX-Ui.screenX,pr=o.screenY-Ui.screenY):pr=No=0,Ui=o),No)},movementY:function(o){return"movementY"in o?o.movementY:pr}}),Fa=Wt(mr),ws=T({},mr,{dataTransfer:0}),vu=Wt(ws),Tu=T({},wo,{relatedTarget:0}),Ns=Wt(Tu),Ga=T({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),Eu=Wt(Ga),gr=T({},Wi,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Au=Wt(gr),Su=T({},Wi,{data:0}),Li=Wt(Su),xu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ru(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=bu[o])?!!s[o]:!1}function Do(){return Ru}var dn=T({},wo,{key:function(o){if(o.key){var s=xu[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=Is(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Cu[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Do,charCode:function(o){return o.type==="keypress"?Is(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Is(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Iu=Wt(dn),wu=T({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zi=Wt(wu),m=T({},wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Do}),E=Wt(m),x=T({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),R=Wt(x),H=T({},mr,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Wt(H),ce=T({},Wi,{newState:0,oldState:0}),Ve=Wt(ce),Ct=[9,13,27,32],tt=qn&&"CompositionEvent"in window,gt=null;qn&&"documentMode"in document&&(gt=document.documentMode);var Fn=qn&&"TextEvent"in window&&!gt,ki=qn&&(!tt||gt&&8<gt&&11>=gt),ai=" ",li=!1;function Ds(o,s){switch(o){case"keyup":return Ct.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yr(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var _r=!1;function Xx(o,s){switch(o){case"compositionend":return yr(s);case"keypress":return s.which!==32?null:(li=!0,ai);case"textInput":return o=s.data,o===ai&&li?null:o;default:return null}}function Wx(o,s){if(_r)return o==="compositionend"||!tt&&Ds(o,s)?(o=Ba(),Rs=Oa=Pi=null,_r=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ki&&s.locale!=="ko"?null:s.data;default:return null}}var Zx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jm(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!Zx[o.type]:s==="textarea"}function eg(o,s,l,c){Ro?Mi?Mi.push(c):Mi=[c]:Ro=c,s=_c(s,"onChange"),0<s.length&&(l=new Vi("onChange","change",null,l,c),o.push({event:l,listeners:s}))}var Ha=null,za=null;function jx(o){Ly(o,0)}function Nu(o){var s=Rn(o);if(Ss(s))return o}function tg(o,s){if(o==="change")return s}var ng=!1;if(qn){var Xf;if(qn){var Wf="oninput"in document;if(!Wf){var ig=document.createElement("div");ig.setAttribute("oninput","return;"),Wf=typeof ig.oninput=="function"}Xf=Wf}else Xf=!1;ng=Xf&&(!document.documentMode||9<document.documentMode)}function og(){Ha&&(Ha.detachEvent("onpropertychange",sg),za=Ha=null)}function sg(o){if(o.propertyName==="value"&&Nu(za)){var s=[];eg(s,za,o,Bn(o)),Io(jx,s)}}function eC(o,s,l){o==="focusin"?(og(),Ha=s,za=l,Ha.attachEvent("onpropertychange",sg)):o==="focusout"&&og()}function tC(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Nu(za)}function nC(o,s){if(o==="click")return Nu(s)}function iC(o,s){if(o==="input"||o==="change")return Nu(s)}function oC(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var wn=typeof Object.is=="function"?Object.is:oC;function Ya(o,s){if(wn(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var l=Object.keys(o),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!wt.call(s,y)||!wn(o[y],s[y]))return!1}return!0}function rg(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function ag(o,s){var l=rg(o);o=0;for(var c;l;){if(l.nodeType===3){if(c=o+l.textContent.length,o<=s&&c>=s)return{node:l,offset:s-o};o=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=rg(l)}}function lg(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?lg(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function ug(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=Di(o.document);s instanceof o.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)o=s.contentWindow;else break;s=Di(o.document)}return s}function Zf(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var sC=qn&&"documentMode"in document&&11>=document.documentMode,vr=null,jf=null,Ja=null,ed=!1;function cg(o,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ed||vr==null||vr!==Di(c)||(c=vr,"selectionStart"in c&&Zf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ja&&Ya(Ja,c)||(Ja=c,c=_c(jf,"onSelect"),0<c.length&&(s=new Vi("onSelect","select",null,s,l),o.push({event:s,listeners:c}),s.target=vr)))}function Ms(o,s){var l={};return l[o.toLowerCase()]=s.toLowerCase(),l["Webkit"+o]="webkit"+s,l["Moz"+o]="moz"+s,l}var Tr={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},td={},fg={};qn&&(fg=document.createElement("div").style,"AnimationEvent"in window||(delete Tr.animationend.animation,delete Tr.animationiteration.animation,delete Tr.animationstart.animation),"TransitionEvent"in window||delete Tr.transitionend.transition);function Ps(o){if(td[o])return td[o];if(!Tr[o])return o;var s=Tr[o],l;for(l in s)if(s.hasOwnProperty(l)&&l in fg)return td[o]=s[l];return o}var dg=Ps("animationend"),hg=Ps("animationiteration"),pg=Ps("animationstart"),rC=Ps("transitionrun"),aC=Ps("transitionstart"),lC=Ps("transitioncancel"),mg=Ps("transitionend"),gg=new Map,nd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nd.push("scrollEnd");function ui(o,s){gg.set(o,s),wi(s,[o])}var Du=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Gn=[],Er=0,id=0;function Mu(){for(var o=Er,s=id=Er=0;s<o;){var l=Gn[s];Gn[s++]=null;var c=Gn[s];Gn[s++]=null;var y=Gn[s];Gn[s++]=null;var v=Gn[s];if(Gn[s++]=null,c!==null&&y!==null){var S=c.pending;S===null?y.next=y:(y.next=S.next,S.next=y),c.pending=y}v!==0&&yg(l,y,v)}}function Pu(o,s,l,c){Gn[Er++]=o,Gn[Er++]=s,Gn[Er++]=l,Gn[Er++]=c,id|=c,o.lanes|=c,o=o.alternate,o!==null&&(o.lanes|=c)}function od(o,s,l,c){return Pu(o,s,l,c),Vu(o)}function Vs(o,s){return Pu(o,null,null,s),Vu(o)}function yg(o,s,l){o.lanes|=l;var c=o.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=o.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(o=v.stateNode,o===null||o._visibility&1||(y=!0)),o=v,v=v.return;return o.tag===3?(v=o.stateNode,y&&s!==null&&(y=31-xt(l),o=v.hiddenUpdates,c=o[y],c===null?o[y]=[s]:c.push(s),s.lane=l|536870912),v):null}function Vu(o){if(50<pl)throw pl=0,hh=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var Ar={};function uC(o,s,l,c){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(o,s,l,c){return new uC(o,s,l,c)}function sd(o){return o=o.prototype,!(!o||!o.isReactComponent)}function ji(o,s){var l=o.alternate;return l===null?(l=Nn(o.tag,s,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=s,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&65011712,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,s=o.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l.refCleanup=o.refCleanup,l}function _g(o,s){o.flags&=65011714;var l=o.alternate;return l===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,s=l.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function Uu(o,s,l,c,y,v){var S=0;if(c=o,typeof o=="function")sd(o)&&(S=1);else if(typeof o=="string")S=p1(o,l,me.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case I:return o=Nn(31,l,s,y),o.elementType=I,o.lanes=v,o;case V:return Us(l.children,y,v,s);case M:S=8,y|=24;break;case K:return o=Nn(12,l,s,y|2),o.elementType=K,o.lanes=v,o;case fe:return o=Nn(13,l,s,y),o.elementType=fe,o.lanes=v,o;case ae:return o=Nn(19,l,s,y),o.elementType=ae,o.lanes=v,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case W:S=10;break e;case ee:S=9;break e;case re:S=11;break e;case N:S=14;break e;case w:S=16,c=null;break e}S=29,l=Error(i(130,o===null?"null":typeof o,"")),c=null}return s=Nn(S,l,s,y),s.elementType=o,s.type=c,s.lanes=v,s}function Us(o,s,l,c){return o=Nn(7,o,c,s),o.lanes=l,o}function rd(o,s,l){return o=Nn(6,o,null,s),o.lanes=l,o}function vg(o){var s=Nn(18,null,null,0);return s.stateNode=o,s}function ad(o,s,l){return s=Nn(4,o.children!==null?o.children:[],o.key,s),s.lanes=l,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var Tg=new WeakMap;function Hn(o,s){if(typeof o=="object"&&o!==null){var l=Tg.get(o);return l!==void 0?l:(s={value:o,source:s,stack:Sa(s)},Tg.set(o,s),s)}return{value:o,source:s,stack:Sa(s)}}var Sr=[],xr=0,Lu=null,$a=0,zn=[],Yn=0,Mo=null,Oi=1,Bi="";function eo(o,s){Sr[xr++]=$a,Sr[xr++]=Lu,Lu=o,$a=s}function Eg(o,s,l){zn[Yn++]=Oi,zn[Yn++]=Bi,zn[Yn++]=Mo,Mo=o;var c=Oi;o=Bi;var y=32-xt(c)-1;c&=~(1<<y),l+=1;var v=32-xt(s)+y;if(30<v){var S=y-y%5;v=(c&(1<<S)-1).toString(32),c>>=S,y-=S,Oi=1<<32-xt(s)+y|l<<y|c,Bi=v+o}else Oi=1<<v|l<<y|c,Bi=o}function ld(o){o.return!==null&&(eo(o,1),Eg(o,1,0))}function ud(o){for(;o===Lu;)Lu=Sr[--xr],Sr[xr]=null,$a=Sr[--xr],Sr[xr]=null;for(;o===Mo;)Mo=zn[--Yn],zn[Yn]=null,Bi=zn[--Yn],zn[Yn]=null,Oi=zn[--Yn],zn[Yn]=null}function Ag(o,s){zn[Yn++]=Oi,zn[Yn++]=Bi,zn[Yn++]=Mo,Oi=s.id,Bi=s.overflow,Mo=o}var Zt=null,pt=null,Qe=!1,Po=null,Jn=!1,cd=Error(i(519));function Vo(o){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ka(Hn(s,o)),cd}function Sg(o){var s=o.stateNode,l=o.type,c=o.memoizedProps;switch(s[Dt]=o,s[zt]=c,l){case"dialog":Ge("cancel",s),Ge("close",s);break;case"iframe":case"object":case"embed":Ge("load",s);break;case"video":case"audio":for(l=0;l<gl.length;l++)Ge(gl[l],s);break;case"source":Ge("error",s);break;case"img":case"image":case"link":Ge("error",s),Ge("load",s);break;case"details":Ge("toggle",s);break;case"input":Ge("invalid",s),mu(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ge("invalid",s);break;case"textarea":Ge("invalid",s),Co(s,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||qy(s.textContent,l)?(c.popover!=null&&(Ge("beforetoggle",s),Ge("toggle",s)),c.onScroll!=null&&Ge("scroll",s),c.onScrollEnd!=null&&Ge("scrollend",s),c.onClick!=null&&(s.onclick=oi),s=!0):s=!1,s||Vo(o,!0)}function xg(o){for(Zt=o.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:Zt=Zt.return}}function Cr(o){if(o!==Zt)return!1;if(!Qe)return xg(o),Qe=!0,!1;var s=o.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=o.type,l=!(l!=="form"&&l!=="button")||Ih(o.type,o.memoizedProps)),l=!l),l&&pt&&Vo(o),xg(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));pt=Qy(o)}else if(s===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));pt=Qy(o)}else s===27?(s=pt,Ko(o.type)?(o=Ph,Ph=null,pt=o):pt=s):pt=Zt?Kn(o.stateNode.nextSibling):null;return!0}function Ls(){pt=Zt=null,Qe=!1}function fd(){var o=Po;return o!==null&&(Sn===null?Sn=o:Sn.push.apply(Sn,o),Po=null),o}function Ka(o){Po===null?Po=[o]:Po.push(o)}var dd=B(null),ks=null,to=null;function Uo(o,s,l){de(dd,s._currentValue),s._currentValue=l}function no(o){o._currentValue=dd.current,ne(dd)}function hd(o,s,l){for(;o!==null;){var c=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),o===l)break;o=o.return}}function pd(o,s,l,c){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var v=y.dependencies;if(v!==null){var S=y.child;v=v.firstContext;e:for(;v!==null;){var b=v;v=y;for(var U=0;U<s.length;U++)if(b.context===s[U]){v.lanes|=l,b=v.alternate,b!==null&&(b.lanes|=l),hd(v.return,l,o),c||(S=null);break e}v=b.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(i(341));S.lanes|=l,v=S.alternate,v!==null&&(v.lanes|=l),hd(S,l,o),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===o){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function br(o,s,l,c){o=null;for(var y=s,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var b=y.type;wn(y.pendingProps.value,S.value)||(o!==null?o.push(b):o=[b])}}else if(y===He.current){if(S=y.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(El):o=[El])}y=y.return}o!==null&&pd(s,o,l,c),s.flags|=262144}function ku(o){for(o=o.firstContext;o!==null;){if(!wn(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Os(o){ks=o,to=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function jt(o){return Cg(ks,o)}function Ou(o,s){return ks===null&&Os(o),Cg(o,s)}function Cg(o,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},to===null){if(o===null)throw Error(i(308));to=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else to=to.next=s;return l}var cC=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(l,c){o.push(c)}};this.abort=function(){s.aborted=!0,o.forEach(function(l){return l()})}},fC=t.unstable_scheduleCallback,dC=t.unstable_NormalPriority,Vt={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function md(){return{controller:new cC,data:new Map,refCount:0}}function Qa(o){o.refCount--,o.refCount===0&&fC(dC,function(){o.controller.abort()})}var Xa=null,gd=0,Rr=0,Ir=null;function hC(o,s){if(Xa===null){var l=Xa=[];gd=0,Rr=vh(),Ir={status:"pending",value:void 0,then:function(c){l.push(c)}}}return gd++,s.then(bg,bg),s}function bg(){if(--gd===0&&Xa!==null){Ir!==null&&(Ir.status="fulfilled");var o=Xa;Xa=null,Rr=0,Ir=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function pC(o,s){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return o.then(function(){c.status="fulfilled",c.value=s;for(var y=0;y<l.length;y++)(0,l[y])(s)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var Rg=$.S;$.S=function(o,s){cy=fn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&hC(o,s),Rg!==null&&Rg(o,s)};var Bs=B(null);function yd(){var o=Bs.current;return o!==null?o:ft.pooledCache}function Bu(o,s){s===null?de(Bs,Bs.current):de(Bs,s.pool)}function Ig(){var o=yd();return o===null?null:{parent:Vt._currentValue,pool:o}}var wr=Error(i(460)),_d=Error(i(474)),qu=Error(i(542)),Fu={then:function(){}};function wg(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Ng(o,s,l){switch(l=o[l],l===void 0?o.push(s):l!==s&&(s.then(oi,oi),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Mg(o),o;default:if(typeof s.status=="string")s.then(oi,oi);else{if(o=ft,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(c){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=c}},function(c){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Mg(o),o}throw Fs=s,wr}}function qs(o){try{var s=o._init;return s(o._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Fs=l,wr):l}}var Fs=null;function Dg(){if(Fs===null)throw Error(i(459));var o=Fs;return Fs=null,o}function Mg(o){if(o===wr||o===qu)throw Error(i(483))}var Nr=null,Wa=0;function Gu(o){var s=Wa;return Wa+=1,Nr===null&&(Nr=[]),Ng(Nr,o,s)}function Za(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function Hu(o,s){throw s.$$typeof===A?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function Pg(o){function s(G,O){if(o){var z=G.deletions;z===null?(G.deletions=[O],G.flags|=16):z.push(O)}}function l(G,O){if(!o)return null;for(;O!==null;)s(G,O),O=O.sibling;return null}function c(G){for(var O=new Map;G!==null;)G.key!==null?O.set(G.key,G):O.set(G.index,G),G=G.sibling;return O}function y(G,O){return G=ji(G,O),G.index=0,G.sibling=null,G}function v(G,O,z){return G.index=z,o?(z=G.alternate,z!==null?(z=z.index,z<O?(G.flags|=67108866,O):z):(G.flags|=67108866,O)):(G.flags|=1048576,O)}function S(G){return o&&G.alternate===null&&(G.flags|=67108866),G}function b(G,O,z,te){return O===null||O.tag!==6?(O=rd(z,G.mode,te),O.return=G,O):(O=y(O,z),O.return=G,O)}function U(G,O,z,te){var Ae=z.type;return Ae===V?j(G,O,z.props.children,te,z.key):O!==null&&(O.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===w&&qs(Ae)===O.type)?(O=y(O,z.props),Za(O,z),O.return=G,O):(O=Uu(z.type,z.key,z.props,null,G.mode,te),Za(O,z),O.return=G,O)}function Y(G,O,z,te){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=ad(z,G.mode,te),O.return=G,O):(O=y(O,z.children||[]),O.return=G,O)}function j(G,O,z,te,Ae){return O===null||O.tag!==7?(O=Us(z,G.mode,te,Ae),O.return=G,O):(O=y(O,z),O.return=G,O)}function ie(G,O,z){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=rd(""+O,G.mode,z),O.return=G,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case C:return z=Uu(O.type,O.key,O.props,null,G.mode,z),Za(z,O),z.return=G,z;case P:return O=ad(O,G.mode,z),O.return=G,O;case w:return O=qs(O),ie(G,O,z)}if(be(O)||F(O))return O=Us(O,G.mode,z,null),O.return=G,O;if(typeof O.then=="function")return ie(G,Gu(O),z);if(O.$$typeof===W)return ie(G,Ou(G,O),z);Hu(G,O)}return null}function J(G,O,z,te){var Ae=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return Ae!==null?null:b(G,O,""+z,te);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case C:return z.key===Ae?U(G,O,z,te):null;case P:return z.key===Ae?Y(G,O,z,te):null;case w:return z=qs(z),J(G,O,z,te)}if(be(z)||F(z))return Ae!==null?null:j(G,O,z,te,null);if(typeof z.then=="function")return J(G,O,Gu(z),te);if(z.$$typeof===W)return J(G,O,Ou(G,z),te);Hu(G,z)}return null}function Z(G,O,z,te,Ae){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return G=G.get(z)||null,b(O,G,""+te,Ae);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case C:return G=G.get(te.key===null?z:te.key)||null,U(O,G,te,Ae);case P:return G=G.get(te.key===null?z:te.key)||null,Y(O,G,te,Ae);case w:return te=qs(te),Z(G,O,z,te,Ae)}if(be(te)||F(te))return G=G.get(z)||null,j(O,G,te,Ae,null);if(typeof te.then=="function")return Z(G,O,z,Gu(te),Ae);if(te.$$typeof===W)return Z(G,O,z,Ou(O,te),Ae);Hu(O,te)}return null}function _e(G,O,z,te){for(var Ae=null,Ze=null,Ee=O,Le=O=0,Ye=null;Ee!==null&&Le<z.length;Le++){Ee.index>Le?(Ye=Ee,Ee=null):Ye=Ee.sibling;var je=J(G,Ee,z[Le],te);if(je===null){Ee===null&&(Ee=Ye);break}o&&Ee&&je.alternate===null&&s(G,Ee),O=v(je,O,Le),Ze===null?Ae=je:Ze.sibling=je,Ze=je,Ee=Ye}if(Le===z.length)return l(G,Ee),Qe&&eo(G,Le),Ae;if(Ee===null){for(;Le<z.length;Le++)Ee=ie(G,z[Le],te),Ee!==null&&(O=v(Ee,O,Le),Ze===null?Ae=Ee:Ze.sibling=Ee,Ze=Ee);return Qe&&eo(G,Le),Ae}for(Ee=c(Ee);Le<z.length;Le++)Ye=Z(Ee,G,Le,z[Le],te),Ye!==null&&(o&&Ye.alternate!==null&&Ee.delete(Ye.key===null?Le:Ye.key),O=v(Ye,O,Le),Ze===null?Ae=Ye:Ze.sibling=Ye,Ze=Ye);return o&&Ee.forEach(function(jo){return s(G,jo)}),Qe&&eo(G,Le),Ae}function xe(G,O,z,te){if(z==null)throw Error(i(151));for(var Ae=null,Ze=null,Ee=O,Le=O=0,Ye=null,je=z.next();Ee!==null&&!je.done;Le++,je=z.next()){Ee.index>Le?(Ye=Ee,Ee=null):Ye=Ee.sibling;var jo=J(G,Ee,je.value,te);if(jo===null){Ee===null&&(Ee=Ye);break}o&&Ee&&jo.alternate===null&&s(G,Ee),O=v(jo,O,Le),Ze===null?Ae=jo:Ze.sibling=jo,Ze=jo,Ee=Ye}if(je.done)return l(G,Ee),Qe&&eo(G,Le),Ae;if(Ee===null){for(;!je.done;Le++,je=z.next())je=ie(G,je.value,te),je!==null&&(O=v(je,O,Le),Ze===null?Ae=je:Ze.sibling=je,Ze=je);return Qe&&eo(G,Le),Ae}for(Ee=c(Ee);!je.done;Le++,je=z.next())je=Z(Ee,G,Le,je.value,te),je!==null&&(o&&je.alternate!==null&&Ee.delete(je.key===null?Le:je.key),O=v(je,O,Le),Ze===null?Ae=je:Ze.sibling=je,Ze=je);return o&&Ee.forEach(function(C1){return s(G,C1)}),Qe&&eo(G,Le),Ae}function ct(G,O,z,te){if(typeof z=="object"&&z!==null&&z.type===V&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case C:e:{for(var Ae=z.key;O!==null;){if(O.key===Ae){if(Ae=z.type,Ae===V){if(O.tag===7){l(G,O.sibling),te=y(O,z.props.children),te.return=G,G=te;break e}}else if(O.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===w&&qs(Ae)===O.type){l(G,O.sibling),te=y(O,z.props),Za(te,z),te.return=G,G=te;break e}l(G,O);break}else s(G,O);O=O.sibling}z.type===V?(te=Us(z.props.children,G.mode,te,z.key),te.return=G,G=te):(te=Uu(z.type,z.key,z.props,null,G.mode,te),Za(te,z),te.return=G,G=te)}return S(G);case P:e:{for(Ae=z.key;O!==null;){if(O.key===Ae)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){l(G,O.sibling),te=y(O,z.children||[]),te.return=G,G=te;break e}else{l(G,O);break}else s(G,O);O=O.sibling}te=ad(z,G.mode,te),te.return=G,G=te}return S(G);case w:return z=qs(z),ct(G,O,z,te)}if(be(z))return _e(G,O,z,te);if(F(z)){if(Ae=F(z),typeof Ae!="function")throw Error(i(150));return z=Ae.call(z),xe(G,O,z,te)}if(typeof z.then=="function")return ct(G,O,Gu(z),te);if(z.$$typeof===W)return ct(G,O,Ou(G,z),te);Hu(G,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,O!==null&&O.tag===6?(l(G,O.sibling),te=y(O,z),te.return=G,G=te):(l(G,O),te=rd(z,G.mode,te),te.return=G,G=te),S(G)):l(G,O)}return function(G,O,z,te){try{Wa=0;var Ae=ct(G,O,z,te);return Nr=null,Ae}catch(Ee){if(Ee===wr||Ee===qu)throw Ee;var Ze=Nn(29,Ee,null,G.mode);return Ze.lanes=te,Ze.return=G,Ze}finally{}}}var Gs=Pg(!0),Vg=Pg(!1),Lo=!1;function vd(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Td(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function ko(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Oo(o,s,l){var c=o.updateQueue;if(c===null)return null;if(c=c.shared,(nt&2)!==0){var y=c.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),c.pending=s,s=Vu(o),yg(o,null,l),s}return Pu(o,c,s,l),Vu(o)}function ja(o,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=o.pendingLanes,l|=c,s.lanes=l,ba(o,l)}}function Ed(o,s){var l=o.updateQueue,c=o.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=S:v=v.next=S,l=l.next}while(l!==null);v===null?y=v=s:v=v.next=s}else y=v=s;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=s:o.next=s,l.lastBaseUpdate=s}var Ad=!1;function el(){if(Ad){var o=Ir;if(o!==null)throw o}}function tl(o,s,l,c){Ad=!1;var y=o.updateQueue;Lo=!1;var v=y.firstBaseUpdate,S=y.lastBaseUpdate,b=y.shared.pending;if(b!==null){y.shared.pending=null;var U=b,Y=U.next;U.next=null,S===null?v=Y:S.next=Y,S=U;var j=o.alternate;j!==null&&(j=j.updateQueue,b=j.lastBaseUpdate,b!==S&&(b===null?j.firstBaseUpdate=Y:b.next=Y,j.lastBaseUpdate=U))}if(v!==null){var ie=y.baseState;S=0,j=Y=U=null,b=v;do{var J=b.lane&-536870913,Z=J!==b.lane;if(Z?(ze&J)===J:(c&J)===J){J!==0&&J===Rr&&(Ad=!0),j!==null&&(j=j.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var _e=o,xe=b;J=s;var ct=l;switch(xe.tag){case 1:if(_e=xe.payload,typeof _e=="function"){ie=_e.call(ct,ie,J);break e}ie=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=xe.payload,J=typeof _e=="function"?_e.call(ct,ie,J):_e,J==null)break e;ie=T({},ie,J);break e;case 2:Lo=!0}}J=b.callback,J!==null&&(o.flags|=64,Z&&(o.flags|=8192),Z=y.callbacks,Z===null?y.callbacks=[J]:Z.push(J))}else Z={lane:J,tag:b.tag,payload:b.payload,callback:b.callback,next:null},j===null?(Y=j=Z,U=ie):j=j.next=Z,S|=J;if(b=b.next,b===null){if(b=y.shared.pending,b===null)break;Z=b,b=Z.next,Z.next=null,y.lastBaseUpdate=Z,y.shared.pending=null}}while(!0);j===null&&(U=ie),y.baseState=U,y.firstBaseUpdate=Y,y.lastBaseUpdate=j,v===null&&(y.shared.lanes=0),Ho|=S,o.lanes=S,o.memoizedState=ie}}function Ug(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function Lg(o,s){var l=o.callbacks;if(l!==null)for(o.callbacks=null,o=0;o<l.length;o++)Ug(l[o],s)}var Dr=B(null),zu=B(0);function kg(o,s){o=fo,de(zu,o),de(Dr,s),fo=o|s.baseLanes}function Sd(){de(zu,fo),de(Dr,Dr.current)}function xd(){fo=zu.current,ne(Dr),ne(zu)}var Dn=B(null),$n=null;function Bo(o){var s=o.alternate;de(bt,bt.current&1),de(Dn,o),$n===null&&(s===null||Dr.current!==null||s.memoizedState!==null)&&($n=o)}function Cd(o){de(bt,bt.current),de(Dn,o),$n===null&&($n=o)}function Og(o){o.tag===22?(de(bt,bt.current),de(Dn,o),$n===null&&($n=o)):qo()}function qo(){de(bt,bt.current),de(Dn,Dn.current)}function Mn(o){ne(Dn),$n===o&&($n=null),ne(bt)}var bt=B(0);function Yu(o){for(var s=o;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Dh(l)||Mh(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var io=0,Ue=null,lt=null,Ut=null,Ju=!1,Mr=!1,Hs=!1,$u=0,nl=0,Pr=null,mC=0;function Tt(){throw Error(i(321))}function bd(o,s){if(s===null)return!1;for(var l=0;l<s.length&&l<o.length;l++)if(!wn(o[l],s[l]))return!1;return!0}function Rd(o,s,l,c,y,v){return io=v,Ue=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=o===null||o.memoizedState===null?E0:Gd,Hs=!1,v=l(c,y),Hs=!1,Mr&&(v=qg(s,l,c,y)),Bg(o),v}function Bg(o){$.H=sl;var s=lt!==null&&lt.next!==null;if(io=0,Ut=lt=Ue=null,Ju=!1,nl=0,Pr=null,s)throw Error(i(300));o===null||Lt||(o=o.dependencies,o!==null&&ku(o)&&(Lt=!0))}function qg(o,s,l,c){Ue=o;var y=0;do{if(Mr&&(Pr=null),nl=0,Mr=!1,25<=y)throw Error(i(301));if(y+=1,Ut=lt=null,o.updateQueue!=null){var v=o.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}$.H=A0,v=s(l,c)}while(Mr);return v}function gC(){var o=$.H,s=o.useState()[0];return s=typeof s.then=="function"?il(s):s,o=o.useState()[0],(lt!==null?lt.memoizedState:null)!==o&&(Ue.flags|=1024),s}function Id(){var o=$u!==0;return $u=0,o}function wd(o,s,l){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~l}function Nd(o){if(Ju){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}Ju=!1}io=0,Ut=lt=Ue=null,Mr=!1,nl=$u=0,Pr=null}function hn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?Ue.memoizedState=Ut=o:Ut=Ut.next=o,Ut}function Rt(){if(lt===null){var o=Ue.alternate;o=o!==null?o.memoizedState:null}else o=lt.next;var s=Ut===null?Ue.memoizedState:Ut.next;if(s!==null)Ut=s,lt=o;else{if(o===null)throw Ue.alternate===null?Error(i(467)):Error(i(310));lt=o,o={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Ut===null?Ue.memoizedState=Ut=o:Ut=Ut.next=o}return Ut}function Ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function il(o){var s=nl;return nl+=1,Pr===null&&(Pr=[]),o=Ng(Pr,o,s),s=Ue,(Ut===null?s.memoizedState:Ut.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?E0:Gd),o}function Qu(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return il(o);if(o.$$typeof===W)return jt(o)}throw Error(i(438,String(o)))}function Dd(o){var s=null,l=Ue.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Ue.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Ku(),Ue.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(o),c=0;c<o;c++)l[c]=L;return s.index++,l}function oo(o,s){return typeof s=="function"?s(o):s}function Xu(o){var s=Rt();return Md(s,lt,o)}function Md(o,s,l){var c=o.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=o.baseQueue,v=c.pending;if(v!==null){if(y!==null){var S=y.next;y.next=v.next,v.next=S}s.baseQueue=y=v,c.pending=null}if(v=o.baseState,y===null)o.memoizedState=v;else{s=y.next;var b=S=null,U=null,Y=s,j=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(ze&ie)===ie:(io&ie)===ie){var J=Y.revertLane;if(J===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===Rr&&(j=!0);else if((io&J)===J){Y=Y.next,J===Rr&&(j=!0);continue}else ie={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(b=U=ie,S=v):U=U.next=ie,Ue.lanes|=J,Ho|=J;ie=Y.action,Hs&&l(v,ie),v=Y.hasEagerState?Y.eagerState:l(v,ie)}else J={lane:ie,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},U===null?(b=U=J,S=v):U=U.next=J,Ue.lanes|=ie,Ho|=ie;Y=Y.next}while(Y!==null&&Y!==s);if(U===null?S=v:U.next=b,!wn(v,o.memoizedState)&&(Lt=!0,j&&(l=Ir,l!==null)))throw l;o.memoizedState=v,o.baseState=S,o.baseQueue=U,c.lastRenderedState=v}return y===null&&(c.lanes=0),[o.memoizedState,c.dispatch]}function Pd(o){var s=Rt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=o;var c=l.dispatch,y=l.pending,v=s.memoizedState;if(y!==null){l.pending=null;var S=y=y.next;do v=o(v,S.action),S=S.next;while(S!==y);wn(v,s.memoizedState)||(Lt=!0),s.memoizedState=v,s.baseQueue===null&&(s.baseState=v),l.lastRenderedState=v}return[v,c]}function Fg(o,s,l){var c=Ue,y=Rt(),v=Qe;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=s();var S=!wn((lt||y).memoizedState,l);if(S&&(y.memoizedState=l,Lt=!0),y=y.queue,Ld(zg.bind(null,c,y,o),[o]),y.getSnapshot!==s||S||Ut!==null&&Ut.memoizedState.tag&1){if(c.flags|=2048,Vr(9,{destroy:void 0},Hg.bind(null,c,y,l,s),null),ft===null)throw Error(i(349));v||(io&127)!==0||Gg(c,s,l)}return l}function Gg(o,s,l){o.flags|=16384,o={getSnapshot:s,value:l},s=Ue.updateQueue,s===null?(s=Ku(),Ue.updateQueue=s,s.stores=[o]):(l=s.stores,l===null?s.stores=[o]:l.push(o))}function Hg(o,s,l,c){s.value=l,s.getSnapshot=c,Yg(s)&&Jg(o)}function zg(o,s,l){return l(function(){Yg(s)&&Jg(o)})}function Yg(o){var s=o.getSnapshot;o=o.value;try{var l=s();return!wn(o,l)}catch{return!0}}function Jg(o){var s=Vs(o,2);s!==null&&xn(s,o,2)}function Vd(o){var s=hn();if(typeof o=="function"){var l=o;if(o=l(),Hs){kn(!0);try{l()}finally{kn(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:o},s}function $g(o,s,l,c){return o.baseState=l,Md(o,lt,typeof c=="function"?c:oo)}function yC(o,s,l,c,y){if(ju(o))throw Error(i(485));if(o=s.action,o!==null){var v={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){v.listeners.push(S)}};$.T!==null?l(!0):v.isTransition=!1,c(v),l=s.pending,l===null?(v.next=s.pending=v,Kg(s,v)):(v.next=l.next,s.pending=l.next=v)}}function Kg(o,s){var l=s.action,c=s.payload,y=o.state;if(s.isTransition){var v=$.T,S={};$.T=S;try{var b=l(y,c),U=$.S;U!==null&&U(S,b),Qg(o,s,b)}catch(Y){Ud(o,s,Y)}finally{v!==null&&S.types!==null&&(v.types=S.types),$.T=v}}else try{v=l(y,c),Qg(o,s,v)}catch(Y){Ud(o,s,Y)}}function Qg(o,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){Xg(o,s,c)},function(c){return Ud(o,s,c)}):Xg(o,s,l)}function Xg(o,s,l){s.status="fulfilled",s.value=l,Wg(s),o.state=l,s=o.pending,s!==null&&(l=s.next,l===s?o.pending=null:(l=l.next,s.next=l,Kg(o,l)))}function Ud(o,s,l){var c=o.pending;if(o.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,Wg(s),s=s.next;while(s!==c)}o.action=null}function Wg(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function Zg(o,s){return s}function jg(o,s){if(Qe){var l=ft.formState;if(l!==null){e:{var c=Ue;if(Qe){if(pt){t:{for(var y=pt,v=Jn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Kn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){pt=Kn(y.nextSibling),c=y.data==="F!";break e}}Vo(c)}c=!1}c&&(s=l[0])}}return l=hn(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zg,lastRenderedState:s},l.queue=c,l=_0.bind(null,Ue,c),c.dispatch=l,c=Vd(!1),v=Fd.bind(null,Ue,!1,c.queue),c=hn(),y={state:s,dispatch:null,action:o,pending:null},c.queue=y,l=yC.bind(null,Ue,y,v,l),y.dispatch=l,c.memoizedState=o,[s,l,!1]}function e0(o){var s=Rt();return t0(s,lt,o)}function t0(o,s,l){if(s=Md(o,s,Zg)[0],o=Xu(oo)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=il(s)}catch(S){throw S===wr?qu:S}else c=s;s=Rt();var y=s.queue,v=y.dispatch;return l!==s.memoizedState&&(Ue.flags|=2048,Vr(9,{destroy:void 0},_C.bind(null,y,l),null)),[c,v,o]}function _C(o,s){o.action=s}function n0(o){var s=Rt(),l=lt;if(l!==null)return t0(s,l,o);Rt(),s=s.memoizedState,l=Rt();var c=l.queue.dispatch;return l.memoizedState=o,[s,c,!1]}function Vr(o,s,l,c){return o={tag:o,create:l,deps:c,inst:s,next:null},s=Ue.updateQueue,s===null&&(s=Ku(),Ue.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=o.next=o:(c=l.next,l.next=o,o.next=c,s.lastEffect=o),o}function i0(){return Rt().memoizedState}function Wu(o,s,l,c){var y=hn();Ue.flags|=o,y.memoizedState=Vr(1|s,{destroy:void 0},l,c===void 0?null:c)}function Zu(o,s,l,c){var y=Rt();c=c===void 0?null:c;var v=y.memoizedState.inst;lt!==null&&c!==null&&bd(c,lt.memoizedState.deps)?y.memoizedState=Vr(s,v,l,c):(Ue.flags|=o,y.memoizedState=Vr(1|s,v,l,c))}function o0(o,s){Wu(8390656,8,o,s)}function Ld(o,s){Zu(2048,8,o,s)}function vC(o){Ue.flags|=4;var s=Ue.updateQueue;if(s===null)s=Ku(),Ue.updateQueue=s,s.events=[o];else{var l=s.events;l===null?s.events=[o]:l.push(o)}}function s0(o){var s=Rt().memoizedState;return vC({ref:s,nextImpl:o}),function(){if((nt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function r0(o,s){return Zu(4,2,o,s)}function a0(o,s){return Zu(4,4,o,s)}function l0(o,s){if(typeof s=="function"){o=o();var l=s(o);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function u0(o,s,l){l=l!=null?l.concat([o]):null,Zu(4,4,l0.bind(null,s,o),l)}function kd(){}function c0(o,s){var l=Rt();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&bd(s,c[1])?c[0]:(l.memoizedState=[o,s],o)}function f0(o,s){var l=Rt();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&bd(s,c[1]))return c[0];if(c=o(),Hs){kn(!0);try{o()}finally{kn(!1)}}return l.memoizedState=[c,s],c}function Od(o,s,l){return l===void 0||(io&1073741824)!==0&&(ze&261930)===0?o.memoizedState=s:(o.memoizedState=l,o=dy(),Ue.lanes|=o,Ho|=o,l)}function d0(o,s,l,c){return wn(l,s)?l:Dr.current!==null?(o=Od(o,l,c),wn(o,s)||(Lt=!0),o):(io&42)===0||(io&1073741824)!==0&&(ze&261930)===0?(Lt=!0,o.memoizedState=l):(o=dy(),Ue.lanes|=o,Ho|=o,s)}function h0(o,s,l,c,y){var v=ue.p;ue.p=v!==0&&8>v?v:8;var S=$.T,b={};$.T=b,Fd(o,!1,s,l);try{var U=y(),Y=$.S;if(Y!==null&&Y(b,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var j=pC(U,c);ol(o,s,j,Un(o))}else ol(o,s,c,Un(o))}catch(ie){ol(o,s,{then:function(){},status:"rejected",reason:ie},Un())}finally{ue.p=v,S!==null&&b.types!==null&&(S.types=b.types),$.T=S}}function TC(){}function Bd(o,s,l,c){if(o.tag!==5)throw Error(i(476));var y=p0(o).queue;h0(o,y,s,le,l===null?TC:function(){return m0(o),l(c)})}function p0(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:le},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:oo,lastRenderedState:l},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function m0(o){var s=p0(o);s.next===null&&(s=o.alternate.memoizedState),ol(o,s.next.queue,{},Un())}function qd(){return jt(El)}function g0(){return Rt().memoizedState}function y0(){return Rt().memoizedState}function EC(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var l=Un();o=ko(l);var c=Oo(s,o,l);c!==null&&(xn(c,s,l),ja(c,s,l)),s={cache:md()},o.payload=s;return}s=s.return}}function AC(o,s,l){var c=Un();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ju(o)?v0(s,l):(l=od(o,s,l,c),l!==null&&(xn(l,o,c),T0(l,s,c)))}function _0(o,s,l){var c=Un();ol(o,s,l,c)}function ol(o,s,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(ju(o))v0(s,y);else{var v=o.alternate;if(o.lanes===0&&(v===null||v.lanes===0)&&(v=s.lastRenderedReducer,v!==null))try{var S=s.lastRenderedState,b=v(S,l);if(y.hasEagerState=!0,y.eagerState=b,wn(b,S))return Pu(o,s,y,0),ft===null&&Mu(),!1}catch{}finally{}if(l=od(o,s,y,c),l!==null)return xn(l,o,c),T0(l,s,c),!0}return!1}function Fd(o,s,l,c){if(c={lane:2,revertLane:vh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ju(o)){if(s)throw Error(i(479))}else s=od(o,l,c,2),s!==null&&xn(s,o,2)}function ju(o){var s=o.alternate;return o===Ue||s!==null&&s===Ue}function v0(o,s){Mr=Ju=!0;var l=o.pending;l===null?s.next=s:(s.next=l.next,l.next=s),o.pending=s}function T0(o,s,l){if((l&4194048)!==0){var c=s.lanes;c&=o.pendingLanes,l|=c,s.lanes=l,ba(o,l)}}var sl={readContext:jt,use:Qu,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};sl.useEffectEvent=Tt;var E0={readContext:jt,use:Qu,useCallback:function(o,s){return hn().memoizedState=[o,s===void 0?null:s],o},useContext:jt,useEffect:o0,useImperativeHandle:function(o,s,l){l=l!=null?l.concat([o]):null,Wu(4194308,4,l0.bind(null,s,o),l)},useLayoutEffect:function(o,s){return Wu(4194308,4,o,s)},useInsertionEffect:function(o,s){Wu(4,2,o,s)},useMemo:function(o,s){var l=hn();s=s===void 0?null:s;var c=o();if(Hs){kn(!0);try{o()}finally{kn(!1)}}return l.memoizedState=[c,s],c},useReducer:function(o,s,l){var c=hn();if(l!==void 0){var y=l(s);if(Hs){kn(!0);try{l(s)}finally{kn(!1)}}}else y=s;return c.memoizedState=c.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},c.queue=o,o=o.dispatch=AC.bind(null,Ue,o),[c.memoizedState,o]},useRef:function(o){var s=hn();return o={current:o},s.memoizedState=o},useState:function(o){o=Vd(o);var s=o.queue,l=_0.bind(null,Ue,s);return s.dispatch=l,[o.memoizedState,l]},useDebugValue:kd,useDeferredValue:function(o,s){var l=hn();return Od(l,o,s)},useTransition:function(){var o=Vd(!1);return o=h0.bind(null,Ue,o.queue,!0,!1),hn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,l){var c=Ue,y=hn();if(Qe){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),ft===null)throw Error(i(349));(ze&127)!==0||Gg(c,s,l)}y.memoizedState=l;var v={value:l,getSnapshot:s};return y.queue=v,o0(zg.bind(null,c,v,o),[o]),c.flags|=2048,Vr(9,{destroy:void 0},Hg.bind(null,c,v,l,s),null),l},useId:function(){var o=hn(),s=ft.identifierPrefix;if(Qe){var l=Bi,c=Oi;l=(c&~(1<<32-xt(c)-1)).toString(32)+l,s="_"+s+"R_"+l,l=$u++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=mC++,s="_"+s+"r_"+l.toString(32)+"_";return o.memoizedState=s},useHostTransitionStatus:qd,useFormState:jg,useActionState:jg,useOptimistic:function(o){var s=hn();s.memoizedState=s.baseState=o;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Fd.bind(null,Ue,!0,l),l.dispatch=s,[o,s]},useMemoCache:Dd,useCacheRefresh:function(){return hn().memoizedState=EC.bind(null,Ue)},useEffectEvent:function(o){var s=hn(),l={impl:o};return s.memoizedState=l,function(){if((nt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Gd={readContext:jt,use:Qu,useCallback:c0,useContext:jt,useEffect:Ld,useImperativeHandle:u0,useInsertionEffect:r0,useLayoutEffect:a0,useMemo:f0,useReducer:Xu,useRef:i0,useState:function(){return Xu(oo)},useDebugValue:kd,useDeferredValue:function(o,s){var l=Rt();return d0(l,lt.memoizedState,o,s)},useTransition:function(){var o=Xu(oo)[0],s=Rt().memoizedState;return[typeof o=="boolean"?o:il(o),s]},useSyncExternalStore:Fg,useId:g0,useHostTransitionStatus:qd,useFormState:e0,useActionState:e0,useOptimistic:function(o,s){var l=Rt();return $g(l,lt,o,s)},useMemoCache:Dd,useCacheRefresh:y0};Gd.useEffectEvent=s0;var A0={readContext:jt,use:Qu,useCallback:c0,useContext:jt,useEffect:Ld,useImperativeHandle:u0,useInsertionEffect:r0,useLayoutEffect:a0,useMemo:f0,useReducer:Pd,useRef:i0,useState:function(){return Pd(oo)},useDebugValue:kd,useDeferredValue:function(o,s){var l=Rt();return lt===null?Od(l,o,s):d0(l,lt.memoizedState,o,s)},useTransition:function(){var o=Pd(oo)[0],s=Rt().memoizedState;return[typeof o=="boolean"?o:il(o),s]},useSyncExternalStore:Fg,useId:g0,useHostTransitionStatus:qd,useFormState:n0,useActionState:n0,useOptimistic:function(o,s){var l=Rt();return lt!==null?$g(l,lt,o,s):(l.baseState=o,[o,l.queue.dispatch])},useMemoCache:Dd,useCacheRefresh:y0};A0.useEffectEvent=s0;function Hd(o,s,l,c){s=o.memoizedState,l=l(c,s),l=l==null?s:T({},s,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var zd={enqueueSetState:function(o,s,l){o=o._reactInternals;var c=Un(),y=ko(c);y.payload=s,l!=null&&(y.callback=l),s=Oo(o,y,c),s!==null&&(xn(s,o,c),ja(s,o,c))},enqueueReplaceState:function(o,s,l){o=o._reactInternals;var c=Un(),y=ko(c);y.tag=1,y.payload=s,l!=null&&(y.callback=l),s=Oo(o,y,c),s!==null&&(xn(s,o,c),ja(s,o,c))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var l=Un(),c=ko(l);c.tag=2,s!=null&&(c.callback=s),s=Oo(o,c,l),s!==null&&(xn(s,o,l),ja(s,o,l))}};function S0(o,s,l,c,y,v,S){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(c,v,S):s.prototype&&s.prototype.isPureReactComponent?!Ya(l,c)||!Ya(y,v):!0}function x0(o,s,l,c){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==o&&zd.enqueueReplaceState(s,s.state,null)}function zs(o,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(o=o.defaultProps){l===s&&(l=T({},l));for(var y in o)l[y]===void 0&&(l[y]=o[y])}return l}function C0(o){Du(o)}function b0(o){console.error(o)}function R0(o){Du(o)}function ec(o,s){try{var l=o.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function I0(o,s,l){try{var c=o.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Yd(o,s,l){return l=ko(l),l.tag=3,l.payload={element:null},l.callback=function(){ec(o,s)},l}function w0(o){return o=ko(o),o.tag=3,o}function N0(o,s,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;o.payload=function(){return y(v)},o.callback=function(){I0(s,l,c)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(o.callback=function(){I0(s,l,c),typeof y!="function"&&(zo===null?zo=new Set([this]):zo.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function SC(o,s,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&br(s,l,y,!0),l=Dn.current,l!==null){switch(l.tag){case 31:case 13:return $n===null?dc():l.alternate===null&&Et===0&&(Et=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===Fu?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),gh(o,c,y)),!1;case 22:return l.flags|=65536,c===Fu?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),gh(o,c,y)),!1}throw Error(i(435,l.tag))}return gh(o,c,y),dc(),!1}if(Qe)return s=Dn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,c!==cd&&(o=Error(i(422),{cause:c}),Ka(Hn(o,l)))):(c!==cd&&(s=Error(i(423),{cause:c}),Ka(Hn(s,l))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,c=Hn(c,l),y=Yd(o.stateNode,c,y),Ed(o,y),Et!==4&&(Et=2)),!1;var v=Error(i(520),{cause:c});if(v=Hn(v,l),hl===null?hl=[v]:hl.push(v),Et!==4&&(Et=2),s===null)return!0;c=Hn(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,o=y&-y,l.lanes|=o,o=Yd(l.stateNode,c,o),Ed(l,o),!1;case 1:if(s=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(zo===null||!zo.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=w0(y),N0(y,o,l,c),Ed(l,y),!1}l=l.return}while(l!==null);return!1}var Jd=Error(i(461)),Lt=!1;function en(o,s,l,c){s.child=o===null?Vg(s,null,l,c):Gs(s,o.child,l,c)}function D0(o,s,l,c,y){l=l.render;var v=s.ref;if("ref"in c){var S={};for(var b in c)b!=="ref"&&(S[b]=c[b])}else S=c;return Os(s),c=Rd(o,s,l,S,v,y),b=Id(),o!==null&&!Lt?(wd(o,s,y),so(o,s,y)):(Qe&&b&&ld(s),s.flags|=1,en(o,s,c,y),s.child)}function M0(o,s,l,c,y){if(o===null){var v=l.type;return typeof v=="function"&&!sd(v)&&v.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=v,P0(o,s,v,c,y)):(o=Uu(l.type,null,c,s,s.mode,y),o.ref=s.ref,o.return=s,s.child=o)}if(v=o.child,!eh(o,y)){var S=v.memoizedProps;if(l=l.compare,l=l!==null?l:Ya,l(S,c)&&o.ref===s.ref)return so(o,s,y)}return s.flags|=1,o=ji(v,c),o.ref=s.ref,o.return=s,s.child=o}function P0(o,s,l,c,y){if(o!==null){var v=o.memoizedProps;if(Ya(v,c)&&o.ref===s.ref)if(Lt=!1,s.pendingProps=c=v,eh(o,y))(o.flags&131072)!==0&&(Lt=!0);else return s.lanes=o.lanes,so(o,s,y)}return $d(o,s,l,c,y)}function V0(o,s,l,c){var y=c.children,v=o!==null?o.memoizedState:null;if(o===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,o!==null){for(c=s.child=o.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,s.child=null;return U0(o,s,v,l,c)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&Bu(s,v!==null?v.cachePool:null),v!==null?kg(s,v):Sd(),Og(s);else return c=s.lanes=536870912,U0(o,s,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Bu(s,v.cachePool),kg(s,v),qo(),s.memoizedState=null):(o!==null&&Bu(s,null),Sd(),qo());return en(o,s,y,l),s.child}function rl(o,s){return o!==null&&o.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function U0(o,s,l,c,y){var v=yd();return v=v===null?null:{parent:Vt._currentValue,pool:v},s.memoizedState={baseLanes:l,cachePool:v},o!==null&&Bu(s,null),Sd(),Og(s),o!==null&&br(o,s,c,!0),s.childLanes=y,null}function tc(o,s){return s=ic({mode:s.mode,children:s.children},o.mode),s.ref=o.ref,o.child=s,s.return=o,s}function L0(o,s,l){return Gs(s,o.child,null,l),o=tc(s,s.pendingProps),o.flags|=2,Mn(s),s.memoizedState=null,o}function xC(o,s,l){var c=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,o===null){if(Qe){if(c.mode==="hidden")return o=tc(s,c),s.lanes=536870912,rl(null,o);if(Cd(s),(o=pt)?(o=Ky(o,Jn),o=o!==null&&o.data==="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Mo!==null?{id:Oi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},l=vg(o),l.return=s,s.child=l,Zt=s,pt=null)):o=null,o===null)throw Vo(s);return s.lanes=536870912,null}return tc(s,c)}var v=o.memoizedState;if(v!==null){var S=v.dehydrated;if(Cd(s),y)if(s.flags&256)s.flags&=-257,s=L0(o,s,l);else if(s.memoizedState!==null)s.child=o.child,s.flags|=128,s=null;else throw Error(i(558));else if(Lt||br(o,s,l,!1),y=(l&o.childLanes)!==0,Lt||y){if(c=ft,c!==null&&(S=Ra(c,l),S!==0&&S!==v.retryLane))throw v.retryLane=S,Vs(o,S),xn(c,o,S),Jd;dc(),s=L0(o,s,l)}else o=v.treeContext,pt=Kn(S.nextSibling),Zt=s,Qe=!0,Po=null,Jn=!1,o!==null&&Ag(s,o),s=tc(s,c),s.flags|=4096;return s}return o=ji(o.child,{mode:c.mode,children:c.children}),o.ref=s.ref,s.child=o,o.return=s,o}function nc(o,s){var l=s.ref;if(l===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(o===null||o.ref!==l)&&(s.flags|=4194816)}}function $d(o,s,l,c,y){return Os(s),l=Rd(o,s,l,c,void 0,y),c=Id(),o!==null&&!Lt?(wd(o,s,y),so(o,s,y)):(Qe&&c&&ld(s),s.flags|=1,en(o,s,l,y),s.child)}function k0(o,s,l,c,y,v){return Os(s),s.updateQueue=null,l=qg(s,c,l,y),Bg(o),c=Id(),o!==null&&!Lt?(wd(o,s,v),so(o,s,v)):(Qe&&c&&ld(s),s.flags|=1,en(o,s,l,v),s.child)}function O0(o,s,l,c,y){if(Os(s),s.stateNode===null){var v=Ar,S=l.contextType;typeof S=="object"&&S!==null&&(v=jt(S)),v=new l(c,v),s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=zd,s.stateNode=v,v._reactInternals=s,v=s.stateNode,v.props=c,v.state=s.memoizedState,v.refs={},vd(s),S=l.contextType,v.context=typeof S=="object"&&S!==null?jt(S):Ar,v.state=s.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Hd(s,l,S,c),v.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(S=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),S!==v.state&&zd.enqueueReplaceState(v,v.state,null),tl(s,c,v,y),el(),v.state=s.memoizedState),typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(o===null){v=s.stateNode;var b=s.memoizedProps,U=zs(l,b);v.props=U;var Y=v.context,j=l.contextType;S=Ar,typeof j=="object"&&j!==null&&(S=jt(j));var ie=l.getDerivedStateFromProps;j=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(b||Y!==S)&&x0(s,v,c,S),Lo=!1;var J=s.memoizedState;v.state=J,tl(s,c,v,y),el(),Y=s.memoizedState,b||J!==Y||Lo?(typeof ie=="function"&&(Hd(s,l,ie,c),Y=s.memoizedState),(U=Lo||S0(s,l,U,c,J,Y,S))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(s.flags|=4194308)):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=Y),v.props=c,v.state=Y,v.context=S,c=U):(typeof v.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{v=s.stateNode,Td(o,s),S=s.memoizedProps,j=zs(l,S),v.props=j,ie=s.pendingProps,J=v.context,Y=l.contextType,U=Ar,typeof Y=="object"&&Y!==null&&(U=jt(Y)),b=l.getDerivedStateFromProps,(Y=typeof b=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==ie||J!==U)&&x0(s,v,c,U),Lo=!1,J=s.memoizedState,v.state=J,tl(s,c,v,y),el();var Z=s.memoizedState;S!==ie||J!==Z||Lo||o!==null&&o.dependencies!==null&&ku(o.dependencies)?(typeof b=="function"&&(Hd(s,l,b,c),Z=s.memoizedState),(j=Lo||S0(s,l,j,c,J,Z,U)||o!==null&&o.dependencies!==null&&ku(o.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Z,U),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Z,U)),typeof v.componentDidUpdate=="function"&&(s.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===o.memoizedProps&&J===o.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===o.memoizedProps&&J===o.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Z),v.props=c,v.state=Z,v.context=U,c=j):(typeof v.componentDidUpdate!="function"||S===o.memoizedProps&&J===o.memoizedState||(s.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===o.memoizedProps&&J===o.memoizedState||(s.flags|=1024),c=!1)}return v=c,nc(o,s),c=(s.flags&128)!==0,v||c?(v=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),s.flags|=1,o!==null&&c?(s.child=Gs(s,o.child,null,y),s.child=Gs(s,null,l,y)):en(o,s,l,y),s.memoizedState=v.state,o=s.child):o=so(o,s,y),o}function B0(o,s,l,c){return Ls(),s.flags|=256,en(o,s,l,c),s.child}var Kd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qd(o){return{baseLanes:o,cachePool:Ig()}}function Xd(o,s,l){return o=o!==null?o.childLanes&~l:0,s&&(o|=Vn),o}function q0(o,s,l){var c=s.pendingProps,y=!1,v=(s.flags&128)!==0,S;if((S=v)||(S=o!==null&&o.memoizedState===null?!1:(bt.current&2)!==0),S&&(y=!0,s.flags&=-129),S=(s.flags&32)!==0,s.flags&=-33,o===null){if(Qe){if(y?Bo(s):qo(),(o=pt)?(o=Ky(o,Jn),o=o!==null&&o.data!=="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:Mo!==null?{id:Oi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},l=vg(o),l.return=s,s.child=l,Zt=s,pt=null)):o=null,o===null)throw Vo(s);return Mh(o)?s.lanes=32:s.lanes=536870912,null}var b=c.children;return c=c.fallback,y?(qo(),y=s.mode,b=ic({mode:"hidden",children:b},y),c=Us(c,y,l,null),b.return=s,c.return=s,b.sibling=c,s.child=b,c=s.child,c.memoizedState=Qd(l),c.childLanes=Xd(o,S,l),s.memoizedState=Kd,rl(null,c)):(Bo(s),Wd(s,b))}var U=o.memoizedState;if(U!==null&&(b=U.dehydrated,b!==null)){if(v)s.flags&256?(Bo(s),s.flags&=-257,s=Zd(o,s,l)):s.memoizedState!==null?(qo(),s.child=o.child,s.flags|=128,s=null):(qo(),b=c.fallback,y=s.mode,c=ic({mode:"visible",children:c.children},y),b=Us(b,y,l,null),b.flags|=2,c.return=s,b.return=s,c.sibling=b,s.child=c,Gs(s,o.child,null,l),c=s.child,c.memoizedState=Qd(l),c.childLanes=Xd(o,S,l),s.memoizedState=Kd,s=rl(null,c));else if(Bo(s),Mh(b)){if(S=b.nextSibling&&b.nextSibling.dataset,S)var Y=S.dgst;S=Y,c=Error(i(419)),c.stack="",c.digest=S,Ka({value:c,source:null,stack:null}),s=Zd(o,s,l)}else if(Lt||br(o,s,l,!1),S=(l&o.childLanes)!==0,Lt||S){if(S=ft,S!==null&&(c=Ra(S,l),c!==0&&c!==U.retryLane))throw U.retryLane=c,Vs(o,c),xn(S,o,c),Jd;Dh(b)||dc(),s=Zd(o,s,l)}else Dh(b)?(s.flags|=192,s.child=o.child,s=null):(o=U.treeContext,pt=Kn(b.nextSibling),Zt=s,Qe=!0,Po=null,Jn=!1,o!==null&&Ag(s,o),s=Wd(s,c.children),s.flags|=4096);return s}return y?(qo(),b=c.fallback,y=s.mode,U=o.child,Y=U.sibling,c=ji(U,{mode:"hidden",children:c.children}),c.subtreeFlags=U.subtreeFlags&65011712,Y!==null?b=ji(Y,b):(b=Us(b,y,l,null),b.flags|=2),b.return=s,c.return=s,c.sibling=b,s.child=c,rl(null,c),c=s.child,b=o.child.memoizedState,b===null?b=Qd(l):(y=b.cachePool,y!==null?(U=Vt._currentValue,y=y.parent!==U?{parent:U,pool:U}:y):y=Ig(),b={baseLanes:b.baseLanes|l,cachePool:y}),c.memoizedState=b,c.childLanes=Xd(o,S,l),s.memoizedState=Kd,rl(o.child,c)):(Bo(s),l=o.child,o=l.sibling,l=ji(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,o!==null&&(S=s.deletions,S===null?(s.deletions=[o],s.flags|=16):S.push(o)),s.child=l,s.memoizedState=null,l)}function Wd(o,s){return s=ic({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function ic(o,s){return o=Nn(22,o,null,s),o.lanes=0,o}function Zd(o,s,l){return Gs(s,o.child,null,l),o=Wd(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function F0(o,s,l){o.lanes|=s;var c=o.alternate;c!==null&&(c.lanes|=s),hd(o.return,s,l)}function jd(o,s,l,c,y,v){var S=o.memoizedState;S===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(S.isBackwards=s,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=l,S.tailMode=y,S.treeForkCount=v)}function G0(o,s,l){var c=s.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var S=bt.current,b=(S&2)!==0;if(b?(S=S&1|2,s.flags|=128):S&=1,de(bt,S),en(o,s,c,l),c=Qe?$a:0,!b&&o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&F0(o,l,s);else if(o.tag===19)F0(o,l,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(y){case"forwards":for(l=s.child,y=null;l!==null;)o=l.alternate,o!==null&&Yu(o)===null&&(y=l),l=l.sibling;l=y,l===null?(y=s.child,s.child=null):(y=l.sibling,l.sibling=null),jd(s,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=s.child,s.child=null;y!==null;){if(o=y.alternate,o!==null&&Yu(o)===null){s.child=y;break}o=y.sibling,y.sibling=l,l=y,y=o}jd(s,!0,l,null,v,c);break;case"together":jd(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function so(o,s,l){if(o!==null&&(s.dependencies=o.dependencies),Ho|=s.lanes,(l&s.childLanes)===0)if(o!==null){if(br(o,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,l=ji(o,o.pendingProps),s.child=l,l.return=s;o.sibling!==null;)o=o.sibling,l=l.sibling=ji(o,o.pendingProps),l.return=s;l.sibling=null}return s.child}function eh(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&ku(o)))}function CC(o,s,l){switch(s.tag){case 3:Te(s,s.stateNode.containerInfo),Uo(s,Vt,o.memoizedState.cache),Ls();break;case 27:case 5:Q(s);break;case 4:Te(s,s.stateNode.containerInfo);break;case 10:Uo(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Cd(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Bo(s),s.flags|=128,null):(l&s.child.childLanes)!==0?q0(o,s,l):(Bo(s),o=so(o,s,l),o!==null?o.sibling:null);Bo(s);break;case 19:var y=(o.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(br(o,s,l,!1),c=(l&s.childLanes)!==0),y){if(c)return G0(o,s,l);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),de(bt,bt.current),c)break;return null;case 22:return s.lanes=0,V0(o,s,l,s.pendingProps);case 24:Uo(s,Vt,o.memoizedState.cache)}return so(o,s,l)}function H0(o,s,l){if(o!==null)if(o.memoizedProps!==s.pendingProps)Lt=!0;else{if(!eh(o,l)&&(s.flags&128)===0)return Lt=!1,CC(o,s,l);Lt=(o.flags&131072)!==0}else Lt=!1,Qe&&(s.flags&1048576)!==0&&Eg(s,$a,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(o=qs(s.elementType),s.type=o,typeof o=="function")sd(o)?(c=zs(o,c),s.tag=1,s=O0(null,s,o,c,l)):(s.tag=0,s=$d(null,s,o,c,l));else{if(o!=null){var y=o.$$typeof;if(y===re){s.tag=11,s=D0(null,s,o,c,l);break e}else if(y===N){s.tag=14,s=M0(null,s,o,c,l);break e}}throw s=ke(o)||o,Error(i(306,s,""))}}return s;case 0:return $d(o,s,s.type,s.pendingProps,l);case 1:return c=s.type,y=zs(c,s.pendingProps),O0(o,s,c,y,l);case 3:e:{if(Te(s,s.stateNode.containerInfo),o===null)throw Error(i(387));c=s.pendingProps;var v=s.memoizedState;y=v.element,Td(o,s),tl(s,c,null,l);var S=s.memoizedState;if(c=S.cache,Uo(s,Vt,c),c!==v.cache&&pd(s,[Vt],l,!0),el(),c=S.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:S.cache},s.updateQueue.baseState=v,s.memoizedState=v,s.flags&256){s=B0(o,s,c,l);break e}else if(c!==y){y=Hn(Error(i(424)),s),Ka(y),s=B0(o,s,c,l);break e}else{switch(o=s.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(pt=Kn(o.firstChild),Zt=s,Qe=!0,Po=null,Jn=!0,l=Vg(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Ls(),c===y){s=so(o,s,l);break e}en(o,s,c,l)}s=s.child}return s;case 26:return nc(o,s),o===null?(l=e_(s.type,null,s.pendingProps,null))?s.memoizedState=l:Qe||(l=s.type,o=s.pendingProps,c=vc(De.current).createElement(l),c[Dt]=s,c[zt]=o,tn(c,l,o),Mt(c),s.stateNode=c):s.memoizedState=e_(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return Q(s),o===null&&Qe&&(c=s.stateNode=Wy(s.type,s.pendingProps,De.current),Zt=s,Jn=!0,y=pt,Ko(s.type)?(Ph=y,pt=Kn(c.firstChild)):pt=y),en(o,s,s.pendingProps.children,l),nc(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&Qe&&((y=c=pt)&&(c=t1(c,s.type,s.pendingProps,Jn),c!==null?(s.stateNode=c,Zt=s,pt=Kn(c.firstChild),Jn=!1,y=!0):y=!1),y||Vo(s)),Q(s),y=s.type,v=s.pendingProps,S=o!==null?o.memoizedProps:null,c=v.children,Ih(y,v)?c=null:S!==null&&Ih(y,S)&&(s.flags|=32),s.memoizedState!==null&&(y=Rd(o,s,gC,null,null,l),El._currentValue=y),nc(o,s),en(o,s,c,l),s.child;case 6:return o===null&&Qe&&((o=l=pt)&&(l=n1(l,s.pendingProps,Jn),l!==null?(s.stateNode=l,Zt=s,pt=null,o=!0):o=!1),o||Vo(s)),null;case 13:return q0(o,s,l);case 4:return Te(s,s.stateNode.containerInfo),c=s.pendingProps,o===null?s.child=Gs(s,null,c,l):en(o,s,c,l),s.child;case 11:return D0(o,s,s.type,s.pendingProps,l);case 7:return en(o,s,s.pendingProps,l),s.child;case 8:return en(o,s,s.pendingProps.children,l),s.child;case 12:return en(o,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,Uo(s,s.type,c.value),en(o,s,c.children,l),s.child;case 9:return y=s.type._context,c=s.pendingProps.children,Os(s),y=jt(y),c=c(y),s.flags|=1,en(o,s,c,l),s.child;case 14:return M0(o,s,s.type,s.pendingProps,l);case 15:return P0(o,s,s.type,s.pendingProps,l);case 19:return G0(o,s,l);case 31:return xC(o,s,l);case 22:return V0(o,s,l,s.pendingProps);case 24:return Os(s),c=jt(Vt),o===null?(y=yd(),y===null&&(y=ft,v=md(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),s.memoizedState={parent:c,cache:y},vd(s),Uo(s,Vt,y)):((o.lanes&l)!==0&&(Td(o,s),tl(s,null,null,l),el()),y=o.memoizedState,v=s.memoizedState,y.parent!==c?(y={parent:c,cache:c},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Uo(s,Vt,c)):(c=v.cache,Uo(s,Vt,c),c!==y.cache&&pd(s,[Vt],l,!0))),en(o,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ro(o){o.flags|=4}function th(o,s,l,c,y){if((s=(o.mode&32)!==0)&&(s=!1),s){if(o.flags|=16777216,(y&335544128)===y)if(o.stateNode.complete)o.flags|=8192;else if(gy())o.flags|=8192;else throw Fs=Fu,_d}else o.flags&=-16777217}function z0(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!s_(s))if(gy())o.flags|=8192;else throw Fs=Fu,_d}function oc(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?cu():536870912,o.lanes|=s,Or|=s)}function al(o,s){if(!Qe)switch(o.tailMode){case"hidden":s=o.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:c.sibling=null}}function mt(o){var s=o.alternate!==null&&o.alternate.child===o.child,l=0,c=0;if(s)for(var y=o.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=c,o.childLanes=l,s}function bC(o,s,l){var c=s.pendingProps;switch(ud(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(s),null;case 1:return mt(s),null;case 3:return l=s.stateNode,c=null,o!==null&&(c=o.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),no(Vt),ve(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(o===null||o.child===null)&&(Cr(s)?ro(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,fd())),mt(s),null;case 26:var y=s.type,v=s.memoizedState;return o===null?(ro(s),v!==null?(mt(s),z0(s,v)):(mt(s),th(s,y,null,c,l))):v?v!==o.memoizedState?(ro(s),mt(s),z0(s,v)):(mt(s),s.flags&=-16777217):(o=o.memoizedProps,o!==c&&ro(s),mt(s),th(s,y,o,c,l)),null;case 27:if(ge(s),l=De.current,y=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==c&&ro(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return mt(s),null}o=me.current,Cr(s)?Sg(s):(o=Wy(y,c,l),s.stateNode=o,ro(s))}return mt(s),null;case 5:if(ge(s),y=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==c&&ro(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return mt(s),null}if(v=me.current,Cr(s))Sg(s);else{var S=vc(De.current);switch(v){case 1:v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=S.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?S.createElement(y,{is:c.is}):S.createElement(y)}}v[Dt]=s,v[zt]=c;e:for(S=s.child;S!==null;){if(S.tag===5||S.tag===6)v.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===s)break e;for(;S.sibling===null;){if(S.return===null||S.return===s)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}s.stateNode=v;e:switch(tn(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&ro(s)}}return mt(s),th(s,s.type,o===null?null:o.memoizedProps,s.pendingProps,l),null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==c&&ro(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(o=De.current,Cr(s)){if(o=s.stateNode,l=s.memoizedProps,c=null,y=Zt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}o[Dt]=s,o=!!(o.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||qy(o.nodeValue,l)),o||Vo(s,!0)}else o=vc(o).createTextNode(c),o[Dt]=s,s.stateNode=o}return mt(s),null;case 31:if(l=s.memoizedState,o===null||o.memoizedState!==null){if(c=Cr(s),l!==null){if(o===null){if(!c)throw Error(i(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[Dt]=s}else Ls(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),o=!1}else l=fd(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=l),o=!0;if(!o)return s.flags&256?(Mn(s),s):(Mn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return mt(s),null;case 13:if(c=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=Cr(s),c!==null&&c.dehydrated!==null){if(o===null){if(!y)throw Error(i(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Dt]=s}else Ls(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;mt(s),y=!1}else y=fd(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Mn(s),s):(Mn(s),null)}return Mn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=c!==null,o=o!==null&&o.memoizedState!==null,l&&(c=s.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==o&&l&&(s.child.flags|=8192),oc(s,s.updateQueue),mt(s),null);case 4:return ve(),o===null&&Sh(s.stateNode.containerInfo),mt(s),null;case 10:return no(s.type),mt(s),null;case 19:if(ne(bt),c=s.memoizedState,c===null)return mt(s),null;if(y=(s.flags&128)!==0,v=c.rendering,v===null)if(y)al(c,!1);else{if(Et!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(v=Yu(o),v!==null){for(s.flags|=128,al(c,!1),o=v.updateQueue,s.updateQueue=o,oc(s,o),s.subtreeFlags=0,o=l,l=s.child;l!==null;)_g(l,o),l=l.sibling;return de(bt,bt.current&1|2),Qe&&eo(s,c.treeForkCount),s.child}o=o.sibling}c.tail!==null&&fn()>uc&&(s.flags|=128,y=!0,al(c,!1),s.lanes=4194304)}else{if(!y)if(o=Yu(v),o!==null){if(s.flags|=128,y=!0,o=o.updateQueue,s.updateQueue=o,oc(s,o),al(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Qe)return mt(s),null}else 2*fn()-c.renderingStartTime>uc&&l!==536870912&&(s.flags|=128,y=!0,al(c,!1),s.lanes=4194304);c.isBackwards?(v.sibling=s.child,s.child=v):(o=c.last,o!==null?o.sibling=v:s.child=v,c.last=v)}return c.tail!==null?(o=c.tail,c.rendering=o,c.tail=o.sibling,c.renderingStartTime=fn(),o.sibling=null,l=bt.current,de(bt,y?l&1|2:l&1),Qe&&eo(s,c.treeForkCount),o):(mt(s),null);case 22:case 23:return Mn(s),xd(),c=s.memoizedState!==null,o!==null?o.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(mt(s),s.subtreeFlags&6&&(s.flags|=8192)):mt(s),l=s.updateQueue,l!==null&&oc(s,l.retryQueue),l=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),o!==null&&ne(Bs),null;case 24:return l=null,o!==null&&(l=o.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),no(Vt),mt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function RC(o,s){switch(ud(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return no(Vt),ve(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return ge(s),null;case 31:if(s.memoizedState!==null){if(Mn(s),s.alternate===null)throw Error(i(340));Ls()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 13:if(Mn(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Ls()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return ne(bt),null;case 4:return ve(),null;case 10:return no(s.type),null;case 22:case 23:return Mn(s),xd(),o!==null&&ne(Bs),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return no(Vt),null;case 25:return null;default:return null}}function Y0(o,s){switch(ud(s),s.tag){case 3:no(Vt),ve();break;case 26:case 27:case 5:ge(s);break;case 4:ve();break;case 31:s.memoizedState!==null&&Mn(s);break;case 13:Mn(s);break;case 19:ne(bt);break;case 10:no(s.type);break;case 22:case 23:Mn(s),xd(),o!==null&&ne(Bs);break;case 24:no(Vt)}}function ll(o,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&o)===o){c=void 0;var v=l.create,S=l.inst;c=v(),S.destroy=c}l=l.next}while(l!==y)}}catch(b){rt(s,s.return,b)}}function Fo(o,s,l){try{var c=s.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&o)===o){var S=c.inst,b=S.destroy;if(b!==void 0){S.destroy=void 0,y=s;var U=l,Y=b;try{Y()}catch(j){rt(y,U,j)}}}c=c.next}while(c!==v)}}catch(j){rt(s,s.return,j)}}function J0(o){var s=o.updateQueue;if(s!==null){var l=o.stateNode;try{Lg(s,l)}catch(c){rt(o,o.return,c)}}}function $0(o,s,l){l.props=zs(o.type,o.memoizedProps),l.state=o.memoizedState;try{l.componentWillUnmount()}catch(c){rt(o,s,c)}}function ul(o,s){try{var l=o.ref;if(l!==null){switch(o.tag){case 26:case 27:case 5:var c=o.stateNode;break;case 30:c=o.stateNode;break;default:c=o.stateNode}typeof l=="function"?o.refCleanup=l(c):l.current=c}}catch(y){rt(o,s,y)}}function qi(o,s){var l=o.ref,c=o.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){rt(o,s,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){rt(o,s,y)}else l.current=null}function K0(o){var s=o.type,l=o.memoizedProps,c=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){rt(o,o.return,y)}}function nh(o,s,l){try{var c=o.stateNode;QC(c,o.type,l,s),c[zt]=s}catch(y){rt(o,o.return,y)}}function Q0(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Ko(o.type)||o.tag===4}function ih(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Q0(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Ko(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function oh(o,s,l){var c=o.tag;if(c===5||c===6)o=o.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(o,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(o),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=oi));else if(c!==4&&(c===27&&Ko(o.type)&&(l=o.stateNode,s=null),o=o.child,o!==null))for(oh(o,s,l),o=o.sibling;o!==null;)oh(o,s,l),o=o.sibling}function sc(o,s,l){var c=o.tag;if(c===5||c===6)o=o.stateNode,s?l.insertBefore(o,s):l.appendChild(o);else if(c!==4&&(c===27&&Ko(o.type)&&(l=o.stateNode),o=o.child,o!==null))for(sc(o,s,l),o=o.sibling;o!==null;)sc(o,s,l),o=o.sibling}function X0(o){var s=o.stateNode,l=o.memoizedProps;try{for(var c=o.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);tn(s,c,l),s[Dt]=o,s[zt]=l}catch(v){rt(o,o.return,v)}}var ao=!1,kt=!1,sh=!1,W0=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function IC(o,s){if(o=o.containerInfo,bh=bc,o=ug(o),Zf(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var S=0,b=-1,U=-1,Y=0,j=0,ie=o,J=null;t:for(;;){for(var Z;ie!==l||y!==0&&ie.nodeType!==3||(b=S+y),ie!==v||c!==0&&ie.nodeType!==3||(U=S+c),ie.nodeType===3&&(S+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)J=ie,ie=Z;for(;;){if(ie===o)break t;if(J===l&&++Y===y&&(b=S),J===v&&++j===c&&(U=S),(Z=ie.nextSibling)!==null)break;ie=J,J=ie.parentNode}ie=Z}l=b===-1||U===-1?null:{start:b,end:U}}else l=null}l=l||{start:0,end:0}}else l=null;for(Rh={focusedElem:o,selectionRange:l},bc=!1,Jt=s;Jt!==null;)if(s=Jt,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,Jt=o;else for(;Jt!==null;){switch(s=Jt,v=s.alternate,o=s.flags,s.tag){case 0:if((o&4)!==0&&(o=s.updateQueue,o=o!==null?o.events:null,o!==null))for(l=0;l<o.length;l++)y=o[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&v!==null){o=void 0,l=s,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var _e=zs(l.type,y);o=c.getSnapshotBeforeUpdate(_e,v),c.__reactInternalSnapshotBeforeUpdate=o}catch(xe){rt(l,l.return,xe)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,l=o.nodeType,l===9)Nh(o);else if(l===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Nh(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,Jt=o;break}Jt=s.return}}function Z0(o,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:uo(o,l),c&4&&ll(5,l);break;case 1:if(uo(o,l),c&4)if(o=l.stateNode,s===null)try{o.componentDidMount()}catch(S){rt(l,l.return,S)}else{var y=zs(l.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(y,s,o.__reactInternalSnapshotBeforeUpdate)}catch(S){rt(l,l.return,S)}}c&64&&J0(l),c&512&&ul(l,l.return);break;case 3:if(uo(o,l),c&64&&(o=l.updateQueue,o!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{Lg(o,s)}catch(S){rt(l,l.return,S)}}break;case 27:s===null&&c&4&&X0(l);case 26:case 5:uo(o,l),s===null&&c&4&&K0(l),c&512&&ul(l,l.return);break;case 12:uo(o,l);break;case 31:uo(o,l),c&4&&ty(o,l);break;case 13:uo(o,l),c&4&&ny(o,l),c&64&&(o=l.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(l=kC.bind(null,l),i1(o,l))));break;case 22:if(c=l.memoizedState!==null||ao,!c){s=s!==null&&s.memoizedState!==null||kt,y=ao;var v=kt;ao=c,(kt=s)&&!v?co(o,l,(l.subtreeFlags&8772)!==0):uo(o,l),ao=y,kt=v}break;case 30:break;default:uo(o,l)}}function j0(o){var s=o.alternate;s!==null&&(o.alternate=null,j0(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&lr(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var yt=null,Tn=!1;function lo(o,s,l){for(l=l.child;l!==null;)ey(o,s,l),l=l.sibling}function ey(o,s,l){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(ei,l)}catch{}switch(l.tag){case 26:kt||qi(l,s),lo(o,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:kt||qi(l,s);var c=yt,y=Tn;Ko(l.type)&&(yt=l.stateNode,Tn=!1),lo(o,s,l),_l(l.stateNode),yt=c,Tn=y;break;case 5:kt||qi(l,s);case 6:if(c=yt,y=Tn,yt=null,lo(o,s,l),yt=c,Tn=y,yt!==null)if(Tn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(l.stateNode)}catch(v){rt(l,s,v)}else try{yt.removeChild(l.stateNode)}catch(v){rt(l,s,v)}break;case 18:yt!==null&&(Tn?(o=yt,Jy(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,l.stateNode),Jr(o)):Jy(yt,l.stateNode));break;case 4:c=yt,y=Tn,yt=l.stateNode.containerInfo,Tn=!0,lo(o,s,l),yt=c,Tn=y;break;case 0:case 11:case 14:case 15:Fo(2,l,s),kt||Fo(4,l,s),lo(o,s,l);break;case 1:kt||(qi(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&$0(l,s,c)),lo(o,s,l);break;case 21:lo(o,s,l);break;case 22:kt=(c=kt)||l.memoizedState!==null,lo(o,s,l),kt=c;break;default:lo(o,s,l)}}function ty(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{Jr(o)}catch(l){rt(s,s.return,l)}}}function ny(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{Jr(o)}catch(l){rt(s,s.return,l)}}function wC(o){switch(o.tag){case 31:case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new W0),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new W0),s;default:throw Error(i(435,o.tag))}}function rc(o,s){var l=wC(o);s.forEach(function(c){if(!l.has(c)){l.add(c);var y=OC.bind(null,o,c);c.then(y,y)}})}function En(o,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=o,S=s,b=S;e:for(;b!==null;){switch(b.tag){case 27:if(Ko(b.type)){yt=b.stateNode,Tn=!1;break e}break;case 5:yt=b.stateNode,Tn=!1;break e;case 3:case 4:yt=b.stateNode.containerInfo,Tn=!0;break e}b=b.return}if(yt===null)throw Error(i(160));ey(v,S,y),yt=null,Tn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)iy(s,o),s=s.sibling}var ci=null;function iy(o,s){var l=o.alternate,c=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:En(s,o),An(o),c&4&&(Fo(3,o,o.return),ll(3,o),Fo(5,o,o.return));break;case 1:En(s,o),An(o),c&512&&(kt||l===null||qi(l,l.return)),c&64&&ao&&(o=o.updateQueue,o!==null&&(c=o.callbacks,c!==null&&(l=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ci;if(En(s,o),An(o),c&512&&(kt||l===null||qi(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=o.memoizedState,l===null)if(c===null)if(o.stateNode===null){e:{c=o.type,l=o.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[bi]||v[Dt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),tn(v,c,l),v[Dt]=o,Mt(v),c=v;break e;case"link":var S=i_("link","href",y).get(c+(l.href||""));if(S){for(var b=0;b<S.length;b++)if(v=S[b],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(b,1);break t}}v=y.createElement(c),tn(v,c,l),y.head.appendChild(v);break;case"meta":if(S=i_("meta","content",y).get(c+(l.content||""))){for(b=0;b<S.length;b++)if(v=S[b],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(b,1);break t}}v=y.createElement(c),tn(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[Dt]=o,Mt(v),c=v}o.stateNode=c}else o_(y,o.type,o.stateNode);else o.stateNode=n_(y,c,o.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?o_(y,o.type,o.stateNode):n_(y,c,o.memoizedProps)):c===null&&o.stateNode!==null&&nh(o,o.memoizedProps,l.memoizedProps)}break;case 27:En(s,o),An(o),c&512&&(kt||l===null||qi(l,l.return)),l!==null&&c&4&&nh(o,o.memoizedProps,l.memoizedProps);break;case 5:if(En(s,o),An(o),c&512&&(kt||l===null||qi(l,l.return)),o.flags&32){y=o.stateNode;try{vn(y,"")}catch(_e){rt(o,o.return,_e)}}c&4&&o.stateNode!=null&&(y=o.memoizedProps,nh(o,y,l!==null?l.memoizedProps:y)),c&1024&&(sh=!0);break;case 6:if(En(s,o),An(o),c&4){if(o.stateNode===null)throw Error(i(162));c=o.memoizedProps,l=o.stateNode;try{l.nodeValue=c}catch(_e){rt(o,o.return,_e)}}break;case 3:if(Ac=null,y=ci,ci=Tc(s.containerInfo),En(s,o),ci=y,An(o),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Jr(s.containerInfo)}catch(_e){rt(o,o.return,_e)}sh&&(sh=!1,oy(o));break;case 4:c=ci,ci=Tc(o.stateNode.containerInfo),En(s,o),An(o),ci=c;break;case 12:En(s,o),An(o);break;case 31:En(s,o),An(o),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,rc(o,c)));break;case 13:En(s,o),An(o),o.child.flags&8192&&o.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(lc=fn()),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,rc(o,c)));break;case 22:y=o.memoizedState!==null;var U=l!==null&&l.memoizedState!==null,Y=ao,j=kt;if(ao=Y||y,kt=j||U,En(s,o),kt=j,ao=Y,An(o),c&8192)e:for(s=o.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(l===null||U||ao||kt||Ys(o)),l=null,s=o;;){if(s.tag===5||s.tag===26){if(l===null){U=l=s;try{if(v=U.stateNode,y)S=v.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{b=U.stateNode;var ie=U.memoizedProps.style,J=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(_e){rt(U,U.return,_e)}}}else if(s.tag===6){if(l===null){U=s;try{U.stateNode.nodeValue=y?"":U.memoizedProps}catch(_e){rt(U,U.return,_e)}}}else if(s.tag===18){if(l===null){U=s;try{var Z=U.stateNode;y?$y(Z,!0):$y(U.stateNode,!1)}catch(_e){rt(U,U.return,_e)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=o.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,rc(o,l))));break;case 19:En(s,o),An(o),c&4&&(c=o.updateQueue,c!==null&&(o.updateQueue=null,rc(o,c)));break;case 30:break;case 21:break;default:En(s,o),An(o)}}function An(o){var s=o.flags;if(s&2){try{for(var l,c=o.return;c!==null;){if(Q0(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=ih(o);sc(o,v,y);break;case 5:var S=l.stateNode;l.flags&32&&(vn(S,""),l.flags&=-33);var b=ih(o);sc(o,b,S);break;case 3:case 4:var U=l.stateNode.containerInfo,Y=ih(o);oh(o,Y,U);break;default:throw Error(i(161))}}catch(j){rt(o,o.return,j)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function oy(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;oy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function uo(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Z0(o,s.alternate,s),s=s.sibling}function Ys(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:Fo(4,s,s.return),Ys(s);break;case 1:qi(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&$0(s,s.return,l),Ys(s);break;case 27:_l(s.stateNode);case 26:case 5:qi(s,s.return),Ys(s);break;case 22:s.memoizedState===null&&Ys(s);break;case 30:Ys(s);break;default:Ys(s)}o=o.sibling}}function co(o,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,y=o,v=s,S=v.flags;switch(v.tag){case 0:case 11:case 15:co(y,v,l),ll(4,v);break;case 1:if(co(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){rt(c,c.return,Y)}if(c=v,y=c.updateQueue,y!==null){var b=c.stateNode;try{var U=y.shared.hiddenCallbacks;if(U!==null)for(y.shared.hiddenCallbacks=null,y=0;y<U.length;y++)Ug(U[y],b)}catch(Y){rt(c,c.return,Y)}}l&&S&64&&J0(v),ul(v,v.return);break;case 27:X0(v);case 26:case 5:co(y,v,l),l&&c===null&&S&4&&K0(v),ul(v,v.return);break;case 12:co(y,v,l);break;case 31:co(y,v,l),l&&S&4&&ty(y,v);break;case 13:co(y,v,l),l&&S&4&&ny(y,v);break;case 22:v.memoizedState===null&&co(y,v,l),ul(v,v.return);break;case 30:break;default:co(y,v,l)}s=s.sibling}}function rh(o,s){var l=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(l=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==l&&(o!=null&&o.refCount++,l!=null&&Qa(l))}function ah(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&Qa(o))}function fi(o,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)sy(o,s,l,c),s=s.sibling}function sy(o,s,l,c){var y=s.flags;switch(s.tag){case 0:case 11:case 15:fi(o,s,l,c),y&2048&&ll(9,s);break;case 1:fi(o,s,l,c);break;case 3:fi(o,s,l,c),y&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&Qa(o)));break;case 12:if(y&2048){fi(o,s,l,c),o=s.stateNode;try{var v=s.memoizedProps,S=v.id,b=v.onPostCommit;typeof b=="function"&&b(S,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(U){rt(s,s.return,U)}}else fi(o,s,l,c);break;case 31:fi(o,s,l,c);break;case 13:fi(o,s,l,c);break;case 23:break;case 22:v=s.stateNode,S=s.alternate,s.memoizedState!==null?v._visibility&2?fi(o,s,l,c):cl(o,s):v._visibility&2?fi(o,s,l,c):(v._visibility|=2,Ur(o,s,l,c,(s.subtreeFlags&10256)!==0||!1)),y&2048&&rh(S,s);break;case 24:fi(o,s,l,c),y&2048&&ah(s.alternate,s);break;default:fi(o,s,l,c)}}function Ur(o,s,l,c,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var v=o,S=s,b=l,U=c,Y=S.flags;switch(S.tag){case 0:case 11:case 15:Ur(v,S,b,U,y),ll(8,S);break;case 23:break;case 22:var j=S.stateNode;S.memoizedState!==null?j._visibility&2?Ur(v,S,b,U,y):cl(v,S):(j._visibility|=2,Ur(v,S,b,U,y)),y&&Y&2048&&rh(S.alternate,S);break;case 24:Ur(v,S,b,U,y),y&&Y&2048&&ah(S.alternate,S);break;default:Ur(v,S,b,U,y)}s=s.sibling}}function cl(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=o,c=s,y=c.flags;switch(c.tag){case 22:cl(l,c),y&2048&&rh(c.alternate,c);break;case 24:cl(l,c),y&2048&&ah(c.alternate,c);break;default:cl(l,c)}s=s.sibling}}var fl=8192;function Lr(o,s,l){if(o.subtreeFlags&fl)for(o=o.child;o!==null;)ry(o,s,l),o=o.sibling}function ry(o,s,l){switch(o.tag){case 26:Lr(o,s,l),o.flags&fl&&o.memoizedState!==null&&m1(l,ci,o.memoizedState,o.memoizedProps);break;case 5:Lr(o,s,l);break;case 3:case 4:var c=ci;ci=Tc(o.stateNode.containerInfo),Lr(o,s,l),ci=c;break;case 22:o.memoizedState===null&&(c=o.alternate,c!==null&&c.memoizedState!==null?(c=fl,fl=16777216,Lr(o,s,l),fl=c):Lr(o,s,l));break;default:Lr(o,s,l)}}function ay(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function dl(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Jt=c,uy(c,o)}ay(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ly(o),o=o.sibling}function ly(o){switch(o.tag){case 0:case 11:case 15:dl(o),o.flags&2048&&Fo(9,o,o.return);break;case 3:dl(o);break;case 12:dl(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,ac(o)):dl(o);break;default:dl(o)}}function ac(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Jt=c,uy(c,o)}ay(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:Fo(8,s,s.return),ac(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,ac(s));break;default:ac(s)}o=o.sibling}}function uy(o,s){for(;Jt!==null;){var l=Jt;switch(l.tag){case 0:case 11:case 15:Fo(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Qa(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Jt=c;else e:for(l=o;Jt!==null;){c=Jt;var y=c.sibling,v=c.return;if(j0(c),c===l){Jt=null;break e}if(y!==null){y.return=v,Jt=y;break e}Jt=v}}}var NC={getCacheForType:function(o){var s=jt(Vt),l=s.data.get(o);return l===void 0&&(l=o(),s.data.set(o,l)),l},cacheSignal:function(){return jt(Vt).controller.signal}},DC=typeof WeakMap=="function"?WeakMap:Map,nt=0,ft=null,Fe=null,ze=0,st=0,Pn=null,Go=!1,kr=!1,lh=!1,fo=0,Et=0,Ho=0,Js=0,uh=0,Vn=0,Or=0,hl=null,Sn=null,ch=!1,lc=0,cy=0,uc=1/0,cc=null,zo=null,Gt=0,Yo=null,Br=null,ho=0,fh=0,dh=null,fy=null,pl=0,hh=null;function Un(){return(nt&2)!==0&&ze!==0?ze&-ze:$.T!==null?vh():fu()}function dy(){if(Vn===0)if((ze&536870912)===0||Qe){var o=vs;vs<<=1,(vs&3932160)===0&&(vs=262144),Vn=o}else Vn=536870912;return o=Dn.current,o!==null&&(o.flags|=32),Vn}function xn(o,s,l){(o===ft&&(st===2||st===9)||o.cancelPendingCommit!==null)&&(qr(o,0),Jo(o,ze,Vn,!1)),Ts(o,l),((nt&2)===0||o!==ft)&&(o===ft&&((nt&2)===0&&(Js|=l),Et===4&&Jo(o,ze,Vn,!1)),Fi(o))}function hy(o,s,l){if((nt&6)!==0)throw Error(i(327));var c=!l&&(s&127)===0&&(s&o.expiredLanes)===0||ti(o,s),y=c?VC(o,s):mh(o,s,!0),v=c;do{if(y===0){kr&&!c&&Jo(o,s,0,!1);break}else{if(l=o.current.alternate,v&&!MC(l)){y=mh(o,s,!1),v=!1;continue}if(y===2){if(v=s,o.errorRecoveryDisabledLanes&v)var S=0;else S=o.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){s=S;e:{var b=o;y=hl;var U=b.current.memoizedState.isDehydrated;if(U&&(qr(b,S).flags|=256),S=mh(b,S,!1),S!==2){if(lh&&!U){b.errorRecoveryDisabledLanes|=v,Js|=v,y=4;break e}v=Sn,Sn=y,v!==null&&(Sn===null?Sn=v:Sn.push.apply(Sn,v))}y=S}if(v=!1,y!==2)continue}}if(y===1){qr(o,0),Jo(o,s,0,!0);break}e:{switch(c=o,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Jo(c,s,Vn,!Go);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(y=lc+300-fn(),10<y)){if(Jo(c,s,Vn,!Go),Si(c,0,!0)!==0)break e;ho=s,c.timeoutHandle=zy(py.bind(null,c,l,Sn,cc,ch,s,Vn,Js,Or,Go,v,"Throttled",-0,0),y);break e}py(c,l,Sn,cc,ch,s,Vn,Js,Or,Go,v,null,-0,0)}}break}while(!0);Fi(o)}function py(o,s,l,c,y,v,S,b,U,Y,j,ie,J,Z){if(o.timeoutHandle=-1,ie=s.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oi},ry(s,v,ie);var _e=(v&62914560)===v?lc-fn():(v&4194048)===v?cy-fn():0;if(_e=g1(ie,_e),_e!==null){ho=v,o.cancelPendingCommit=_e(Ay.bind(null,o,s,v,l,c,y,S,b,U,j,ie,null,J,Z)),Jo(o,v,S,!Y);return}}Ay(o,s,v,l,c,y,S,b,U)}function MC(o){for(var s=o;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!wn(v(),y))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Jo(o,s,l,c){s&=~uh,s&=~Js,o.suspendedLanes|=s,o.pingedLanes&=~s,c&&(o.warmLanes|=s),c=o.expirationTimes;for(var y=s;0<y;){var v=31-xt(y),S=1<<v;c[v]=-1,y&=~S}l!==0&&Es(o,l,s)}function fc(){return(nt&6)===0?(ml(0),!1):!0}function ph(){if(Fe!==null){if(st===0)var o=Fe.return;else o=Fe,to=ks=null,Nd(o),Nr=null,Wa=0,o=Fe;for(;o!==null;)Y0(o.alternate,o),o=o.return;Fe=null}}function qr(o,s){var l=o.timeoutHandle;l!==-1&&(o.timeoutHandle=-1,ZC(l)),l=o.cancelPendingCommit,l!==null&&(o.cancelPendingCommit=null,l()),ho=0,ph(),ft=o,Fe=l=ji(o.current,null),ze=s,st=0,Pn=null,Go=!1,kr=ti(o,s),lh=!1,Or=Vn=uh=Js=Ho=Et=0,Sn=hl=null,ch=!1,(s&8)!==0&&(s|=s&32);var c=o.entangledLanes;if(c!==0)for(o=o.entanglements,c&=s;0<c;){var y=31-xt(c),v=1<<y;s|=o[y],c&=~v}return fo=s,Mu(),l}function my(o,s){Ue=null,$.H=sl,s===wr||s===qu?(s=Dg(),st=3):s===_d?(s=Dg(),st=4):st=s===Jd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Pn=s,Fe===null&&(Et=1,ec(o,Hn(s,o.current)))}function gy(){var o=Dn.current;return o===null?!0:(ze&4194048)===ze?$n===null:(ze&62914560)===ze||(ze&536870912)!==0?o===$n:!1}function yy(){var o=$.H;return $.H=sl,o===null?sl:o}function _y(){var o=$.A;return $.A=NC,o}function dc(){Et=4,Go||(ze&4194048)!==ze&&Dn.current!==null||(kr=!0),(Ho&134217727)===0&&(Js&134217727)===0||ft===null||Jo(ft,ze,Vn,!1)}function mh(o,s,l){var c=nt;nt|=2;var y=yy(),v=_y();(ft!==o||ze!==s)&&(cc=null,qr(o,s)),s=!1;var S=Et;e:do try{if(st!==0&&Fe!==null){var b=Fe,U=Pn;switch(st){case 8:ph(),S=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(s=!0);var Y=st;if(st=0,Pn=null,Fr(o,b,U,Y),l&&kr){S=0;break e}break;default:Y=st,st=0,Pn=null,Fr(o,b,U,Y)}}PC(),S=Et;break}catch(j){my(o,j)}while(!0);return s&&o.shellSuspendCounter++,to=ks=null,nt=c,$.H=y,$.A=v,Fe===null&&(ft=null,ze=0,Mu()),S}function PC(){for(;Fe!==null;)vy(Fe)}function VC(o,s){var l=nt;nt|=2;var c=yy(),y=_y();ft!==o||ze!==s?(cc=null,uc=fn()+500,qr(o,s)):kr=ti(o,s);e:do try{if(st!==0&&Fe!==null){s=Fe;var v=Pn;t:switch(st){case 1:st=0,Pn=null,Fr(o,s,v,1);break;case 2:case 9:if(wg(v)){st=0,Pn=null,Ty(s);break}s=function(){st!==2&&st!==9||ft!==o||(st=7),Fi(o)},v.then(s,s);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:wg(v)?(st=0,Pn=null,Ty(s)):(st=0,Pn=null,Fr(o,s,v,7));break;case 5:var S=null;switch(Fe.tag){case 26:S=Fe.memoizedState;case 5:case 27:var b=Fe;if(S?s_(S):b.stateNode.complete){st=0,Pn=null;var U=b.sibling;if(U!==null)Fe=U;else{var Y=b.return;Y!==null?(Fe=Y,hc(Y)):Fe=null}break t}}st=0,Pn=null,Fr(o,s,v,5);break;case 6:st=0,Pn=null,Fr(o,s,v,6);break;case 8:ph(),Et=6;break e;default:throw Error(i(462))}}UC();break}catch(j){my(o,j)}while(!0);return to=ks=null,$.H=c,$.A=y,nt=l,Fe!==null?0:(ft=null,ze=0,Mu(),Et)}function UC(){for(;Fe!==null&&!Yf();)vy(Fe)}function vy(o){var s=H0(o.alternate,o,fo);o.memoizedProps=o.pendingProps,s===null?hc(o):Fe=s}function Ty(o){var s=o,l=s.alternate;switch(s.tag){case 15:case 0:s=k0(l,s,s.pendingProps,s.type,void 0,ze);break;case 11:s=k0(l,s,s.pendingProps,s.type.render,s.ref,ze);break;case 5:Nd(s);default:Y0(l,s),s=Fe=_g(s,fo),s=H0(l,s,fo)}o.memoizedProps=o.pendingProps,s===null?hc(o):Fe=s}function Fr(o,s,l,c){to=ks=null,Nd(s),Nr=null,Wa=0;var y=s.return;try{if(SC(o,y,s,l,ze)){Et=1,ec(o,Hn(l,o.current)),Fe=null;return}}catch(v){if(y!==null)throw Fe=y,v;Et=1,ec(o,Hn(l,o.current)),Fe=null;return}s.flags&32768?(Qe||c===1?o=!0:kr||(ze&536870912)!==0?o=!1:(Go=o=!0,(c===2||c===9||c===3||c===6)&&(c=Dn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Ey(s,o)):hc(s)}function hc(o){var s=o;do{if((s.flags&32768)!==0){Ey(s,Go);return}o=s.return;var l=bC(s.alternate,s,fo);if(l!==null){Fe=l;return}if(s=s.sibling,s!==null){Fe=s;return}Fe=s=o}while(s!==null);Et===0&&(Et=5)}function Ey(o,s){do{var l=RC(o.alternate,o);if(l!==null){l.flags&=32767,Fe=l;return}if(l=o.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(o=o.sibling,o!==null)){Fe=o;return}Fe=o=l}while(o!==null);Et=6,Fe=null}function Ay(o,s,l,c,y,v,S,b,U){o.cancelPendingCommit=null;do pc();while(Gt!==0);if((nt&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(v=s.lanes|s.childLanes,v|=id,Kf(o,l,v,S,b,U),o===ft&&(Fe=ft=null,ze=0),Br=s,Yo=o,ho=l,fh=v,dh=y,fy=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,BC(Ao,function(){return Ry(),null})):(o.callbackNode=null,o.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,y=ue.p,ue.p=2,S=nt,nt|=4;try{IC(o,s,l)}finally{nt=S,ue.p=y,$.T=c}}Gt=1,Sy(),xy(),Cy()}}function Sy(){if(Gt===1){Gt=0;var o=Yo,s=Br,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var c=ue.p;ue.p=2;var y=nt;nt|=4;try{iy(s,o);var v=Rh,S=ug(o.containerInfo),b=v.focusedElem,U=v.selectionRange;if(S!==b&&b&&b.ownerDocument&&lg(b.ownerDocument.documentElement,b)){if(U!==null&&Zf(b)){var Y=U.start,j=U.end;if(j===void 0&&(j=Y),"selectionStart"in b)b.selectionStart=Y,b.selectionEnd=Math.min(j,b.value.length);else{var ie=b.ownerDocument||document,J=ie&&ie.defaultView||window;if(J.getSelection){var Z=J.getSelection(),_e=b.textContent.length,xe=Math.min(U.start,_e),ct=U.end===void 0?xe:Math.min(U.end,_e);!Z.extend&&xe>ct&&(S=ct,ct=xe,xe=S);var G=ag(b,xe),O=ag(b,ct);if(G&&O&&(Z.rangeCount!==1||Z.anchorNode!==G.node||Z.anchorOffset!==G.offset||Z.focusNode!==O.node||Z.focusOffset!==O.offset)){var z=ie.createRange();z.setStart(G.node,G.offset),Z.removeAllRanges(),xe>ct?(Z.addRange(z),Z.extend(O.node,O.offset)):(z.setEnd(O.node,O.offset),Z.addRange(z))}}}}for(ie=[],Z=b;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var te=ie[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}bc=!!bh,Rh=bh=null}finally{nt=y,ue.p=c,$.T=l}}o.current=s,Gt=2}}function xy(){if(Gt===2){Gt=0;var o=Yo,s=Br,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var c=ue.p;ue.p=2;var y=nt;nt|=4;try{Z0(o,s.alternate,s)}finally{nt=y,ue.p=c,$.T=l}}Gt=3}}function Cy(){if(Gt===4||Gt===3){Gt=0,ou();var o=Yo,s=Br,l=ho,c=fy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Gt=5:(Gt=0,Br=Yo=null,by(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&(zo=null),Qi(l),s=s.stateNode,Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(ei,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=$.T,y=ue.p,ue.p=2,$.T=null;try{for(var v=o.onRecoverableError,S=0;S<c.length;S++){var b=c[S];v(b.value,{componentStack:b.stack})}}finally{$.T=s,ue.p=y}}(ho&3)!==0&&pc(),Fi(o),y=o.pendingLanes,(l&261930)!==0&&(y&42)!==0?o===hh?pl++:(pl=0,hh=o):pl=0,ml(0)}}function by(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,Qa(s)))}function pc(){return Sy(),xy(),Cy(),Ry()}function Ry(){if(Gt!==5)return!1;var o=Yo,s=fh;fh=0;var l=Qi(ho),c=$.T,y=ue.p;try{ue.p=32>l?32:l,$.T=null,l=dh,dh=null;var v=Yo,S=ho;if(Gt=0,Br=Yo=null,ho=0,(nt&6)!==0)throw Error(i(331));var b=nt;if(nt|=4,ly(v.current),sy(v,v.current,S,l),nt=b,ml(0,!1),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(ei,v)}catch{}return!0}finally{ue.p=y,$.T=c,by(o,s)}}function Iy(o,s,l){s=Hn(l,s),s=Yd(o.stateNode,s,2),o=Oo(o,s,2),o!==null&&(Ts(o,2),Fi(o))}function rt(o,s,l){if(o.tag===3)Iy(o,o,l);else for(;s!==null;){if(s.tag===3){Iy(s,o,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(zo===null||!zo.has(c))){o=Hn(l,o),l=w0(2),c=Oo(s,l,2),c!==null&&(N0(l,c,s,o),Ts(c,2),Fi(c));break}}s=s.return}}function gh(o,s,l){var c=o.pingCache;if(c===null){c=o.pingCache=new DC;var y=new Set;c.set(s,y)}else y=c.get(s),y===void 0&&(y=new Set,c.set(s,y));y.has(l)||(lh=!0,y.add(l),o=LC.bind(null,o,s,l),s.then(o,o))}function LC(o,s,l){var c=o.pingCache;c!==null&&c.delete(s),o.pingedLanes|=o.suspendedLanes&l,o.warmLanes&=~l,ft===o&&(ze&l)===l&&(Et===4||Et===3&&(ze&62914560)===ze&&300>fn()-lc?(nt&2)===0&&qr(o,0):uh|=l,Or===ze&&(Or=0)),Fi(o)}function wy(o,s){s===0&&(s=cu()),o=Vs(o,s),o!==null&&(Ts(o,s),Fi(o))}function kC(o){var s=o.memoizedState,l=0;s!==null&&(l=s.retryLane),wy(o,l)}function OC(o,s){var l=0;switch(o.tag){case 31:case 13:var c=o.stateNode,y=o.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=o.stateNode;break;case 22:c=o.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),wy(o,l)}function BC(o,s){return Ft(o,s)}var mc=null,Gr=null,yh=!1,gc=!1,_h=!1,$o=0;function Fi(o){o!==Gr&&o.next===null&&(Gr===null?mc=Gr=o:Gr=Gr.next=o),gc=!0,yh||(yh=!0,FC())}function ml(o,s){if(!_h&&gc){_h=!0;do for(var l=!1,c=mc;c!==null;){if(o!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var S=c.suspendedLanes,b=c.pingedLanes;v=(1<<31-xt(42|o)+1)-1,v&=y&~(S&~b),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,Py(c,v))}else v=ze,v=Si(c,c===ft?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||ti(c,v)||(l=!0,Py(c,v));c=c.next}while(l);_h=!1}}function qC(){Ny()}function Ny(){gc=yh=!1;var o=0;$o!==0&&WC()&&(o=$o);for(var s=fn(),l=null,c=mc;c!==null;){var y=c.next,v=Dy(c,s);v===0?(c.next=null,l===null?mc=y:l.next=y,y===null&&(Gr=l)):(l=c,(o!==0||(v&3)!==0)&&(gc=!0)),c=y}Gt!==0&&Gt!==5||ml(o),$o!==0&&($o=0)}function Dy(o,s){for(var l=o.suspendedLanes,c=o.pingedLanes,y=o.expirationTimes,v=o.pendingLanes&-62914561;0<v;){var S=31-xt(v),b=1<<S,U=y[S];U===-1?((b&l)===0||(b&c)!==0)&&(y[S]=$f(b,s)):U<=s&&(o.expiredLanes|=b),v&=~b}if(s=ft,l=ze,l=Si(o,o===s?l:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),c=o.callbackNode,l===0||o===s&&(st===2||st===9)||o.cancelPendingCommit!==null)return c!==null&&c!==null&&Eo(c),o.callbackNode=null,o.callbackPriority=0;if((l&3)===0||ti(o,l)){if(s=l&-l,s===o.callbackPriority)return s;switch(c!==null&&Eo(c),Qi(l)){case 2:case 8:l=Ca;break;case 32:l=Ao;break;case 268435456:l=su;break;default:l=Ao}return c=My.bind(null,o),l=Ft(l,c),o.callbackPriority=s,o.callbackNode=l,s}return c!==null&&c!==null&&Eo(c),o.callbackPriority=2,o.callbackNode=null,2}function My(o,s){if(Gt!==0&&Gt!==5)return o.callbackNode=null,o.callbackPriority=0,null;var l=o.callbackNode;if(pc()&&o.callbackNode!==l)return null;var c=ze;return c=Si(o,o===ft?c:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),c===0?null:(hy(o,c,s),Dy(o,fn()),o.callbackNode!=null&&o.callbackNode===l?My.bind(null,o):null)}function Py(o,s){if(pc())return null;hy(o,s,!0)}function FC(){jC(function(){(nt&6)!==0?Ft(xa,qC):Ny()})}function vh(){if($o===0){var o=Rr;o===0&&(o=Ei,Ei<<=1,(Ei&261888)===0&&(Ei=256)),$o=o}return $o}function Vy(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:dr(""+o)}function Uy(o,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,o.id&&l.setAttribute("form",o.id),s.parentNode.insertBefore(l,s),o=new FormData(o),l.parentNode.removeChild(l),o}function GC(o,s,l,c,y){if(s==="submit"&&l&&l.stateNode===y){var v=Vy((y[zt]||null).action),S=c.submitter;S&&(s=(s=S[zt]||null)?Vy(s.formAction):S.getAttribute("formAction"),s!==null&&(v=s,S=null));var b=new Vi("action","action",null,c,y);o.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if($o!==0){var U=S?Uy(y,S):new FormData(y);Bd(l,{pending:!0,data:U,method:y.method,action:v},null,U)}}else typeof v=="function"&&(b.preventDefault(),U=S?Uy(y,S):new FormData(y),Bd(l,{pending:!0,data:U,method:y.method,action:v},v,U))},currentTarget:y}]})}}for(var Th=0;Th<nd.length;Th++){var Eh=nd[Th],HC=Eh.toLowerCase(),zC=Eh[0].toUpperCase()+Eh.slice(1);ui(HC,"on"+zC)}ui(dg,"onAnimationEnd"),ui(hg,"onAnimationIteration"),ui(pg,"onAnimationStart"),ui("dblclick","onDoubleClick"),ui("focusin","onFocus"),ui("focusout","onBlur"),ui(rC,"onTransitionRun"),ui(aC,"onTransitionStart"),ui(lC,"onTransitionCancel"),ui(mg,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),wi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wi("onBeforeInput",["compositionend","keypress","textInput","paste"]),wi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),YC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gl));function Ly(o,s){s=(s&4)!==0;for(var l=0;l<o.length;l++){var c=o[l],y=c.event;c=c.listeners;e:{var v=void 0;if(s)for(var S=c.length-1;0<=S;S--){var b=c[S],U=b.instance,Y=b.currentTarget;if(b=b.listener,U!==v&&y.isPropagationStopped())break e;v=b,y.currentTarget=Y;try{v(y)}catch(j){Du(j)}y.currentTarget=null,v=U}else for(S=0;S<c.length;S++){if(b=c[S],U=b.instance,Y=b.currentTarget,b=b.listener,U!==v&&y.isPropagationStopped())break e;v=b,y.currentTarget=Y;try{v(y)}catch(j){Du(j)}y.currentTarget=null,v=U}}}}function Ge(o,s){var l=s[ar];l===void 0&&(l=s[ar]=new Set);var c=o+"__bubble";l.has(c)||(ky(s,o,2,!1),l.add(c))}function Ah(o,s,l){var c=0;s&&(c|=4),ky(l,o,c,s)}var yc="_reactListening"+Math.random().toString(36).slice(2);function Sh(o){if(!o[yc]){o[yc]=!0,Ia.forEach(function(l){l!=="selectionchange"&&(YC.has(l)||Ah(l,!1,o),Ah(l,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[yc]||(s[yc]=!0,Ah("selectionchange",!1,s))}}function ky(o,s,l,c){switch(d_(s)){case 2:var y=v1;break;case 8:y=T1;break;default:y=Oh}l=y.bind(null,s,l,o),y=void 0,!bs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),c?y!==void 0?o.addEventListener(s,l,{capture:!0,passive:y}):o.addEventListener(s,l,!0):y!==void 0?o.addEventListener(s,l,{passive:y}):o.addEventListener(s,l,!1)}function xh(o,s,l,c,y){var v=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var b=c.stateNode.containerInfo;if(b===y)break;if(S===4)for(S=c.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;b!==null;){if(S=Ri(b),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){c=v=S;continue e}b=b.parentNode}}c=c.return}Io(function(){var Y=v,j=Bn(l),ie=[];e:{var J=gg.get(o);if(J!==void 0){var Z=Vi,_e=o;switch(o){case"keypress":if(Is(l)===0)break e;case"keydown":case"keyup":Z=Iu;break;case"focusin":_e="focus",Z=Ns;break;case"focusout":_e="blur",Z=Ns;break;case"beforeblur":case"afterblur":Z=Ns;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Fa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=vu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=E;break;case dg:case hg:case pg:Z=Eu;break;case mg:Z=R;break;case"scroll":case"scrollend":Z=qa;break;case"wheel":Z=X;break;case"copy":case"cut":case"paste":Z=Au;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=Zi;break;case"toggle":case"beforetoggle":Z=Ve}var xe=(s&4)!==0,ct=!xe&&(o==="scroll"||o==="scrollend"),G=xe?J!==null?J+"Capture":null:J;xe=[];for(var O=Y,z;O!==null;){var te=O;if(z=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||z===null||G===null||(te=si(O,G),te!=null&&xe.push(yl(O,te,z))),ct)break;O=O.return}0<xe.length&&(J=new Z(J,_e,null,l,j),ie.push({event:J,listeners:xe}))}}if((s&7)===0){e:{if(J=o==="mouseover"||o==="pointerover",Z=o==="mouseout"||o==="pointerout",J&&l!==ka&&(_e=l.relatedTarget||l.fromElement)&&(Ri(_e)||_e[Ci]))break e;if((Z||J)&&(J=j.window===j?j:(J=j.ownerDocument)?J.defaultView||J.parentWindow:window,Z?(_e=l.relatedTarget||l.toElement,Z=Y,_e=_e?Ri(_e):null,_e!==null&&(ct=a(_e),xe=_e.tag,_e!==ct||xe!==5&&xe!==27&&xe!==6)&&(_e=null)):(Z=null,_e=Y),Z!==_e)){if(xe=Fa,te="onMouseLeave",G="onMouseEnter",O="mouse",(o==="pointerout"||o==="pointerover")&&(xe=Zi,te="onPointerLeave",G="onPointerEnter",O="pointer"),ct=Z==null?J:Rn(Z),z=_e==null?J:Rn(_e),J=new xe(te,O+"leave",Z,l,j),J.target=ct,J.relatedTarget=z,te=null,Ri(j)===Y&&(xe=new xe(G,O+"enter",_e,l,j),xe.target=z,xe.relatedTarget=ct,te=xe),ct=te,Z&&_e)t:{for(xe=JC,G=Z,O=_e,z=0,te=G;te;te=xe(te))z++;te=0;for(var Ae=O;Ae;Ae=xe(Ae))te++;for(;0<z-te;)G=xe(G),z--;for(;0<te-z;)O=xe(O),te--;for(;z--;){if(G===O||O!==null&&G===O.alternate){xe=G;break t}G=xe(G),O=xe(O)}xe=null}else xe=null;Z!==null&&Oy(ie,J,Z,xe,!1),_e!==null&&ct!==null&&Oy(ie,ct,_e,xe,!0)}}e:{if(J=Y?Rn(Y):window,Z=J.nodeName&&J.nodeName.toLowerCase(),Z==="select"||Z==="input"&&J.type==="file")var Ze=tg;else if(jm(J))if(ng)Ze=iC;else{Ze=tC;var Ee=eC}else Z=J.nodeName,!Z||Z.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&fr(Y.elementType)&&(Ze=tg):Ze=nC;if(Ze&&(Ze=Ze(o,Y))){eg(ie,Ze,l,j);break e}Ee&&Ee(o,J,Y),o==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&Va(J,"number",J.value)}switch(Ee=Y?Rn(Y):window,o){case"focusin":(jm(Ee)||Ee.contentEditable==="true")&&(vr=Ee,jf=Y,Ja=null);break;case"focusout":Ja=jf=vr=null;break;case"mousedown":ed=!0;break;case"contextmenu":case"mouseup":case"dragend":ed=!1,cg(ie,l,j);break;case"selectionchange":if(sC)break;case"keydown":case"keyup":cg(ie,l,j)}var Le;if(tt)e:{switch(o){case"compositionstart":var Ye="onCompositionStart";break e;case"compositionend":Ye="onCompositionEnd";break e;case"compositionupdate":Ye="onCompositionUpdate";break e}Ye=void 0}else _r?Ds(o,l)&&(Ye="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(Ye="onCompositionStart");Ye&&(ki&&l.locale!=="ko"&&(_r||Ye!=="onCompositionStart"?Ye==="onCompositionEnd"&&_r&&(Le=Ba()):(Pi=j,Oa="value"in Pi?Pi.value:Pi.textContent,_r=!0)),Ee=_c(Y,Ye),0<Ee.length&&(Ye=new Li(Ye,o,null,l,j),ie.push({event:Ye,listeners:Ee}),Le?Ye.data=Le:(Le=yr(l),Le!==null&&(Ye.data=Le)))),(Le=Fn?Xx(o,l):Wx(o,l))&&(Ye=_c(Y,"onBeforeInput"),0<Ye.length&&(Ee=new Li("onBeforeInput","beforeinput",null,l,j),ie.push({event:Ee,listeners:Ye}),Ee.data=Le)),GC(ie,o,Y,l,j)}Ly(ie,s)})}function yl(o,s,l){return{instance:o,listener:s,currentTarget:l}}function _c(o,s){for(var l=s+"Capture",c=[];o!==null;){var y=o,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=si(o,l),y!=null&&c.unshift(yl(o,y,v)),y=si(o,s),y!=null&&c.push(yl(o,y,v))),o.tag===3)return c;o=o.return}return[]}function JC(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function Oy(o,s,l,c,y){for(var v=s._reactName,S=[];l!==null&&l!==c;){var b=l,U=b.alternate,Y=b.stateNode;if(b=b.tag,U!==null&&U===c)break;b!==5&&b!==26&&b!==27||Y===null||(U=Y,y?(Y=si(l,v),Y!=null&&S.unshift(yl(l,Y,U))):y||(Y=si(l,v),Y!=null&&S.push(yl(l,Y,U)))),l=l.return}S.length!==0&&o.push({event:s,listeners:S})}var $C=/\r\n?/g,KC=/\u0000|\uFFFD/g;function By(o){return(typeof o=="string"?o:""+o).replace($C,`
`).replace(KC,"")}function qy(o,s){return s=By(s),By(o)===s}function ut(o,s,l,c,y,v){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||vn(o,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&vn(o,""+c);break;case"className":In(o,"class",c);break;case"tabIndex":In(o,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":In(o,l,c);break;case"style":La(o,c,v);break;case"data":if(s!=="object"){In(o,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){o.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){o.removeAttribute(l);break}c=dr(""+c),o.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){o.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(s!=="input"&&ut(o,s,"name",y.name,y,null),ut(o,s,"formEncType",y.formEncType,y,null),ut(o,s,"formMethod",y.formMethod,y,null),ut(o,s,"formTarget",y.formTarget,y,null)):(ut(o,s,"encType",y.encType,y,null),ut(o,s,"method",y.method,y,null),ut(o,s,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){o.removeAttribute(l);break}c=dr(""+c),o.setAttribute(l,c);break;case"onClick":c!=null&&(o.onclick=oi);break;case"onScroll":c!=null&&Ge("scroll",o);break;case"onScrollEnd":c!=null&&Ge("scrollend",o);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"multiple":o.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":o.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){o.removeAttribute("xlink:href");break}l=dr(""+c),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,""+c):o.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,""):o.removeAttribute(l);break;case"capture":case"download":c===!0?o.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?o.setAttribute(l,c):o.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?o.setAttribute(l,c):o.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?o.removeAttribute(l):o.setAttribute(l,c);break;case"popover":Ge("beforetoggle",o),Ge("toggle",o),ur(o,"popover",c);break;case"xlinkActuate":Pt(o,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Pt(o,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Pt(o,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Pt(o,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Pt(o,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Pt(o,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Pt(o,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Pt(o,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Pt(o,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ur(o,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=_u.get(l)||l,ur(o,l,c))}}function Ch(o,s,l,c,y,v){switch(l){case"style":La(o,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));o.innerHTML=l}}break;case"children":typeof c=="string"?vn(o,c):(typeof c=="number"||typeof c=="bigint")&&vn(o,""+c);break;case"onScroll":c!=null&&Ge("scroll",o);break;case"onScrollEnd":c!=null&&Ge("scrollend",o);break;case"onClick":c!=null&&(o.onclick=oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wa.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),s=l.slice(2,y?l.length-7:void 0),v=o[zt]||null,v=v!=null?v[l]:null,typeof v=="function"&&o.removeEventListener(s,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in o?o[l]=null:o.hasAttribute(l)&&o.removeAttribute(l)),o.addEventListener(s,c,y);break e}l in o?o[l]=c:c===!0?o.setAttribute(l,""):ur(o,l,c)}}}function tn(o,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",o),Ge("load",o);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var S=l[v];if(S!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ut(o,s,v,S,l,null)}}y&&ut(o,s,"srcSet",l.srcSet,l,null),c&&ut(o,s,"src",l.src,l,null);return;case"input":Ge("invalid",o);var b=v=S=y=null,U=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var j=l[c];if(j!=null)switch(c){case"name":y=j;break;case"type":S=j;break;case"checked":U=j;break;case"defaultChecked":Y=j;break;case"value":v=j;break;case"defaultValue":b=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,s));break;default:ut(o,s,c,j,l,null)}}mu(o,v,b,U,Y,S,y,!1);return;case"select":Ge("invalid",o),c=S=v=null;for(y in l)if(l.hasOwnProperty(y)&&(b=l[y],b!=null))switch(y){case"value":v=b;break;case"defaultValue":S=b;break;case"multiple":c=b;default:ut(o,s,y,b,l,null)}s=v,l=S,o.multiple=!!c,s!=null?xo(o,!!c,s,!1):l!=null&&xo(o,!!c,l,!0);return;case"textarea":Ge("invalid",o),v=y=c=null;for(S in l)if(l.hasOwnProperty(S)&&(b=l[S],b!=null))switch(S){case"value":c=b;break;case"defaultValue":y=b;break;case"children":v=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:ut(o,s,S,b,l,null)}Co(o,c,y,v);return;case"option":for(U in l)if(l.hasOwnProperty(U)&&(c=l[U],c!=null))switch(U){case"selected":o.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ut(o,s,U,c,l,null)}return;case"dialog":Ge("beforetoggle",o),Ge("toggle",o),Ge("cancel",o),Ge("close",o);break;case"iframe":case"object":Ge("load",o);break;case"video":case"audio":for(c=0;c<gl.length;c++)Ge(gl[c],o);break;case"image":Ge("error",o),Ge("load",o);break;case"details":Ge("toggle",o);break;case"embed":case"source":case"link":Ge("error",o),Ge("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:ut(o,s,Y,c,l,null)}return;default:if(fr(s)){for(j in l)l.hasOwnProperty(j)&&(c=l[j],c!==void 0&&Ch(o,s,j,c,l,void 0));return}}for(b in l)l.hasOwnProperty(b)&&(c=l[b],c!=null&&ut(o,s,b,c,l,null))}function QC(o,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,S=null,b=null,U=null,Y=null,j=null;for(Z in l){var ie=l[Z];if(l.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":U=ie;default:c.hasOwnProperty(Z)||ut(o,s,Z,null,c,ie)}}for(var J in c){var Z=c[J];if(ie=l[J],c.hasOwnProperty(J)&&(Z!=null||ie!=null))switch(J){case"type":v=Z;break;case"name":y=Z;break;case"checked":Y=Z;break;case"defaultChecked":j=Z;break;case"value":S=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,s));break;default:Z!==ie&&ut(o,s,J,Z,c,ie)}}cr(o,S,b,U,Y,j,v,y);return;case"select":Z=S=b=J=null;for(v in l)if(U=l[v],l.hasOwnProperty(v)&&U!=null)switch(v){case"value":break;case"multiple":Z=U;default:c.hasOwnProperty(v)||ut(o,s,v,null,c,U)}for(y in c)if(v=c[y],U=l[y],c.hasOwnProperty(y)&&(v!=null||U!=null))switch(y){case"value":J=v;break;case"defaultValue":b=v;break;case"multiple":S=v;default:v!==U&&ut(o,s,y,v,c,U)}s=b,l=S,c=Z,J!=null?xo(o,!!l,J,!1):!!c!=!!l&&(s!=null?xo(o,!!l,s,!0):xo(o,!!l,l?[]:"",!1));return;case"textarea":Z=J=null;for(b in l)if(y=l[b],l.hasOwnProperty(b)&&y!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:ut(o,s,b,null,c,y)}for(S in c)if(y=c[S],v=l[S],c.hasOwnProperty(S)&&(y!=null||v!=null))switch(S){case"value":J=y;break;case"defaultValue":Z=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&ut(o,s,S,y,c,v)}gu(o,J,Z);return;case"option":for(var _e in l)if(J=l[_e],l.hasOwnProperty(_e)&&J!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":o.selected=!1;break;default:ut(o,s,_e,null,c,J)}for(U in c)if(J=c[U],Z=l[U],c.hasOwnProperty(U)&&J!==Z&&(J!=null||Z!=null))switch(U){case"selected":o.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:ut(o,s,U,J,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in l)J=l[xe],l.hasOwnProperty(xe)&&J!=null&&!c.hasOwnProperty(xe)&&ut(o,s,xe,null,c,J);for(Y in c)if(J=c[Y],Z=l[Y],c.hasOwnProperty(Y)&&J!==Z&&(J!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:ut(o,s,Y,J,c,Z)}return;default:if(fr(s)){for(var ct in l)J=l[ct],l.hasOwnProperty(ct)&&J!==void 0&&!c.hasOwnProperty(ct)&&Ch(o,s,ct,void 0,c,J);for(j in c)J=c[j],Z=l[j],!c.hasOwnProperty(j)||J===Z||J===void 0&&Z===void 0||Ch(o,s,j,J,c,Z);return}}for(var G in l)J=l[G],l.hasOwnProperty(G)&&J!=null&&!c.hasOwnProperty(G)&&ut(o,s,G,null,c,J);for(ie in c)J=c[ie],Z=l[ie],!c.hasOwnProperty(ie)||J===Z||J==null&&Z==null||ut(o,s,ie,J,c,Z)}function Fy(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XC(){if(typeof performance.getEntriesByType=="function"){for(var o=0,s=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,S=y.initiatorType,b=y.duration;if(v&&b&&Fy(S)){for(S=0,b=y.responseEnd,c+=1;c<l.length;c++){var U=l[c],Y=U.startTime;if(Y>b)break;var j=U.transferSize,ie=U.initiatorType;j&&Fy(ie)&&(U=U.responseEnd,S+=j*(U<b?1:(b-Y)/(U-Y)))}if(--c,s+=8*(v+S)/(y.duration/1e3),o++,10<o)break}}if(0<o)return s/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var bh=null,Rh=null;function vc(o){return o.nodeType===9?o:o.ownerDocument}function Gy(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hy(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function Ih(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var wh=null;function WC(){var o=window.event;return o&&o.type==="popstate"?o===wh?!1:(wh=o,!0):(wh=null,!1)}var zy=typeof setTimeout=="function"?setTimeout:void 0,ZC=typeof clearTimeout=="function"?clearTimeout:void 0,Yy=typeof Promise=="function"?Promise:void 0,jC=typeof queueMicrotask=="function"?queueMicrotask:typeof Yy<"u"?function(o){return Yy.resolve(null).then(o).catch(e1)}:zy;function e1(o){setTimeout(function(){throw o})}function Ko(o){return o==="head"}function Jy(o,s){var l=s,c=0;do{var y=l.nextSibling;if(o.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){o.removeChild(y),Jr(s);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")_l(o.ownerDocument.documentElement);else if(l==="head"){l=o.ownerDocument.head,_l(l);for(var v=l.firstChild;v;){var S=v.nextSibling,b=v.nodeName;v[bi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=S}}else l==="body"&&_l(o.ownerDocument.body);l=y}while(l);Jr(s)}function $y(o,s){var l=o;o=0;do{var c=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(o===0)break;o--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||o++;l=c}while(l)}function Nh(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Nh(l),lr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}o.removeChild(l)}}function t1(o,s,l,c){for(;o.nodeType===1;){var y=l;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(c){if(!o[bi])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(v=o.getAttribute("rel"),v==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(v!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(v=o.getAttribute("src"),(v!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===v)return o}else return o;if(o=Kn(o.nextSibling),o===null)break}return null}function n1(o,s,l){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!l||(o=Kn(o.nextSibling),o===null))return null;return o}function Ky(o,s){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!s||(o=Kn(o.nextSibling),o===null))return null;return o}function Dh(o){return o.data==="$?"||o.data==="$~"}function Mh(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function i1(o,s){var l=o.ownerDocument;if(o.data==="$~")o._reactRetry=s;else if(o.data!=="$?"||l.readyState!=="loading")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),o._reactRetry=c}}function Kn(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return o}var Ph=null;function Qy(o){o=o.nextSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"||l==="/&"){if(s===0)return Kn(o.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}o=o.nextSibling}return null}function Xy(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return o;s--}else l!=="/$"&&l!=="/&"||s++}o=o.previousSibling}return null}function Wy(o,s,l){switch(s=vc(l),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function _l(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);lr(o)}var Qn=new Map,Zy=new Set;function Tc(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var po=ue.d;ue.d={f:o1,r:s1,D:r1,C:a1,L:l1,m:u1,X:f1,S:c1,M:d1};function o1(){var o=po.f(),s=fc();return o||s}function s1(o){var s=On(o);s!==null&&s.tag===5&&s.type==="form"?m0(s):po.r(o)}var Hr=typeof document>"u"?null:document;function jy(o,s,l){var c=Hr;if(c&&typeof s=="string"&&s){var y=_n(s);y='link[rel="'+o+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),Zy.has(y)||(Zy.add(y),o={rel:o,crossOrigin:l,href:s},c.querySelector(y)===null&&(s=c.createElement("link"),tn(s,"link",o),Mt(s),c.head.appendChild(s)))}}function r1(o){po.D(o),jy("dns-prefetch",o,null)}function a1(o,s){po.C(o,s),jy("preconnect",o,s)}function l1(o,s,l){po.L(o,s,l);var c=Hr;if(c&&o&&s){var y='link[rel="preload"][as="'+_n(s)+'"]';s==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+_n(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+_n(l.imageSizes)+'"]')):y+='[href="'+_n(o)+'"]';var v=y;switch(s){case"style":v=zr(o);break;case"script":v=Yr(o)}Qn.has(v)||(o=T({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:o,as:s},l),Qn.set(v,o),c.querySelector(y)!==null||s==="style"&&c.querySelector(vl(v))||s==="script"&&c.querySelector(Tl(v))||(s=c.createElement("link"),tn(s,"link",o),Mt(s),c.head.appendChild(s)))}}function u1(o,s){po.m(o,s);var l=Hr;if(l&&o){var c=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+_n(c)+'"][href="'+_n(o)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Yr(o)}if(!Qn.has(v)&&(o=T({rel:"modulepreload",href:o},s),Qn.set(v,o),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Tl(v)))return}c=l.createElement("link"),tn(c,"link",o),Mt(c),l.head.appendChild(c)}}}function c1(o,s,l){po.S(o,s,l);var c=Hr;if(c&&o){var y=Ii(c).hoistableStyles,v=zr(o);s=s||"default";var S=y.get(v);if(!S){var b={loading:0,preload:null};if(S=c.querySelector(vl(v)))b.loading=5;else{o=T({rel:"stylesheet",href:o,"data-precedence":s},l),(l=Qn.get(v))&&Vh(o,l);var U=S=c.createElement("link");Mt(U),tn(U,"link",o),U._p=new Promise(function(Y,j){U.onload=Y,U.onerror=j}),U.addEventListener("load",function(){b.loading|=1}),U.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Ec(S,s,c)}S={type:"stylesheet",instance:S,count:1,state:b},y.set(v,S)}}}function f1(o,s){po.X(o,s);var l=Hr;if(l&&o){var c=Ii(l).hoistableScripts,y=Yr(o),v=c.get(y);v||(v=l.querySelector(Tl(y)),v||(o=T({src:o,async:!0},s),(s=Qn.get(y))&&Uh(o,s),v=l.createElement("script"),Mt(v),tn(v,"link",o),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function d1(o,s){po.M(o,s);var l=Hr;if(l&&o){var c=Ii(l).hoistableScripts,y=Yr(o),v=c.get(y);v||(v=l.querySelector(Tl(y)),v||(o=T({src:o,async:!0,type:"module"},s),(s=Qn.get(y))&&Uh(o,s),v=l.createElement("script"),Mt(v),tn(v,"link",o),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function e_(o,s,l,c){var y=(y=De.current)?Tc(y):null;if(!y)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=zr(l.href),l=Ii(y).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){o=zr(l.href);var v=Ii(y).hoistableStyles,S=v.get(o);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(o,S),(v=y.querySelector(vl(o)))&&!v._p&&(S.instance=v,S.state.loading=5),Qn.has(o)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qn.set(o,l),v||h1(y,o,l,S.state))),s&&c===null)throw Error(i(528,""));return S}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Yr(l),l=Ii(y).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function zr(o){return'href="'+_n(o)+'"'}function vl(o){return'link[rel="stylesheet"]['+o+"]"}function t_(o){return T({},o,{"data-precedence":o.precedence,precedence:null})}function h1(o,s,l,c){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=o.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),tn(s,"link",l),Mt(s),o.head.appendChild(s))}function Yr(o){return'[src="'+_n(o)+'"]'}function Tl(o){return"script[async]"+o}function n_(o,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=o.querySelector('style[data-href~="'+_n(l.href)+'"]');if(c)return s.instance=c,Mt(c),c;var y=T({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(o.ownerDocument||o).createElement("style"),Mt(c),tn(c,"style",y),Ec(c,l.precedence,o),s.instance=c;case"stylesheet":y=zr(l.href);var v=o.querySelector(vl(y));if(v)return s.state.loading|=4,s.instance=v,Mt(v),v;c=t_(l),(y=Qn.get(y))&&Vh(c,y),v=(o.ownerDocument||o).createElement("link"),Mt(v);var S=v;return S._p=new Promise(function(b,U){S.onload=b,S.onerror=U}),tn(v,"link",c),s.state.loading|=4,Ec(v,l.precedence,o),s.instance=v;case"script":return v=Yr(l.src),(y=o.querySelector(Tl(v)))?(s.instance=y,Mt(y),y):(c=l,(y=Qn.get(v))&&(c=T({},l),Uh(c,y)),o=o.ownerDocument||o,y=o.createElement("script"),Mt(y),tn(y,"link",c),o.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Ec(c,l.precedence,o));return s.instance}function Ec(o,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,S=0;S<c.length;S++){var b=c[S];if(b.dataset.precedence===s)v=b;else if(v!==y)break}v?v.parentNode.insertBefore(o,v.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(o,s.firstChild))}function Vh(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function Uh(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var Ac=null;function i_(o,s,l){if(Ac===null){var c=new Map,y=Ac=new Map;y.set(l,c)}else y=Ac,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(o))return c;for(c.set(o,null),l=l.getElementsByTagName(o),y=0;y<l.length;y++){var v=l[y];if(!(v[bi]||v[Dt]||o==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var S=v.getAttribute(s)||"";S=o+S;var b=c.get(S);b?b.push(v):c.set(S,[v])}}return c}function o_(o,s,l){o=o.ownerDocument||o,o.head.insertBefore(l,s==="title"?o.querySelector("head > title"):null)}function p1(o,s,l){if(l===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return o=s.disabled,typeof s.precedence=="string"&&o==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function s_(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function m1(o,s,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=zr(c.href),v=s.querySelector(vl(y));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=Sc.bind(o),s.then(o,o)),l.state.loading|=4,l.instance=v,Mt(v);return}v=s.ownerDocument||s,c=t_(c),(y=Qn.get(y))&&Vh(c,y),v=v.createElement("link"),Mt(v);var S=v;S._p=new Promise(function(b,U){S.onload=b,S.onerror=U}),tn(v,"link",c),l.instance=v}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(o.count++,l=Sc.bind(o),s.addEventListener("load",l),s.addEventListener("error",l))}}var Lh=0;function g1(o,s){return o.stylesheets&&o.count===0&&Cc(o,o.stylesheets),0<o.count||0<o.imgCount?function(l){var c=setTimeout(function(){if(o.stylesheets&&Cc(o,o.stylesheets),o.unsuspend){var v=o.unsuspend;o.unsuspend=null,v()}},6e4+s);0<o.imgBytes&&Lh===0&&(Lh=62500*XC());var y=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Cc(o,o.stylesheets),o.unsuspend)){var v=o.unsuspend;o.unsuspend=null,v()}},(o.imgBytes>Lh?50:800)+s);return o.unsuspend=l,function(){o.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Cc(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var xc=null;function Cc(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,xc=new Map,s.forEach(y1,o),xc=null,Sc.call(o))}function y1(o,s){if(!(s.state.loading&4)){var l=xc.get(o);if(l)var c=l.get(null);else{l=new Map,xc.set(o,l);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var S=y[v];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),c=S)}c&&l.set(null,c)}y=s.instance,S=y.getAttribute("data-precedence"),v=l.get(S)||c,v===c&&l.set(null,y),l.set(S,y),this.count++,c=Sc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),s.state.loading|=4}}var El={$$typeof:W,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function _1(o,s,l,c,y,v,S,b,U){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xi(0),this.hiddenUpdates=xi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function r_(o,s,l,c,y,v,S,b,U,Y,j,ie){return o=new _1(o,s,l,S,U,Y,j,ie,b),s=1,v===!0&&(s|=24),v=Nn(3,null,null,s),o.current=v,v.stateNode=o,s=md(),s.refCount++,o.pooledCache=s,s.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:s},vd(v),o}function a_(o){return o?(o=Ar,o):Ar}function l_(o,s,l,c,y,v){y=a_(y),c.context===null?c.context=y:c.pendingContext=y,c=ko(s),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Oo(o,c,s),l!==null&&(xn(l,o,s),ja(l,o,s))}function u_(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<s?l:s}}function kh(o,s){u_(o,s),(o=o.alternate)&&u_(o,s)}function c_(o){if(o.tag===13||o.tag===31){var s=Vs(o,67108864);s!==null&&xn(s,o,67108864),kh(o,67108864)}}function f_(o){if(o.tag===13||o.tag===31){var s=Un();s=As(s);var l=Vs(o,s);l!==null&&xn(l,o,s),kh(o,s)}}var bc=!0;function v1(o,s,l,c){var y=$.T;$.T=null;var v=ue.p;try{ue.p=2,Oh(o,s,l,c)}finally{ue.p=v,$.T=y}}function T1(o,s,l,c){var y=$.T;$.T=null;var v=ue.p;try{ue.p=8,Oh(o,s,l,c)}finally{ue.p=v,$.T=y}}function Oh(o,s,l,c){if(bc){var y=Bh(c);if(y===null)xh(o,s,c,Rc,l),h_(o,c);else if(A1(y,o,s,l,c))c.stopPropagation();else if(h_(o,c),s&4&&-1<E1.indexOf(o)){for(;y!==null;){var v=On(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var S=Ai(v.pendingLanes);if(S!==0){var b=v;for(b.pendingLanes|=2,b.entangledLanes|=2;S;){var U=1<<31-xt(S);b.entanglements[1]|=U,S&=~U}Fi(v),(nt&6)===0&&(uc=fn()+500,ml(0))}}break;case 31:case 13:b=Vs(v,2),b!==null&&xn(b,v,2),fc(),kh(v,2)}if(v=Bh(c),v===null&&xh(o,s,c,Rc,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else xh(o,s,c,null,l)}}function Bh(o){return o=Bn(o),qh(o)}var Rc=null;function qh(o){if(Rc=null,o=Ri(o),o!==null){var s=a(o);if(s===null)o=null;else{var l=s.tag;if(l===13){if(o=u(s),o!==null)return o;o=null}else if(l===31){if(o=d(s),o!==null)return o;o=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return Rc=o,null}function d_(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_s()){case xa:return 2;case Ca:return 8;case Ao:case Jf:return 32;case su:return 268435456;default:return 32}default:return 32}}var Fh=!1,Qo=null,Xo=null,Wo=null,Al=new Map,Sl=new Map,Zo=[],E1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function h_(o,s){switch(o){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Xo=null;break;case"mouseover":case"mouseout":Wo=null;break;case"pointerover":case"pointerout":Al.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(s.pointerId)}}function xl(o,s,l,c,y,v){return o===null||o.nativeEvent!==v?(o={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},s!==null&&(s=On(s),s!==null&&c_(s)),o):(o.eventSystemFlags|=c,s=o.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),o)}function A1(o,s,l,c,y){switch(s){case"focusin":return Qo=xl(Qo,o,s,l,c,y),!0;case"dragenter":return Xo=xl(Xo,o,s,l,c,y),!0;case"mouseover":return Wo=xl(Wo,o,s,l,c,y),!0;case"pointerover":var v=y.pointerId;return Al.set(v,xl(Al.get(v)||null,o,s,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,Sl.set(v,xl(Sl.get(v)||null,o,s,l,c,y)),!0}return!1}function p_(o){var s=Ri(o.target);if(s!==null){var l=a(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){o.blockedOn=s,ni(o.priority,function(){f_(l)});return}}else if(s===31){if(s=d(l),s!==null){o.blockedOn=s,ni(o.priority,function(){f_(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ic(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var l=Bh(o.nativeEvent);if(l===null){l=o.nativeEvent;var c=new l.constructor(l.type,l);ka=c,l.target.dispatchEvent(c),ka=null}else return s=On(l),s!==null&&c_(s),o.blockedOn=l,!1;s.shift()}return!0}function m_(o,s,l){Ic(o)&&l.delete(s)}function S1(){Fh=!1,Qo!==null&&Ic(Qo)&&(Qo=null),Xo!==null&&Ic(Xo)&&(Xo=null),Wo!==null&&Ic(Wo)&&(Wo=null),Al.forEach(m_),Sl.forEach(m_)}function wc(o,s){o.blockedOn===s&&(o.blockedOn=null,Fh||(Fh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,S1)))}var Nc=null;function g_(o){Nc!==o&&(Nc=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Nc===o&&(Nc=null);for(var s=0;s<o.length;s+=3){var l=o[s],c=o[s+1],y=o[s+2];if(typeof c!="function"){if(qh(c||l)===null)continue;break}var v=On(l);v!==null&&(o.splice(s,3),s-=3,Bd(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function Jr(o){function s(U){return wc(U,o)}Qo!==null&&wc(Qo,o),Xo!==null&&wc(Xo,o),Wo!==null&&wc(Wo,o),Al.forEach(s),Sl.forEach(s);for(var l=0;l<Zo.length;l++){var c=Zo[l];c.blockedOn===o&&(c.blockedOn=null)}for(;0<Zo.length&&(l=Zo[0],l.blockedOn===null);)p_(l),l.blockedOn===null&&Zo.shift();if(l=(o.ownerDocument||o).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],S=y[zt]||null;if(typeof v=="function")S||g_(l);else if(S){var b=null;if(v&&v.hasAttribute("formAction")){if(y=v,S=v[zt]||null)b=S.formAction;else if(qh(y)!==null)continue}else b=S.action;typeof b=="function"?l[c+1]=b:(l.splice(c,3),c-=3),g_(l)}}}function y_(){function o(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function Gh(o){this._internalRoot=o}Dc.prototype.render=Gh.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=Un();l_(l,c,o,s,null,null)},Dc.prototype.unmount=Gh.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;l_(o.current,2,null,o,null,null),fc(),s[Ci]=null}};function Dc(o){this._internalRoot=o}Dc.prototype.unstable_scheduleHydration=function(o){if(o){var s=fu();o={blockedOn:null,target:o,priority:s};for(var l=0;l<Zo.length&&s!==0&&s<Zo[l].priority;l++);Zo.splice(l,0,o),l===0&&p_(o)}};var __=e.version;if(__!=="19.2.3")throw Error(i(527,__,"19.2.3"));ue.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=h(s),o=o!==null?_(o):null,o=o===null?null:o.stateNode,o};var x1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{ei=Mc.inject(x1),Xt=Mc}catch{}}return bl.createRoot=function(o,s){if(!r(o))throw Error(i(299));var l=!1,c="",y=C0,v=b0,S=R0;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(S=s.onRecoverableError)),s=r_(o,1,!1,null,null,l,c,null,y,v,S,y_),o[Ci]=s.current,Sh(o),new Gh(s)},bl.hydrateRoot=function(o,s,l){if(!r(o))throw Error(i(299));var c=!1,y="",v=C0,S=b0,b=R0,U=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(b=l.onRecoverableError),l.formState!==void 0&&(U=l.formState)),s=r_(o,1,!0,s,l??null,c,y,U,v,S,b,y_),s.context=a_(null),l=s.current,c=Un(),c=As(c),y=ko(c),y.callback=null,Oo(l,y,c),l=c,s.current.lanes=l,Ts(s,l),Fi(s),o[Ci]=s.current,Sh(o),new Dc(s)},bl.version="19.2.3",bl}var I_;function U1(){if(I_)return zh.exports;I_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zh.exports=V1(),zh.exports}var L1=U1();const k1=b1(L1);var Be=Qp();const w_=[{id:"1",images:["https://picsum.photos/seed/family1/800/600"],en:{title:"First Steps!",caption:"Juval was so proud helping Theo walk in the grass today."},es:{title:"Primeros Pasos!",caption:"Juval estaba tan orgulloso ayudando a Theo a caminar en el csped hoy."},date:new Date().toLocaleDateString(),author:"Dad",tags:["Family","Juval","Theo"]},{id:"2",images:["https://picsum.photos/seed/family2/800/600"],en:{title:"Snack Time",caption:"Theo discovered that blueberries are delicious, and mostly messy!"},es:{title:"Merienda",caption:"Theo descubri que los arndanos son deliciosos, y sobre todo manchan!"},date:new Date().toLocaleDateString(),author:"Mom",tags:["Daily","Theo"]}],Qh=({post:t,variant:e="small",lang:n,onDelete:i,onOpen:r})=>{const[a,u]=Be.useState(0),[d,g]=Be.useState(!1),[h,_]=Be.useState(1.333),[T,A]=Be.useState(null),[C,P]=Be.useState(null),V=Be.useRef(null),M=50,K=n==="es"?"Por":"By",ee=n==="es"?"Borrar Recuerdo?":"Delete Memory?",W=t[n],re=le=>{const{naturalWidth:Ce,naturalHeight:qe}=le.currentTarget;Ce&&qe&&_(Ce/qe)},fe=()=>{t.images.length>1&&u(le=>(le+1)%t.images.length)},ae=()=>{t.images.length>1&&u(le=>(le-1+t.images.length)%t.images.length)},N=le=>{le.stopPropagation(),fe()},w=le=>{le.stopPropagation(),ae()},I=le=>{P(null),A(le.targetTouches[0].clientX)},L=le=>{P(le.targetTouches[0].clientX)},k=()=>{if(!T||!C)return;const le=T-C,Ce=le>M,qe=le<-M;Ce?fe():qe&&ae()},F=le=>{le.preventDefault(),le.stopPropagation(),g(!d)},D=le=>{le.preventDefault(),le.stopPropagation(),i&&(i(t.id),g(!1))},ke=()=>{r&&!d&&r(t)},be=le=>{const Ce=le.toLowerCase();return Ce.includes("juval")?"bg-sky-400 text-white":Ce.includes("theo")?"bg-rose-400 text-white":Ce.includes("mom")||Ce.includes("mam")?"bg-rose-500 text-white":Ce.includes("dad")||Ce.includes("pap")?"bg-sky-600 text-white":"bg-amber-400 text-slate-900"},$=e==="large";return q.jsxs("div",{className:`bg-white cartoon-border rounded-[40px] overflow-hidden transition-all relative 
        ${$?"max-w-5xl mx-auto shadow-2xl mb-12":"hover:translate-y-[-8px] active:translate-y-[0px] flex flex-col shadow-xl"}
        ${d?"animate-[shake_0.5s_infinite]":""}
      `,children:[q.jsx("style",{children:`
        @keyframes shake {
          0%, 100% { transform: rotate(0deg); }
          25% { transform: rotate(0.8deg); }
          75% { transform: rotate(-0.8deg); }
        }
      `}),i&&q.jsx("div",{className:"absolute top-6 right-6 z-[80] flex items-center gap-3",children:d?q.jsxs("div",{className:"flex gap-2 animate-fade-in",children:[q.jsxs("button",{type:"button",onClick:D,className:"bg-red-500 cartoon-border px-6 py-3 rounded-2xl font-black text-white shadow-lg hover:scale-110 active:scale-95 transition-all text-base uppercase flex items-center gap-2",children:[" ",n==="es"?"S":"YES"]}),q.jsxs("button",{type:"button",onClick:F,className:"bg-slate-500 cartoon-border px-6 py-3 rounded-2xl font-black text-white shadow-lg hover:scale-110 active:scale-95 transition-all text-base uppercase flex items-center gap-2",children:[" ","NO"]})]}):q.jsx("button",{type:"button",onClick:F,className:"bg-white/95 backdrop-blur-md cartoon-border w-14 h-14 rounded-full flex items-center justify-center text-2xl font-black text-slate-800 shadow-[6px_6px_0px_#1e293b] hover:scale-125 hover:bg-red-500 hover:text-white active:scale-95 transition-all cursor-pointer group",title:n==="es"?"Borrar":"Delete",children:q.jsx("span",{className:"group-hover:animate-bounce",children:""})})}),q.jsxs("div",{onClick:ke,onTouchStart:I,onTouchMove:L,onTouchEnd:k,className:`relative group overflow-hidden flex items-center justify-center cursor-pointer transition-all duration-500 ease-in-out border-b-4 border-slate-800
          ${d?"opacity-40 grayscale-[0.5]":""}
        `,style:{aspectRatio:$?"auto":`${h}`,minHeight:$?"auto":"350px",background:"radial-gradient(circle, #e2e8f0 1.5px, transparent 1.5px)",backgroundSize:"20px 20px"},children:[q.jsx("img",{ref:V,src:t.images[a],alt:W.title,onLoad:re,className:`animate-fade-in transition-all duration-500 object-contain relative z-0 p-6 select-none
            ${$?"max-w-full max-h-[75vh] w-auto h-auto":"w-full h-full"}
          `,draggable:"false"},t.images[a]),t.images.length>1&&!d&&q.jsxs("div",{className:"absolute inset-0 z-10 pointer-events-none",children:[q.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center px-6 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto hidden md:flex",children:q.jsx("button",{type:"button",onClick:w,className:"bg-white border-[4px] border-slate-800 w-14 h-14 rounded-full flex items-center justify-center active:scale-90 shadow-[4px_4px_0px_#1e293b] transition-all hover:scale-110 hover:bg-amber-400",children:q.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-800",children:q.jsx("polyline",{points:"15 18 9 12 15 6"})})})}),q.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-6 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-auto hidden md:flex",children:q.jsx("button",{type:"button",onClick:N,className:"bg-white border-[4px] border-slate-800 w-14 h-14 rounded-full flex items-center justify-center active:scale-90 shadow-[4px_4px_0px_#1e293b] transition-all hover:scale-110 hover:bg-amber-400",children:q.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"6",strokeLinecap:"round",strokeLinejoin:"round",className:"text-slate-800",children:q.jsx("polyline",{points:"9 18 15 12 9 6"})})})}),q.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2 md:hidden",children:t.images.map((le,Ce)=>q.jsx("div",{className:`w-2.5 h-2.5 rounded-full border-2 border-slate-800 transition-all ${Ce===a?"bg-amber-400 scale-125":"bg-white"}`},Ce))})]}),q.jsxs("div",{className:"absolute inset-0 z-20 pointer-events-none",children:[q.jsx("div",{className:"absolute top-8 left-8 flex flex-col gap-4 items-start pointer-events-auto",children:q.jsx("div",{className:"bg-amber-400 cartoon-border px-6 py-2 rounded-2xl text-base font-black shadow-lg transform -rotate-3 select-none text-slate-900",children:t.date})}),!d&&q.jsxs("div",{className:"absolute bottom-8 right-8 bg-sky-400 cartoon-border px-6 py-2 rounded-2xl text-base font-black text-white shadow-lg transform rotate-3 select-none pointer-events-auto",children:[K," ",t.author==="Dad"?n==="es"?"Pap":"Dad":n==="es"?"Mam":"Mom"]})]})]}),q.jsxs("div",{onClick:ke,className:`p-10 md:p-12 flex-grow cursor-pointer ${$?"text-center":""} ${d?"opacity-30":""}`,children:[q.jsx("h3",{className:`${$?"text-5xl md:text-7xl":"text-3xl md:text-4xl"} font-black mb-6 text-slate-800 uppercase tracking-tighter leading-none`,children:W.title}),q.jsxs("p",{className:`${$?"text-2xl md:text-3xl":"text-xl"} text-slate-600 leading-relaxed mb-10 italic font-semibold max-w-4xl mx-auto`,children:['"',W.caption,'"']}),q.jsx("div",{className:`flex flex-wrap gap-4 ${$?"justify-center":""}`,children:t.tags.map(le=>q.jsxs("span",{className:`${be(le)} border-[3px] border-slate-800 px-5 py-2 rounded-2xl text-sm font-black uppercase tracking-tight shadow-[4px_4px_0px_#1e293b]`,children:["#",le]},le))})]}),d&&q.jsx("div",{className:"absolute inset-0 z-[75] flex items-center justify-center p-8 text-center pointer-events-none bg-slate-800/10 backdrop-blur-[4px]",children:q.jsxs("div",{className:"bg-white cartoon-border p-10 rounded-[50px] animate-float pointer-events-auto shadow-[20px_20px_0px_#1e293b]",children:[q.jsx("h4",{className:"text-4xl font-black text-slate-800 uppercase mb-4",children:ee}),q.jsx("p",{className:"text-slate-500 font-bold italic text-lg",children:n==="es"?"Este recuerdo saldr del lbum...":"This memory will leave the album..."})]})})]})},O1=({posts:t,activeFilter:e,onFilterChange:n,lang:i})=>{const r={all:t.length,juval:t.filter(d=>d.tags.includes("Juval")).length,theo:t.filter(d=>d.tags.includes("Theo")).length},a={all:i==="es"?"Todos":"All",juval:"Juval",theo:"Theo",title:i==="es"?"Nuestros lbumes":"Our Albums"},u=[{id:"all",label:a.all,icon:"",color:"bg-amber-400",count:r.all},{id:"juval",label:a.juval,icon:"",color:"bg-sky-400",count:r.juval},{id:"theo",label:a.theo,icon:"",color:"bg-rose-400",count:r.theo}];return q.jsxs("div",{className:"flex flex-col items-center gap-4 my-8 animate-fade-in",children:[q.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.3em]",children:a.title}),q.jsx("div",{className:"bg-white/40 backdrop-blur-sm cartoon-border p-2 rounded-[32px] flex gap-2",children:u.map(d=>q.jsxs("button",{onClick:()=>n(d.id),className:`
              flex items-center gap-3 px-6 py-2 rounded-2xl transition-all active:scale-95 group border-2
              ${e===d.id?d.color+" border-slate-800 shadow-[4px_4px_0px_#1e293b]":"bg-white border-transparent text-slate-400 hover:text-slate-600"}
            `,children:[q.jsx("span",{className:`text-xl transition-transform ${e===d.id?"scale-125":"group-hover:scale-110"}`,children:d.icon}),q.jsxs("div",{className:"flex flex-col items-start",children:[q.jsx("span",{className:`font-black text-sm uppercase ${e===d.id?"text-slate-900":""}`,children:d.label}),q.jsxs("span",{className:`text-[9px] font-bold opacity-60 ${e===d.id?"text-slate-800":""}`,children:[d.count," ",i==="es"?"Momentos":"Moments"]})]})]},d.id))})]})};var B1={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let q1,F1;function G1(){return{geminiUrl:q1,vertexUrl:F1}}function H1(t,e,n,i){var r,a;if(!(t!=null&&t.baseUrl)){const u=G1();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:n:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vo{}function he(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(t,e,n){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const d=u.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(t[d])){const g=t[d];if(Array.isArray(n))for(let h=0;h<g.length;h++){const _=g[h];p(_,e.slice(a+1),n[h])}else for(const h of g)p(h,e.slice(a+1),n)}return}else if(u.endsWith("[0]")){const d=u.slice(0,-3);d in t||(t[d]=[{}]);const g=t[d];p(g[0],e.slice(a+1),n);return}(!t[u]||typeof t[u]!="object")&&(t[u]={}),t=t[u]}const i=e[e.length-1],r=t[i];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function f(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let i=0;i<e.length;i++){if(typeof t!="object"||t===null)return n;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in t){const u=t[a];return Array.isArray(u)?u.map(d=>f(d,e.slice(i+1),n)):n}else return n}else t=t[r]}return t}catch(i){if(i instanceof TypeError)return n;throw i}}function z1(t,e){for(const[n,i]of Object.entries(e)){const r=n.split("."),a=i.split("."),u=new Set;let d=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){d=g;break}if(d!==-1&&a.length>d)for(let g=d;g<a.length;g++){const h=a[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}up(t,r,a,0,u)}}function up(t,e,n,i,r){if(i>=e.length||typeof t!="object"||t===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),d=t;if(u in d&&Array.isArray(d[u]))for(const g of d[u])up(g,e,n,i+1,r)}else if(a==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const u=t,d=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),g={};for(const h of d)g[h]=u[h];for(const[h,_]of Object.entries(g)){const T=[];for(const A of n.slice(i))A==="*"?T.push(h):T.push(A);p(u,T,_)}for(const h of d)delete u[h]}}else{const u=t;a in u&&up(u[a],e,n,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xp(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y1(t){const e={},n=f(t,["operationName"]);n!=null&&p(e,["operationName"],n);const i=f(t,["resourceName"]);return i!=null&&p(e,["_url","resourceName"],i),e}function J1(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],K1(u)),e}function $1(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],Q1(u)),e}function K1(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>X1(u))),p(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function Q1(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>W1(u))),p(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function X1(t){const e={},n=f(t,["video"]);return n!=null&&p(e,["video"],ib(n)),e}function W1(t){const e={},n=f(t,["_self"]);return n!=null&&p(e,["video"],ob(n)),e}function Z1(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function j1(t){const e={},n=f(t,["operationName"]);return n!=null&&p(e,["_url","operationName"],n),e}function eb(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],tb(u)),e}function tb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&p(e,["parent"],i);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function NE(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],nb(u)),e}function nb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&p(e,["parent"],i);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function ib(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const i=f(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],Xp(i));const r=f(t,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function ob(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],Xp(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var N_;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(N_||(N_={}));var D_;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(D_||(D_={}));var M_;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(M_||(M_={}));var gn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(gn||(gn={}));var P_;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(P_||(P_={}));var V_;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(V_||(V_={}));var U_;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(U_||(U_={}));var L_;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(L_||(L_={}));var k_;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(k_||(k_={}));var O_;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(O_||(O_={}));var B_;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(B_||(B_={}));var q_;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(q_||(q_={}));var F_;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(F_||(F_={}));var G_;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(G_||(G_={}));var H_;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(H_||(H_={}));var z_;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(z_||(z_={}));var Y_;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Y_||(Y_={}));var J_;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(J_||(J_={}));var $_;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})($_||($_={}));var ef;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(ef||(ef={}));var K_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(K_||(K_={}));var Q_;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Q_||(Q_={}));var X_;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(X_||(X_={}));var cp;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(cp||(cp={}));var W_;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(W_||(W_={}));var Z_;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Z_||(Z_={}));var j_;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(j_||(j_={}));var ev;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(ev||(ev={}));var tv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(tv||(tv={}));var nv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(nv||(nv={}));var iv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(iv||(iv={}));var ov;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(ov||(ov={}));var sv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(sv||(sv={}));var rv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(rv||(rv={}));var av;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(av||(av={}));var lv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(lv||(lv={}));var uv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(uv||(uv={}));var cv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cv||(cv={}));var fv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(fv||(fv={}));var dv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(dv||(dv={}));var hv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(hv||(hv={}));var pv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(pv||(pv={}));var mv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(mv||(mv={}));var gv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(gv||(gv={}));var yv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(yv||(yv={}));var _v;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(_v||(_v={}));var vv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(vv||(vv={}));var Tv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Tv||(Tv={}));var Ev;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ev||(Ev={}));var Av;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Av||(Av={}));var Sv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Sv||(Sv={}));var xv;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(xv||(xv={}));var Cv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Cv||(Cv={}));var bv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(bv||(bv={}));var Rv;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Rv||(Rv={}));var ea;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(ea||(ea={}));class fp{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Rl{get text(){var e,n,i,r,a,u,d,g;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const A of(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[C,P]of Object.entries(A))C!=="text"&&C!=="thought"&&C!=="thoughtSignature"&&(P!==null||P!==void 0)&&T.push(C);if(typeof A.text=="string"){if(typeof A.thought=="boolean"&&A.thought)continue;_=!0,h+=A.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,n,i,r,a,u,d,g;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)!==null&&g!==void 0?g:[]){for(const[A,C]of Object.entries(T))A!=="inlineData"&&(C!==null||C!==void 0)&&_.push(A);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,n,i,r,a,u,d,g;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,n,i,r,a,u,d,g,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,n,i,r,a,u,d,g,h;if(((r=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(d=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||d===void 0?void 0:d.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class Iv{}class wv{}class sb{}class rb{}class ab{}class lb{}class Nv{}class Dv{}class Mv{}class ub{}class tf{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new tf;let r;const a=e;return n?r=$1(a):r=J1(a),Object.assign(i,r),i}}class Pv{}class Vv{}class Uv{}class Lv{}class cb{}class fb{}class db{}class Wp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Wp,a=eb(e);return Object.assign(i,a),i}}class hb{}class pb{}class mb{}class kv{}class gb{get text(){var e,n,i;let r="",a=!1;const u=[];for(const d of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[g,h]of Object.entries(d))g!=="text"&&g!=="thought"&&h!==null&&u.push(g);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,r+=d.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,n,i;let r="";const a=[];for(const u of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[d,g]of Object.entries(u))d!=="inlineData"&&g!==null&&a.push(d);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class yb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Zp{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const i=new Zp,a=NE(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function et(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function DE(t,e){const n=et(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function ME(t){return Array.isArray(t)?t.map(e=>nf(e)):[nf(t)]}function nf(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function PE(t){const e=nf(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function VE(t){const e=nf(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ov(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function UE(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Ov(e)):[Ov(t)]}function dp(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Bv(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function qv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function cn(t){if(t==null)throw new Error("ContentUnion is required");return dp(t)?t:{role:"user",parts:UE(t)}}function jp(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=cn(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=cn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>cn(n)):[cn(e)]}function Zn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Bv(t)||qv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[cn(t)]}const e=[],n=[],i=dp(t[0]);for(const r of t){const a=dp(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(Bv(r)||qv(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return i||e.push({role:"user",parts:UE(n)}),e}function _b(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(gn).includes(n[0].toUpperCase())?n[0].toUpperCase():gn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(gn).includes(i.toUpperCase())?i.toUpperCase():gn.TYPE_UNSPECIFIED})}}function na(t){const e={},n=["items"],i=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&_b(t.type,e);for(const[u,d]of Object.entries(t))if(d!=null)if(u=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(gn).includes(d.toUpperCase())?d.toUpperCase():gn.TYPE_UNSPECIFIED}else if(n.includes(u))e[u]=na(d);else if(i.includes(u)){const g=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}g.push(na(h))}e[u]=g}else if(r.includes(u)){const g={};for(const[h,_]of Object.entries(d))g[h]=na(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=d}return e}function em(t){return na(t)}function tm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function nm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function pa(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=na(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=na(e.response));return t}function ma(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function vb(t,e,n,i=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function To(t,e){if(typeof e!="string")throw new Error("name must be a string");return vb(t,e,"cachedContents")}function LE(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function ms(t){return Xp(t)}function Tb(t){return t!=null&&typeof t=="object"&&"name"in t}function Eb(t){return t!=null&&typeof t=="object"&&"video"in t}function Ab(t){return t!=null&&typeof t=="object"&&"uri"in t}function kE(t){var e;let n;if(Tb(t)&&(n=t.name),!(Ab(t)&&(n=t.uri,n===void 0))&&!(Eb(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function OE(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function BE(t){for(const e of["models","tunedModels","publisherModels"])if(Sb(t,e))return t[e];return[]}function Sb(t,e){return t!==null&&typeof t=="object"&&e in t}function xb(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Cb(t,e={}){const n=[],i=new Set;for(const r of t){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=xb(r,e);u.functionDeclarations&&n.push(...u.functionDeclarations)}return{functionDeclarations:n}}function qE(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function bb(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function FE(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let a=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function ga(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function GE(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rb(t){const e={},n=f(t,["responsesFile"]);n!=null&&p(e,["fileName"],n);const i=f(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>aR(u))),p(e,["inlinedResponses"],a)}const r=f(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["inlinedEmbedContentResponses"],a)}return e}function Ib(t){const e={},n=f(t,["predictionsFormat"]);n!=null&&p(e,["format"],n);const i=f(t,["gcsDestination","outputUriPrefix"]);i!=null&&p(e,["gcsUri"],i);const r=f(t,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function wb(t){const e={},n=f(t,["format"]);n!=null&&p(e,["predictionsFormat"],n);const i=f(t,["gcsUri"]);i!=null&&p(e,["gcsDestination","outputUriPrefix"],i);const r=f(t,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Jc(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata","displayName"]);i!=null&&p(e,["displayName"],i);const r=f(t,["metadata","state"]);r!=null&&p(e,["state"],GE(r));const a=f(t,["metadata","createTime"]);a!=null&&p(e,["createTime"],a);const u=f(t,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const d=f(t,["metadata","updateTime"]);d!=null&&p(e,["updateTime"],d);const g=f(t,["metadata","model"]);g!=null&&p(e,["model"],g);const h=f(t,["metadata","output"]);return h!=null&&p(e,["dest"],Rb(FE(h))),e}function hp(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=f(t,["state"]);r!=null&&p(e,["state"],GE(r));const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["createTime"]);u!=null&&p(e,["createTime"],u);const d=f(t,["startTime"]);d!=null&&p(e,["startTime"],d);const g=f(t,["endTime"]);g!=null&&p(e,["endTime"],g);const h=f(t,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=f(t,["model"]);_!=null&&p(e,["model"],_);const T=f(t,["inputConfig"]);T!=null&&p(e,["src"],Nb(T));const A=f(t,["outputConfig"]);A!=null&&p(e,["dest"],Ib(FE(A)));const C=f(t,["completionStats"]);return C!=null&&p(e,["completionStats"],C),e}function Nb(t){const e={},n=f(t,["instancesFormat"]);n!=null&&p(e,["format"],n);const i=f(t,["gcsSource","uris"]);i!=null&&p(e,["gcsUri"],i);const r=f(t,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function Db(t,e){const n={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=f(e,["fileName"]);i!=null&&p(n,["fileName"],i);const r=f(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>rR(t,u))),p(n,["requests","requests"],a)}return n}function Mb(t){const e={},n=f(t,["format"]);n!=null&&p(e,["instancesFormat"],n);const i=f(t,["gcsUri"]);i!=null&&p(e,["gcsSource","uris"],i);const r=f(t,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),f(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Pb(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Vb(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],ga(t,i)),n}function Ub(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],ga(t,i)),n}function Lb(t){const e={},n=f(t,["content"]);n!=null&&p(e,["content"],n);const i=f(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],kb(i));const r=f(t,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const a=f(t,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const g=f(t,["index"]);g!=null&&p(e,["index"],g);const h=f(t,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=f(t,["safetyRatings"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(C=>C)),p(e,["safetyRatings"],A)}const T=f(t,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function kb(t){const e={},n=f(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function HE(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>pR(a))),p(e,["parts"],r)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function Ob(t,e){const n={},i=f(t,["displayName"]);if(e!==void 0&&i!=null&&p(e,["batch","displayName"],i),f(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Bb(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=f(t,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],wb(bb(r))),n}function Fv(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["src"]);r!=null&&p(n,["batch","inputConfig"],Db(t,qE(t,r)));const a=f(e,["config"]);return a!=null&&Ob(a,n),n}function qb(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["model"],et(t,i));const r=f(e,["src"]);r!=null&&p(n,["inputConfig"],Mb(qE(t,r)));const a=f(e,["config"]);return a!=null&&Bb(a,n),n}function Fb(t,e){const n={},i=f(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["batch","displayName"],i),n}function Gb(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["src"]);r!=null&&p(n,["batch","inputConfig"],Qb(t,r));const a=f(e,["config"]);return a!=null&&Fb(a,n),n}function Hb(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],ga(t,i)),n}function zb(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],ga(t,i)),n}function Yb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);return a!=null&&p(e,["error"],a),e}function Jb(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);return a!=null&&p(e,["error"],a),e}function $b(t,e){const n={},i=f(e,["contents"]);if(i!=null){let a=jp(t,i);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["requests[]","request","content"],a)}const r=f(e,["config"]);return r!=null&&(p(n,["_self"],Kb(r,n)),z1(n,{"requests[].*":"requests[].request.*"})),n}function Kb(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=f(t,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Qb(t,e){const n={},i=f(e,["fileName"]);i!=null&&p(n,["file_name"],i);const r=f(e,["inlinedRequests"]);return r!=null&&p(n,["requests"],$b(t,r)),n}function Xb(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Wb(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Zb(t){const e={},n=f(t,["mode"]);n!=null&&p(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function jb(t,e,n){const i={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],HE(cn(r)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const A=f(e,["logprobs"]);A!=null&&p(i,["logprobs"],A);const C=f(e,["presencePenalty"]);C!=null&&p(i,["presencePenalty"],C);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const V=f(e,["seed"]);V!=null&&p(i,["seed"],V);const M=f(e,["responseMimeType"]);M!=null&&p(i,["responseMimeType"],M);const K=f(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],em(K));const ee=f(e,["responseJsonSchema"]);if(ee!=null&&p(i,["responseJsonSchema"],ee),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(n!==void 0&&W!=null){let D=W;Array.isArray(D)&&(D=D.map(ke=>mR(ke))),p(n,["safetySettings"],D)}const re=f(e,["tools"]);if(n!==void 0&&re!=null){let D=ma(re);Array.isArray(D)&&(D=D.map(ke=>yR(pa(ke)))),p(n,["tools"],D)}const fe=f(e,["toolConfig"]);if(n!==void 0&&fe!=null&&p(n,["toolConfig"],gR(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);n!==void 0&&ae!=null&&p(n,["cachedContent"],To(t,ae));const N=f(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const w=f(e,["mediaResolution"]);w!=null&&p(i,["mediaResolution"],w);const I=f(e,["speechConfig"]);if(I!=null&&p(i,["speechConfig"],tm(I)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const k=f(e,["imageConfig"]);k!=null&&p(i,["imageConfig"],sR(k));const F=f(e,["enableEnhancedCivicAnswers"]);return F!=null&&p(i,["enableEnhancedCivicAnswers"],F),i}function eR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>Lb(h))),p(e,["candidates"],g)}const r=f(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const a=f(t,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(t,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function tR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],ga(t,i)),n}function nR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],ga(t,i)),n}function iR(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function oR(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function sR(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=f(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function rR(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["request","model"],et(t,i));const r=f(e,["contents"]);if(r!=null){let d=Zn(r);Array.isArray(d)&&(d=d.map(g=>HE(g))),p(n,["request","contents"],d)}const a=f(e,["metadata"]);a!=null&&p(n,["metadata"],a);const u=f(e,["config"]);return u!=null&&p(n,["request","generationConfig"],jb(t,u,f(n,["request"],{}))),n}function aR(t){const e={},n=f(t,["response"]);n!=null&&p(e,["response"],eR(n));const i=f(t,["error"]);return i!=null&&p(e,["error"],i),e}function lR(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),f(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function uR(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const a=f(t,["filter"]);return e!==void 0&&a!=null&&p(e,["_query","filter"],a),n}function cR(t){const e={},n=f(t,["config"]);return n!=null&&lR(n,e),e}function fR(t){const e={},n=f(t,["config"]);return n!=null&&uR(n,e),e}function dR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Jc(u))),p(e,["batchJobs"],a)}return e}function hR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>hp(u))),p(e,["batchJobs"],a)}return e}function pR(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],Xb(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],Wb(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&p(e,["inlineData"],Pb(g));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const _=f(t,["thought"]);_!=null&&p(e,["thought"],_);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const A=f(t,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function mR(t){const e={},n=f(t,["category"]);if(n!=null&&p(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function gR(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],Zb(n));const i=f(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function yR(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=f(t,["computerUse"]);r!=null&&p(e,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],iR(d));const g=f(t,["googleSearch"]);g!=null&&p(e,["googleSearch"],oR(g));const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var mo;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(mo||(mo={}));class er{constructor(e,n,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,r)}init(e,n,i){var r,a;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=n.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _R extends vo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new er(mo.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=Fv(this.apiClient,e),i=n._url,r=he("{model}:batchGenerateContent",i),d=n.batch.inputConfig.requests,g=d.requests,h=[];for(const _ of g){const T=Object.assign({},_);if(T.systemInstruction){const A=T.systemInstruction;delete T.systemInstruction;const C=T.request;C.systemInstruction=A,T.request=C}h.push(T)}return d.requests=h,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(u)i.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=qb(this.apiClient,e);return d=he("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>hp(_))}else{const h=Fv(this.apiClient,e);return d=he("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Jc(_))}}async createEmbeddingsInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Gb(this.apiClient,e);return a=he("{model}:asyncBatchEmbedContent",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>Jc(g))}}async get(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=nR(this.apiClient,e);return d=he("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>hp(_))}else{const h=tR(this.apiClient,e);return d=he("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>Jc(_))}}async cancel(e){var n,i,r,a;let u="",d={};if(this.apiClient.isVertexAI()){const g=Ub(this.apiClient,e);u=he("batchPredictionJobs/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const g=Vb(this.apiClient,e);u=he("batches/{name}:cancel",g._url),d=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:d,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=fR(e);return d=he("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=hR(_),A=new kv;return Object.assign(A,T),A})}else{const h=cR(e);return d=he("batches",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=dR(_),A=new kv;return Object.assign(A,T),A})}}async delete(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=zb(this.apiClient,e);return d=he("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>Jb(_))}else{const h=Hb(this.apiClient,e);return d=he("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>Yb(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vR(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Gv(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>GR(a))),p(e,["parts"],r)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function TR(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const a=f(t,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let _=Zn(u);Array.isArray(_)&&(_=_.map(T=>Gv(T))),p(e,["contents"],_)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],Gv(cn(d)));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>zR(T))),p(e,["tools"],_)}const h=f(t,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],HR(h)),f(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function ER(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=f(t,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const a=f(t,["displayName"]);e!==void 0&&a!=null&&p(e,["displayName"],a);const u=f(t,["contents"]);if(e!==void 0&&u!=null){let T=Zn(u);Array.isArray(T)&&(T=T.map(A=>A)),p(e,["contents"],T)}const d=f(t,["systemInstruction"]);e!==void 0&&d!=null&&p(e,["systemInstruction"],cn(d));const g=f(t,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(A=>YR(A))),p(e,["tools"],T)}const h=f(t,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=f(t,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),n}function AR(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["model"],DE(t,i));const r=f(e,["config"]);return r!=null&&TR(r,n),n}function SR(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["model"],DE(t,i));const r=f(e,["config"]);return r!=null&&ER(r,n),n}function xR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],To(t,i)),n}function CR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],To(t,i)),n}function bR(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function RR(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function IR(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function wR(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NR(t){const e={},n=f(t,["mode"]);n!=null&&p(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function DR(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&p(e,["description"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const r=f(t,["parameters"]);r!=null&&p(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&p(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function MR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],To(t,i)),n}function PR(t,e){const n={},i=f(e,["name"]);return i!=null&&p(n,["_url","name"],To(t,i)),n}function VR(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function UR(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function LR(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function kR(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function OR(t){const e={},n=f(t,["config"]);return n!=null&&LR(n,e),e}function BR(t){const e={},n=f(t,["config"]);return n!=null&&kR(n,e),e}function qR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function FR(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["cachedContents"],a)}return e}function GR(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],IR(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],wR(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&p(e,["inlineData"],vR(g));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const _=f(t,["thought"]);_!=null&&p(e,["thought"],_);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const A=f(t,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function HR(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],NR(n));const i=f(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function zR(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=f(t,["computerUse"]);r!=null&&p(e,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],VR(d));const g=f(t,["googleSearch"]);g!=null&&p(e,["googleSearch"],UR(g));const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function YR(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let T=n;Array.isArray(T)&&(T=T.map(A=>DR(A))),p(e,["functionDeclarations"],T)}const i=f(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=f(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const a=f(t,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const g=f(t,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=f(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(t,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function JR(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function $R(t,e){const n={},i=f(t,["ttl"]);e!==void 0&&i!=null&&p(e,["ttl"],i);const r=f(t,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),n}function KR(t,e){const n={},i=f(e,["name"]);i!=null&&p(n,["_url","name"],To(t,i));const r=f(e,["config"]);return r!=null&&JR(r,n),n}function QR(t,e){const n={},i=f(e,["name"]);i!=null&&p(n,["_url","name"],To(t,i));const r=f(e,["config"]);return r!=null&&$R(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XR extends vo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new er(mo.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=SR(this.apiClient,e);return d=he("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=AR(this.apiClient,e);return d=he("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=PR(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=MR(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=CR(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=RR(_),A=new Uv;return Object.assign(A,T),A})}else{const h=xR(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=bR(_),A=new Uv;return Object.assign(A,T),A})}}async update(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=QR(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=KR(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=BR(e);return d=he("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=FR(_),A=new Lv;return Object.assign(A,T),A})}else{const h=OR(e);return d=he("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=qR(_),A=new Lv;return Object.assign(A,T),A})}}}function of(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Hv(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function we(t){return this instanceof we?(this.v=t,this):new we(t)}function mi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(C){return function(P){return Promise.resolve(P).then(C,T)}}function d(C,P){i[C]&&(r[C]=function(V){return new Promise(function(M,K){a.push([C,V,M,K])>1||g(C,V)})},P&&(r[C]=P(r[C])))}function g(C,P){try{h(i[C](P))}catch(V){A(a[0][3],V)}}function h(C){C.value instanceof we?Promise.resolve(C.value.v).then(_,T):A(a[0][2],C)}function _(C){g("next",C)}function T(C){g("throw",C)}function A(C,P){C(P),a.shift(),a.length&&g(a[0][0],a[0][1])}}function gi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Hv=="function"?Hv(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(a){n[a]=t[a]&&function(u){return new Promise(function(d,g){u=t[a](u),r(d,g,u.done,u.value)})}}function r(a,u,d,g){Promise.resolve(g).then(function(h){a({value:h,done:d})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function WR(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:zE(n)}function zE(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function ZR(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function zv(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const r=[];let a=!0;for(;i<n&&t[i].role==="model";)r.push(t[i]),a&&!zE(t[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class jR{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new eI(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class eI{constructor(e,n,i,r={},a=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),ZR(a)}async sendMessage(e){var n;await this.sendPromise;const i=cn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var a,u,d;const g=await r,h=(u=(a=g.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let A=[];_!=null&&(A=(d=_.slice(T))!==null&&d!==void 0?d:[]);const C=h?[h]:[];this.recordHistory(i,C,A)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const i=cn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const n=e?zv(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return mi(this,arguments,function*(){var r,a,u,d,g,h;const _=[];try{for(var T=!0,A=gi(e),C;C=yield we(A.next()),r=C.done,!r;T=!0){d=C.value,T=!1;const P=d;if(WR(P)){const V=(h=(g=P.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;V!==void 0&&_.push(V)}yield yield we(P)}}catch(P){a={error:P}}finally{try{!T&&!r&&(u=A.return)&&(yield we(u.call(A)))}finally{if(a)throw a.error}}this.recordHistory(n,_)})}recordHistory(e,n,i){let r=[];n.length>0&&n.every(a=>a.role!==void 0)?r=n:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...zv(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Sf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tI(t){const e={},n=f(t,["file"]);return n!=null&&p(e,["file"],n),e}function nI(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function iI(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],kE(n)),e}function oI(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function sI(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","file"],kE(n)),e}function rI(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function aI(t){const e={},n=f(t,["config"]);return n!=null&&rI(n,e),e}function lI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uI extends vo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new er(mo.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=aI(e);return a=he("files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=lI(g),_=new hb;return Object.assign(_,h),_})}}async createInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=tI(e);return a=he("upload/v1beta/files",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=nI(g),_=new pb;return Object.assign(_,h),_})}}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=sI(e);return a=he("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=iI(e);return a=he("files/{file}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=oI(g),_=new mb;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $c(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function cI(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>bI(a))),p(e,["parts"],r)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function fI(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function dI(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function hI(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&p(e,["description"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const r=f(t,["parameters"]);r!=null&&p(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&p(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function pI(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=f(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=f(t,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const a=f(t,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(t,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const g=f(t,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=f(t,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=f(t,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=f(t,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const A=f(t,["responseLogprobs"]);A!=null&&p(e,["responseLogprobs"],A);const C=f(t,["responseMimeType"]);C!=null&&p(e,["responseMimeType"],C);const P=f(t,["responseModalities"]);P!=null&&p(e,["responseModalities"],P);const V=f(t,["responseSchema"]);V!=null&&p(e,["responseSchema"],V);const M=f(t,["routingConfig"]);M!=null&&p(e,["routingConfig"],M);const K=f(t,["seed"]);K!=null&&p(e,["seed"],K);const ee=f(t,["speechConfig"]);ee!=null&&p(e,["speechConfig"],ee);const W=f(t,["stopSequences"]);W!=null&&p(e,["stopSequences"],W);const re=f(t,["temperature"]);re!=null&&p(e,["temperature"],re);const fe=f(t,["thinkingConfig"]);fe!=null&&p(e,["thinkingConfig"],fe);const ae=f(t,["topK"]);ae!=null&&p(e,["topK"],ae);const N=f(t,["topP"]);if(N!=null&&p(e,["topP"],N),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mI(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function gI(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function yI(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(t,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],nm(T));const A=f(t,["thinkingConfig"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","thinkingConfig"],A);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const P=f(t,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],cI(cn(P)));const V=f(t,["tools"]);if(e!==void 0&&V!=null){let ae=ma(V);Array.isArray(ae)&&(ae=ae.map(N=>II(pa(N)))),p(e,["setup","tools"],ae)}const M=f(t,["sessionResumption"]);e!==void 0&&M!=null&&p(e,["setup","sessionResumption"],RI(M));const K=f(t,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const ee=f(t,["outputAudioTranscription"]);e!==void 0&&ee!=null&&p(e,["setup","outputAudioTranscription"],ee);const W=f(t,["realtimeInputConfig"]);e!==void 0&&W!=null&&p(e,["setup","realtimeInputConfig"],W);const re=f(t,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const fe=f(t,["proactivity"]);if(e!==void 0&&fe!=null&&p(e,["setup","proactivity"],fe),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function _I(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],pI(i));const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(t,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],nm(T));const A=f(t,["thinkingConfig"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","thinkingConfig"],A);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const P=f(t,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],cn(P));const V=f(t,["tools"]);if(e!==void 0&&V!=null){let N=ma(V);Array.isArray(N)&&(N=N.map(w=>wI(pa(w)))),p(e,["setup","tools"],N)}const M=f(t,["sessionResumption"]);e!==void 0&&M!=null&&p(e,["setup","sessionResumption"],M);const K=f(t,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const ee=f(t,["outputAudioTranscription"]);e!==void 0&&ee!=null&&p(e,["setup","outputAudioTranscription"],ee);const W=f(t,["realtimeInputConfig"]);e!==void 0&&W!=null&&p(e,["setup","realtimeInputConfig"],W);const re=f(t,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const fe=f(t,["proactivity"]);e!==void 0&&fe!=null&&p(e,["setup","proactivity"],fe);const ae=f(t,["explicitVadSignal"]);return e!==void 0&&ae!=null&&p(e,["setup","explicitVadSignal"],ae),n}function vI(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["setup","model"],et(t,i));const r=f(e,["config"]);return r!=null&&p(n,["config"],yI(r,n)),n}function TI(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["setup","model"],et(t,i));const r=f(e,["config"]);return r!=null&&p(n,["config"],_I(r,n)),n}function EI(t){const e={},n=f(t,["musicGenerationConfig"]);return n!=null&&p(e,["musicGenerationConfig"],n),e}function AI(t){const e={},n=f(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["weightedPrompts"],i)}return e}function SI(t){const e={},n=f(t,["media"]);if(n!=null){let h=ME(n);Array.isArray(h)&&(h=h.map(_=>$c(_))),p(e,["mediaChunks"],h)}const i=f(t,["audio"]);i!=null&&p(e,["audio"],$c(VE(i)));const r=f(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const a=f(t,["video"]);a!=null&&p(e,["video"],$c(PE(a)));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&p(e,["activityStart"],d);const g=f(t,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function xI(t){const e={},n=f(t,["media"]);if(n!=null){let h=ME(n);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const i=f(t,["audio"]);i!=null&&p(e,["audio"],VE(i));const r=f(t,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const a=f(t,["video"]);a!=null&&p(e,["video"],PE(a));const u=f(t,["text"]);u!=null&&p(e,["text"],u);const d=f(t,["activityStart"]);d!=null&&p(e,["activityStart"],d);const g=f(t,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function CI(t){const e={},n=f(t,["setupComplete"]);n!=null&&p(e,["setupComplete"],n);const i=f(t,["serverContent"]);i!=null&&p(e,["serverContent"],i);const r=f(t,["toolCall"]);r!=null&&p(e,["toolCall"],r);const a=f(t,["toolCallCancellation"]);a!=null&&p(e,["toolCallCancellation"],a);const u=f(t,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],NI(u));const d=f(t,["goAway"]);d!=null&&p(e,["goAway"],d);const g=f(t,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const h=f(t,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function bI(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],fI(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],dI(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&p(e,["inlineData"],$c(g));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const _=f(t,["thought"]);_!=null&&p(e,["thought"],_);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const A=f(t,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function RI(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function II(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=f(t,["computerUse"]);r!=null&&p(e,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],mI(d));const g=f(t,["googleSearch"]);g!=null&&p(e,["googleSearch"],gI(g));const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function wI(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let T=n;Array.isArray(T)&&(T=T.map(A=>hI(A))),p(e,["functionDeclarations"],T)}const i=f(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=f(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const a=f(t,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const g=f(t,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=f(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(t,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function NI(t){const e={},n=f(t,["promptTokenCount"]);n!=null&&p(e,["promptTokenCount"],n);const i=f(t,["cachedContentTokenCount"]);i!=null&&p(e,["cachedContentTokenCount"],i);const r=f(t,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const a=f(t,["toolUsePromptTokenCount"]);a!=null&&p(e,["toolUsePromptTokenCount"],a);const u=f(t,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const d=f(t,["totalTokenCount"]);d!=null&&p(e,["totalTokenCount"],d);const g=f(t,["promptTokensDetails"]);if(g!=null){let C=g;Array.isArray(C)&&(C=C.map(P=>P)),p(e,["promptTokensDetails"],C)}const h=f(t,["cacheTokensDetails"]);if(h!=null){let C=h;Array.isArray(C)&&(C=C.map(P=>P)),p(e,["cacheTokensDetails"],C)}const _=f(t,["candidatesTokensDetails"]);if(_!=null){let C=_;Array.isArray(C)&&(C=C.map(P=>P)),p(e,["responseTokensDetails"],C)}const T=f(t,["toolUsePromptTokensDetails"]);if(T!=null){let C=T;Array.isArray(C)&&(C=C.map(P=>P)),p(e,["toolUsePromptTokensDetails"],C)}const A=f(t,["trafficType"]);return A!=null&&p(e,["trafficType"],A),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DI(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function MI(t){const e={},n=f(t,["content"]);n!=null&&p(e,["content"],n);const i=f(t,["citationMetadata"]);i!=null&&p(e,["citationMetadata"],PI(i));const r=f(t,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const a=f(t,["finishReason"]);a!=null&&p(e,["finishReason"],a);const u=f(t,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const d=f(t,["groundingMetadata"]);d!=null&&p(e,["groundingMetadata"],d);const g=f(t,["index"]);g!=null&&p(e,["index"],g);const h=f(t,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=f(t,["safetyRatings"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(C=>C)),p(e,["safetyRatings"],A)}const T=f(t,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function PI(t){const e={},n=f(t,["citationSources"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>r)),p(e,["citations"],i)}return e}function VI(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["contents"]);if(r!=null){let a=Zn(r);Array.isArray(a)&&(a=a.map(u=>u)),p(n,["contents"],a)}return n}function UI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),p(e,["tokensInfo"],r)}return e}function LI(t){const e={},n=f(t,["values"]);n!=null&&p(e,["values"],n);const i=f(t,["statistics"]);return i!=null&&p(e,["statistics"],kI(i)),e}function kI(t){const e={},n=f(t,["truncated"]);n!=null&&p(e,["truncated"],n);const i=f(t,["token_count"]);return i!=null&&p(e,["tokenCount"],i),e}function xf(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>Jw(a))),p(e,["parts"],r)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function OI(t){const e={},n=f(t,["controlType"]);n!=null&&p(e,["controlType"],n);const i=f(t,["enableControlImageComputation"]);return i!=null&&p(e,["computeControl"],i),e}function BI(t){const e={};if(f(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function qI(t,e){const n={},i=f(t,["systemInstruction"]);e!==void 0&&i!=null&&p(e,["systemInstruction"],cn(i));const r=f(t,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(d=>KE(d))),p(e,["tools"],u)}const a=f(t,["generationConfig"]);return e!==void 0&&a!=null&&p(e,["generationConfig"],Dw(a)),n}function FI(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["contents"]);if(r!=null){let u=Zn(r);Array.isArray(u)&&(u=u.map(d=>xf(d))),p(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&BI(a),n}function GI(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["contents"]);if(r!=null){let u=Zn(r);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&qI(a,n),n}function HI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);i!=null&&p(e,["totalTokens"],i);const r=f(t,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function zI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["totalTokens"]);return i!=null&&p(e,["totalTokens"],i),e}function YI(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],et(t,i)),n}function JI(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],et(t,i)),n}function $I(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function KI(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}function QI(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const g=f(t,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=f(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const A=f(t,["includeRaiReason"]);e!==void 0&&A!=null&&p(e,["parameters","includeRaiReason"],A);const C=f(t,["language"]);e!==void 0&&C!=null&&p(e,["parameters","language"],C);const P=f(t,["outputMimeType"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","mimeType"],P);const V=f(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","compressionQuality"],V);const M=f(t,["addWatermark"]);e!==void 0&&M!=null&&p(e,["parameters","addWatermark"],M);const K=f(t,["labels"]);e!==void 0&&K!=null&&p(e,["labels"],K);const ee=f(t,["editMode"]);e!==void 0&&ee!=null&&p(e,["parameters","editMode"],ee);const W=f(t,["baseSteps"]);return e!==void 0&&W!=null&&p(e,["parameters","editConfig","baseSteps"],W),n}function XI(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const a=f(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(g=>Zw(g))),p(n,["instances[0]","referenceImages"],d)}const u=f(e,["config"]);return u!=null&&QI(u,n),n}function WI(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Cf(a))),p(e,["generatedImages"],r)}return e}function ZI(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&p(e,["requests[]","taskType"],i);const r=f(t,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const a=f(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&p(e,["requests[]","outputDimensionality"],a),f(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function jI(t,e){const n={},i=f(t,["taskType"]);e!==void 0&&i!=null&&p(e,["instances[]","task_type"],i);const r=f(t,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const a=f(t,["outputDimensionality"]);e!==void 0&&a!=null&&p(e,["parameters","outputDimensionality"],a);const u=f(t,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const d=f(t,["autoTruncate"]);return e!==void 0&&d!=null&&p(e,["parameters","autoTruncate"],d),n}function ew(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["contents"]);if(r!=null){let d=jp(t,r);Array.isArray(d)&&(d=d.map(g=>g)),p(n,["requests[]","content"],d)}const a=f(e,["config"]);a!=null&&ZI(a,n);const u=f(e,["model"]);return u!==void 0&&p(n,["requests[]","model"],et(t,u)),n}function tw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["contents"]);if(r!=null){let u=jp(t,r);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["instances[]","content"],u)}const a=f(e,["config"]);return a!=null&&jI(a,n),n}function nw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["embeddings"],a)}const r=f(t,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function iw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>LI(u))),p(e,["embeddings"],a)}const r=f(t,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function ow(t){const e={},n=f(t,["endpoint"]);n!=null&&p(e,["name"],n);const i=f(t,["deployedModelId"]);return i!=null&&p(e,["deployedModelId"],i),e}function sw(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function rw(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aw(t){const e={},n=f(t,["mode"]);n!=null&&p(e,["mode"],n);const i=f(t,["allowedFunctionNames"]);if(i!=null&&p(e,["allowedFunctionNames"],i),f(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function lw(t){const e={};if(f(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=f(t,["description"]);n!=null&&p(e,["description"],n);const i=f(t,["name"]);i!=null&&p(e,["name"],i);const r=f(t,["parameters"]);r!=null&&p(e,["parameters"],r);const a=f(t,["parametersJsonSchema"]);a!=null&&p(e,["parametersJsonSchema"],a);const u=f(t,["response"]);u!=null&&p(e,["response"],u);const d=f(t,["responseJsonSchema"]);return d!=null&&p(e,["responseJsonSchema"],d),e}function uw(t,e,n){const i={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],xf(cn(r)));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const A=f(e,["logprobs"]);A!=null&&p(i,["logprobs"],A);const C=f(e,["presencePenalty"]);C!=null&&p(i,["presencePenalty"],C);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const V=f(e,["seed"]);V!=null&&p(i,["seed"],V);const M=f(e,["responseMimeType"]);M!=null&&p(i,["responseMimeType"],M);const K=f(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],em(K));const ee=f(e,["responseJsonSchema"]);if(ee!=null&&p(i,["responseJsonSchema"],ee),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(n!==void 0&&W!=null){let D=W;Array.isArray(D)&&(D=D.map(ke=>jw(ke))),p(n,["safetySettings"],D)}const re=f(e,["tools"]);if(n!==void 0&&re!=null){let D=ma(re);Array.isArray(D)&&(D=D.map(ke=>r2(pa(ke)))),p(n,["tools"],D)}const fe=f(e,["toolConfig"]);if(n!==void 0&&fe!=null&&p(n,["toolConfig"],s2(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ae=f(e,["cachedContent"]);n!==void 0&&ae!=null&&p(n,["cachedContent"],To(t,ae));const N=f(e,["responseModalities"]);N!=null&&p(i,["responseModalities"],N);const w=f(e,["mediaResolution"]);w!=null&&p(i,["mediaResolution"],w);const I=f(e,["speechConfig"]);if(I!=null&&p(i,["speechConfig"],tm(I)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=f(e,["thinkingConfig"]);L!=null&&p(i,["thinkingConfig"],L);const k=f(e,["imageConfig"]);k!=null&&p(i,["imageConfig"],Lw(k));const F=f(e,["enableEnhancedCivicAnswers"]);return F!=null&&p(i,["enableEnhancedCivicAnswers"],F),i}function cw(t,e,n){const i={},r=f(e,["systemInstruction"]);n!==void 0&&r!=null&&p(n,["systemInstruction"],cn(r));const a=f(e,["temperature"]);a!=null&&p(i,["temperature"],a);const u=f(e,["topP"]);u!=null&&p(i,["topP"],u);const d=f(e,["topK"]);d!=null&&p(i,["topK"],d);const g=f(e,["candidateCount"]);g!=null&&p(i,["candidateCount"],g);const h=f(e,["maxOutputTokens"]);h!=null&&p(i,["maxOutputTokens"],h);const _=f(e,["stopSequences"]);_!=null&&p(i,["stopSequences"],_);const T=f(e,["responseLogprobs"]);T!=null&&p(i,["responseLogprobs"],T);const A=f(e,["logprobs"]);A!=null&&p(i,["logprobs"],A);const C=f(e,["presencePenalty"]);C!=null&&p(i,["presencePenalty"],C);const P=f(e,["frequencyPenalty"]);P!=null&&p(i,["frequencyPenalty"],P);const V=f(e,["seed"]);V!=null&&p(i,["seed"],V);const M=f(e,["responseMimeType"]);M!=null&&p(i,["responseMimeType"],M);const K=f(e,["responseSchema"]);K!=null&&p(i,["responseSchema"],em(K));const ee=f(e,["responseJsonSchema"]);ee!=null&&p(i,["responseJsonSchema"],ee);const W=f(e,["routingConfig"]);W!=null&&p(i,["routingConfig"],W);const re=f(e,["modelSelectionConfig"]);re!=null&&p(i,["modelConfig"],re);const fe=f(e,["safetySettings"]);if(n!==void 0&&fe!=null){let $=fe;Array.isArray($)&&($=$.map(ue=>ue)),p(n,["safetySettings"],$)}const ae=f(e,["tools"]);if(n!==void 0&&ae!=null){let $=ma(ae);Array.isArray($)&&($=$.map(ue=>KE(pa(ue)))),p(n,["tools"],$)}const N=f(e,["toolConfig"]);n!==void 0&&N!=null&&p(n,["toolConfig"],N);const w=f(e,["labels"]);n!==void 0&&w!=null&&p(n,["labels"],w);const I=f(e,["cachedContent"]);n!==void 0&&I!=null&&p(n,["cachedContent"],To(t,I));const L=f(e,["responseModalities"]);L!=null&&p(i,["responseModalities"],L);const k=f(e,["mediaResolution"]);k!=null&&p(i,["mediaResolution"],k);const F=f(e,["speechConfig"]);F!=null&&p(i,["speechConfig"],tm(F));const D=f(e,["audioTimestamp"]);D!=null&&p(i,["audioTimestamp"],D);const ke=f(e,["thinkingConfig"]);ke!=null&&p(i,["thinkingConfig"],ke);const be=f(e,["imageConfig"]);if(be!=null&&p(i,["imageConfig"],kw(be)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return i}function Yv(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["contents"]);if(r!=null){let u=Zn(r);Array.isArray(u)&&(u=u.map(d=>xf(d))),p(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&p(n,["generationConfig"],uw(t,a,n)),n}function Jv(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["contents"]);if(r!=null){let u=Zn(r);Array.isArray(u)&&(u=u.map(d=>d)),p(n,["contents"],u)}const a=f(e,["config"]);return a!=null&&p(n,["generationConfig"],cw(t,a,n)),n}function $v(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let g=i;Array.isArray(g)&&(g=g.map(h=>MI(h))),p(e,["candidates"],g)}const r=f(t,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const a=f(t,["promptFeedback"]);a!=null&&p(e,["promptFeedback"],a);const u=f(t,["responseId"]);u!=null&&p(e,["responseId"],u);const d=f(t,["usageMetadata"]);return d!=null&&p(e,["usageMetadata"],d),e}function Kv(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const r=f(t,["createTime"]);r!=null&&p(e,["createTime"],r);const a=f(t,["modelVersion"]);a!=null&&p(e,["modelVersion"],a);const u=f(t,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const d=f(t,["responseId"]);d!=null&&p(e,["responseId"],d);const g=f(t,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function fw(t,e){const n={};if(f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=f(t,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const a=f(t,["guidanceScale"]);if(e!==void 0&&a!=null&&p(e,["parameters","guidanceScale"],a),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=f(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const d=f(t,["personGeneration"]);e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d);const g=f(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const h=f(t,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=f(t,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const T=f(t,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const A=f(t,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&p(e,["parameters","outputOptions","compressionQuality"],A),f(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const C=f(t,["imageSize"]);if(e!==void 0&&C!=null&&p(e,["parameters","sampleImageSize"],C),f(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function dw(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=f(t,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const a=f(t,["numberOfImages"]);e!==void 0&&a!=null&&p(e,["parameters","sampleCount"],a);const u=f(t,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const d=f(t,["guidanceScale"]);e!==void 0&&d!=null&&p(e,["parameters","guidanceScale"],d);const g=f(t,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=f(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=f(t,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const A=f(t,["includeRaiReason"]);e!==void 0&&A!=null&&p(e,["parameters","includeRaiReason"],A);const C=f(t,["language"]);e!==void 0&&C!=null&&p(e,["parameters","language"],C);const P=f(t,["outputMimeType"]);e!==void 0&&P!=null&&p(e,["parameters","outputOptions","mimeType"],P);const V=f(t,["outputCompressionQuality"]);e!==void 0&&V!=null&&p(e,["parameters","outputOptions","compressionQuality"],V);const M=f(t,["addWatermark"]);e!==void 0&&M!=null&&p(e,["parameters","addWatermark"],M);const K=f(t,["labels"]);e!==void 0&&K!=null&&p(e,["labels"],K);const ee=f(t,["imageSize"]);e!==void 0&&ee!=null&&p(e,["parameters","sampleImageSize"],ee);const W=f(t,["enhancePrompt"]);return e!==void 0&&W!=null&&p(e,["parameters","enhancePrompt"],W),n}function hw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const a=f(e,["config"]);return a!=null&&fw(a,n),n}function pw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const a=f(e,["config"]);return a!=null&&dw(a,n),n}function mw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Rw(u))),p(e,["generatedImages"],a)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],JE(r)),e}function gw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>Cf(u))),p(e,["generatedImages"],a)}const r=f(t,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],$E(r)),e}function yw(t,e){const n={},i=f(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i),f(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(t,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),f(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(t,["aspectRatio"]);e!==void 0&&a!=null&&p(e,["parameters","aspectRatio"],a);const u=f(t,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const d=f(t,["personGeneration"]);if(e!==void 0&&d!=null&&p(e,["parameters","personGeneration"],d),f(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=f(t,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const h=f(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),f(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=f(t,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],bf(_));const T=f(t,["referenceImages"]);if(e!==void 0&&T!=null){let A=T;Array.isArray(A)&&(A=A.map(C=>v2(C))),p(e,["instances[0]","referenceImages"],A)}if(f(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function _w(t,e){const n={},i=f(t,["numberOfVideos"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=f(t,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const a=f(t,["fps"]);e!==void 0&&a!=null&&p(e,["parameters","fps"],a);const u=f(t,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const d=f(t,["seed"]);e!==void 0&&d!=null&&p(e,["parameters","seed"],d);const g=f(t,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const h=f(t,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=f(t,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=f(t,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const A=f(t,["negativePrompt"]);e!==void 0&&A!=null&&p(e,["parameters","negativePrompt"],A);const C=f(t,["enhancePrompt"]);e!==void 0&&C!=null&&p(e,["parameters","enhancePrompt"],C);const P=f(t,["generateAudio"]);e!==void 0&&P!=null&&p(e,["parameters","generateAudio"],P);const V=f(t,["lastFrame"]);e!==void 0&&V!=null&&p(e,["instances[0]","lastFrame"],Ti(V));const M=f(t,["referenceImages"]);if(e!==void 0&&M!=null){let W=M;Array.isArray(W)&&(W=W.map(re=>T2(re))),p(e,["instances[0]","referenceImages"],W)}const K=f(t,["mask"]);e!==void 0&&K!=null&&p(e,["instances[0]","mask"],_2(K));const ee=f(t,["compressionQuality"]);return e!==void 0&&ee!=null&&p(e,["parameters","compressionQuality"],ee),n}function vw(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],Sw(u)),e}function Tw(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],xw(u)),e}function Ew(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const a=f(e,["image"]);a!=null&&p(n,["instances[0]","image"],bf(a));const u=f(e,["video"]);u!=null&&p(n,["instances[0]","video"],QE(u));const d=f(e,["source"]);d!=null&&Cw(d,n);const g=f(e,["config"]);return g!=null&&yw(g,n),n}function Aw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["prompt"]);r!=null&&p(n,["instances[0]","prompt"],r);const a=f(e,["image"]);a!=null&&p(n,["instances[0]","image"],Ti(a));const u=f(e,["video"]);u!=null&&p(n,["instances[0]","video"],XE(u));const d=f(e,["source"]);d!=null&&bw(d,n);const g=f(e,["config"]);return g!=null&&_w(g,n),n}function Sw(t){const e={},n=f(t,["generatedSamples"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>ww(u))),p(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function xw(t){const e={},n=f(t,["videos"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(u=>Nw(u))),p(e,["generatedVideos"],a)}const i=f(t,["raiMediaFilteredCount"]);i!=null&&p(e,["raiMediaFilteredCount"],i);const r=f(t,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function Cw(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=f(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],bf(r));const a=f(t,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],QE(a)),n}function bw(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=f(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Ti(r));const a=f(t,["video"]);return e!==void 0&&a!=null&&p(e,["instances[0]","video"],XE(a)),n}function Rw(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["image"],Ow(n));const i=f(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=f(t,["_self"]);return r!=null&&p(e,["safetyAttributes"],JE(r)),e}function Cf(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["image"],YE(n));const i=f(t,["raiFilteredReason"]);i!=null&&p(e,["raiFilteredReason"],i);const r=f(t,["_self"]);r!=null&&p(e,["safetyAttributes"],$E(r));const a=f(t,["prompt"]);return a!=null&&p(e,["enhancedPrompt"],a),e}function Iw(t){const e={},n=f(t,["_self"]);n!=null&&p(e,["mask"],YE(n));const i=f(t,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),p(e,["labels"],r)}return e}function ww(t){const e={},n=f(t,["video"]);return n!=null&&p(e,["video"],g2(n)),e}function Nw(t){const e={},n=f(t,["_self"]);return n!=null&&p(e,["video"],y2(n)),e}function Dw(t){const e={},n=f(t,["modelSelectionConfig"]);n!=null&&p(e,["modelConfig"],n);const i=f(t,["responseJsonSchema"]);i!=null&&p(e,["responseJsonSchema"],i);const r=f(t,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const a=f(t,["candidateCount"]);a!=null&&p(e,["candidateCount"],a);const u=f(t,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const d=f(t,["frequencyPenalty"]);d!=null&&p(e,["frequencyPenalty"],d);const g=f(t,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=f(t,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=f(t,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=f(t,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const A=f(t,["responseLogprobs"]);A!=null&&p(e,["responseLogprobs"],A);const C=f(t,["responseMimeType"]);C!=null&&p(e,["responseMimeType"],C);const P=f(t,["responseModalities"]);P!=null&&p(e,["responseModalities"],P);const V=f(t,["responseSchema"]);V!=null&&p(e,["responseSchema"],V);const M=f(t,["routingConfig"]);M!=null&&p(e,["routingConfig"],M);const K=f(t,["seed"]);K!=null&&p(e,["seed"],K);const ee=f(t,["speechConfig"]);ee!=null&&p(e,["speechConfig"],ee);const W=f(t,["stopSequences"]);W!=null&&p(e,["stopSequences"],W);const re=f(t,["temperature"]);re!=null&&p(e,["temperature"],re);const fe=f(t,["thinkingConfig"]);fe!=null&&p(e,["thinkingConfig"],fe);const ae=f(t,["topK"]);ae!=null&&p(e,["topK"],ae);const N=f(t,["topP"]);if(N!=null&&p(e,["topP"],N),f(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Mw(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],et(t,i)),n}function Pw(t,e){const n={},i=f(e,["model"]);return i!=null&&p(n,["_url","name"],et(t,i)),n}function Vw(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function Uw(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function Lw(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=f(t,["imageSize"]);if(i!=null&&p(e,["imageSize"],i),f(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function kw(t){const e={},n=f(t,["aspectRatio"]);n!=null&&p(e,["aspectRatio"],n);const i=f(t,["imageSize"]);i!=null&&p(e,["imageSize"],i);const r=f(t,["outputMimeType"]);r!=null&&p(e,["imageOutputOptions","mimeType"],r);const a=f(t,["outputCompressionQuality"]);return a!=null&&p(e,["imageOutputOptions","compressionQuality"],a),e}function Ow(t){const e={},n=f(t,["bytesBase64Encoded"]);n!=null&&p(e,["imageBytes"],ms(n));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function YE(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],ms(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function bf(t){const e={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=f(t,["imageBytes"]);n!=null&&p(e,["bytesBase64Encoded"],ms(n));const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function Ti(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["gcsUri"],n);const i=f(t,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],ms(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Bw(t,e,n){const i={},r=f(e,["pageSize"]);n!==void 0&&r!=null&&p(n,["_query","pageSize"],r);const a=f(e,["pageToken"]);n!==void 0&&a!=null&&p(n,["_query","pageToken"],a);const u=f(e,["filter"]);n!==void 0&&u!=null&&p(n,["_query","filter"],u);const d=f(e,["queryBase"]);return n!==void 0&&d!=null&&p(n,["_url","models_url"],OE(t,d)),i}function qw(t,e,n){const i={},r=f(e,["pageSize"]);n!==void 0&&r!=null&&p(n,["_query","pageSize"],r);const a=f(e,["pageToken"]);n!==void 0&&a!=null&&p(n,["_query","pageToken"],a);const u=f(e,["filter"]);n!==void 0&&u!=null&&p(n,["_query","filter"],u);const d=f(e,["queryBase"]);return n!==void 0&&d!=null&&p(n,["_url","models_url"],OE(t,d)),i}function Fw(t,e){const n={},i=f(e,["config"]);return i!=null&&Bw(t,i,n),n}function Gw(t,e){const n={},i=f(e,["config"]);return i!=null&&qw(t,i,n),n}function Hw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["_self"]);if(r!=null){let a=BE(r);Array.isArray(a)&&(a=a.map(u=>pp(u))),p(e,["models"],a)}return e}function zw(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["_self"]);if(r!=null){let a=BE(r);Array.isArray(a)&&(a=a.map(u=>mp(u))),p(e,["models"],a)}return e}function Yw(t){const e={},n=f(t,["maskMode"]);n!=null&&p(e,["maskMode"],n);const i=f(t,["segmentationClasses"]);i!=null&&p(e,["maskClasses"],i);const r=f(t,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function pp(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=f(t,["description"]);r!=null&&p(e,["description"],r);const a=f(t,["version"]);a!=null&&p(e,["version"],a);const u=f(t,["_self"]);u!=null&&p(e,["tunedModelInfo"],a2(u));const d=f(t,["inputTokenLimit"]);d!=null&&p(e,["inputTokenLimit"],d);const g=f(t,["outputTokenLimit"]);g!=null&&p(e,["outputTokenLimit"],g);const h=f(t,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=f(t,["temperature"]);_!=null&&p(e,["temperature"],_);const T=f(t,["maxTemperature"]);T!=null&&p(e,["maxTemperature"],T);const A=f(t,["topP"]);A!=null&&p(e,["topP"],A);const C=f(t,["topK"]);C!=null&&p(e,["topK"],C);const P=f(t,["thinking"]);return P!=null&&p(e,["thinking"],P),e}function mp(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["displayName"]);i!=null&&p(e,["displayName"],i);const r=f(t,["description"]);r!=null&&p(e,["description"],r);const a=f(t,["versionId"]);a!=null&&p(e,["version"],a);const u=f(t,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(A=>ow(A))),p(e,["endpoints"],T)}const d=f(t,["labels"]);d!=null&&p(e,["labels"],d);const g=f(t,["_self"]);g!=null&&p(e,["tunedModelInfo"],l2(g));const h=f(t,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=f(t,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(A=>A)),p(e,["checkpoints"],T)}return e}function Jw(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],sw(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],rw(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&p(e,["inlineData"],DI(g));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const _=f(t,["thought"]);_!=null&&p(e,["thought"],_);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const A=f(t,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function $w(t){const e={},n=f(t,["productImage"]);return n!=null&&p(e,["image"],Ti(n)),e}function Kw(t,e){const n={},i=f(t,["numberOfImages"]);e!==void 0&&i!=null&&p(e,["parameters","sampleCount"],i);const r=f(t,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const a=f(t,["outputGcsUri"]);e!==void 0&&a!=null&&p(e,["parameters","storageUri"],a);const u=f(t,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const d=f(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&p(e,["parameters","safetySetting"],d);const g=f(t,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const h=f(t,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=f(t,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const T=f(t,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const A=f(t,["enhancePrompt"]);e!==void 0&&A!=null&&p(e,["parameters","enhancePrompt"],A);const C=f(t,["labels"]);return e!==void 0&&C!=null&&p(e,["labels"],C),n}function Qw(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["source"]);r!=null&&Ww(r,n);const a=f(e,["config"]);return a!=null&&Kw(a,n),n}function Xw(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Cf(r))),p(e,["generatedImages"],i)}return e}function Ww(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=f(t,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],Ti(r));const a=f(t,["productImages"]);if(e!==void 0&&a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>$w(d))),p(e,["instances[0]","productImages"],u)}return n}function Zw(t){const e={},n=f(t,["referenceImage"]);n!=null&&p(e,["referenceImage"],Ti(n));const i=f(t,["referenceId"]);i!=null&&p(e,["referenceId"],i);const r=f(t,["referenceType"]);r!=null&&p(e,["referenceType"],r);const a=f(t,["maskImageConfig"]);a!=null&&p(e,["maskImageConfig"],Yw(a));const u=f(t,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],OI(u));const d=f(t,["styleImageConfig"]);d!=null&&p(e,["styleImageConfig"],d);const g=f(t,["subjectImageConfig"]);return g!=null&&p(e,["subjectImageConfig"],g),e}function JE(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=f(t,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function $E(t){const e={},n=f(t,["safetyAttributes","categories"]);n!=null&&p(e,["categories"],n);const i=f(t,["safetyAttributes","scores"]);i!=null&&p(e,["scores"],i);const r=f(t,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function jw(t){const e={},n=f(t,["category"]);if(n!=null&&p(e,["category"],n),f(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(t,["threshold"]);return i!=null&&p(e,["threshold"],i),e}function e2(t){const e={},n=f(t,["image"]);return n!=null&&p(e,["image"],Ti(n)),e}function t2(t,e){const n={},i=f(t,["mode"]);e!==void 0&&i!=null&&p(e,["parameters","mode"],i);const r=f(t,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const a=f(t,["confidenceThreshold"]);e!==void 0&&a!=null&&p(e,["parameters","confidenceThreshold"],a);const u=f(t,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const d=f(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&p(e,["parameters","binaryColorThreshold"],d);const g=f(t,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),n}function n2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["source"]);r!=null&&o2(r,n);const a=f(e,["config"]);return a!=null&&t2(a,n),n}function i2(t){const e={},n=f(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(r=>Iw(r))),p(e,["generatedMasks"],i)}return e}function o2(t,e){const n={},i=f(t,["prompt"]);e!==void 0&&i!=null&&p(e,["instances[0]","prompt"],i);const r=f(t,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Ti(r));const a=f(t,["scribbleImage"]);return e!==void 0&&a!=null&&p(e,["instances[0]","scribble"],e2(a)),n}function s2(t){const e={},n=f(t,["functionCallingConfig"]);n!=null&&p(e,["functionCallingConfig"],aw(n));const i=f(t,["retrievalConfig"]);return i!=null&&p(e,["retrievalConfig"],i),e}function r2(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=f(t,["computerUse"]);r!=null&&p(e,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],Vw(d));const g=f(t,["googleSearch"]);g!=null&&p(e,["googleSearch"],Uw(g));const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function KE(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let T=n;Array.isArray(T)&&(T=T.map(A=>lw(A))),p(e,["functionDeclarations"],T)}const i=f(t,["retrieval"]);i!=null&&p(e,["retrieval"],i);const r=f(t,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const a=f(t,["computerUse"]);if(a!=null&&p(e,["computerUse"],a),f(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=f(t,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const d=f(t,["enterpriseWebSearch"]);d!=null&&p(e,["enterpriseWebSearch"],d);const g=f(t,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=f(t,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=f(t,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function a2(t){const e={},n=f(t,["baseModel"]);n!=null&&p(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&p(e,["createTime"],i);const r=f(t,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function l2(t){const e={},n=f(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&p(e,["baseModel"],n);const i=f(t,["createTime"]);i!=null&&p(e,["createTime"],i);const r=f(t,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function u2(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=f(t,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),n}function c2(t,e){const n={},i=f(t,["displayName"]);e!==void 0&&i!=null&&p(e,["displayName"],i);const r=f(t,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const a=f(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&p(e,["defaultCheckpointId"],a),n}function f2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","name"],et(t,i));const r=f(e,["config"]);return r!=null&&u2(r,n),n}function d2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["config"]);return r!=null&&c2(r,n),n}function h2(t,e){const n={},i=f(t,["outputGcsUri"]);e!==void 0&&i!=null&&p(e,["parameters","storageUri"],i);const r=f(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const a=f(t,["personGeneration"]);e!==void 0&&a!=null&&p(e,["parameters","personGeneration"],a);const u=f(t,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const d=f(t,["outputMimeType"]);e!==void 0&&d!=null&&p(e,["parameters","outputOptions","mimeType"],d);const g=f(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const h=f(t,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=f(t,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=f(t,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const A=f(t,["numberOfImages"]);e!==void 0&&A!=null&&p(e,["parameters","sampleCount"],A);const C=f(t,["mode"]);return e!==void 0&&C!=null&&p(e,["parameters","mode"],C),n}function p2(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["_url","model"],et(t,i));const r=f(e,["image"]);r!=null&&p(n,["instances[0]","image"],Ti(r));const a=f(e,["upscaleFactor"]);a!=null&&p(n,["parameters","upscaleConfig","upscaleFactor"],a);const u=f(e,["config"]);return u!=null&&h2(u,n),n}function m2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Cf(a))),p(e,["generatedImages"],r)}return e}function g2(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const i=f(t,["encodedVideo"]);i!=null&&p(e,["videoBytes"],ms(i));const r=f(t,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function y2(t){const e={},n=f(t,["gcsUri"]);n!=null&&p(e,["uri"],n);const i=f(t,["bytesBase64Encoded"]);i!=null&&p(e,["videoBytes"],ms(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function _2(t){const e={},n=f(t,["image"]);n!=null&&p(e,["_self"],Ti(n));const i=f(t,["maskMode"]);return i!=null&&p(e,["maskMode"],i),e}function v2(t){const e={},n=f(t,["image"]);n!=null&&p(e,["image"],bf(n));const i=f(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function T2(t){const e={},n=f(t,["image"]);n!=null&&p(e,["image"],Ti(n));const i=f(t,["referenceType"]);return i!=null&&p(e,["referenceType"],i),e}function QE(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["uri"],n);const i=f(t,["videoBytes"]);i!=null&&p(e,["encodedVideo"],ms(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function XE(t){const e={},n=f(t,["uri"]);n!=null&&p(e,["gcsUri"],n);const i=f(t,["videoBytes"]);i!=null&&p(e,["bytesBase64Encoded"],ms(i));const r=f(t,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E2(t,e){const n={},i=f(t,["displayName"]);return e!==void 0&&i!=null&&p(e,["displayName"],i),n}function A2(t){const e={},n=f(t,["config"]);return n!=null&&E2(n,e),e}function S2(t,e){const n={},i=f(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function x2(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&S2(i,e),e}function C2(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function b2(t,e){const n={},i=f(t,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["customMetadata"],a)}const r=f(t,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),n}function R2(t){const e={},n=f(t,["name"]);n!=null&&p(e,["name"],n);const i=f(t,["metadata"]);i!=null&&p(e,["metadata"],i);const r=f(t,["done"]);r!=null&&p(e,["done"],r);const a=f(t,["error"]);a!=null&&p(e,["error"],a);const u=f(t,["response"]);return u!=null&&p(e,["response"],w2(u)),e}function I2(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=f(t,["fileName"]);i!=null&&p(e,["fileName"],i);const r=f(t,["config"]);return r!=null&&b2(r,e),e}function w2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["parent"]);i!=null&&p(e,["parent"],i);const r=f(t,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function N2(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function D2(t){const e={},n=f(t,["config"]);return n!=null&&N2(n,e),e}function M2(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["fileSearchStores"],a)}return e}function WE(t,e){const n={},i=f(t,["mimeType"]);e!==void 0&&i!=null&&p(e,["mimeType"],i);const r=f(t,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const a=f(t,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(g=>g)),p(e,["customMetadata"],d)}const u=f(t,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),n}function P2(t){const e={},n=f(t,["fileSearchStoreName"]);n!=null&&p(e,["_url","file_search_store_name"],n);const i=f(t,["config"]);return i!=null&&WE(i,e),e}function V2(t){const e={},n=f(t,["sdkHttpResponse"]);return n!=null&&p(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U2="Content-Type",L2="X-Server-Timeout",k2="User-Agent",gp="x-goog-api-client",O2="1.34.0",B2=`google-genai-sdk/${O2}`,q2="v1beta1",F2="v1beta";class G2{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:q2,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:F2,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const r=[this.getRequestUrlInternal(n)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[u,d]of Object.entries(e.queryParams))r.searchParams.append(u,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(n))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,n,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i,r){if(n&&n.timeout||r){const a=new AbortController,u=a.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>a.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=u}return n&&n.extraBody!==null&&H2(e,n.extraBody),e.headers=await this.getHeadersInternal(n,i),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Qv(r),new fp(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async r=>(await Qv(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return mi(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const d="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield we(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(_,{stream:!0});try{const P=JSON.parse(T);if("error"in P){const V=JSON.parse(JSON.stringify(P.error)),M=V.status,K=V.code,ee=`got status: ${M}. ${JSON.stringify(P)}`;if(K>=400&&K<600)throw new Sf({message:ee,status:K})}}catch(P){if(P.name==="ApiError")throw P}u+=T;let A=-1,C=0;for(;;){A=-1,C=0;for(const M of g){const K=u.indexOf(M);K!==-1&&(A===-1||K<A)&&(A=K,C=M.length)}if(A===-1)break;const P=u.substring(0,A);u=u.substring(A+C);const V=P.trim();if(V.startsWith(d)){const M=V.substring(d.length).trim();try{const K=new Response(M,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield we(new fp(K))}catch(K){throw new Error(`exception parsing stream chunk ${M}. ${K}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=B2+" "+this.clientOptions.userAgentExtra;return e[k2]=n,e[gp]=n,e[U2]="application/json",e}async getHeadersInternal(e,n){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(L2,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,n),i}getFileName(e){var n;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(n=i.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),i}async uploadFile(e,n){var i;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);r.sizeBytes=String(u.size);const d=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:u.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const g={file:r},h=this.getFileName(e),_=he("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,h,g,n==null?void 0:n.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,n,i){var r;const a=this.clientOptions.uploader,u=await a.stat(n),d=String(u.size),g=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(n),T={};i!=null&&WE(i,T);const A=await this.fetchUploadUrl(h,d,g,_,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(n,A,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,i,r,a,u){var d;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function Qv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(i);throw n>=400&&n<600?new Sf({message:r,status:n}):new Error(r)}}function H2(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))n=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const d=Object.assign({},a);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const h=u[g],_=d[g];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?d[g]=i(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),d[g]=h)}return d}const r=i(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const z2="mcp_used/unknown";let Y2=!1;function ZE(t){for(const e of t)if(J2(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Y2}function jE(t){var e;const n=(e=t[gp])!==null&&e!==void 0?e:"";t[gp]=(n+` ${z2}`).trimStart()}function J2(t){return t!==null&&typeof t=="object"&&t instanceof im}function $2(t){return mi(this,arguments,function*(n,i=100){let r,a=0;for(;a<i;){const u=yield we(n.listTools({cursor:r}));for(const d of u.tools)yield yield we(d),a++;if(!u.nextCursor)break;r=u.nextCursor}})}class im{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new im(e,n)}async initialize(){var e,n,i,r;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var d=!0,g=(n=void 0,gi($2(_))),h;h=await g.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const T=r;u.push(T);const A=T.name;if(a[A])throw new Error(`Duplicate function name ${A} found in MCP tools. Please ensure function names are unique.`);a[A]=_}}catch(T){n={error:T}}finally{try{!d&&!e&&(i=g.return)&&await i.call(g)}finally{if(n)throw n.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Cb(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await r.callTool({name:i.name,arguments:i.args},void 0,a);n.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function K2(t,e,n){const i=new yb;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(i,r),e(i)}class Q2{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=Z2(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const _=new Promise(W=>{h=W}),T=e.callbacks,A=function(){h({})},C=this.apiClient,P={onopen:A,onmessage:W=>{K2(C,T.onmessage,W)},onerror:(n=T==null?void 0:T.onerror)!==null&&n!==void 0?n:function(W){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(W){}},V=this.webSocketFactory.create(g,W2(u),P);V.connect(),await _;const ee={setup:{model:et(this.apiClient,e.model)}};return V.send(JSON.stringify(ee)),new X2(V,this.apiClient)}}class X2{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=AI(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=EI(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(ea.PLAY)}pause(){this.sendPlaybackControl(ea.PAUSE)}stop(){this.sendPlaybackControl(ea.STOP)}resetContext(){this.sendPlaybackControl(ea.RESET_CONTEXT)}close(){this.conn.close()}}function W2(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function Z2(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j2="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function eN(t,e,n){const i=new gb;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const a=JSON.parse(r);if(t.isVertexAI()){const u=CI(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class tN{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new Q2(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,r,a,u,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&ZE(e.config.tools)&&jE(T);const A=sN(T);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(A,_);else{const I=this.apiClient.getApiKey();let L="BidiGenerateContent",k="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",k="access_token"),_=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${k}=${I}`}let C=()=>{};const P=new Promise(I=>{C=I}),V=e.callbacks,M=function(){var I;(I=V==null?void 0:V.onopen)===null||I===void 0||I.call(V),C({})},K=this.apiClient,ee={onopen:M,onmessage:I=>{eN(K,V.onmessage,I)},onerror:(n=V==null?void 0:V.onerror)!==null&&n!==void 0?n:function(I){},onclose:(i=V==null?void 0:V.onclose)!==null&&i!==void 0?i:function(I){}},W=this.webSocketFactory.create(_,oN(A),ee);W.connect(),await P;let re=et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&re.startsWith("publishers/")){const I=this.apiClient.getProject(),L=this.apiClient.getLocation();re=`projects/${I}/locations/${L}/`+re}let fe={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ef.AUDIO]}:e.config.responseModalities=[ef.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ae=(d=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[],N=[];for(const I of ae)if(this.isCallableTool(I)){const L=I;N.push(await L.tool())}else N.push(I);N.length>0&&(e.config.tools=N);const w={model:re,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=TI(this.apiClient,w):fe=vI(this.apiClient,w),delete fe.config,W.send(JSON.stringify(fe)),new iN(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const nN={turnComplete:!0};class iN{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Zn(n.turns),e.isVertexAI()||(i=i.map(r=>xf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(j2)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},nN),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:xI(e)}:n={realtimeInput:SI(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function oN(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function sN(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xv=10;function Wv(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(ia(u)){r=!0;break}if(!r)return!0;const a=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function ia(t){return"callTool"in t&&typeof t.callTool=="function"}function rN(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ia(r)))!==null&&i!==void 0?i:!1}function Zv(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((i,r)=>{if(ia(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&n.push(r)}),n}function jv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aN extends vo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,r,a,u,d;const g=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!rN(n)||Wv(n.config))return await this.generateContentInternal(g);const h=Zv(n);if(h.length>0){const V=h.map(M=>`tools[${M}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${V}.`)}let _,T;const A=Zn(g.contents),C=(a=(r=(i=g.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:Xv;let P=0;for(;P<C&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const V=_.candidates[0].content,M=[];for(const K of(d=(u=n.config)===null||u===void 0?void 0:u.tools)!==null&&d!==void 0?d:[])if(ia(K)){const W=await K.callTool(_.functionCalls);M.push(...W)}P++,T={role:"user",parts:M},g.contents=Zn(g.contents),g.contents.push(V),g.contents.push(T),jv(g.config)&&(A.push(V),A.push(T))}return jv(g.config)&&(_.automaticFunctionCallingHistory=A),_},this.generateContentStream=async n=>{var i,r,a,u,d;if(this.maybeMoveToResponseJsonSchem(n),Wv(n.config)){const T=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(T)}const g=Zv(n);if(g.length>0){const T=g.map(A=>`tools[${A}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(a=(r=(i=n==null?void 0:n.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(d=(u=n==null?void 0:n.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var r;let a;const u=[];if(i!=null&&i.generatedImages)for(const g of i.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=g==null?void 0:g.safetyAttributes:u.push(g);let d;return a?d={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async n=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new er(mo.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(u),u)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var i,r,a,u,d,g;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=n.video)===null||i===void 0)&&i.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((u=(a=n.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((g=(d=n.source)===null||d===void 0?void 0:d.video)===null||g===void 0)&&g.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,r;const a=(n=e.config)===null||n===void 0?void 0:n.tools;if(!a)return e;const u=await Promise.all(a.map(async g=>ia(g)?await g.tool():g)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(d.config.tools=u,e.config&&e.config.tools&&ZE(e.config.tools)){const g=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),jE(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var n,i,r;const a=new Map;for(const u of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if(ia(u)){const d=u,g=await d.tool();for(const h of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var n,i,r;const a=(r=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:Xv;let u=!1,d=0;const g=await this.initAfcToolsMap(e);return(function(h,_,T){return mi(this,arguments,function*(){for(var A,C,P,V,M,K;d<a;){u&&(d++,u=!1);const fe=yield we(h.processParamsMaybeAddMcpUsage(T)),ae=yield we(h.generateContentStreamInternal(fe)),N=[],w=[];try{for(var ee=!0,W=(C=void 0,gi(ae)),re;re=yield we(W.next()),A=re.done,!A;ee=!0){V=re.value,ee=!1;const I=V;if(yield yield we(I),I.candidates&&(!((M=I.candidates[0])===null||M===void 0)&&M.content)){w.push(I.candidates[0].content);for(const L of(K=I.candidates[0].content.parts)!==null&&K!==void 0?K:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(L.functionCall.name)){const k=yield we(_.get(L.functionCall.name).callTool([L.functionCall]));N.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(I){C={error:I}}finally{try{!ee&&!A&&(P=W.return)&&(yield we(P.call(W)))}finally{if(C)throw C.error}}if(N.length>0){u=!0;const I=new Rl;I.candidates=[{content:{role:"user",parts:N}}],yield yield we(I);const L=[];L.push(...w),L.push({role:"user",parts:N});const k=Zn(T.contents).concat(L);T.contents=k}else break}})})(this,g,e)}async generateContentInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Jv(this.apiClient,e);return d=he("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=Kv(_),A=new Rl;return Object.assign(A,T),A})}else{const h=Yv(this.apiClient,e);return d=he("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=$v(_),A=new Rl;return Object.assign(A,T),A})}}async generateContentStreamInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Jv(this.apiClient,e);return d=he("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(T){return mi(this,arguments,function*(){var A,C,P,V;try{for(var M=!0,K=gi(T),ee;ee=yield we(K.next()),A=ee.done,!A;M=!0){V=ee.value,M=!1;const W=V,re=Kv(yield we(W.json()));re.sdkHttpResponse={headers:W.headers};const fe=new Rl;Object.assign(fe,re),yield yield we(fe)}}catch(W){C={error:W}}finally{try{!M&&!A&&(P=K.return)&&(yield we(P.call(K)))}finally{if(C)throw C.error}}})})}else{const h=Yv(this.apiClient,e);return d=he("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(T){return mi(this,arguments,function*(){var A,C,P,V;try{for(var M=!0,K=gi(T),ee;ee=yield we(K.next()),A=ee.done,!A;M=!0){V=ee.value,M=!1;const W=V,re=$v(yield we(W.json()));re.sdkHttpResponse={headers:W.headers};const fe=new Rl;Object.assign(fe,re),yield yield we(fe)}}catch(W){C={error:W}}finally{try{!M&&!A&&(P=K.return)&&(yield we(P.call(K)))}finally{if(C)throw C.error}}})})}}async embedContent(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=tw(this.apiClient,e);return d=he("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=iw(_),A=new Iv;return Object.assign(A,T),A})}else{const h=ew(this.apiClient,e);return d=he("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=nw(_),A=new Iv;return Object.assign(A,T),A})}}async generateImagesInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=pw(this.apiClient,e);return d=he("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=gw(_),A=new wv;return Object.assign(A,T),A})}else{const h=hw(this.apiClient,e);return d=he("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=mw(_),A=new wv;return Object.assign(A,T),A})}}async editImageInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=XI(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=WI(g),_=new sb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=p2(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=m2(g),_=new rb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=Qw(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=Xw(g),_=new ab;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=n2(this.apiClient,e);return a=he("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=i2(g),_=new lb;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Pw(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>mp(_))}else{const h=Mw(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>pp(_))}}async listInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Gw(this.apiClient,e);return d=he("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=zw(_),A=new Nv;return Object.assign(A,T),A})}else{const h=Fw(this.apiClient,e);return d=he("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=Hw(_),A=new Nv;return Object.assign(A,T),A})}}async update(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=d2(this.apiClient,e);return d=he("{model}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>mp(_))}else{const h=f2(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>pp(_))}}async delete(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=JI(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=KI(_),A=new Dv;return Object.assign(A,T),A})}else{const h=YI(this.apiClient,e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=$I(_),A=new Dv;return Object.assign(A,T),A})}}async countTokens(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=GI(this.apiClient,e);return d=he("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=zI(_),A=new Mv;return Object.assign(A,T),A})}else{const h=FI(this.apiClient,e);return d=he("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=HI(_),A=new Mv;return Object.assign(A,T),A})}}async computeTokens(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=VI(this.apiClient,e);return a=he("{model}:computeTokens",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=UI(g),_=new ub;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=Aw(this.apiClient,e);return d=he("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const T=Tw(_),A=new tf;return Object.assign(A,T),A})}else{const h=Ew(this.apiClient,e);return d=he("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const T=vw(_),A=new tf;return Object.assign(A,T),A})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lN extends vo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:a}});return n._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=j1(e);return d=he("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const h=Z1(e);return d=he("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=Y1(e);return a=he("{resourceName}:fetchPredictOperation",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function uN(t){const e={},n=f(t,["data"]);if(n!=null&&p(e,["data"],n),f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function cN(t){const e={},n=f(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(a=>vN(a))),p(e,["parts"],r)}const i=f(t,["role"]);return i!=null&&p(e,["role"],i),e}function fN(t,e,n){const i={},r=f(e,["expireTime"]);n!==void 0&&r!=null&&p(n,["expireTime"],r);const a=f(e,["newSessionExpireTime"]);n!==void 0&&a!=null&&p(n,["newSessionExpireTime"],a);const u=f(e,["uses"]);n!==void 0&&u!=null&&p(n,["uses"],u);const d=f(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&p(n,["bidiGenerateContentSetup"],_N(t,d));const g=f(e,["lockAdditionalFields"]);return n!==void 0&&g!=null&&p(n,["fieldMask"],g),i}function dN(t,e){const n={},i=f(e,["config"]);return i!=null&&p(n,["config"],fN(t,i,n)),n}function hN(t){const e={};if(f(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=f(t,["fileUri"]);n!=null&&p(e,["fileUri"],n);const i=f(t,["mimeType"]);return i!=null&&p(e,["mimeType"],i),e}function pN(t){const e={},n=f(t,["id"]);n!=null&&p(e,["id"],n);const i=f(t,["args"]);i!=null&&p(e,["args"],i);const r=f(t,["name"]);if(r!=null&&p(e,["name"],r),f(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mN(t){const e={};if(f(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=f(t,["enableWidget"]);return n!=null&&p(e,["enableWidget"],n),e}function gN(t){const e={};if(f(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=f(t,["timeRangeFilter"]);return n!=null&&p(e,["timeRangeFilter"],n),e}function yN(t,e){const n={},i=f(t,["generationConfig"]);e!==void 0&&i!=null&&p(e,["setup","generationConfig"],i);const r=f(t,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const a=f(t,["temperature"]);e!==void 0&&a!=null&&p(e,["setup","generationConfig","temperature"],a);const u=f(t,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const d=f(t,["topK"]);e!==void 0&&d!=null&&p(e,["setup","generationConfig","topK"],d);const g=f(t,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=f(t,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=f(t,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=f(t,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],nm(T));const A=f(t,["thinkingConfig"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","thinkingConfig"],A);const C=f(t,["enableAffectiveDialog"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],C);const P=f(t,["systemInstruction"]);e!==void 0&&P!=null&&p(e,["setup","systemInstruction"],cN(cn(P)));const V=f(t,["tools"]);if(e!==void 0&&V!=null){let ae=ma(V);Array.isArray(ae)&&(ae=ae.map(N=>EN(pa(N)))),p(e,["setup","tools"],ae)}const M=f(t,["sessionResumption"]);e!==void 0&&M!=null&&p(e,["setup","sessionResumption"],TN(M));const K=f(t,["inputAudioTranscription"]);e!==void 0&&K!=null&&p(e,["setup","inputAudioTranscription"],K);const ee=f(t,["outputAudioTranscription"]);e!==void 0&&ee!=null&&p(e,["setup","outputAudioTranscription"],ee);const W=f(t,["realtimeInputConfig"]);e!==void 0&&W!=null&&p(e,["setup","realtimeInputConfig"],W);const re=f(t,["contextWindowCompression"]);e!==void 0&&re!=null&&p(e,["setup","contextWindowCompression"],re);const fe=f(t,["proactivity"]);if(e!==void 0&&fe!=null&&p(e,["setup","proactivity"],fe),f(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function _N(t,e){const n={},i=f(e,["model"]);i!=null&&p(n,["setup","model"],et(t,i));const r=f(e,["config"]);return r!=null&&p(n,["config"],yN(r,n)),n}function vN(t){const e={},n=f(t,["mediaResolution"]);n!=null&&p(e,["mediaResolution"],n);const i=f(t,["codeExecutionResult"]);i!=null&&p(e,["codeExecutionResult"],i);const r=f(t,["executableCode"]);r!=null&&p(e,["executableCode"],r);const a=f(t,["fileData"]);a!=null&&p(e,["fileData"],hN(a));const u=f(t,["functionCall"]);u!=null&&p(e,["functionCall"],pN(u));const d=f(t,["functionResponse"]);d!=null&&p(e,["functionResponse"],d);const g=f(t,["inlineData"]);g!=null&&p(e,["inlineData"],uN(g));const h=f(t,["text"]);h!=null&&p(e,["text"],h);const _=f(t,["thought"]);_!=null&&p(e,["thought"],_);const T=f(t,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const A=f(t,["videoMetadata"]);return A!=null&&p(e,["videoMetadata"],A),e}function TN(t){const e={},n=f(t,["handle"]);if(n!=null&&p(e,["handle"],n),f(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function EN(t){const e={},n=f(t,["functionDeclarations"]);if(n!=null){let _=n;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(f(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=f(t,["googleSearchRetrieval"]);i!=null&&p(e,["googleSearchRetrieval"],i);const r=f(t,["computerUse"]);r!=null&&p(e,["computerUse"],r);const a=f(t,["fileSearch"]);a!=null&&p(e,["fileSearch"],a);const u=f(t,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),f(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=f(t,["googleMaps"]);d!=null&&p(e,["googleMaps"],mN(d));const g=f(t,["googleSearch"]);g!=null&&p(e,["googleSearch"],gN(g));const h=f(t,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AN(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${n}.${a}`);e.push(...r)}else e.push(n)}return e.join(",")}function SN(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,n=a):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const a=AN(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const g=[];a&&g.push(a),d.length>0&&g.push(...d),g.length>0?t.fieldMask=g.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class xN extends vo{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=dN(this.apiClient,e);a=he("auth_tokens",d._url),u=d._query,delete d.config,delete d._url,delete d._query;const g=SN(d,e.config);return r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CN(t,e){const n={},i=f(t,["force"]);return e!==void 0&&i!=null&&p(e,["_query","force"],i),n}function bN(t){const e={},n=f(t,["name"]);n!=null&&p(e,["_url","name"],n);const i=f(t,["config"]);return i!=null&&CN(i,e),e}function RN(t){const e={},n=f(t,["name"]);return n!=null&&p(e,["_url","name"],n),e}function IN(t,e){const n={},i=f(t,["pageSize"]);e!==void 0&&i!=null&&p(e,["_query","pageSize"],i);const r=f(t,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),n}function wN(t){const e={},n=f(t,["parent"]);n!=null&&p(e,["_url","parent"],n);const i=f(t,["config"]);return i!=null&&IN(i,e),e}function NN(t){const e={},n=f(t,["sdkHttpResponse"]);n!=null&&p(e,["sdkHttpResponse"],n);const i=f(t,["nextPageToken"]);i!=null&&p(e,["nextPageToken"],i);const r=f(t,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>u)),p(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DN extends vo{constructor(e){super(),this.apiClient=e,this.list=async n=>new er(mo.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:n.parent,config:i.config}),await this.listInternal(n),n)}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RN(e);return a=he("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=bN(e);r=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=wN(e);return a=he("{parent}/documents",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=NN(g),_=new cb;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MN extends vo{constructor(e,n=new DN(e)){super(),this.apiClient=e,this.documents=n,this.list=async(i={})=>new er(mo.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=A2(e);return a=he("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=C2(e);return a=he("{name}",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var n,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=x2(e);r=he("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=D2(e);return a=he("fileSearchStores",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=M2(g),_=new fb;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=P2(e);return a=he("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=V2(g),_=new db;return Object.assign(_,h),_})}}async importFile(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=I2(e);return a=he("{file_search_store_name}:importFile",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json()),r.then(g=>{const h=R2(g),_=new Wp;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eA=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return eA=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};const PN=()=>eA();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yp(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const _p=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jn extends Error{}class yn extends jn{constructor(e,n,i,r){super(`${yn.makeMessage(e,n,i)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,i){const r=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,i,r){if(!e||!r)return new Rf({message:i,cause:_p(n)});const a=n;return e===400?new nA(e,a,i,r):e===401?new iA(e,a,i,r):e===403?new oA(e,a,i,r):e===404?new sA(e,a,i,r):e===409?new rA(e,a,i,r):e===422?new aA(e,a,i,r):e===429?new lA(e,a,i,r):e>=500?new uA(e,a,i,r):new yn(e,a,i,r)}}class vp extends yn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Rf extends yn{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class tA extends Rf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class nA extends yn{}class iA extends yn{}class oA extends yn{}class sA extends yn{}class rA extends yn{}class aA extends yn{}class lA extends yn{}class uA extends yn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VN=/^[a-z][a-z0-9+.-]*:/i,UN=t=>VN.test(t);let Tp=t=>(Tp=Array.isArray,Tp(t));const LN=Tp;let kN=LN;const eT=kN;function ON(t){if(!t)return!0;for(const e in t)return!1;return!0}function BN(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const qN=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new jn(`${t} must be an integer`);if(e<0)throw new jn(`${t} must be a positive integer`);return e},FN=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GN=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HN(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const zN=()=>{var t,e,n,i,r;const a=HN();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Kr,"X-Stainless-OS":nT(Deno.build.os),"X-Stainless-Arch":tT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Kr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Kr,"X-Stainless-OS":nT((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":tT((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=YN();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Kr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Kr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function YN(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const i=n.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${r}.${a}.${u}`}}}return null}const tT=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",nT=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Pc;const JN=()=>Pc??(Pc=zN());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $N(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function cA(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function KN(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return cA({start(){},async pull(n){const{done:i,value:r}=await e.next();i?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function fA(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function QN(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const i=t.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XN=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dA=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xh(t,e,n){return dA(),new File(t,e??"unknown_file",n)}function WN(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const ZN=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hA=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",jN=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&hA(t),eD=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function tD(t,e,n){if(dA(),t=await t,jN(t))return t instanceof File?t:Xh([await t.arrayBuffer()],t.name);if(eD(t)){const r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),Xh(await Ep(r),e,n)}const i=await Ep(t);if(e||(e=WN(t)),!(n!=null&&n.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return Xh(i,e,n)}async function Ep(t){var e,n,i,r,a;let u=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)u.push(t);else if(hA(t))u.push(t instanceof Blob?t:await t.arrayBuffer());else if(ZN(t))try{for(var d=!0,g=gi(t),h;h=await g.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const _=r;u.push(...await Ep(_))}}catch(_){n={error:_}}finally{try{!d&&!e&&(i=g.return)&&await i.call(g)}finally{if(n)throw n.error}}else{const _=(a=t==null?void 0:t.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof t}${_?`; constructor: ${_}`:""}${nD(t)}`)}return u}function nD(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pA{constructor(e){this._client=e}}pA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mA(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const iT=Object.freeze(Object.create(null)),iD=(t=mA)=>(function(n,...i){if(n.length===1)return n[0];let r=!1;const a=[],u=n.reduce((_,T,A)=>{var C,P,V;/[?#]/.test(T)&&(r=!0);const M=i[A];let K=(r?encodeURIComponent:t)(""+M);return A!==i.length&&(M==null||typeof M=="object"&&M.toString===((V=Object.getPrototypeOf((P=Object.getPrototypeOf((C=M.hasOwnProperty)!==null&&C!==void 0?C:iT))!==null&&P!==void 0?P:iT))===null||V===void 0?void 0:V.toString))&&(K=M+"",a.push({start:_.length+T.length,length:K.length,error:`Value of type ${Object.prototype.toString.call(M).slice(8,-1)} is not a valid path parameter`})),_+T+(A===i.length?"":K)},""),d=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(d))!==null;)a.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((A,C)=>{const P=" ".repeat(C.start-_),V="^".repeat(C.length);return _=C.start+C.length,A+P+V},"");throw new jn(`Path parameters result in path with invalid segments:
${a.map(A=>A.error).join(`
`)}
${u}
${T}`)}return u}),Vc=iD(mA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gA extends pA{create(e,n){var i;const{api_version:r=this._client.apiVersion}=e,a=of(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new jn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new jn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Vc`/${r}/interactions`,Object.assign(Object.assign({body:a},n),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(Vc`/${r}/interactions/${e}`,i)}cancel(e,n={},i){const{api_version:r=this._client.apiVersion}=n??{};return this._client.post(Vc`/${r}/interactions/${e}/cancel`,i)}get(e,n={},i){var r;const a=n??{},{api_version:u=this._client.apiVersion}=a,d=of(a,["api_version"]);return this._client.get(Vc`/${u}/interactions/${e}`,Object.assign(Object.assign({query:d},i),{stream:(r=n==null?void 0:n.stream)!==null&&r!==void 0?r:!1}))}}gA._key=Object.freeze(["interactions"]);class yA extends gA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oD(t){let e=0;for(const r of t)e+=r.length;const n=new Uint8Array(e);let i=0;for(const r of t)n.set(r,i),i+=r.length;return n}let Uc;function om(t){let e;return(Uc??(e=new globalThis.TextEncoder,Uc=e.encode.bind(e)))(t)}let Lc;function oT(t){let e;return(Lc??(e=new globalThis.TextDecoder,Lc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class If{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?om(e):e;this.buffer=oD([this.buffer,n]);const i=[];let r;for(;(r=sD(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(oT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=oT(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}If.NEWLINE_CHARS=new Set([`
`,"\r"]);If.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function sD(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function rD(t){for(let i=0;i<t.length-1;i++){if(t[i]===10&&t[i+1]===10||t[i]===13&&t[i+1]===13)return i+2;if(t[i]===13&&t[i+1]===10&&i+3<t.length&&t[i+2]===13&&t[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sf={off:0,error:200,warn:300,info:400,debug:500},sT=(t,e,n)=>{if(t){if(BN(sf,t))return t;mn(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(sf))}`)}};function Nl(){}function kc(t,e,n){return!e||sf[t]>sf[n]?Nl:e[t].bind(e)}const aD={error:Nl,warn:Nl,info:Nl,debug:Nl};let rT=new WeakMap;function mn(t){var e;const n=t.logger,i=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return aD;const r=rT.get(n);if(r&&r[0]===i)return r[1];const a={error:kc("error",n,i),warn:kc("warn",n,i),info:kc("info",n,i),debug:kc("debug",n,i)};return rT.set(n,[i,a]),a}const $s=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ta{constructor(e,n,i){this.iterator=e,this.controller=n,this.client=i}static fromSSEResponse(e,n,i){let r=!1;const a=i?mn(i):console;function u(){return mi(this,arguments,function*(){var g,h,_,T;if(r)throw new jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let A=!1;try{try{for(var C=!0,P=gi(lD(e,n)),V;V=yield we(P.next()),g=V.done,!g;C=!0){T=V.value,C=!1;const M=T;if(!A)if(M.data.startsWith("[DONE]")){A=!0;continue}else try{yield yield we(JSON.parse(M.data))}catch(K){throw a.error("Could not parse message into JSON:",M.data),a.error("From chunk:",M.raw),K}}}catch(M){h={error:M}}finally{try{!C&&!g&&(_=P.return)&&(yield we(_.call(P)))}finally{if(h)throw h.error}}A=!0}catch(M){if(yp(M))return yield we(void 0);throw M}finally{A||n.abort()}})}return new ta(u,n,i)}static fromReadableStream(e,n,i){let r=!1;function a(){return mi(this,arguments,function*(){var g,h,_,T;const A=new If,C=fA(e);try{for(var P=!0,V=gi(C),M;M=yield we(V.next()),g=M.done,!g;P=!0){T=M.value,P=!1;const K=T;for(const ee of A.decode(K))yield yield we(ee)}}catch(K){h={error:K}}finally{try{!P&&!g&&(_=V.return)&&(yield we(_.call(V)))}finally{if(h)throw h.error}}for(const K of A.flush())yield yield we(K)})}function u(){return mi(this,arguments,function*(){var g,h,_,T;if(r)throw new jn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let A=!1;try{try{for(var C=!0,P=gi(a()),V;V=yield we(P.next()),g=V.done,!g;C=!0){T=V.value,C=!1;const M=T;A||M&&(yield yield we(JSON.parse(M)))}}catch(M){h={error:M}}finally{try{!C&&!g&&(_=P.return)&&(yield we(_.call(P)))}finally{if(h)throw h.error}}A=!0}catch(M){if(yp(M))return yield we(void 0);throw M}finally{A||n.abort()}})}return new ta(u,n,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),n.push(u)}return a.shift()}});return[new ta(()=>r(e),this.controller,this.client),new ta(()=>r(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return cA({async start(){n=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await n.next();if(a)return i.close();const u=om(JSON.stringify(r)+`
`);i.enqueue(u)}catch(r){i.error(r)}},async cancel(){var i;await((i=n.return)===null||i===void 0?void 0:i.call(n))}})}}function lD(t,e){return mi(this,arguments,function*(){var i,r,a,u;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new jn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new jn("Attempted to iterate over a response with no body");const d=new cD,g=new If,h=fA(t.body);try{for(var _=!0,T=gi(uD(h)),A;A=yield we(T.next()),i=A.done,!i;_=!0){u=A.value,_=!1;const C=u;for(const P of g.decode(C)){const V=d.decode(P);V&&(yield yield we(V))}}}catch(C){r={error:C}}finally{try{!_&&!i&&(a=T.return)&&(yield we(a.call(T)))}finally{if(r)throw r.error}}for(const C of g.flush()){const P=d.decode(C);P&&(yield yield we(P))}})}function uD(t){return mi(this,arguments,function*(){var n,i,r,a;let u=new Uint8Array;try{for(var d=!0,g=gi(t),h;h=yield we(g.next()),n=h.done,!n;d=!0){a=h.value,d=!1;const _=a;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?om(_):_;let A=new Uint8Array(u.length+T.length);A.set(u),A.set(T,u.length),u=A;let C;for(;(C=rD(u))!==-1;)yield yield we(u.slice(0,C)),u=u.slice(C)}}catch(_){i={error:_}}finally{try{!d&&!n&&(r=g.return)&&(yield we(r.call(g)))}finally{if(i)throw i.error}}u.length>0&&(yield yield we(u))})}class cD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,i,r]=fD(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}}function fD(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function dD(t,e){const{response:n,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,u=await(async()=>{var d;if(e.options.stream)return mn(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):ta.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const g=n.headers.get("content-type"),h=(d=g==null?void 0:g.split(";")[0])===null||d===void 0?void 0:d.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await n.json():await n.text()})();return mn(t).debug(`[${i}] response parsed`,$s({retryOfRequestLogID:r,url:n.url,status:n.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sm extends Promise{constructor(e,n,i=dD){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new sm(this.client,this.responsePromise,async(n,i)=>e(await this.parseResponse(n,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _A=Symbol("brand.privateNullableHeaders");function*hD(t){if(!t)return;if(_A in t){const{values:i,nulls:r}=t;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,n;t instanceof Headers?n=t.entries():eT(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let i of n){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=eT(i[1])?i[1]:[i[1]];let u=!1;for(const d of a)d!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,d])}}const Il=t=>{const e=new Headers,n=new Set;for(const i of t){const r=new Set;for(const[a,u]of hD(i)){const d=a.toLowerCase();r.has(d)||(e.delete(a),r.add(d)),u===null?(e.delete(a),n.add(d)):(e.append(a,u),n.delete(d))}}return{[_A]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wh=t=>{var e,n,i,r,a,u;if(typeof globalThis.process<"u")return(i=(n=(e=B1)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,t))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var vA;class wf{constructor(e){var n,i,r,a,u,d,g,{baseURL:h=Wh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(n=Wh("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:T="v1beta"}=e,A=of(e,["baseURL","apiKey","apiVersion"]);const C=Object.assign(Object.assign({apiKey:_,apiVersion:T},A),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=C.baseURL,this.timeout=(i=C.timeout)!==null&&i!==void 0?i:wf.DEFAULT_TIMEOUT,this.logger=(r=C.logger)!==null&&r!==void 0?r:console;const P="warn";this.logLevel=P,this.logLevel=(u=(a=sT(C.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:sT(Wh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:P,this.fetchOptions=C.fetchOptions,this.maxRetries=(d=C.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(g=C.fetch)!==null&&g!==void 0?g:$N(),this.encoder=XN,this._options=C,this.apiKey=_,this.apiVersion=T,this.clientAdapter=C.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=Il([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return Il([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Il([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,i])=>typeof i<"u").map(([n,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(n)}=`;throw new jn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Kr}`}defaultIdempotencyKey(){return`stainless-node-retry-${PN()}`}makeStatusError(e,n,i,r){return yn.generate(e,n,i,r)}buildURL(e,n,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=UN(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return ON(u)||(n=Object.assign(Object.assign({},u),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(a.search=this.stringifyQuery(n)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:i}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:n},r)))}request(e,n=null){return new sm(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,i){var r,a,u;const d=await e,g=(r=d.maxRetries)!==null&&r!==void 0?r:this.maxRetries;n==null&&(n=g),await this.prepareOptions(d);const{req:h,url:_,timeout:T}=await this.buildRequest(d,{retryCount:g-n});await this.prepareRequest(h,{url:_,options:d});const A="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),C=i===void 0?"":`, retryOf: ${i}`,P=Date.now();if(mn(this).debug(`[${A}] sending request`,$s({retryOfRequestLogID:i,method:d.method,url:_,options:d,headers:h.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new vp;const V=new AbortController,M=await this.fetchWithTimeout(_,h,T,V).catch(_p),K=Date.now();if(M instanceof globalThis.Error){const W=`retrying, ${n} attempts remaining`;if(!((u=d.signal)===null||u===void 0)&&u.aborted)throw new vp;const re=yp(M)||/timed? ?out/i.test(String(M)+("cause"in M?String(M.cause):""));if(n)return mn(this).info(`[${A}] connection ${re?"timed out":"failed"} - ${W}`),mn(this).debug(`[${A}] connection ${re?"timed out":"failed"} (${W})`,$s({retryOfRequestLogID:i,url:_,durationMs:K-P,message:M.message})),this.retryRequest(d,n,i??A);throw mn(this).info(`[${A}] connection ${re?"timed out":"failed"} - error; no more retries left`),mn(this).debug(`[${A}] connection ${re?"timed out":"failed"} (error; no more retries left)`,$s({retryOfRequestLogID:i,url:_,durationMs:K-P,message:M.message})),re?new tA:new Rf({cause:M})}const ee=`[${A}${C}] ${h.method} ${_} ${M.ok?"succeeded":"failed"} with status ${M.status} in ${K-P}ms`;if(!M.ok){const W=await this.shouldRetry(M);if(n&&W){const I=`retrying, ${n} attempts remaining`;return await QN(M.body),mn(this).info(`${ee} - ${I}`),mn(this).debug(`[${A}] response error (${I})`,$s({retryOfRequestLogID:i,url:M.url,status:M.status,headers:M.headers,durationMs:K-P})),this.retryRequest(d,n,i??A,M.headers)}const re=W?"error; no more retries left":"error; not retryable";mn(this).info(`${ee} - ${re}`);const fe=await M.text().catch(I=>_p(I).message),ae=FN(fe),N=ae?void 0:fe;throw mn(this).debug(`[${A}] response error (${re})`,$s({retryOfRequestLogID:i,url:M.url,status:M.status,headers:M.headers,message:N,durationMs:Date.now()-P})),this.makeStatusError(M.status,ae,N,M.headers)}return mn(this).info(ee),mn(this).debug(`[${A}] response start`,$s({retryOfRequestLogID:i,url:M.url,status:M.status,headers:M.headers,durationMs:K-P})),{response:M,options:d,controller:V,requestLogID:A,retryOfRequestLogID:i,startTime:P}}async fetchWithTimeout(e,n,i,r){const a=n||{},{signal:u,method:d}=a,g=of(a,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),i),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);d&&(T.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,i,r){var a;let u;const d=r==null?void 0:r.get("retry-after-ms");if(d){const h=parseFloat(d);Number.isNaN(h)||(u=h)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const h=parseFloat(g);Number.isNaN(h)?u=Date.parse(g)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,h)}return await GN(u),this.makeRequest(e,n-1,i)}calculateDefaultRetryTimeoutMillis(e,n){const a=n-e,u=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return u*d*1e3}async buildRequest(e,{retryCount:n=0}={}){var i,r,a;const u=Object.assign({},e),{method:d,path:g,query:h,defaultBaseURL:_}=u,T=this.buildURL(g,h,_);"timeout"in u&&qN("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:A,body:C}=this.buildBody({options:u}),P=await this.buildHeaders({options:e,method:d,bodyHeaders:A,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:P},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&C instanceof globalThis.ReadableStream&&{duplex:"half"}),C&&{body:C}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let d=Il([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),JN()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Il([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:KN(e)}:this.encoder({body:e,headers:i})}}wf.DEFAULT_TIMEOUT=6e4;class Qt extends wf{constructor(){super(...arguments),this.interactions=new yA(this)}}vA=Qt;Qt.GeminiNextGenAPIClient=vA;Qt.GeminiNextGenAPIClientError=jn;Qt.APIError=yn;Qt.APIConnectionError=Rf;Qt.APIConnectionTimeoutError=tA;Qt.APIUserAbortError=vp;Qt.NotFoundError=sA;Qt.ConflictError=rA;Qt.RateLimitError=lA;Qt.BadRequestError=nA;Qt.AuthenticationError=iA;Qt.InternalServerError=uA;Qt.PermissionDeniedError=oA;Qt.UnprocessableEntityError=aA;Qt.toFile=tD;Qt.Interactions=yA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pD(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function mD(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function gD(t,e){const n={},i=f(t,["sdkHttpResponse"]);return i!=null&&p(n,["sdkHttpResponse"],i),n}function yD(t,e){const n={},i=f(t,["sdkHttpResponse"]);return i!=null&&p(n,["sdkHttpResponse"],i),n}function _D(t,e,n){const i={};if(f(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),f(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=f(t,["epochCount"]);e!==void 0&&a!=null&&p(e,["tuningTask","hyperparameters","epochCount"],a);const u=f(t,["learningRateMultiplier"]);if(u!=null&&p(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),f(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=f(t,["batchSize"]);e!==void 0&&d!=null&&p(e,["tuningTask","hyperparameters","batchSize"],d);const g=f(t,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),f(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function vD(t,e,n){const i={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const C=f(t,["validationDataset"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec"],aT(C))}else if(r==="PREFERENCE_TUNING"){const C=f(t,["validationDataset"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec"],aT(C))}const a=f(t,["tunedModelDisplayName"]);e!==void 0&&a!=null&&p(e,["tunedModelDisplayName"],a);const u=f(t,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let d=f(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const C=f(t,["epochCount"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],C)}else if(d==="PREFERENCE_TUNING"){const C=f(t,["epochCount"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],C)}let g=f(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const C=f(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],C)}else if(g==="PREFERENCE_TUNING"){const C=f(t,["learningRateMultiplier"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],C)}let h=f(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const C=f(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],C)}else if(h==="PREFERENCE_TUNING"){const C=f(t,["exportLastCheckpointOnly"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],C)}let _=f(n,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const C=f(t,["adapterSize"]);e!==void 0&&C!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],C)}else if(_==="PREFERENCE_TUNING"){const C=f(t,["adapterSize"]);e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],C)}if(f(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(t,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const A=f(t,["beta"]);return e!==void 0&&A!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],A),i}function TD(t,e){const n={},i=f(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const r=f(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const a=f(t,["trainingDataset"]);a!=null&&DD(a);const u=f(t,["config"]);return u!=null&&_D(u,n),n}function ED(t,e){const n={},i=f(t,["baseModel"]);i!=null&&p(n,["baseModel"],i);const r=f(t,["preTunedModel"]);r!=null&&p(n,["preTunedModel"],r);const a=f(t,["trainingDataset"]);a!=null&&MD(a,n,e);const u=f(t,["config"]);return u!=null&&vD(u,n,e),n}function AD(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function SD(t,e){const n={},i=f(t,["name"]);return i!=null&&p(n,["_url","name"],i),n}function xD(t,e,n){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function CD(t,e,n){const i={},r=f(t,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const a=f(t,["pageToken"]);e!==void 0&&a!=null&&p(e,["_query","pageToken"],a);const u=f(t,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function bD(t,e){const n={},i=f(t,["config"]);return i!=null&&xD(i,n),n}function RD(t,e){const n={},i=f(t,["config"]);return i!=null&&CD(i,n),n}function ID(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const a=f(t,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>TA(d))),p(n,["tuningJobs"],u)}return n}function wD(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=f(t,["nextPageToken"]);r!=null&&p(n,["nextPageToken"],r);const a=f(t,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(d=>Ap(d))),p(n,["tuningJobs"],u)}return n}function ND(t,e){const n={},i=f(t,["name"]);i!=null&&p(n,["model"],i);const r=f(t,["name"]);return r!=null&&p(n,["endpoint"],r),n}function DD(t,e){const n={};if(f(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=f(t,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),p(n,["examples","examples"],r)}return n}function MD(t,e,n){const i={};let r=f(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=f(t,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let a=f(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=f(t,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(f(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function TA(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const a=f(t,["state"]);a!=null&&p(n,["state"],LE(a));const u=f(t,["createTime"]);u!=null&&p(n,["createTime"],u);const d=f(t,["tuningTask","startTime"]);d!=null&&p(n,["startTime"],d);const g=f(t,["tuningTask","completeTime"]);g!=null&&p(n,["endTime"],g);const h=f(t,["updateTime"]);h!=null&&p(n,["updateTime"],h);const _=f(t,["description"]);_!=null&&p(n,["description"],_);const T=f(t,["baseModel"]);T!=null&&p(n,["baseModel"],T);const A=f(t,["_self"]);return A!=null&&p(n,["tunedModel"],ND(A)),n}function Ap(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const a=f(t,["state"]);a!=null&&p(n,["state"],LE(a));const u=f(t,["createTime"]);u!=null&&p(n,["createTime"],u);const d=f(t,["startTime"]);d!=null&&p(n,["startTime"],d);const g=f(t,["endTime"]);g!=null&&p(n,["endTime"],g);const h=f(t,["updateTime"]);h!=null&&p(n,["updateTime"],h);const _=f(t,["error"]);_!=null&&p(n,["error"],_);const T=f(t,["description"]);T!=null&&p(n,["description"],T);const A=f(t,["baseModel"]);A!=null&&p(n,["baseModel"],A);const C=f(t,["tunedModel"]);C!=null&&p(n,["tunedModel"],C);const P=f(t,["preTunedModel"]);P!=null&&p(n,["preTunedModel"],P);const V=f(t,["supervisedTuningSpec"]);V!=null&&p(n,["supervisedTuningSpec"],V);const M=f(t,["preferenceOptimizationSpec"]);M!=null&&p(n,["preferenceOptimizationSpec"],M);const K=f(t,["tuningDataStats"]);K!=null&&p(n,["tuningDataStats"],K);const ee=f(t,["encryptionSpec"]);ee!=null&&p(n,["encryptionSpec"],ee);const W=f(t,["partnerModelTuningSpec"]);W!=null&&p(n,["partnerModelTuningSpec"],W);const re=f(t,["customBaseModel"]);re!=null&&p(n,["customBaseModel"],re);const fe=f(t,["experiment"]);fe!=null&&p(n,["experiment"],fe);const ae=f(t,["labels"]);ae!=null&&p(n,["labels"],ae);const N=f(t,["outputUri"]);N!=null&&p(n,["outputUri"],N);const w=f(t,["pipelineJob"]);w!=null&&p(n,["pipelineJob"],w);const I=f(t,["serviceAccount"]);I!=null&&p(n,["serviceAccount"],I);const L=f(t,["tunedModelDisplayName"]);L!=null&&p(n,["tunedModelDisplayName"],L);const k=f(t,["veoTuningSpec"]);return k!=null&&p(n,["veoTuningSpec"],k),n}function PD(t,e){const n={},i=f(t,["sdkHttpResponse"]);i!=null&&p(n,["sdkHttpResponse"],i);const r=f(t,["name"]);r!=null&&p(n,["name"],r);const a=f(t,["metadata"]);a!=null&&p(n,["metadata"],a);const u=f(t,["done"]);u!=null&&p(n,["done"],u);const d=f(t,["error"]);return d!=null&&p(n,["error"],d),n}function aT(t,e){const n={},i=f(t,["gcsUri"]);i!=null&&p(n,["validationDatasetUri"],i);const r=f(t,["vertexDatasetResource"]);return r!=null&&p(n,["validationDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VD extends vo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new er(mo.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},n),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),a=await this.tuneMldevInternal(r);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:cp.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=SD(e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>Ap(_))}else{const h=AD(e);return d=he("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>TA(_))}}async listInternal(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=RD(e);return d=he("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=wD(_),A=new Pv;return Object.assign(A,T),A})}else{const h=bD(e);return d=he("tunedModels",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=ID(_),A=new Pv;return Object.assign(A,T),A})}}async cancel(e){var n,i,r,a;let u,d="",g={};if(this.apiClient.isVertexAI()){const h=mD(e);return d=he("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=yD(_),A=new Vv;return Object.assign(A,T),A})}else{const h=pD(e);return d=he("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:d,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const A=T;return A.sdkHttpResponse={headers:_.headers},A})),u.then(_=>{const T=gD(_),A=new Vv;return Object.assign(A,T),A})}}async tuneInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI()){const d=ED(e,e);return a=he("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>Ap(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let r,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=TD(e);return a=he("tunedModels",d._url),u=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>PD(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UD{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const LD=1024*1024*8,kD=3,OD=1e3,BD=2,rf="x-goog-upload-status";async function qD(t,e,n){var i;const r=await EA(t,e,n),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[rf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function FD(t,e,n){var i;const r=await EA(t,e,n),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[rf])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=NE(a),d=new Zp;return Object.assign(d,u),d}async function EA(t,e,n){var i,r;let a=0,u=0,d=new fp(new Response),g="upload";for(a=t.size;u<a;){const h=Math.min(LD,a-u),_=t.slice(u,u+h);u+h>=a&&(g+=", finalize");let T=0,A=OD;for(;T<kD&&(d=await n.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[rf]));)T++,await HD(A),A=A*BD;if(u+=h,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[rf])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function GD(t){return{size:t.size,type:t.type}}function HD(t){return new Promise(e=>setTimeout(e,t))}class zD{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await qD(e,n,i)}async uploadToFileSearchStore(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await FD(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await GD(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class YD{create(e,n,i){return new JD(e,n,i)}}class JD{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lT="x-goog-api-key";class $D{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(lT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(lT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KD="gl-node/";class QD{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const n=new Qt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=H1(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new $D(this.apiKey);this.apiClient=new G2({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:KD+"web",uploader:new zD,downloader:new UD}),this.models=new aN(this.apiClient),this.live=new tN(this.apiClient,r,new YD),this.batches=new _R(this.apiClient),this.chats=new jR(this.models,this.apiClient),this.caches=new XR(this.apiClient),this.files=new uI(this.apiClient),this.operations=new lN(this.apiClient),this.authTokens=new xN(this.apiClient),this.tunings=new VD(this.apiClient),this.fileSearchStores=new MN(this.apiClient)}}async function XD(t,e,n,i=[]){try{const r=new QD({apiKey:"AIzaSyBKPXWnz3kfrVopkcKKUUMoZa6ms42x_eY"}),a=i.filter(T=>T==="Juval"||T==="Theo"),d=`You are a warm, loving family storyteller documenting the life of two brothers, Juval and Theo.
    
    CHARACTER CONTEXT:
    - Juval: The older brother. He's curious, protective, and learning new things every day.
    - Theo: The younger brother. He's energetic, exploring the world with wide eyes, and often imitating Juval.
    
    ${a.length>0?`This memory features: ${a.join(" and ")}.`:"The photos show the daily lives of two brothers, Juval and Theo."}
    ${n?`CONTEXT FROM THE PARENT: "${n}"`:""}

    Analyze the photos and generate a heartfelt, realistic scrapbook entry:
    1. A short, sweet title (1-3 words).
    2. A warm, funny, or observational sentence about this specific family moment.
    
    CRITICAL RULES:
    - Keep it realistic. Avoid "superhero" or "spy" themes. Focus on "growing up," "playing," "learning," or "brotherly love."
    - DO NOT mention a boy if he is not present or tagged.
    
    Provide the output in BOTH English and Spanish.
    The parent writing this is: ${e}.`,g=t.map(T=>({inlineData:{mimeType:"image/jpeg",data:T.split(",")[1]}})),h=await r.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[...g,{text:d}]},config:{responseMimeType:"application/json",responseSchema:{type:gn.OBJECT,properties:{en:{type:gn.OBJECT,properties:{title:{type:gn.STRING},caption:{type:gn.STRING}},required:["title","caption"]},es:{type:gn.OBJECT,properties:{title:{type:gn.STRING},caption:{type:gn.STRING}},required:["title","caption"]}},required:["en","es"]}}});return JSON.parse(h.text||"{}")}catch(r){return console.error("Gemini Generation Error:",r),{en:{title:"A Special Moment",caption:"Capturing another beautiful day in our lives."},es:{title:"Un Momento Especial",caption:"Capturando otro hermoso da en nuestras vidas."}}}}const AA=({pin:t,onPinChange:e,maxLength:n=4,lang:i,autoSubmit:r=!0,onSubmit:a})=>{const u=d=>{if(d==="C")e("");else if(d==="")e(t.slice(0,-1));else if(t.length<n){const g=t+d;e(g),r&&g.length===n&&a&&requestAnimationFrame(()=>{setTimeout(()=>a(),100)})}};return q.jsxs("div",{className:"w-full",children:[q.jsx("div",{className:"flex justify-center gap-6 mb-12",children:[...Array(n)].map((d,g)=>q.jsx("div",{className:`w-10 h-10 rounded-full border-[8px] border-slate-800 transition-all ${t.length>g?"bg-slate-800 scale-125":"bg-white"}`},g))}),q.jsx("div",{className:"grid grid-cols-3 gap-6 max-w-sm mx-auto",children:["1","2","3","4","5","6","7","8","9","C","0",""].map(d=>q.jsx("button",{onClick:()=>u(d),className:"aspect-square bg-white border-[6px] border-slate-800 shadow-[4px_4px_0px_#1e293b] flex items-center justify-center text-4xl font-black text-slate-800 hover:bg-amber-400 active:translate-y-1 transition-all rounded-[24px]",children:d},d))})]})},WD={};var Sp=null;function ZD(t){try{return crypto.getRandomValues(new Uint8Array(t))}catch{}try{return WD.randomBytes(t)}catch{}if(!Sp)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return Sp(t)}function jD(t){Sp=t}function rm(t,e){if(t=t||am,typeof t!="number")throw Error("Illegal arguments: "+typeof t+", "+typeof e);t<4?t=4:t>31&&(t=31);var n=[];return n.push("$2b$"),t<10&&n.push("0"),n.push(t.toString()),n.push("$"),n.push(af(ZD(ql),ql)),n.join("")}function SA(t,e,n){if(typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t=void 0),typeof t>"u")t=am;else if(typeof t!="number")throw Error("illegal arguments: "+typeof t);function i(r){di(function(){try{r(null,rm(t))}catch(a){r(a)}})}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);i(n)}else return new Promise(function(r,a){i(function(u,d){if(u){a(u);return}r(d)})})}function xA(t,e){if(typeof e>"u"&&(e=am),typeof e=="number"&&(e=rm(e)),typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return xp(t,e)}function CA(t,e,n,i){function r(a){typeof t=="string"&&typeof e=="number"?SA(e,function(u,d){xp(t,d,a,i)}):typeof t=="string"&&typeof e=="string"?xp(t,e,a,i):di(a.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)))}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(a,u){r(function(d,g){if(d){u(d);return}a(g)})})}function bA(t,e){for(var n=t.length^e.length,i=0;i<t.length;++i)n|=t.charCodeAt(i)^e.charCodeAt(i);return n===0}function eM(t,e){if(typeof t!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof e);return e.length!==60?!1:bA(xA(t,e.substring(0,e.length-31)),e)}function tM(t,e,n,i){function r(a){if(typeof t!="string"||typeof e!="string"){di(a.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof e)));return}if(e.length!==60){di(a.bind(this,null,!1));return}CA(t,e.substring(0,29),function(u,d){u?a(u):a(null,bA(d,e))},i)}if(n){if(typeof n!="function")throw Error("Illegal callback: "+typeof n);r(n)}else return new Promise(function(a,u){r(function(d,g){if(d){u(d);return}a(g)})})}function nM(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return parseInt(t.split("$")[2],10)}function iM(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);if(t.length!==60)throw Error("Illegal hash length: "+t.length+" != 60");return t.substring(0,29)}function oM(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return RA(t)>72}var di=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;function RA(t){for(var e=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?e+=1:n<2048?e+=2:(n&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320?(++i,e+=4):e+=3;return e}function sM(t){for(var e=0,n,i,r=new Array(RA(t)),a=0,u=t.length;a<u;++a)n=t.charCodeAt(a),n<128?r[e++]=n:n<2048?(r[e++]=n>>6|192,r[e++]=n&63|128):(n&64512)===55296&&((i=t.charCodeAt(a+1))&64512)===56320?(n=65536+((n&1023)<<10)+(i&1023),++a,r[e++]=n>>18|240,r[e++]=n>>12&63|128,r[e++]=n>>6&63|128,r[e++]=n&63|128):(r[e++]=n>>12|224,r[e++]=n>>6&63|128,r[e++]=n&63|128);return r}var $r="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),es=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function af(t,e){var n=0,i=[],r,a;if(e<=0||e>t.length)throw Error("Illegal len: "+e);for(;n<e;){if(r=t[n++]&255,i.push($r[r>>2&63]),r=(r&3)<<4,n>=e){i.push($r[r&63]);break}if(a=t[n++]&255,r|=a>>4&15,i.push($r[r&63]),r=(a&15)<<2,n>=e){i.push($r[r&63]);break}a=t[n++]&255,r|=a>>6&3,i.push($r[r&63]),i.push($r[a&63])}return i.join("")}function IA(t,e){var n=0,i=t.length,r=0,a=[],u,d,g,h,_,T;if(e<=0)throw Error("Illegal len: "+e);for(;n<i-1&&r<e&&(T=t.charCodeAt(n++),u=T<es.length?es[T]:-1,T=t.charCodeAt(n++),d=T<es.length?es[T]:-1,!(u==-1||d==-1||(_=u<<2>>>0,_|=(d&48)>>4,a.push(String.fromCharCode(_)),++r>=e||n>=i)||(T=t.charCodeAt(n++),g=T<es.length?es[T]:-1,g==-1)||(_=(d&15)<<4>>>0,_|=(g&60)>>2,a.push(String.fromCharCode(_)),++r>=e||n>=i)));)T=t.charCodeAt(n++),h=T<es.length?es[T]:-1,_=(g&3)<<6>>>0,_|=h,a.push(String.fromCharCode(_)),++r;var A=[];for(n=0;n<r;n++)A.push(a[n].charCodeAt(0));return A}var ql=16,am=10,rM=16,aM=100,uT=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],cT=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],wA=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Fl(t,e,n,i){var r,a=t[e],u=t[e+1];return a^=n[0],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[1],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[2],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[3],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[4],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[5],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[6],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[7],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[8],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[9],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[10],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[11],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[12],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[13],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[14],r=i[a>>>24],r+=i[256|a>>16&255],r^=i[512|a>>8&255],r+=i[768|a&255],u^=r^n[15],r=i[u>>>24],r+=i[256|u>>16&255],r^=i[512|u>>8&255],r+=i[768|u&255],a^=r^n[16],t[e]=u^n[rM+1],t[e+1]=a,t}function Qr(t,e){for(var n=0,i=0;n<4;++n)i=i<<8|t[e]&255,e=(e+1)%t.length;return{key:i,offp:e}}function fT(t,e,n){for(var i=0,r=[0,0],a=e.length,u=n.length,d,g=0;g<a;g++)d=Qr(t,i),i=d.offp,e[g]=e[g]^d.key;for(g=0;g<a;g+=2)r=Fl(r,0,e,n),e[g]=r[0],e[g+1]=r[1];for(g=0;g<u;g+=2)r=Fl(r,0,e,n),n[g]=r[0],n[g+1]=r[1]}function lM(t,e,n,i){for(var r=0,a=[0,0],u=n.length,d=i.length,g,h=0;h<u;h++)g=Qr(e,r),r=g.offp,n[h]=n[h]^g.key;for(r=0,h=0;h<u;h+=2)g=Qr(t,r),r=g.offp,a[0]^=g.key,g=Qr(t,r),r=g.offp,a[1]^=g.key,a=Fl(a,0,n,i),n[h]=a[0],n[h+1]=a[1];for(h=0;h<d;h+=2)g=Qr(t,r),r=g.offp,a[0]^=g.key,g=Qr(t,r),r=g.offp,a[1]^=g.key,a=Fl(a,0,n,i),i[h]=a[0],i[h+1]=a[1]}function dT(t,e,n,i,r){var a=wA.slice(),u=a.length,d;if(n<4||n>31)if(d=Error("Illegal number of rounds (4-31): "+n),i){di(i.bind(this,d));return}else throw d;if(e.length!==ql)if(d=Error("Illegal salt length: "+e.length+" != "+ql),i){di(i.bind(this,d));return}else throw d;n=1<<n>>>0;var g,h,_=0,T;typeof Int32Array=="function"?(g=new Int32Array(uT),h=new Int32Array(cT)):(g=uT.slice(),h=cT.slice()),lM(e,t,g,h);function A(){if(r&&r(_/n),_<n)for(var P=Date.now();_<n&&(_=_+1,fT(t,g,h),fT(e,g,h),!(Date.now()-P>aM)););else{for(_=0;_<64;_++)for(T=0;T<u>>1;T++)Fl(a,T<<1,g,h);var V=[];for(_=0;_<u;_++)V.push((a[_]>>24&255)>>>0),V.push((a[_]>>16&255)>>>0),V.push((a[_]>>8&255)>>>0),V.push((a[_]&255)>>>0);if(i){i(null,V);return}else return V}i&&di(A)}if(typeof i<"u")A();else for(var C;;)if(typeof(C=A())<"u")return C||[]}function xp(t,e,n,i){var r;if(typeof t!="string"||typeof e!="string")if(r=Error("Invalid string / salt: Not a string"),n){di(n.bind(this,r));return}else throw r;var a,u;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(r=Error("Invalid salt version: "+e.substring(0,2)),n){di(n.bind(this,r));return}else throw r;if(e.charAt(2)==="$")a="\0",u=3;else{if(a=e.charAt(2),a!=="a"&&a!=="b"&&a!=="y"||e.charAt(3)!=="$")if(r=Error("Invalid salt revision: "+e.substring(2,4)),n){di(n.bind(this,r));return}else throw r;u=4}if(e.charAt(u+2)>"$")if(r=Error("Missing salt rounds"),n){di(n.bind(this,r));return}else throw r;var d=parseInt(e.substring(u,u+1),10)*10,g=parseInt(e.substring(u+1,u+2),10),h=d+g,_=e.substring(u+3,u+25);t+=a>="a"?"\0":"";var T=sM(t),A=IA(_,ql);function C(P){var V=[];return V.push("$2"),a>="a"&&V.push(a),V.push("$"),h<10&&V.push("0"),V.push(h.toString()),V.push("$"),V.push(af(A,A.length)),V.push(af(P,wA.length*4-1)),V.join("")}if(typeof n>"u")return C(dT(T,A,h));dT(T,A,h,function(P,V){P?n(P,null):n(null,C(V))},i)}function uM(t,e){return af(t,e)}function cM(t,e){return IA(t,e)}const NA={setRandomFallback:jD,genSaltSync:rm,genSalt:SA,hashSync:xA,hash:CA,compareSync:eM,compare:tM,getRounds:nM,getSalt:iM,truncates:oM,encodeBase64:uM,decodeBase64:cM},yi={AUTH_DAD:"juval-theo-auth-dad",AUTH_MOM:"juval-theo-auth-mom",AUTH_INITIALIZED:"juval-theo-auth-initialized",AUTH_NEEDS_UPDATE:"juval-theo-auth-needs-update",CURRENT_USER:"juval-theo-user"},fM=10;function Cp(t){try{return NA.hashSync(t,fM)}catch(e){throw console.error("Error hashing PIN:",e),e}}function dM(t,e){try{return NA.compareSync(t,e)}catch(n){return console.error("Error verifying PIN:",n),!1}}function bp(t="0000",e="5555"){const n=Cp(t),i=Cp(e);localStorage.setItem(yi.AUTH_DAD,n),localStorage.setItem(yi.AUTH_MOM,i),localStorage.setItem(yi.AUTH_INITIALIZED,"true")}function DA(){return localStorage.getItem(yi.AUTH_INITIALIZED)==="true"}function hM(){try{return DA()?!1:(bp("0000","5555"),localStorage.setItem(yi.AUTH_NEEDS_UPDATE,"true"),!0)}catch(t){return console.error("Error during auth migration:",t),!1}}function MA(t,e){const n=t==="Dad"?yi.AUTH_DAD:yi.AUTH_MOM,i=localStorage.getItem(n);return i?dM(e,i):!1}function pM(t,e){const n=t==="Dad"?yi.AUTH_DAD:yi.AUTH_MOM,i=Cp(e);localStorage.setItem(n,i),localStorage.removeItem(yi.AUTH_NEEDS_UPDATE)}function hT(){return localStorage.getItem(yi.AUTH_NEEDS_UPDATE)==="true"}const mM=({lang:t,onComplete:e,theme:n})=>{const[i,r]=Be.useState("welcome"),[a,u]=Be.useState(""),[d,g]=Be.useState(""),[h,_]=Be.useState(""),[T,A]=Be.useState(""),[C,P]=Be.useState(""),V={welcome:t==="es"?"Bienvenidos!":"Welcome!",setupMessage:t==="es"?"Vamos a crear cdigos secretos para el lbum familiar":"Let's create secret codes for your family album",dadTurn:t==="es"?"Pap: Elige tu cdigo":"Dad: Choose your code",momTurn:t==="es"?"Mam: Elige tu cdigo":"Mom: Choose your code",confirmPin:t==="es"?"Confirma tu cdigo":"Confirm your code",continue:t==="es"?"Continuar":"Continue",error:t==="es"?"Los cdigos no coinciden!":"Codes do not match!",success:t==="es"?"Cdigos guardados!":"Codes saved!",skip:t==="es"?"Usar cdigos por defecto (0000 y 5555)":"Use default codes (0000 & 5555)"},M=()=>{if(C.length===4)switch(i){case"dad-pin":u(C),P(""),r("dad-confirm");break;case"dad-confirm":C===a?(g(C),P(""),r("mom-pin")):(alert(V.error),P(""),r("dad-pin"));break;case"mom-pin":_(C),P(""),r("mom-confirm");break;case"mom-confirm":C===h?(A(C),bp(a,h),r("complete"),setTimeout(()=>e(),2e3)):(alert(V.error),P(""),r("mom-pin"));break}},K=()=>{bp("0000","5555"),e()};if(Be.useEffect(()=>{if(C.length===4&&i!=="welcome"&&i!=="complete"){const re=setTimeout(()=>{M()},150);return()=>clearTimeout(re)}},[C,i]),i==="welcome")return q.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:q.jsxs("div",{className:"bg-white cartoon-border p-12 rounded-[50px] text-center animate-fade-in shadow-2xl max-w-2xl",children:[q.jsx("h1",{className:"text-5xl font-black text-slate-800 mb-6 uppercase",children:V.welcome}),q.jsx("p",{className:"text-2xl text-slate-600 mb-12 italic",children:V.setupMessage}),q.jsx("button",{onClick:()=>r("dad-pin"),className:"bg-amber-400 text-slate-800 cartoon-border px-12 py-6 rounded-3xl font-black text-2xl uppercase cartoon-button mb-4",children:V.continue}),q.jsx("button",{onClick:K,className:"block mx-auto text-slate-400 font-bold text-sm uppercase hover:text-slate-600 transition-colors mt-6",children:V.skip})]})});if(i==="complete")return q.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:q.jsxs("div",{className:"bg-white cartoon-border p-12 rounded-[50px] text-center animate-fade-in shadow-2xl",children:[q.jsx("span",{className:"text-9xl mb-6 block",children:""}),q.jsx("h2",{className:"text-4xl font-black text-green-600 uppercase",children:V.success})]})});const W=(()=>{switch(i){case"dad-pin":return{title:V.dadTurn,emoji:"",color:"bg-sky-500"};case"dad-confirm":return{title:V.confirmPin,emoji:"",color:"bg-sky-500"};case"mom-pin":return{title:V.momTurn,emoji:"",color:"bg-rose-400"};case"mom-confirm":return{title:V.confirmPin,emoji:"",color:"bg-rose-400"};default:return{title:"",emoji:"",color:""}}})();return q.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:q.jsxs("div",{className:`${W.color} cartoon-border p-10 rounded-[50px] w-full max-w-md text-center animate-fade-in shadow-2xl`,children:[q.jsx("span",{className:"text-9xl mb-6 block",children:W.emoji}),q.jsx("h3",{className:"text-3xl font-black mb-8 uppercase text-white",children:W.title}),q.jsx(AA,{pin:C,onPinChange:P,lang:t,autoSubmit:!1})]})})},gM=({lang:t,user:e,theme:n,onBack:i})=>{const[r,a]=Be.useState("verify"),[u,d]=Be.useState(""),[g,h]=Be.useState(""),[_,T]=Be.useState(""),A={settings:t==="es"?"Configuracin":"Settings",changePin:t==="es"?"Cambiar Cdigo Secreto":"Change Secret Code",enterCurrent:t==="es"?"Ingresa tu cdigo actual":"Enter your current code",enterNew:t==="es"?"Ingresa tu nuevo cdigo":"Enter your new code",confirmNew:t==="es"?"Confirma tu nuevo cdigo":"Confirm your new code",wrongPin:t==="es"?"Cdigo incorrecto!":"Wrong code!",noMatch:t==="es"?"Los cdigos no coinciden!":"Codes do not match!",success:t==="es"?"Cdigo actualizado!":"Code updated!",back:t==="es"?" Volver":" Back"},C=()=>{u.length===4&&(MA(e,u)?(d(""),a("new")):(alert(A.wrongPin),d("")))},P=()=>{u.length===4&&(h(u),d(""),a("confirm"))},V=()=>{u.length===4&&(u===g?(pM(e,g),a("success"),setTimeout(()=>{i()},2e3)):(alert(A.noMatch),d(""),h(""),a("new")))},M=()=>{switch(r){case"verify":C();break;case"new":P();break;case"confirm":V();break}};Be.useEffect(()=>{if(u.length===4){const fe=setTimeout(()=>{M()},150);return()=>clearTimeout(fe)}},[u]);const K=n==="evening"?"text-white":"text-slate-800",ee=e==="Dad"?"bg-sky-500":"bg-rose-400",W=e==="Dad"?"":"";if(r==="success")return q.jsx("div",{className:"py-10 px-4 max-w-4xl mx-auto",children:q.jsx("div",{className:"min-h-[60vh] flex items-center justify-center",children:q.jsxs("div",{className:"bg-white cartoon-border p-12 rounded-[50px] text-center animate-fade-in shadow-2xl",children:[q.jsx("span",{className:"text-9xl mb-6 block",children:""}),q.jsx("h2",{className:"text-4xl font-black text-green-600 uppercase",children:A.success})]})})});const re=()=>{switch(r){case"verify":return A.enterCurrent;case"new":return A.enterNew;case"confirm":return A.confirmNew;default:return""}};return q.jsxs("div",{className:"py-10 px-4 max-w-4xl mx-auto",children:[q.jsx("button",{onClick:i,className:"bg-white text-slate-800 cartoon-border px-8 py-4 rounded-2xl font-black text-xl mb-12 cartoon-button shadow-md",children:A.back}),q.jsx("h1",{className:`text-5xl font-black ${K} uppercase mb-12 text-center`,children:A.settings}),q.jsxs("div",{className:`${ee} cartoon-border p-10 rounded-[50px] max-w-md mx-auto text-center animate-fade-in shadow-2xl`,children:[q.jsx("span",{className:"text-7xl mb-4 block",children:W}),q.jsx("h2",{className:"text-3xl font-black text-white uppercase mb-2",children:A.changePin}),q.jsx("p",{className:"text-xl font-bold text-white/80 mb-8 italic",children:re()}),q.jsx(AA,{pin:u,onPinChange:d,lang:t,autoSubmit:!1})]})]})};async function yM(t,e=800,n=.7){return new Promise((i,r)=>{const a=new Image;a.onload=()=>{let u=a.width,d=a.height;u>e&&(d=d*e/u,u=e);const g=document.createElement("canvas");g.width=u,g.height=d;const h=g.getContext("2d");if(!h){r(new Error("Could not get canvas context"));return}h.drawImage(a,0,0,u,d);const _=g.toDataURL("image/jpeg",n);i(_)},a.onerror=()=>{r(new Error("Failed to load image"))},a.src=t})}async function _M(t,e=800,n=.7){return Promise.all(t.map(i=>yM(i,e,n)))}const vM=()=>{};var pT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},TM=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=t[n++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=t[n++],u=t[n++],d=t[n++],g=((r&7)<<18|(a&63)<<12|(u&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const a=t[n++],u=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|u&63)}}return e.join("")},VA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const a=t[r],u=r+1<t.length,d=u?t[r+1]:0,g=r+2<t.length,h=g?t[r+2]:0,_=a>>2,T=(a&3)<<4|d>>4;let A=(d&15)<<2|h>>6,C=h&63;g||(C=64,u||(A=64)),i.push(n[_],n[T],n[A],n[C])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):TM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const a=n[t.charAt(r++)],d=r<t.length?n[t.charAt(r)]:0;++r;const h=r<t.length?n[t.charAt(r)]:64;++r;const T=r<t.length?n[t.charAt(r)]:64;if(++r,a==null||d==null||h==null||T==null)throw new EM;const A=a<<2|d>>4;if(i.push(A),h!==64){const C=d<<4&240|h>>2;if(i.push(C),T!==64){const P=h<<6&192|T;i.push(P)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AM=function(t){const e=PA(t);return VA.encodeByteArray(e,!0)},lf=function(t){return AM(t).replace(/\./g,"")},SM=function(t){try{return VA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM=()=>xM().__FIREBASE_DEFAULTS__,bM=()=>{if(typeof process>"u"||typeof pT>"u")return;const t=pT.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},RM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SM(t[1]);return e&&JSON.parse(e)},lm=()=>{try{return vM()||CM()||bM()||RM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},IM=t=>{var e,n;return(n=(e=lm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},UA=t=>{const e=IM(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},LA=()=>{var t;return(t=lm())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function kA(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[lf(JSON.stringify(n)),lf(JSON.stringify(u)),""].join(".")}const Vl={};function NM(){const t={prod:[],emulator:[]};for(const e of Object.keys(Vl))Vl[e]?t.emulator.push(e):t.prod.push(e);return t}function DM(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let mT=!1;function BA(t,e){if(typeof window>"u"||typeof document>"u"||!Zl(window.location.host)||Vl[t]===e||Vl[t]||mT)return;Vl[t]=e;function n(A){return`__firebase__banner__${A}`}const i="__firebase__banner",a=NM().prod.length>0;function u(){const A=document.getElementById(i);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function g(A,C){A.setAttribute("width","24"),A.setAttribute("id",C),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function h(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{mT=!0,u()},A}function _(A,C){A.setAttribute("id",C),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=DM(i),C=n("text"),P=document.getElementById(C)||document.createElement("span"),V=n("learnmore"),M=document.getElementById(V)||document.createElement("a"),K=n("preprendIcon"),ee=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const W=A.element;d(W),_(M,V);const re=h();g(ee,K),W.append(ee,P,M,re),document.body.appendChild(W)}a?(P.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MM(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PM(){var e;const t=(e=lm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VM(){return!PM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UM(){try{return typeof indexedDB=="object"}catch{return!1}}function LM(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kM="FirebaseError";class tr extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=kM,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qA.prototype.create)}}class qA{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,a=this.errors[e],u=a?OM(a,i):"Error",d=`${this.serviceName}: ${u} (${r}).`;return new tr(r,d,i)}}function OM(t,e){return t.replace(BM,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const BM=/\{\$([^}]+)}/g;function uf(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const a=t[r],u=e[r];if(gT(a)&&gT(u)){if(!uf(a,u))return!1}else if(a!==u)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function gT(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t){return t&&t._delegate?t._delegate:t}class aa{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new wM;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GM(e))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=Ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ks){return this.instances.has(e)}getOptions(e=Ks){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[a,u]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&u.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FM(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ks){return this.component?this.component.multipleInstances?e:Ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FM(t){return t===Ks?void 0:t}function GM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const zM={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},YM=We.INFO,JM={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},$M=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=JM[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class FA{constructor(e){this.name=e,this._logLevel=YM,this._logHandler=$M,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const KM=(t,e)=>e.some(n=>t instanceof n);let yT,_T;function QM(){return yT||(yT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function XM(){return _T||(_T=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const GA=new WeakMap,Rp=new WeakMap,HA=new WeakMap,Zh=new WeakMap,um=new WeakMap;function WM(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",a),t.removeEventListener("error",u)},a=()=>{n(is(t.result)),r()},u=()=>{i(t.error),r()};t.addEventListener("success",a),t.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&GA.set(n,t)}).catch(()=>{}),um.set(e,t),e}function ZM(t){if(Rp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",u),t.removeEventListener("abort",u)},a=()=>{n(),r()},u=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",a),t.addEventListener("error",u),t.addEventListener("abort",u)});Rp.set(t,e)}let Ip={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return is(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jM(t){Ip=t(Ip)}function e4(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(jh(this),e,...n);return HA.set(i,e.sort?e.sort():[e]),is(i)}:XM().includes(t)?function(...e){return t.apply(jh(this),e),is(GA.get(this))}:function(...e){return is(t.apply(jh(this),e))}}function t4(t){return typeof t=="function"?e4(t):(t instanceof IDBTransaction&&ZM(t),KM(t,QM())?new Proxy(t,Ip):t)}function is(t){if(t instanceof IDBRequest)return WM(t);if(Zh.has(t))return Zh.get(t);const e=t4(t);return e!==t&&(Zh.set(t,e),um.set(e,t)),e}const jh=t=>um.get(t);function n4(t,e,{blocked:n,upgrade:i,blocking:r,terminated:a}={}){const u=indexedDB.open(t,e),d=is(u);return i&&u.addEventListener("upgradeneeded",g=>{i(is(u.result),g.oldVersion,g.newVersion,is(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{a&&g.addEventListener("close",()=>a()),r&&g.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const i4=["get","getKey","getAll","getAllKeys","count"],o4=["put","add","delete","clear"],ep=new Map;function vT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ep.get(e))return ep.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=o4.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||i4.includes(n)))return;const a=async function(u,...d){const g=this.transaction(u,r?"readwrite":"readonly");let h=g.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[n](...d),r&&g.done]))[0]};return ep.set(e,a),a}jM(t=>({...t,get:(e,n,i)=>vT(e,n)||t.get(e,n,i),has:(e,n)=>!!vT(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r4(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function r4(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wp="@firebase/app",TT="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new FA("@firebase/app"),a4="@firebase/app-compat",l4="@firebase/analytics-compat",u4="@firebase/analytics",c4="@firebase/app-check-compat",f4="@firebase/app-check",d4="@firebase/auth",h4="@firebase/auth-compat",p4="@firebase/database",m4="@firebase/data-connect",g4="@firebase/database-compat",y4="@firebase/functions",_4="@firebase/functions-compat",v4="@firebase/installations",T4="@firebase/installations-compat",E4="@firebase/messaging",A4="@firebase/messaging-compat",S4="@firebase/performance",x4="@firebase/performance-compat",C4="@firebase/remote-config",b4="@firebase/remote-config-compat",R4="@firebase/storage",I4="@firebase/storage-compat",w4="@firebase/firestore",N4="@firebase/ai",D4="@firebase/firestore-compat",M4="firebase",P4="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="[DEFAULT]",V4={[wp]:"fire-core",[a4]:"fire-core-compat",[u4]:"fire-analytics",[l4]:"fire-analytics-compat",[f4]:"fire-app-check",[c4]:"fire-app-check-compat",[d4]:"fire-auth",[h4]:"fire-auth-compat",[p4]:"fire-rtdb",[m4]:"fire-data-connect",[g4]:"fire-rtdb-compat",[y4]:"fire-fn",[_4]:"fire-fn-compat",[v4]:"fire-iid",[T4]:"fire-iid-compat",[E4]:"fire-fcm",[A4]:"fire-fcm-compat",[S4]:"fire-perf",[x4]:"fire-perf-compat",[C4]:"fire-rc",[b4]:"fire-rc-compat",[R4]:"fire-gcs",[I4]:"fire-gcs-compat",[w4]:"fire-fst",[D4]:"fire-fst-compat",[N4]:"fire-vertex","fire-js":"fire-js",[M4]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cf=new Map,U4=new Map,Dp=new Map;function ET(t,e){try{t.container.addComponent(e)}catch(n){go.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Gl(t){const e=t.name;if(Dp.has(e))return go.debug(`There were multiple attempts to register component ${e}.`),!1;Dp.set(e,t);for(const n of cf.values())ET(n,t);for(const n of U4.values())ET(n,t);return!0}function zA(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function YA(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new qA("app","Firebase",L4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=P4;function $A(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Np,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw os.create("bad-app-name",{appName:String(r)});if(n||(n=LA()),!n)throw os.create("no-options");const a=cf.get(r);if(a){if(uf(n,a.options)&&uf(i,a.config))return a;throw os.create("duplicate-app",{appName:r})}const u=new HM(r);for(const g of Dp.values())u.addComponent(g);const d=new k4(n,i,u);return cf.set(r,d),d}function KA(t=Np){const e=cf.get(t);if(!e&&t===Np&&LA())return $A();if(!e)throw os.create("no-app",{appName:t});return e}function ss(t,e,n){let i=V4[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const u=[`Unable to register library "${i}" with version "${e}":`];r&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),go.warn(u.join(" "));return}Gl(new aa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O4="firebase-heartbeat-database",B4=1,Hl="firebase-heartbeat-store";let tp=null;function QA(){return tp||(tp=n4(O4,B4,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw os.create("idb-open",{originalErrorMessage:t.message})})),tp}async function q4(t){try{const n=(await QA()).transaction(Hl),i=await n.objectStore(Hl).get(XA(t));return await n.done,i}catch(e){if(e instanceof tr)go.warn(e.message);else{const n=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});go.warn(n.message)}}}async function AT(t,e){try{const i=(await QA()).transaction(Hl,"readwrite");await i.objectStore(Hl).put(e,XA(t)),await i.done}catch(n){if(n instanceof tr)go.warn(n.message);else{const i=os.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});go.warn(i.message)}}}function XA(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=1024,G4=30;class H4{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Y4(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ST();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>G4){const u=J4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){go.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ST(),{heartbeatsToSend:i,unsentEntries:r}=z4(this._heartbeatsCache.heartbeats),a=lf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return go.warn(n),""}}}function ST(){return new Date().toISOString().substring(0,10)}function z4(t,e=F4){const n=[];let i=t.slice();for(const r of t){const a=n.find(u=>u.agent===r.agent);if(a){if(a.dates.push(r.date),xT(n)>e){a.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),xT(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Y4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UM()?LM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await q4(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return AT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return AT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xT(t){return lf(JSON.stringify({version:2,heartbeats:t})).length}function J4(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t){Gl(new aa("platform-logger",e=>new s4(e),"PRIVATE")),Gl(new aa("heartbeat",e=>new H4(e),"PRIVATE")),ss(wp,TT,t),ss(wp,TT,"esm2020"),ss("fire-js","")}$4("");var CT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,WA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,w){function I(){}I.prototype=w.prototype,N.F=w.prototype,N.prototype=new I,N.prototype.constructor=N,N.D=function(L,k,F){for(var D=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)D[ke-2]=arguments[ke];return w.prototype[k].apply(L,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,w,I){I||(I=0);const L=Array(16);if(typeof w=="string")for(var k=0;k<16;++k)L[k]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(k=0;k<16;++k)L[k]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=N.g[0],I=N.g[1],k=N.g[2];let F=N.g[3],D;D=w+(F^I&(k^F))+L[0]+3614090360&4294967295,w=I+(D<<7&4294967295|D>>>25),D=F+(k^w&(I^k))+L[1]+3905402710&4294967295,F=w+(D<<12&4294967295|D>>>20),D=k+(I^F&(w^I))+L[2]+606105819&4294967295,k=F+(D<<17&4294967295|D>>>15),D=I+(w^k&(F^w))+L[3]+3250441966&4294967295,I=k+(D<<22&4294967295|D>>>10),D=w+(F^I&(k^F))+L[4]+4118548399&4294967295,w=I+(D<<7&4294967295|D>>>25),D=F+(k^w&(I^k))+L[5]+1200080426&4294967295,F=w+(D<<12&4294967295|D>>>20),D=k+(I^F&(w^I))+L[6]+2821735955&4294967295,k=F+(D<<17&4294967295|D>>>15),D=I+(w^k&(F^w))+L[7]+4249261313&4294967295,I=k+(D<<22&4294967295|D>>>10),D=w+(F^I&(k^F))+L[8]+1770035416&4294967295,w=I+(D<<7&4294967295|D>>>25),D=F+(k^w&(I^k))+L[9]+2336552879&4294967295,F=w+(D<<12&4294967295|D>>>20),D=k+(I^F&(w^I))+L[10]+4294925233&4294967295,k=F+(D<<17&4294967295|D>>>15),D=I+(w^k&(F^w))+L[11]+2304563134&4294967295,I=k+(D<<22&4294967295|D>>>10),D=w+(F^I&(k^F))+L[12]+1804603682&4294967295,w=I+(D<<7&4294967295|D>>>25),D=F+(k^w&(I^k))+L[13]+4254626195&4294967295,F=w+(D<<12&4294967295|D>>>20),D=k+(I^F&(w^I))+L[14]+2792965006&4294967295,k=F+(D<<17&4294967295|D>>>15),D=I+(w^k&(F^w))+L[15]+1236535329&4294967295,I=k+(D<<22&4294967295|D>>>10),D=w+(k^F&(I^k))+L[1]+4129170786&4294967295,w=I+(D<<5&4294967295|D>>>27),D=F+(I^k&(w^I))+L[6]+3225465664&4294967295,F=w+(D<<9&4294967295|D>>>23),D=k+(w^I&(F^w))+L[11]+643717713&4294967295,k=F+(D<<14&4294967295|D>>>18),D=I+(F^w&(k^F))+L[0]+3921069994&4294967295,I=k+(D<<20&4294967295|D>>>12),D=w+(k^F&(I^k))+L[5]+3593408605&4294967295,w=I+(D<<5&4294967295|D>>>27),D=F+(I^k&(w^I))+L[10]+38016083&4294967295,F=w+(D<<9&4294967295|D>>>23),D=k+(w^I&(F^w))+L[15]+3634488961&4294967295,k=F+(D<<14&4294967295|D>>>18),D=I+(F^w&(k^F))+L[4]+3889429448&4294967295,I=k+(D<<20&4294967295|D>>>12),D=w+(k^F&(I^k))+L[9]+568446438&4294967295,w=I+(D<<5&4294967295|D>>>27),D=F+(I^k&(w^I))+L[14]+3275163606&4294967295,F=w+(D<<9&4294967295|D>>>23),D=k+(w^I&(F^w))+L[3]+4107603335&4294967295,k=F+(D<<14&4294967295|D>>>18),D=I+(F^w&(k^F))+L[8]+1163531501&4294967295,I=k+(D<<20&4294967295|D>>>12),D=w+(k^F&(I^k))+L[13]+2850285829&4294967295,w=I+(D<<5&4294967295|D>>>27),D=F+(I^k&(w^I))+L[2]+4243563512&4294967295,F=w+(D<<9&4294967295|D>>>23),D=k+(w^I&(F^w))+L[7]+1735328473&4294967295,k=F+(D<<14&4294967295|D>>>18),D=I+(F^w&(k^F))+L[12]+2368359562&4294967295,I=k+(D<<20&4294967295|D>>>12),D=w+(I^k^F)+L[5]+4294588738&4294967295,w=I+(D<<4&4294967295|D>>>28),D=F+(w^I^k)+L[8]+2272392833&4294967295,F=w+(D<<11&4294967295|D>>>21),D=k+(F^w^I)+L[11]+1839030562&4294967295,k=F+(D<<16&4294967295|D>>>16),D=I+(k^F^w)+L[14]+4259657740&4294967295,I=k+(D<<23&4294967295|D>>>9),D=w+(I^k^F)+L[1]+2763975236&4294967295,w=I+(D<<4&4294967295|D>>>28),D=F+(w^I^k)+L[4]+1272893353&4294967295,F=w+(D<<11&4294967295|D>>>21),D=k+(F^w^I)+L[7]+4139469664&4294967295,k=F+(D<<16&4294967295|D>>>16),D=I+(k^F^w)+L[10]+3200236656&4294967295,I=k+(D<<23&4294967295|D>>>9),D=w+(I^k^F)+L[13]+681279174&4294967295,w=I+(D<<4&4294967295|D>>>28),D=F+(w^I^k)+L[0]+3936430074&4294967295,F=w+(D<<11&4294967295|D>>>21),D=k+(F^w^I)+L[3]+3572445317&4294967295,k=F+(D<<16&4294967295|D>>>16),D=I+(k^F^w)+L[6]+76029189&4294967295,I=k+(D<<23&4294967295|D>>>9),D=w+(I^k^F)+L[9]+3654602809&4294967295,w=I+(D<<4&4294967295|D>>>28),D=F+(w^I^k)+L[12]+3873151461&4294967295,F=w+(D<<11&4294967295|D>>>21),D=k+(F^w^I)+L[15]+530742520&4294967295,k=F+(D<<16&4294967295|D>>>16),D=I+(k^F^w)+L[2]+3299628645&4294967295,I=k+(D<<23&4294967295|D>>>9),D=w+(k^(I|~F))+L[0]+4096336452&4294967295,w=I+(D<<6&4294967295|D>>>26),D=F+(I^(w|~k))+L[7]+1126891415&4294967295,F=w+(D<<10&4294967295|D>>>22),D=k+(w^(F|~I))+L[14]+2878612391&4294967295,k=F+(D<<15&4294967295|D>>>17),D=I+(F^(k|~w))+L[5]+4237533241&4294967295,I=k+(D<<21&4294967295|D>>>11),D=w+(k^(I|~F))+L[12]+1700485571&4294967295,w=I+(D<<6&4294967295|D>>>26),D=F+(I^(w|~k))+L[3]+2399980690&4294967295,F=w+(D<<10&4294967295|D>>>22),D=k+(w^(F|~I))+L[10]+4293915773&4294967295,k=F+(D<<15&4294967295|D>>>17),D=I+(F^(k|~w))+L[1]+2240044497&4294967295,I=k+(D<<21&4294967295|D>>>11),D=w+(k^(I|~F))+L[8]+1873313359&4294967295,w=I+(D<<6&4294967295|D>>>26),D=F+(I^(w|~k))+L[15]+4264355552&4294967295,F=w+(D<<10&4294967295|D>>>22),D=k+(w^(F|~I))+L[6]+2734768916&4294967295,k=F+(D<<15&4294967295|D>>>17),D=I+(F^(k|~w))+L[13]+1309151649&4294967295,I=k+(D<<21&4294967295|D>>>11),D=w+(k^(I|~F))+L[4]+4149444226&4294967295,w=I+(D<<6&4294967295|D>>>26),D=F+(I^(w|~k))+L[11]+3174756917&4294967295,F=w+(D<<10&4294967295|D>>>22),D=k+(w^(F|~I))+L[2]+718787259&4294967295,k=F+(D<<15&4294967295|D>>>17),D=I+(F^(k|~w))+L[9]+3951481745&4294967295,N.g[0]=N.g[0]+w&4294967295,N.g[1]=N.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+F&4294967295}i.prototype.v=function(N,w){w===void 0&&(w=N.length);const I=w-this.blockSize,L=this.C;let k=this.h,F=0;for(;F<w;){if(k==0)for(;F<=I;)r(this,N,F),F+=this.blockSize;if(typeof N=="string"){for(;F<w;)if(L[k++]=N.charCodeAt(F++),k==this.blockSize){r(this,L),k=0;break}}else for(;F<w;)if(L[k++]=N[F++],k==this.blockSize){r(this,L),k=0;break}}this.h=k,this.o+=w},i.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var w=1;w<N.length-8;++w)N[w]=0;w=this.o*8;for(var I=N.length-8;I<N.length;++I)N[I]=w&255,w/=256;for(this.v(N),N=Array(16),w=0,I=0;I<4;++I)for(let L=0;L<32;L+=8)N[w++]=this.g[I]>>>L&255;return N};function a(N,w){var I=d;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=w(N)}function u(N,w){this.h=w;const I=[];let L=!0;for(let k=N.length-1;k>=0;k--){const F=N[k]|0;L&&F==w||(I[k]=F,L=!1)}this.g=I}var d={};function g(N){return-128<=N&&N<128?a(N,function(w){return new u([w|0],w<0?-1:0)}):new u([N|0],N<0?-1:0)}function h(N){if(isNaN(N)||!isFinite(N))return T;if(N<0)return M(h(-N));const w=[];let I=1;for(let L=0;N>=I;L++)w[L]=N/I|0,I*=4294967296;return new u(w,0)}function _(N,w){if(N.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(N.charAt(0)=="-")return M(_(N.substring(1),w));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=h(Math.pow(w,8));let L=T;for(let F=0;F<N.length;F+=8){var k=Math.min(8,N.length-F);const D=parseInt(N.substring(F,F+k),w);k<8?(k=h(Math.pow(w,k)),L=L.j(k).add(h(D))):(L=L.j(I),L=L.add(h(D)))}return L}var T=g(0),A=g(1),C=g(16777216);t=u.prototype,t.m=function(){if(V(this))return-M(this).m();let N=0,w=1;for(let I=0;I<this.g.length;I++){const L=this.i(I);N+=(L>=0?L:4294967296+L)*w,w*=4294967296}return N},t.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(V(this))return"-"+M(this).toString(N);const w=h(Math.pow(N,6));var I=this;let L="";for(;;){const k=re(I,w).g;I=K(I,k.j(w));let F=((I.g.length>0?I.g[0]:I.h)>>>0).toString(N);if(I=k,P(I))return F+L;for(;F.length<6;)F="0"+F;L=F+L}},t.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(let w=0;w<N.g.length;w++)if(N.g[w]!=0)return!1;return!0}function V(N){return N.h==-1}t.l=function(N){return N=K(this,N),V(N)?-1:P(N)?0:1};function M(N){const w=N.g.length,I=[];for(let L=0;L<w;L++)I[L]=~N.g[L];return new u(I,~N.h).add(A)}t.abs=function(){return V(this)?M(this):this},t.add=function(N){const w=Math.max(this.g.length,N.g.length),I=[];let L=0;for(let k=0;k<=w;k++){let F=L+(this.i(k)&65535)+(N.i(k)&65535),D=(F>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);L=D>>>16,F&=65535,D&=65535,I[k]=D<<16|F}return new u(I,I[I.length-1]&-2147483648?-1:0)};function K(N,w){return N.add(M(w))}t.j=function(N){if(P(this)||P(N))return T;if(V(this))return V(N)?M(this).j(M(N)):M(M(this).j(N));if(V(N))return M(this.j(M(N)));if(this.l(C)<0&&N.l(C)<0)return h(this.m()*N.m());const w=this.g.length+N.g.length,I=[];for(var L=0;L<2*w;L++)I[L]=0;for(L=0;L<this.g.length;L++)for(let k=0;k<N.g.length;k++){const F=this.i(L)>>>16,D=this.i(L)&65535,ke=N.i(k)>>>16,be=N.i(k)&65535;I[2*L+2*k]+=D*be,ee(I,2*L+2*k),I[2*L+2*k+1]+=F*be,ee(I,2*L+2*k+1),I[2*L+2*k+1]+=D*ke,ee(I,2*L+2*k+1),I[2*L+2*k+2]+=F*ke,ee(I,2*L+2*k+2)}for(N=0;N<w;N++)I[N]=I[2*N+1]<<16|I[2*N];for(N=w;N<2*w;N++)I[N]=0;return new u(I,0)};function ee(N,w){for(;(N[w]&65535)!=N[w];)N[w+1]+=N[w]>>>16,N[w]&=65535,w++}function W(N,w){this.g=N,this.h=w}function re(N,w){if(P(w))throw Error("division by zero");if(P(N))return new W(T,T);if(V(N))return w=re(M(N),w),new W(M(w.g),M(w.h));if(V(w))return w=re(N,M(w)),new W(M(w.g),w.h);if(N.g.length>30){if(V(N)||V(w))throw Error("slowDivide_ only works with positive integers.");for(var I=A,L=w;L.l(N)<=0;)I=fe(I),L=fe(L);var k=ae(I,1),F=ae(L,1);for(L=ae(L,2),I=ae(I,2);!P(L);){var D=F.add(L);D.l(N)<=0&&(k=k.add(I),F=D),L=ae(L,1),I=ae(I,1)}return w=K(N,k.j(w)),new W(k,w)}for(k=T;N.l(w)>=0;){for(I=Math.max(1,Math.floor(N.m()/w.m())),L=Math.ceil(Math.log(I)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),F=h(I),D=F.j(w);V(D)||D.l(N)>0;)I-=L,F=h(I),D=F.j(w);P(F)&&(F=A),k=k.add(F),N=K(N,D)}return new W(k,N)}t.B=function(N){return re(this,N).h},t.and=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let L=0;L<w;L++)I[L]=this.i(L)&N.i(L);return new u(I,this.h&N.h)},t.or=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let L=0;L<w;L++)I[L]=this.i(L)|N.i(L);return new u(I,this.h|N.h)},t.xor=function(N){const w=Math.max(this.g.length,N.g.length),I=[];for(let L=0;L<w;L++)I[L]=this.i(L)^N.i(L);return new u(I,this.h^N.h)};function fe(N){const w=N.g.length+1,I=[];for(let L=0;L<w;L++)I[L]=N.i(L)<<1|N.i(L-1)>>>31;return new u(I,N.h)}function ae(N,w){const I=w>>5;w%=32;const L=N.g.length-I,k=[];for(let F=0;F<L;F++)k[F]=w>0?N.i(F+I)>>>w|N.i(F+I+1)<<32-w:N.i(F+I);return new u(k,N.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,WA=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,rs=u}).apply(typeof CT<"u"?CT:typeof self<"u"?self:typeof window<"u"?window:{});var Oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZA,Dl,jA,Kc,Mp,eS,tS,nS;(function(){var t,e=Object.defineProperty;function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oc=="object"&&Oc];for(var E=0;E<m.length;++E){var x=m[E];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function r(m,E){if(E)e:{var x=i;m=m.split(".");for(var R=0;R<m.length-1;R++){var H=m[R];if(!(H in x))break e;x=x[H]}m=m[m.length-1],R=x[m],E=E(R),E!=R&&E!=null&&e(x,m,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(E){var x=[],R;for(R in E)Object.prototype.hasOwnProperty.call(E,R)&&x.push([R,E[R]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function d(m){var E=typeof m;return E=="object"&&m!=null||E=="function"}function g(m,E,x){return m.call.apply(m.bind,arguments)}function h(m,E,x){return h=g,h.apply(null,arguments)}function _(m,E){var x=Array.prototype.slice.call(arguments,1);return function(){var R=x.slice();return R.push.apply(R,arguments),m.apply(this,R)}}function T(m,E){function x(){}x.prototype=E.prototype,m.Z=E.prototype,m.prototype=new x,m.prototype.constructor=m,m.Ob=function(R,H,X){for(var ce=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ce[Ve-2]=arguments[Ve];return E.prototype[H].apply(R,ce)}}var A=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function C(m){const E=m.length;if(E>0){const x=Array(E);for(let R=0;R<E;R++)x[R]=m[R];return x}return[]}function P(m,E){for(let R=1;R<arguments.length;R++){const H=arguments[R];var x=typeof H;if(x=x!="object"?x:H?Array.isArray(H)?"array":x:"null",x=="array"||x=="object"&&typeof H.length=="number"){x=m.length||0;const X=H.length||0;m.length=x+X;for(let ce=0;ce<X;ce++)m[x+ce]=H[ce]}else m.push(H)}}class V{constructor(E,x){this.i=E,this.j=x,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function M(m){u.setTimeout(()=>{throw m},0)}function K(){var m=N;let E=null;return m.g&&(E=m.g,m.g=m.g.next,m.g||(m.h=null),E.next=null),E}class ee{constructor(){this.h=this.g=null}add(E,x){const R=W.get();R.set(E,x),this.h?this.h.next=R:this.g=R,this.h=R}}var W=new V(()=>new re,m=>m.reset());class re{constructor(){this.next=this.g=this.h=null}set(E,x){this.h=E,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ae=!1,N=new ee,w=()=>{const m=Promise.resolve(void 0);fe=()=>{m.then(I)}};function I(){for(var m;m=K();){try{m.h.call(m.g)}catch(x){M(x)}var E=W;E.j(m),E.h<100&&(E.h++,m.next=E.g,E.g=m)}ae=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(m,E){this.type=m,this.g=this.target=E,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,E=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const x=()=>{};u.addEventListener("test",x,E),u.removeEventListener("test",x,E)}catch{}return m})();function D(m){return/^[\s\xa0]*$/.test(m)}function ke(m,E){k.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,E)}T(ke,k),ke.prototype.init=function(m,E){const x=this.type=m.type,R=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=E,E=m.relatedTarget,E||(x=="mouseover"?E=m.fromElement:x=="mouseout"&&(E=m.toElement)),this.relatedTarget=E,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var be="closure_listenable_"+(Math.random()*1e6|0),$=0;function ue(m,E,x,R,H){this.listener=m,this.proxy=null,this.src=E,this.type=x,this.capture=!!R,this.ha=H,this.key=++$,this.da=this.fa=!1}function le(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Ce(m,E,x){for(const R in m)E.call(x,m[R],R,m)}function qe(m,E){for(const x in m)E.call(void 0,m[x],x,m)}function B(m){const E={};for(const x in m)E[x]=m[x];return E}const ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(m,E){let x,R;for(let H=1;H<arguments.length;H++){R=arguments[H];for(x in R)m[x]=R[x];for(let X=0;X<ne.length;X++)x=ne[X],Object.prototype.hasOwnProperty.call(R,x)&&(m[x]=R[x])}}function me(m){this.src=m,this.g={},this.h=0}me.prototype.add=function(m,E,x,R,H){const X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);const ce=De(m,E,R,H);return ce>-1?(E=m[ce],x||(E.fa=!1)):(E=new ue(E,this.src,X,!!R,H),E.fa=x,m.push(E)),E};function Ie(m,E){const x=E.type;if(x in m.g){var R=m.g[x],H=Array.prototype.indexOf.call(R,E,void 0),X;(X=H>=0)&&Array.prototype.splice.call(R,H,1),X&&(le(E),m.g[x].length==0&&(delete m.g[x],m.h--))}}function De(m,E,x,R){for(let H=0;H<m.length;++H){const X=m[H];if(!X.da&&X.listener==E&&X.capture==!!x&&X.ha==R)return H}return-1}var He="closure_lm_"+(Math.random()*1e6|0),Te={};function ve(m,E,x,R,H){if(Array.isArray(E)){for(let X=0;X<E.length;X++)ve(m,E[X],x,R,H);return null}return x=Sa(x),m&&m[be]?m.J(E,x,d(R)?!!R.capture:!1,H):Q(m,E,x,!1,R,H)}function Q(m,E,x,R,H,X){if(!E)throw Error("Invalid event type");const ce=d(H)?!!H.capture:!!H;let Ve=ys(m);if(Ve||(m[He]=Ve=new me(m)),x=Ve.add(E,x,R,ce,X),x.proxy)return x;if(R=ge(),x.proxy=R,R.src=m,R.listener=x,m.addEventListener)F||(H=ce),H===void 0&&(H=!1),m.addEventListener(E.toString(),R,H);else if(m.attachEvent)m.attachEvent(vt(E.toString()),R);else if(m.addListener&&m.removeListener)m.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ge(){function m(x){return E.call(m.src,m.listener,x)}const E=bn;return m}function Oe(m,E,x,R,H){if(Array.isArray(E))for(var X=0;X<E.length;X++)Oe(m,E[X],x,R,H);else R=d(R)?!!R.capture:!!R,x=Sa(x),m&&m[be]?(m=m.i,X=String(E).toString(),X in m.g&&(E=m.g[X],x=De(E,x,R,H),x>-1&&(le(E[x]),Array.prototype.splice.call(E,x,1),E.length==0&&(delete m.g[X],m.h--)))):m&&(m=ys(m))&&(E=m.g[E.toString()],m=-1,E&&(m=De(E,x,R,H)),(x=m>-1?E[m]:null)&&Ke(x))}function Ke(m){if(typeof m!="number"&&m&&!m.da){var E=m.src;if(E&&E[be])Ie(E.i,m);else{var x=m.type,R=m.proxy;E.removeEventListener?E.removeEventListener(x,R,m.capture):E.detachEvent?E.detachEvent(vt(x),R):E.addListener&&E.removeListener&&E.removeListener(R),(x=ys(E))?(Ie(x,m),x.h==0&&(x.src=null,E[He]=null)):le(m)}}}function vt(m){return m in Te?Te[m]:Te[m]="on"+m}function bn(m,E){if(m.da)m=!0;else{E=new ke(E,this);const x=m.listener,R=m.ha||m.src;m.fa&&Ke(m),m=x.call(R,E)}return m}function ys(m){return m=m[He],m instanceof me?m:null}var Aa="__closure_events_fn_"+(Math.random()*1e9>>>0);function Sa(m){return typeof m=="function"?m:(m[Aa]||(m[Aa]=function(E){return m.handleEvent(E)}),m[Aa])}function wt(){L.call(this),this.i=new me(this),this.M=this,this.G=null}T(wt,L),wt.prototype[be]=!0,wt.prototype.removeEventListener=function(m,E,x,R){Oe(this,m,E,x,R)};function Ft(m,E){var x,R=m.G;if(R)for(x=[];R;R=R.G)x.push(R);if(m=m.M,R=E.type||E,typeof E=="string")E=new k(E,m);else if(E instanceof k)E.target=E.target||m;else{var H=E;E=new k(R,m),de(E,H)}H=!0;let X,ce;if(x)for(ce=x.length-1;ce>=0;ce--)X=E.g=x[ce],H=Eo(X,R,!0,E)&&H;if(X=E.g=m,H=Eo(X,R,!0,E)&&H,H=Eo(X,R,!1,E)&&H,x)for(ce=0;ce<x.length;ce++)X=E.g=x[ce],H=Eo(X,R,!1,E)&&H}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var m=this.i;for(const E in m.g){const x=m.g[E];for(let R=0;R<x.length;R++)le(x[R]);delete m.g[E],m.h--}}this.G=null},wt.prototype.J=function(m,E,x,R){return this.i.add(String(m),E,!1,x,R)},wt.prototype.K=function(m,E,x,R){return this.i.add(String(m),E,!0,x,R)};function Eo(m,E,x,R){if(E=m.i.g[String(E)],!E)return!0;E=E.concat();let H=!0;for(let X=0;X<E.length;++X){const ce=E[X];if(ce&&!ce.da&&ce.capture==x){const Ve=ce.listener,Ct=ce.ha||ce.src;ce.fa&&Ie(m.i,ce),H=Ve.call(Ct,R)!==!1&&H}}return H&&!R.defaultPrevented}function Yf(m,E){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:u.setTimeout(m,E||0)}function ou(m){m.g=Yf(()=>{m.g=null,m.i&&(m.i=!1,ou(m))},m.l);const E=m.h;m.h=null,m.m.apply(null,E)}class fn extends L{constructor(E,x){super(),this.m=E,this.l=x,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:ou(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(m){L.call(this),this.h=m,this.g={}}T(_s,L);var xa=[];function Ca(m){Ce(m.g,function(E,x){this.g.hasOwnProperty(x)&&Ke(E)},m),m.g={}}_s.prototype.N=function(){_s.Z.N.call(this),Ca(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ao=u.JSON.stringify,Jf=u.JSON.parse,su=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function ru(){}function au(){}var ei={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xt(){k.call(this,"d")}T(Xt,k);function kn(){k.call(this,"c")}T(kn,k);var xt={},lu=null;function rr(){return lu=lu||new wt}xt.Ia="serverreachability";function uu(m){k.call(this,xt.Ia,m)}T(uu,k);function Ei(m){const E=rr();Ft(E,new uu(E))}xt.STAT_EVENT="statevent";function vs(m,E){k.call(this,xt.STAT_EVENT,m),this.stat=E}T(vs,k);function Nt(m){const E=rr();Ft(E,new vs(E,m))}xt.Ja="timingevent";function Ai(m,E){k.call(this,xt.Ja,m),this.size=E}T(Ai,k);function Si(m,E){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},E)}function ti(){this.g=!0}ti.prototype.ua=function(){this.g=!1};function $f(m,E,x,R,H,X){m.info(function(){if(m.g)if(X){var ce="",Ve=X.split("&");for(let tt=0;tt<Ve.length;tt++){var Ct=Ve[tt].split("=");if(Ct.length>1){const gt=Ct[0];Ct=Ct[1];const Fn=gt.split("_");ce=Fn.length>=2&&Fn[1]=="type"?ce+(gt+"="+Ct+"&"):ce+(gt+"=redacted&")}}}else ce=null;else ce=X;return"XMLHTTP REQ ("+R+") [attempt "+H+"]: "+E+`
`+x+`
`+ce})}function cu(m,E,x,R,H,X,ce){m.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+H+"]: "+E+`
`+x+`
`+X+" "+ce})}function xi(m,E,x,R){m.info(function(){return"XMLHTTP TEXT ("+E+"): "+Kf(m,x)+(R?" "+R:"")})}function Ts(m,E){m.info(function(){return"TIMEOUT: "+E})}ti.prototype.info=function(){};function Kf(m,E){if(!m.g)return E;if(!E)return null;try{const X=JSON.parse(E);if(X){for(m=0;m<X.length;m++)if(Array.isArray(X[m])){var x=X[m];if(!(x.length<2)){var R=x[1];if(Array.isArray(R)&&!(R.length<1)){var H=R[0];if(H!="noop"&&H!="stop"&&H!="close")for(let ce=1;ce<R.length;ce++)R[ce]=""}}}}return Ao(X)}catch{return E}}var Es={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ba={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ra;function As(){}T(As,ru),As.prototype.g=function(){return new XMLHttpRequest},Ra=new As;function Qi(m){return encodeURIComponent(String(m))}function fu(m){var E=1;m=m.split(":");const x=[];for(;E>0&&m.length;)x.push(m.shift()),E--;return m.length&&x.push(m.join(":")),x}function ni(m,E,x,R){this.j=m,this.i=E,this.l=x,this.S=R||1,this.V=new _s(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ii}function ii(){this.i=null,this.g="",this.h=!1}var Dt={},zt={};function Ci(m,E,x){m.M=1,m.A=Ss(Pt(E)),m.u=x,m.R=!0,ar(m,null)}function ar(m,E){m.F=Date.now(),bi(m),m.B=Pt(m.A);var x=m.B,R=m.S;Array.isArray(R)||(R=[String(R)]),fr(x.i,"t",R),m.C=0,x=m.j.L,m.h=new ii,m.g=bu(m.j,x?E:null,!m.u),m.P>0&&(m.O=new fn(h(m.Y,m,m.g),m.P)),E=m.V,x=m.g,R=m.ba;var H="readystatechange";Array.isArray(H)||(H&&(xa[0]=H.toString()),H=xa);for(let X=0;X<H.length;X++){const ce=ve(x,H[X],R||E.handleEvent,!1,E.h||E);if(!ce)break;E.g[ce.key]=ce}E=m.J?B(m.J):{},m.u?(m.v||(m.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,E)):(m.v="GET",m.g.ea(m.B,m.v,null,E)),Ei(),$f(m.i,m.v,m.B,m.l,m.S,m.u)}ni.prototype.ba=function(m){m=m.target;const E=this.O;E&&ri(m)==3?E.j():this.Y(m)},ni.prototype.Y=function(m){try{if(m==this.g)e:{const Ve=ri(this.g),Ct=this.g.ya(),tt=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||Wt(this.g)))){this.K||Ve!=4||Ct==7||(Ct==8||tt<=0?Ei(3):Ei(2)),Ri(this);var E=this.g.ca();this.X=E;var x=Qf(this);if(this.o=E==200,cu(this.i,this.v,this.B,this.l,this.S,Ve,E),this.o){if(this.U&&!this.L){t:{if(this.g){var R,H=this.g;if((R=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(R)){var X=R;break t}}X=null}if(m=X)xi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ii(this,m);else{this.o=!1,this.m=3,Nt(12),Rn(this),On(this);break e}}if(this.R){m=!0;let gt;for(;!this.K&&this.C<x.length;)if(gt=hu(this,x),gt==zt){Ve==4&&(this.m=4,Nt(14),m=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(gt==Dt){this.m=4,Nt(15),xi(this.i,this.l,x,"[Invalid Chunk]"),m=!1;break}else xi(this.i,this.l,gt,null),Ii(this,gt);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||x.length!=0||this.h.h||(this.m=1,Nt(16),m=!1),this.o=this.o&&m,!m)xi(this.i,this.l,x,"[Invalid Chunked Response]"),Rn(this),On(this);else if(x.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Ga(ce),ce.P=!0,Nt(11))}}else xi(this.i,this.l,x,null),Ii(this,x);Ve==4&&Rn(this),this.o&&!this.K&&(Ve==4?Au(this.j,this):(this.o=!1,bi(this)))}else Wi(this.g),E==400&&x.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),Rn(this),On(this)}}}catch{}finally{}};function Qf(m){if(!du(m))return m.g.la();const E=Wt(m.g);if(E==="")return"";let x="";const R=E.length,H=ri(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Rn(m),On(m),"";m.h.i=new u.TextDecoder}for(let X=0;X<R;X++)m.h.h=!0,x+=m.h.i.decode(E[X],{stream:!(H&&X==R-1)});return E.length=0,m.h.g+=x,m.C=0,m.h.g}function du(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function hu(m,E){var x=m.C,R=E.indexOf(`
`,x);return R==-1?zt:(x=Number(E.substring(x,R)),isNaN(x)?Dt:(R+=1,R+x>E.length?zt:(E=E.slice(R,R+x),m.C=R+x,E)))}ni.prototype.cancel=function(){this.K=!0,Rn(this)};function bi(m){m.T=Date.now()+m.H,lr(m,m.H)}function lr(m,E){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Si(h(m.aa,m),E)}function Ri(m){m.D&&(u.clearTimeout(m.D),m.D=null)}ni.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(Ts(this.i,this.B),this.M!=2&&(Ei(),Nt(17)),Rn(this),this.m=2,On(this)):lr(this,this.T-m)};function On(m){m.j.I==0||m.K||Au(m.j,m)}function Rn(m){Ri(m);var E=m.O;E&&typeof E.dispose=="function"&&E.dispose(),m.O=null,Ca(m.V),m.g&&(E=m.g,m.g=null,E.abort(),E.dispose())}function Ii(m,E){try{var x=m.j;if(x.I!=0&&(x.g==m||Ni(x.h,m))){if(!m.L&&Ni(x.h,m)&&x.I==3){try{var R=x.Ba.g.parse(E)}catch{R=null}if(Array.isArray(R)&&R.length==3){var H=R;if(H[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<m.F)gr(x),No(x);else break e;Ns(x),Nt(18)}}else x.xa=H[1],0<x.xa-x.K&&H[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Si(h(x.Va,x),6e3));wi(x.h)<=1&&x.ta&&(x.ta=void 0)}else Li(x,11)}else if((m.L||x.g==m)&&gr(x),!D(E))for(H=x.Ba.g.parse(E),E=0;E<H.length;E++){let tt=H[E];const gt=tt[0];if(!(gt<=x.K))if(x.K=gt,tt=tt[1],x.I==2)if(tt[0]=="c"){x.M=tt[1],x.ba=tt[2];const Fn=tt[3];Fn!=null&&(x.ka=Fn,x.j.info("VER="+x.ka));const ki=tt[4];ki!=null&&(x.za=ki,x.j.info("SVER="+x.za));const ai=tt[5];ai!=null&&typeof ai=="number"&&ai>0&&(R=1.5*ai,x.O=R,x.j.info("backChannelRequestTimeoutMs_="+R)),R=x;const li=m.g;if(li){const Ds=li.g?li.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ds){var X=R.h;X.g||Ds.indexOf("spdy")==-1&&Ds.indexOf("quic")==-1&&Ds.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Na(X,X.h),X.h=null))}if(R.G){const yr=li.g?li.g.getResponseHeader("X-HTTP-Session-Id"):null;yr&&(R.wa=yr,ot(R.J,R.G,yr))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-m.F,x.j.info("Handshake RTT: "+x.T+"ms")),R=x;var ce=m;if(R.na=Cu(R,R.L?R.ba:null,R.W),ce.L){Da(R.h,ce);var Ve=ce,Ct=R.O;Ct&&(Ve.H=Ct),Ve.D&&(Ri(Ve),bi(Ve)),R.g=ce}else Tu(R);x.i.length>0&&Ui(x)}else tt[0]!="stop"&&tt[0]!="close"||Li(x,7);else x.I==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Li(x,7):qa(x):tt[0]!="noop"&&x.l&&x.l.qa(tt),x.A=0)}}Ei(4)}catch{}}var Mt=class{constructor(m,E){this.g=m,this.map=E}};function Ia(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wa(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function wi(m){return m.h?1:m.g?m.g.size:0}function Ni(m,E){return m.h?m.h==E:m.g?m.g.has(E):!1}function Na(m,E){m.g?m.g.add(E):m.h=E}function Da(m,E){m.h&&m.h==E?m.h=null:m.g&&m.g.has(E)&&m.g.delete(E)}Ia.prototype.cancel=function(){if(this.i=Ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Ma(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let E=m.i;for(const x of m.g.values())E=E.concat(x.G);return E}return C(m.i)}var pu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ur(m,E){if(m){m=m.split("&");for(let x=0;x<m.length;x++){const R=m[x].indexOf("=");let H,X=null;R>=0?(H=m[x].substring(0,R),X=m[x].substring(R+1)):H=m[x],E(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function In(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;m instanceof In?(this.l=m.l,Yt(this,m.j),this.o=m.o,this.g=m.g,So(this,m.u),this.h=m.h,Pa(this,_u(m.i)),this.m=m.m):m&&(E=String(m).match(pu))?(this.l=!1,Yt(this,E[1]||"",!0),this.o=Di(E[2]||""),this.g=Di(E[3]||"",!0),So(this,E[4]),this.h=Di(E[5]||"",!0),Pa(this,E[6]||"",!0),this.m=Di(E[7]||"")):(this.l=!1,this.i=new Co(null,this.l))}In.prototype.toString=function(){const m=[];var E=this.j;E&&m.push(xs(E,cr,!0),":");var x=this.g;return(x||E=="file")&&(m.push("//"),(E=this.o)&&m.push(xs(E,cr,!0),"@"),m.push(Qi(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&m.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&m.push("/"),m.push(xs(x,x.charAt(0)=="/"?Va:mu,!0))),(x=this.i.toString())&&m.push("?",x),(x=this.m)&&m.push("#",xs(x,gu)),m.join("")},In.prototype.resolve=function(m){const E=Pt(this);let x=!!m.j;x?Yt(E,m.j):x=!!m.o,x?E.o=m.o:x=!!m.g,x?E.g=m.g:x=m.u!=null;var R=m.h;if(x)So(E,m.u);else if(x=!!m.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var H=E.h.lastIndexOf("/");H!=-1&&(R=E.h.slice(0,H+1)+R)}if(H=R,H==".."||H==".")R="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){R=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let ce=0;ce<H.length;){const Ve=H[ce++];Ve=="."?R&&ce==H.length&&X.push(""):Ve==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),R&&ce==H.length&&X.push("")):(X.push(Ve),R=!0)}R=X.join("/")}else R=H}return x?E.h=R:x=m.i.toString()!=="",x?Pa(E,_u(m.i)):x=!!m.m,x&&(E.m=m.m),E};function Pt(m){return new In(m)}function Yt(m,E,x){m.j=x?Di(E,!0):E,m.j&&(m.j=m.j.replace(/:$/,""))}function So(m,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);m.u=E}else m.u=null}function Pa(m,E,x){E instanceof Co?(m.i=E,dr(m.i,m.l)):(x||(E=xs(E,xo)),m.i=new Co(E,m.l))}function ot(m,E,x){m.i.set(E,x)}function Ss(m){return ot(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Di(m,E){return m?E?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function xs(m,E,x){return typeof m=="string"?(m=encodeURI(m).replace(E,_n),x&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function _n(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var cr=/[#\/\?@]/g,mu=/[#\?:]/g,Va=/[#\?]/g,xo=/[#\?@]/g,gu=/#/g;function Co(m,E){this.h=this.g=null,this.i=m||null,this.j=!!E}function vn(m){m.g||(m.g=new Map,m.h=0,m.i&&ur(m.i,function(E,x){m.add(decodeURIComponent(E.replace(/\+/g," ")),x)}))}t=Co.prototype,t.add=function(m,E){vn(this),this.i=null,m=bo(this,m);let x=this.g.get(m);return x||this.g.set(m,x=[]),x.push(E),this.h+=1,this};function yu(m,E){vn(m),E=bo(m,E),m.g.has(E)&&(m.i=null,m.h-=m.g.get(E).length,m.g.delete(E))}function Ua(m,E){return vn(m),E=bo(m,E),m.g.has(E)}t.forEach=function(m,E){vn(this),this.g.forEach(function(x,R){x.forEach(function(H){m.call(E,H,R,this)},this)},this)};function La(m,E){vn(m);let x=[];if(typeof E=="string")Ua(m,E)&&(x=x.concat(m.g.get(bo(m,E))));else for(m=Array.from(m.g.values()),E=0;E<m.length;E++)x=x.concat(m[E]);return x}t.set=function(m,E){return vn(this),this.i=null,m=bo(this,m),Ua(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[E]),this.h+=1,this},t.get=function(m,E){return m?(m=La(this,m),m.length>0?String(m[0]):E):E};function fr(m,E,x){yu(m,E),x.length>0&&(m.i=null,m.g.set(bo(m,E),C(x)),m.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],E=Array.from(this.g.keys());for(let R=0;R<E.length;R++){var x=E[R];const H=Qi(x);x=La(this,x);for(let X=0;X<x.length;X++){let ce=H;x[X]!==""&&(ce+="="+Qi(x[X])),m.push(ce)}}return this.i=m.join("&")};function _u(m){const E=new Co;return E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),E}function bo(m,E){return E=String(E),m.j&&(E=E.toLowerCase()),E}function dr(m,E){E&&!m.j&&(vn(m),m.i=null,m.g.forEach(function(x,R){const H=R.toLowerCase();R!=H&&(yu(this,R),fr(this,H,x))},m)),m.j=E}function oi(m,E){const x=new ti;if(u.Image){const R=new Image;R.onload=_(Bn,x,"TestLoadImage: loaded",!0,E,R),R.onerror=_(Bn,x,"TestLoadImage: error",!1,E,R),R.onabort=_(Bn,x,"TestLoadImage: abort",!1,E,R),R.ontimeout=_(Bn,x,"TestLoadImage: timeout",!1,E,R),u.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=m}else E(!1)}function ka(m,E){const x=new ti,R=new AbortController,H=setTimeout(()=>{R.abort(),Bn(x,"TestPingServer: timeout",!1,E)},1e4);fetch(m,{signal:R.signal}).then(X=>{clearTimeout(H),X.ok?Bn(x,"TestPingServer: ok",!0,E):Bn(x,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(H),Bn(x,"TestPingServer: error",!1,E)})}function Bn(m,E,x,R,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),R(x)}catch{}}function Ro(){this.g=new su}function Mi(m){this.i=m.Sb||null,this.h=m.ab||!1}T(Mi,ru),Mi.prototype.g=function(){return new Cs(this.i,this.h)};function Cs(m,E){wt.call(this),this.H=m,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Cs,wt),t=Cs.prototype,t.open=function(m,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=E,this.readyState=1,si(this)},t.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(E.body=m),(this.H||u).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,si(this)),this.g&&(this.readyState=3,si(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;hr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function hr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}t.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var E=m.value?m.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!m.done}))&&(this.response=this.responseText+=E)}m.done?Io(this):si(this),this.readyState==3&&hr(this)}},t.Oa=function(m){this.g&&(this.response=this.responseText=m,Io(this))},t.Na=function(m){this.g&&(this.response=m,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(m){m.readyState=4,m.l=null,m.j=null,m.B=null,si(m)}t.setRequestHeader=function(m,E){this.A.append(m,E)},t.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],E=this.h.entries();for(var x=E.next();!x.done;)x=x.value,m.push(x[0]+": "+x[1]),x=E.next();return m.join(`\r
`)};function si(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Cs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function qn(m){let E="";return Ce(m,function(x,R){E+=R,E+=":",E+=x,E+=`\r
`}),E}function bs(m,E,x){e:{for(R in x){var R=!1;break e}R=!0}R||(x=qn(x),typeof m=="string"?x!=null&&Qi(x):ot(m,E,x))}function at(m){wt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(at,wt);var Pi=/^https?$/i,Oa=["POST","PUT"];t=at.prototype,t.Fa=function(m){this.H=m},t.ea=function(m,E,x,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);E=E?E.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ra.g(),this.g.onreadystatechange=A(h(this.Ca,this));try{this.B=!0,this.g.open(E,String(m),!0),this.B=!1}catch(X){Rs(this,X);return}if(m=x||"",x=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var H in R)x.set(H,R[H]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const X of R.keys())x.set(X,R.get(X));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(x.keys()).find(X=>X.toLowerCase()=="content-type"),H=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(Oa,E,void 0)>=0)||R||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of x)this.g.setRequestHeader(X,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(X){Rs(this,X)}};function Rs(m,E){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=E,m.o=5,Ba(m),Xi(m)}function Ba(m){m.A||(m.A=!0,Ft(m,"complete"),Ft(m,"error"))}t.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ft(this,"complete"),Ft(this,"abort"),Xi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),at.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Is(this):this.Xa())},t.Xa=function(){Is(this)};function Is(m){if(m.h&&typeof a<"u"){if(m.v&&ri(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ft(m,"readystatechange"),ri(m)==4){m.h=!1;try{const X=m.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var x;if(!(x=E)){var R;if(R=X===0){let ce=String(m.D).match(pu)[1]||null;!ce&&u.self&&u.self.location&&(ce=u.self.location.protocol.slice(0,-1)),R=!Pi.test(ce?ce.toLowerCase():"")}x=R}if(x)Ft(m,"complete"),Ft(m,"success");else{m.o=6;try{var H=ri(m)>2?m.g.statusText:""}catch{H=""}m.l=H+" ["+m.ca()+"]",Ba(m)}}finally{Xi(m)}}}}function Xi(m,E){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const x=m.g;m.g=null,E||Ft(m,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ri(m){return m.g?m.g.readyState:0}t.ca=function(){try{return ri(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(m){if(this.g){var E=this.g.responseText;return m&&E.indexOf(m)==0&&(E=E.substring(m.length)),Jf(E)}};function Wt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Wi(m){const E={};m=(m.g&&ri(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<m.length;R++){if(D(m[R]))continue;var x=fu(m[R]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const X=E[H]||[];E[H]=X,X.push(x)}qe(E,function(R){return R.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(m,E,x){return x&&x.internalChannelParams&&x.internalChannelParams[m]||E}function wo(m){this.za=0,this.i=[],this.j=new ti,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Vi("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Vi("baseRetryDelayMs",5e3,m),this.Za=Vi("retryDelaySeedMs",1e4,m),this.Ta=Vi("forwardChannelMaxRetries",2,m),this.va=Vi("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ia(m&&m.concurrentRequestLimit),this.Ba=new Ro,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=wo.prototype,t.ka=8,t.I=1,t.connect=function(m,E,x,R){Nt(0),this.W=m,this.H=E||{},x&&R!==void 0&&(this.H.OSID=x,this.H.OAID=R),this.F=this.X,this.J=Cu(this,null,this.W),Ui(this)};function qa(m){if(pr(m),m.I==3){var E=m.V++,x=Pt(m.J);if(ot(x,"SID",m.M),ot(x,"RID",E),ot(x,"TYPE","terminate"),ws(m,x),E=new ni(m,m.j,E),E.M=2,E.A=Ss(Pt(x)),x=!1,u.navigator&&u.navigator.sendBeacon)try{x=u.navigator.sendBeacon(E.A.toString(),"")}catch{}!x&&u.Image&&(new Image().src=E.A,x=!0),x||(E.g=bu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),bi(E)}xu(m)}function No(m){m.g&&(Ga(m),m.g.cancel(),m.g=null)}function pr(m){No(m),m.v&&(u.clearTimeout(m.v),m.v=null),gr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function Ui(m){if(!wa(m.h)&&!m.m){m.m=!0;var E=m.Ea;fe||w(),ae||(fe(),ae=!0),N.add(E,m),m.D=0}}function mr(m,E){return wi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=E.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Si(h(m.Ea,m,E),Su(m,m.D)),m.D++,!0)}t.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const H=new ni(this,this.j,m);let X=this.o;if(this.U&&(X?(X=B(X),de(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)e:{for(var E=0,x=0;x<this.i.length;x++){t:{var R=this.i[x];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(E+=R,E>4096){E=x;break e}if(E===4096||x===this.i.length-1){E=x+1;break e}}E=1e3}else E=1e3;E=vu(this,H,E),x=Pt(this.J),ot(x,"RID",m),ot(x,"CVER",22),this.G&&ot(x,"X-HTTP-Session-Id",this.G),ws(this,x),X&&(this.R?E="headers="+Qi(qn(X))+"&"+E:this.u&&bs(x,this.u,X)),Na(this.h,H),this.Ra&&ot(x,"TYPE","init"),this.S?(ot(x,"$req",E),ot(x,"SID","null"),H.U=!0,Ci(H,x,null)):Ci(H,x,E),this.I=2}}else this.I==3&&(m?Fa(this,m):this.i.length==0||wa(this.h)||Fa(this))};function Fa(m,E){var x;E?x=E.l:x=m.V++;const R=Pt(m.J);ot(R,"SID",m.M),ot(R,"RID",x),ot(R,"AID",m.K),ws(m,R),m.u&&m.o&&bs(R,m.u,m.o),x=new ni(m,m.j,x,m.D+1),m.u===null&&(x.J=m.o),E&&(m.i=E.G.concat(m.i)),E=vu(m,x,1e3),x.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Na(m.h,x),Ci(x,R,E)}function ws(m,E){m.H&&Ce(m.H,function(x,R){ot(E,R,x)}),m.l&&Ce({},function(x,R){ot(E,R,x)})}function vu(m,E,x){x=Math.min(m.i.length,x);const R=m.l?h(m.l.Ka,m.l,m):null;e:{var H=m.i;let Ve=-1;for(;;){const Ct=["count="+x];Ve==-1?x>0?(Ve=H[0].g,Ct.push("ofs="+Ve)):Ve=0:Ct.push("ofs="+Ve);let tt=!0;for(let gt=0;gt<x;gt++){var X=H[gt].g;const Fn=H[gt].map;if(X-=Ve,X<0)Ve=Math.max(0,H[gt].g-100),tt=!1;else try{X="req"+X+"_"||"";try{var ce=Fn instanceof Map?Fn:Object.entries(Fn);for(const[ki,ai]of ce){let li=ai;d(ai)&&(li=Ao(ai)),Ct.push(X+ki+"="+encodeURIComponent(li))}}catch(ki){throw Ct.push(X+"type="+encodeURIComponent("_badmap")),ki}}catch{R&&R(Fn)}}if(tt){ce=Ct.join("&");break e}}ce=void 0}return m=m.i.splice(0,x),E.G=m,ce}function Tu(m){if(!m.g&&!m.v){m.Y=1;var E=m.Da;fe||w(),ae||(fe(),ae=!0),N.add(E,m),m.A=0}}function Ns(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Si(h(m.Da,m),Su(m,m.A)),m.A++,!0)}t.Da=function(){if(this.v=null,Eu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Si(h(this.Wa,this),m)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),No(this),Eu(this))};function Ga(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function Eu(m){m.g=new ni(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var E=Pt(m.na);ot(E,"RID","rpc"),ot(E,"SID",m.M),ot(E,"AID",m.K),ot(E,"CI",m.F?"0":"1"),!m.F&&m.ia&&ot(E,"TO",m.ia),ot(E,"TYPE","xmlhttp"),ws(m,E),m.u&&m.o&&bs(E,m.u,m.o),m.O&&(m.g.H=m.O);var x=m.g;m=m.ba,x.M=1,x.A=Ss(Pt(E)),x.u=null,x.R=!0,ar(x,m)}t.Va=function(){this.C!=null&&(this.C=null,No(this),Ns(this),Nt(19))};function gr(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function Au(m,E){var x=null;if(m.g==E){gr(m),Ga(m),m.g=null;var R=2}else if(Ni(m.h,E))x=E.G,Da(m.h,E),R=1;else return;if(m.I!=0){if(E.o)if(R==1){x=E.u?E.u.length:0,E=Date.now()-E.F;var H=m.D;R=rr(),Ft(R,new Ai(R,x)),Ui(m)}else Tu(m);else if(H=E.m,H==3||H==0&&E.X>0||!(R==1&&mr(m,E)||R==2&&Ns(m)))switch(x&&x.length>0&&(E=m.h,E.i=E.i.concat(x)),H){case 1:Li(m,5);break;case 4:Li(m,10);break;case 3:Li(m,6);break;default:Li(m,2)}}}function Su(m,E){let x=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(x*=2),x*E}function Li(m,E){if(m.j.info("Error code "+E),E==2){var x=h(m.bb,m),R=m.Ua;const H=!R;R=new In(R||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Yt(R,"https"),Ss(R),H?oi(R.toString(),x):ka(R.toString(),x)}else Nt(2);m.I=0,m.l&&m.l.pa(E),xu(m),pr(m)}t.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function xu(m){if(m.I=0,m.ja=[],m.l){const E=Ma(m.h);(E.length!=0||m.i.length!=0)&&(P(m.ja,E),P(m.ja,m.i),m.h.i.length=0,C(m.i),m.i.length=0),m.l.oa()}}function Cu(m,E,x){var R=x instanceof In?Pt(x):new In(x);if(R.g!="")E&&(R.g=E+"."+R.g),So(R,R.u);else{var H=u.location;R=H.protocol,E=E?E+"."+H.hostname:H.hostname,H=+H.port;const X=new In(null);R&&Yt(X,R),E&&(X.g=E),H&&So(X,H),x&&(X.h=x),R=X}return x=m.G,E=m.wa,x&&E&&ot(R,x,E),ot(R,"VER",m.ka),ws(m,R),R}function bu(m,E,x){if(E&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=m.Aa&&!m.ma?new at(new Mi({ab:x})):new at(m.ma),E.Fa(m.L),E}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ru(){}t=Ru.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Do(){}Do.prototype.g=function(m,E){return new dn(m,E)};function dn(m,E){wt.call(this),this.g=new wo(E),this.l=m,this.h=E&&E.messageUrlParams||null,m=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(m?m["X-WebChannel-Content-Type"]=E.messageContentType:m={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(m?m["X-WebChannel-Client-Profile"]=E.sa:m={"X-WebChannel-Client-Profile":E.sa}),this.g.U=m,(m=E&&E.Qb)&&!D(m)&&(this.g.u=m),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!D(E)&&(this.g.G=E,m=this.h,m!==null&&E in m&&(m=this.h,E in m&&delete m[E])),this.j=new Zi(this)}T(dn,wt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){qa(this.g)},dn.prototype.o=function(m){var E=this.g;if(typeof m=="string"){var x={};x.__data__=m,m=x}else this.v&&(x={},x.__data__=Ao(m),m=x);E.i.push(new Mt(E.Ya++,m)),E.I==3&&Ui(E)},dn.prototype.N=function(){this.g.l=null,delete this.j,qa(this.g),delete this.g,dn.Z.N.call(this)};function Iu(m){Xt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var E=m.__sm__;if(E){e:{for(const x in E){m=x;break e}m=void 0}(this.i=m)&&(m=this.i,E=E!==null&&m in E?E[m]:void 0),this.data=E}else this.data=m}T(Iu,Xt);function wu(){kn.call(this),this.status=1}T(wu,kn);function Zi(m){this.g=m}T(Zi,Ru),Zi.prototype.ra=function(){Ft(this.g,"a")},Zi.prototype.qa=function(m){Ft(this.g,new Iu(m))},Zi.prototype.pa=function(m){Ft(this.g,new wu)},Zi.prototype.oa=function(){Ft(this.g,"b")},Do.prototype.createWebChannel=Do.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,nS=function(){return new Do},tS=function(){return rr()},eS=xt,Mp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Es.NO_ERROR=0,Es.TIMEOUT=8,Es.HTTP_ERROR=6,Kc=Es,ba.COMPLETE="complete",jA=ba,au.EventType=ei,ei.OPEN="a",ei.CLOSE="b",ei.ERROR="c",ei.MESSAGE="d",wt.prototype.listen=wt.prototype.J,Dl=au,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,ZA=at}).apply(typeof Oc<"u"?Oc:typeof self<"u"?self:typeof window<"u"?window:{});const bT="@firebase/firestore",RT="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ya="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new FA("@firebase/firestore");function Xr(){return Ws.logLevel}function ye(t,...e){if(Ws.logLevel<=We.DEBUG){const n=e.map(cm);Ws.debug(`Firestore (${ya}): ${t}`,...n)}}function yo(t,...e){if(Ws.logLevel<=We.ERROR){const n=e.map(cm);Ws.error(`Firestore (${ya}): ${t}`,...n)}}function la(t,...e){if(Ws.logLevel<=We.WARN){const n=e.map(cm);Ws.warn(`Firestore (${ya}): ${t}`,...n)}}function cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,iS(t,i,n)}function iS(t,e,n){let i=`FIRESTORE (${ya}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw yo(i),new Error(i)}function it(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||iS(e,r,i)}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class K4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(ln.UNAUTHENTICATED)))}shutdown(){}}class Q4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class X4{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){it(this.o===void 0,42304);let i=this.i;const r=g=>this.i!==i?(i=this.i,n(g)):Promise.resolve();let a=new as;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new as,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=a;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},d=g=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new as)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it(typeof i.accessToken=="string",31837,{l:i}),new oS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class W4{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Z4{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new W4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(ln.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class IT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class j4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,YA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){it(this.o===void 0,3512);const i=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new IT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(it(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new IT(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=e6(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<n&&(i+=e.charAt(r[a]%62))}return i}}function Je(t,e){return t<e?-1:t>e?1:0}function Pp(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),a=e.charAt(i);if(r!==a)return np(r)===np(a)?Je(r,a):np(r)?1:-1}return Je(t.length,e.length)}const t6=55296,n6=57343;function np(t){const e=t.charCodeAt(0);return e>=t6&&e<=n6}function ua(t,e,n){return t.length===e.length&&t.every(((i,r)=>n(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="__name__";class Gi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Re(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Re(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach((i=>{n.push(i)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const a=Gi.compareSegments(e.get(r),n.get(r));if(a!==0)return a}return Je(e.length,n.length)}static compareSegments(e,n){const i=Gi.isNumericId(e),r=Gi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Gi.extractNumericId(e).compare(Gi.extractNumericId(n)):Pp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rs.fromString(e.substring(4,e.length-2))}}class dt extends Gi{construct(e,n,i){return new dt(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new pe(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((r=>r.length>0)))}return new dt(n)}static emptyPath(){return new dt([])}}const i6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Gi{construct(e,n,i){return new on(e,n,i)}static isValidIdentifier(e){return i6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wT}static keyField(){return new on([wT])}static fromServerFormat(e){const n=[];let i="",r=0;const a=()=>{if(i.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let u=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new pe(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,r+=2}else d==="`"?(u=!u,r++):d!=="."||u?(i+=d,r++):(a(),r++)}if(a(),u)throw new pe(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(n)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(dt.fromString(e))}static fromName(e){return new Se(dt.fromString(e).popFirst(5))}static empty(){return new Se(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(t,e,n){if(!n)throw new pe(oe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function o6(t,e,n,i){if(e===!0&&i===!0)throw new pe(oe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function NT(t){if(!Se.isDocumentKey(t))throw new pe(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function DT(t){if(Se.isDocumentKey(t))throw new pe(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function rS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Nf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Re(12329,{type:typeof t})}function zl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Nf(t);throw new pe(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function s6(t,e){if(e<=0)throw new pe(oe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(t,e){const n={typeString:t};return e&&(n.value=e),n}function jl(t,e){if(!rS(t))throw new pe(oe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const u=t[i];if(r&&typeof u!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&u!==a.value){n=`Expected '${i}' field to equal '${a.value}'`;break}}if(n)throw new pe(oe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT=-62135596800,PT=1e6;class ht{static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*PT);return new ht(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<MT)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/PT}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(jl(e,ht._jsonSchema))return new ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-MT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ht._jsonSchemaVersion="firestore/timestamp/1.0",ht._jsonSchema={type:qt("string",ht._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new ht(0,0))}static max(){return new Ne(new ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=-1;function r6(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Ne.fromTimestamp(i===1e9?new ht(n+1,0):new ht(n,i));return new us(r,Se.empty(),e)}function a6(t){return new us(t.readTime,t.key,Yl)}class us{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new us(Ne.min(),Se.empty(),Yl)}static max(){return new us(Ne.max(),Se.empty(),Yl)}}function l6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(t.documentKey,e.documentKey),n!==0?n:Je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class c6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(t){if(t.code!==oe.FAILED_PRECONDITION||t.message!==u6)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(n,a).next(i,r)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,i)=>{n(e)}))}static reject(e){return new se(((n,i)=>{i(e)}))}static waitFor(e){return new se(((n,i)=>{let r=0,a=0,u=!1;e.forEach((d=>{++r,d.next((()=>{++a,u&&a===r&&n()}),(g=>i(g)))})),u=!0,a===r&&n()}))}static or(e){let n=se.resolve(!1);for(const i of e)n=n.next((r=>r?se.resolve(r):i()));return n}static forEach(e,n){const i=[];return e.forEach(((r,a)=>{i.push(n.call(this,r,a))})),this.waitFor(i)}static mapArray(e,n){return new se(((i,r)=>{const a=e.length,u=new Array(a);let d=0;for(let g=0;g<a;g++){const h=g;n(e[h]).next((_=>{u[h]=_,++d,d===a&&i(u)}),(_=>r(_)))}}))}static doWhile(e,n){return new se(((i,r)=>{const a=()=>{e()===!0?n().next((()=>{a()}),r):i()};a()}))}}function f6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function va(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm=-1;function Mf(t){return t==null}function ff(t){return t===0&&1/t==-1/0}function d6(t){return typeof t=="number"&&Number.isInteger(t)&&!ff(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="";function h6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=VT(e)),e=p6(t.get(n),e);return VT(e)}function p6(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const a=t.charAt(r);switch(a){case"\0":n+="";break;case aS:n+="";break;default:n+=a}}return n}function VT(t){return t+aS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function nr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||nn.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nn.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,i)=>(e(n,i),!1)))}toString(){const e=[];return this.inorderTraversal(((n,i)=>(e.push(`${n}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bc(this.root,e,this.comparator,!0)}}class Bc{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?i(e.key,n):1,n&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nn{constructor(e,n,i,r,a){this.key=e,this.value=n,this.color=i??nn.RED,this.left=r??nn.EMPTY,this.right=a??nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,a){return new nn(e??this.key,n??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,n,i),null):a===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return nn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}nn.EMPTY=null,nn.RED=!0,nn.BLACK=!1;nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,n,i,r,a){return this}insert(e,n,i){return new nn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,i)=>(e(n),!1)))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new LT(this.data.getIterator())}getIteratorFrom(e){return new LT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((i=>{n=n.add(i)})),n}isEqual(e){if(!(e instanceof Ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ht(this.comparator);return n.data=e,n}}class LT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new hi([])}unionWith(e){let n=new Ht(on.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new hi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new uS("Invalid base64 string: "+a):a}})(e);return new sn(n)}static fromUint8Array(e){const n=(function(r){let a="";for(let u=0;u<r.length;++u)a+=String.fromCharCode(r[u]);return a})(e);return new sn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const m6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cs(t){if(it(!!t,39018),typeof t=="string"){let e=0;const n=m6.exec(t);if(it(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fs(t){return typeof t=="string"?sn.fromBase64String(t):sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="server_timestamp",fS="__type__",dS="__previous_value__",hS="__local_write_time__";function hm(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[fS])==null?void 0:i.stringValue)===cS}function Pf(t){const e=t.mapValue.fields[dS];return hm(e)?Pf(e):e}function Jl(t){const e=cs(t.mapValue.fields[hS].timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g6{constructor(e,n,i,r,a,u,d,g,h,_){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=h,this.isUsingEmulator=_}}const df="(default)";class $l{constructor(e,n){this.projectId=e,this.database=n||df}static empty(){return new $l("","")}get isDefaultDatabase(){return this.database===df}isEqual(e){return e instanceof $l&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="__type__",y6="__max__",qc={mapValue:{}},mS="__vector__",hf="value";function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?hm(t)?4:v6(t)?9007199254740991:_6(t)?10:11:Re(28295,{value:t})}function Ki(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Jl(t).isEqual(Jl(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const u=cs(r.timestampValue),d=cs(a.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(r,a){return fs(r.bytesValue).isEqual(fs(a.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(r,a){return It(r.geoPointValue.latitude)===It(a.geoPointValue.latitude)&&It(r.geoPointValue.longitude)===It(a.geoPointValue.longitude)})(t,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return It(r.integerValue)===It(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const u=It(r.doubleValue),d=It(a.doubleValue);return u===d?ff(u)===ff(d):isNaN(u)&&isNaN(d)}return!1})(t,e);case 9:return ua(t.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return(function(r,a){const u=r.mapValue.fields||{},d=a.mapValue.fields||{};if(UT(u)!==UT(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(d[g]===void 0||!Ki(u[g],d[g])))return!1;return!0})(t,e);default:return Re(52216,{left:t})}}function Kl(t,e){return(t.values||[]).find((n=>Ki(n,e)))!==void 0}function ca(t,e){if(t===e)return 0;const n=ds(t),i=ds(e);if(n!==i)return Je(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Je(t.booleanValue,e.booleanValue);case 2:return(function(a,u){const d=It(a.integerValue||a.doubleValue),g=It(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(t,e);case 3:return kT(t.timestampValue,e.timestampValue);case 4:return kT(Jl(t),Jl(e));case 5:return Pp(t.stringValue,e.stringValue);case 6:return(function(a,u){const d=fs(a),g=fs(u);return d.compareTo(g)})(t.bytesValue,e.bytesValue);case 7:return(function(a,u){const d=a.split("/"),g=u.split("/");for(let h=0;h<d.length&&h<g.length;h++){const _=Je(d[h],g[h]);if(_!==0)return _}return Je(d.length,g.length)})(t.referenceValue,e.referenceValue);case 8:return(function(a,u){const d=Je(It(a.latitude),It(u.latitude));return d!==0?d:Je(It(a.longitude),It(u.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return OT(t.arrayValue,e.arrayValue);case 10:return(function(a,u){var A,C,P,V;const d=a.fields||{},g=u.fields||{},h=(A=d[hf])==null?void 0:A.arrayValue,_=(C=g[hf])==null?void 0:C.arrayValue,T=Je(((P=h==null?void 0:h.values)==null?void 0:P.length)||0,((V=_==null?void 0:_.values)==null?void 0:V.length)||0);return T!==0?T:OT(h,_)})(t.mapValue,e.mapValue);case 11:return(function(a,u){if(a===qc.mapValue&&u===qc.mapValue)return 0;if(a===qc.mapValue)return 1;if(u===qc.mapValue)return-1;const d=a.fields||{},g=Object.keys(d),h=u.fields||{},_=Object.keys(h);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const A=Pp(g[T],_[T]);if(A!==0)return A;const C=ca(d[g[T]],h[_[T]]);if(C!==0)return C}return Je(g.length,_.length)})(t.mapValue,e.mapValue);default:throw Re(23264,{he:n})}}function kT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Je(t,e);const n=cs(t),i=cs(e),r=Je(n.seconds,i.seconds);return r!==0?r:Je(n.nanos,i.nanos)}function OT(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const a=ca(n[r],i[r]);if(a)return a}return Je(n.length,i.length)}function fa(t){return Vp(t)}function Vp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const i=cs(n);return`time(${i.seconds},${i.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return fs(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Se.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let i="[",r=!0;for(const a of n.values||[])r?r=!1:i+=",",i+=Vp(a);return i+"]"})(t.arrayValue):"mapValue"in t?(function(n){const i=Object.keys(n.fields||{}).sort();let r="{",a=!0;for(const u of i)a?a=!1:r+=",",r+=`${u}:${Vp(n.fields[u])}`;return r+"}"})(t.mapValue):Re(61005,{value:t})}function Qc(t){switch(ds(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pf(t);return e?16+Qc(e):16;case 5:return 2*t.stringValue.length;case 6:return fs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+Qc(a)),0)})(t.arrayValue);case 10:case 11:return(function(i){let r=0;return nr(i.fields,((a,u)=>{r+=a.length+Qc(u)})),r})(t.mapValue);default:throw Re(13486,{value:t})}}function BT(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Up(t){return!!t&&"integerValue"in t}function pm(t){return!!t&&"arrayValue"in t}function qT(t){return!!t&&"nullValue"in t}function FT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Xc(t){return!!t&&"mapValue"in t}function _6(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[pS])==null?void 0:i.stringValue)===mS}function Ul(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return nr(t.mapValue.fields,((n,i)=>e.mapValue.fields[n]=Ul(i))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ul(t.arrayValue.values[n]);return e}return{...t}}function v6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===y6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.value=e}static empty(){return new Xn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ul(n)}setAll(e){let n=on.emptyPath(),i={},r=[];e.forEach(((u,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,i,r),i={},r=[],n=d.popLast()}u?i[d.lastSegment()]=Ul(u):r.push(d.lastSegment())}));const a=this.getFieldsMap(n);this.applyChanges(a,i,r)}delete(e){const n=this.field(e.popLast());Xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Xc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){nr(n,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new Xn(Ul(this.value))}}function gS(t){const e=[];return nr(t.fields,((n,i)=>{const r=new on([n]);if(Xc(i)){const a=gS(i.mapValue).fields;if(a.length===0)e.push(r);else for(const u of a)e.push(r.child(u))}else e.push(r)})),new hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,i,r,a,u,d){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=u,this.documentState=d}static newInvalidDocument(e){return new un(e,0,Ne.min(),Ne.min(),Ne.min(),Xn.empty(),0)}static newFoundDocument(e,n,i,r){return new un(e,1,n,Ne.min(),i,r,0)}static newNoDocument(e,n){return new un(e,2,n,Ne.min(),Ne.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Ne.min(),Ne.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n){this.position=e,this.inclusive=n}}function GT(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const a=e[r],u=t.position[r];if(a.field.isKeyField()?i=Se.comparator(Se.fromName(u.referenceValue),n.key):i=ca(u,n.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function HT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ki(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n="asc"){this.field=e,this.dir=n}}function T6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{}class Bt extends yS{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new A6(e,n,i):n==="array-contains"?new C6(e,i):n==="in"?new b6(e,i):n==="not-in"?new R6(e,i):n==="array-contains-any"?new I6(e,i):new Bt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new S6(e,i):new x6(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ca(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(ca(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends yS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new vi(e,n)}matches(e){return _S(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function _S(t){return t.op==="and"}function vS(t){return E6(t)&&_S(t)}function E6(t){for(const e of t.filters)if(e instanceof vi)return!1;return!0}function Lp(t){if(t instanceof Bt)return t.field.canonicalString()+t.op.toString()+fa(t.value);if(vS(t))return t.filters.map((e=>Lp(e))).join(",");{const e=t.filters.map((n=>Lp(n))).join(",");return`${t.op}(${e})`}}function TS(t,e){return t instanceof Bt?(function(i,r){return r instanceof Bt&&i.op===r.op&&i.field.isEqual(r.field)&&Ki(i.value,r.value)})(t,e):t instanceof vi?(function(i,r){return r instanceof vi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,u,d)=>a&&TS(u,r.filters[d])),!0):!1})(t,e):void Re(19439)}function ES(t){return t instanceof Bt?(function(n){return`${n.field.canonicalString()} ${n.op} ${fa(n.value)}`})(t):t instanceof vi?(function(n){return n.op.toString()+" {"+n.getFilters().map(ES).join(" ,")+"}"})(t):"Filter"}class A6 extends Bt{constructor(e,n,i){super(e,n,i),this.key=Se.fromName(i.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class S6 extends Bt{constructor(e,n){super(e,"in",n),this.keys=AS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class x6 extends Bt{constructor(e,n){super(e,"not-in",n),this.keys=AS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function AS(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((i=>Se.fromName(i.referenceValue)))}class C6 extends Bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pm(n)&&Kl(n.arrayValue,this.value)}}class b6 extends Bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Kl(this.value.arrayValue,n)}}class R6 extends Bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Kl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Kl(this.value.arrayValue,n)}}class I6 extends Bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Kl(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,n=null,i=[],r=[],a=null,u=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=u,this.endAt=d,this.Te=null}}function zT(t,e=null,n=[],i=[],r=null,a=null,u=null){return new w6(t,e,n,i,r,a,u)}function mm(t){const e=Pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((i=>Lp(i))).join(","),n+="|ob:",n+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Mf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((i=>fa(i))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((i=>fa(i))).join(",")),e.Te=n}return e.Te}function gm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!T6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HT(t.startAt,e.startAt)&&HT(t.endAt,e.endAt)}function kp(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n=null,i=[],r=[],a=null,u="F",d=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=u,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function N6(t,e,n,i,r,a,u,d){return new Ta(t,e,n,i,r,a,u,d)}function SS(t){return new Ta(t)}function YT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xS(t){return t.collectionGroup!==null}function Ll(t){const e=Pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let d=new Ht(on.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Ql(a,i))})),n.has(on.keyField().canonicalString())||e.Ie.push(new Ql(on.keyField(),i))}return e.Ie}function Hi(t){const e=Pe(t);return e.Ee||(e.Ee=D6(e,Ll(t))),e.Ee}function D6(t,e){if(t.limitType==="F")return zT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new Ql(r.field,a)}));const n=t.endAt?new pf(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new pf(t.startAt.position,t.startAt.inclusive):null;return zT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Op(t,e){const n=t.filters.concat([e]);return new Ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function mf(t,e,n){return new Ta(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vf(t,e){return gm(Hi(t),Hi(e))&&t.limitType===e.limitType}function CS(t){return`${mm(Hi(t))}|lt:${t.limitType}`}function Wr(t){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((r=>ES(r))).join(", ")}]`),Mf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((r=>fa(r))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((r=>fa(r))).join(",")),`Target(${i})`})(Hi(t))}; limitType=${t.limitType})`}function Uf(t,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Se.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(t,e)&&(function(i,r){for(const a of Ll(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(t,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(t,e)&&(function(i,r){return!(i.startAt&&!(function(u,d,g){const h=GT(u,d,g);return u.inclusive?h<=0:h<0})(i.startAt,Ll(i),r)||i.endAt&&!(function(u,d,g){const h=GT(u,d,g);return u.inclusive?h>=0:h>0})(i.endAt,Ll(i),r))})(t,e)}function M6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function bS(t){return(e,n)=>{let i=!1;for(const r of Ll(t)){const a=P6(r,e,n);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function P6(t,e,n){const i=t.field.isKeyField()?Se.comparator(e.key,n.key):(function(a,u,d){const g=u.data.field(a),h=d.data.field(a);return g!==null&&h!==null?ca(g,h):Re(42886)})(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Re(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){nr(this.inner,((n,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return lS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6=new _t(Se.comparator);function _o(){return V6}const RS=new _t(Se.comparator);function Ml(...t){let e=RS;for(const n of t)e=e.insert(n.key,n);return e}function IS(t){let e=RS;return t.forEach(((n,i)=>e=e.insert(n,i.overlayedDocument))),e}function Qs(){return kl()}function wS(){return kl()}function kl(){return new ir((t=>t.toString()),((t,e)=>t.isEqual(e)))}const U6=new _t(Se.comparator),L6=new Ht(Se.comparator);function $e(...t){let e=L6;for(const n of t)e=e.add(n);return e}const k6=new Ht(Je);function O6(){return k6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ff(e)?"-0":e}}function NS(t){return{integerValue:""+t}}function B6(t,e){return d6(e)?NS(e):ym(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this._=void 0}}function q6(t,e,n){return t instanceof gf?(function(r,a){const u={fields:{[fS]:{stringValue:cS},[hS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&hm(a)&&(a=Pf(a)),a&&(u.fields[dS]=a),{mapValue:u}})(n,e):t instanceof Xl?MS(t,e):t instanceof Wl?PS(t,e):(function(r,a){const u=DS(r,a),d=JT(u)+JT(r.Ae);return Up(u)&&Up(r.Ae)?NS(d):ym(r.serializer,d)})(t,e)}function F6(t,e,n){return t instanceof Xl?MS(t,e):t instanceof Wl?PS(t,e):n}function DS(t,e){return t instanceof yf?(function(i){return Up(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class gf extends Lf{}class Xl extends Lf{constructor(e){super(),this.elements=e}}function MS(t,e){const n=VS(e);for(const i of t.elements)n.some((r=>Ki(r,i)))||n.push(i);return{arrayValue:{values:n}}}class Wl extends Lf{constructor(e){super(),this.elements=e}}function PS(t,e){let n=VS(e);for(const i of t.elements)n=n.filter((r=>!Ki(r,i)));return{arrayValue:{values:n}}}class yf extends Lf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function JT(t){return It(t.integerValue||t.doubleValue)}function VS(t){return pm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function G6(t,e){return t.field.isEqual(e.field)&&(function(i,r){return i instanceof Xl&&r instanceof Xl||i instanceof Wl&&r instanceof Wl?ua(i.elements,r.elements,Ki):i instanceof yf&&r instanceof yf?Ki(i.Ae,r.Ae):i instanceof gf&&r instanceof gf})(t.transform,e.transform)}class H6{constructor(e,n){this.version=e,this.transformResults=n}}class zi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new zi}static exists(e){return new zi(void 0,e)}static updateTime(e){return new zi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kf{}function US(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _m(t.key,zi.none()):new eu(t.key,t.data,zi.none());{const n=t.data,i=Xn.empty();let r=new Ht(on.comparator);for(let a of e.fields)if(!r.has(a)){let u=n.field(a);u===null&&a.length>1&&(a=a.popLast(),u=n.field(a)),u===null?i.delete(a):i.set(a,u),r=r.add(a)}return new or(t.key,i,new hi(r.toArray()),zi.none())}}function z6(t,e,n){t instanceof eu?(function(r,a,u){const d=r.value.clone(),g=KT(r.fieldTransforms,a,u.transformResults);d.setAll(g),a.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(t,e,n):t instanceof or?(function(r,a,u){if(!Wc(r.precondition,a))return void a.convertToUnknownDocument(u.version);const d=KT(r.fieldTransforms,a,u.transformResults),g=a.data;g.setAll(LS(r)),g.setAll(d),a.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(t,e,n):(function(r,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,n)}function Ol(t,e,n,i){return t instanceof eu?(function(a,u,d,g){if(!Wc(a.precondition,u))return d;const h=a.value.clone(),_=QT(a.fieldTransforms,g,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(t,e,n,i):t instanceof or?(function(a,u,d,g){if(!Wc(a.precondition,u))return d;const h=QT(a.fieldTransforms,g,u),_=u.data;return _.setAll(LS(a)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(t,e,n,i):(function(a,u,d){return Wc(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d})(t,e,n)}function Y6(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),a=DS(i.transform,r||null);a!=null&&(n===null&&(n=Xn.empty()),n.set(i.field,a))}return n||null}function $T(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ua(i,r,((a,u)=>G6(a,u)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class eu extends kf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class or extends kf{constructor(e,n,i,r,a=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function LS(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function KT(t,e,n){const i=new Map;it(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const a=t[r],u=a.transform,d=e.data.field(a.field);i.set(a.field,F6(u,d,n[r]))}return i}function QT(t,e,n){const i=new Map;for(const r of t){const a=r.transform,u=n.data.field(r.field);i.set(r.field,q6(a,u,e))}return i}class _m extends kf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J6 extends kf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&z6(a,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ol(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ol(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=wS();return this.mutations.forEach((r=>{const a=e.get(r.key),u=a.overlayedDocument;let d=this.applyToLocalView(u,a.mutatedFields);d=n.has(r.key)?null:d;const g=US(u,d);g!==null&&i.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(Ne.min())})),i}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),$e())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,((n,i)=>$T(n,i)))&&ua(this.baseMutations,e.baseMutations,((n,i)=>$T(n,i)))}}class vm{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){it(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return U6})();const a=e.mutations;for(let u=0;u<a.length;u++)r=r.insert(a[u].key,i[u].version);return new vm(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Xe;function X6(t){switch(t){case oe.OK:return Re(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Re(15467,{code:t})}}function kS(t){if(t===void 0)return yo("GRPC error has no .code"),oe.UNKNOWN;switch(t){case Ot.OK:return oe.OK;case Ot.CANCELLED:return oe.CANCELLED;case Ot.UNKNOWN:return oe.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return oe.INTERNAL;case Ot.UNAVAILABLE:return oe.UNAVAILABLE;case Ot.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Ot.NOT_FOUND:return oe.NOT_FOUND;case Ot.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Ot.ABORTED:return oe.ABORTED;case Ot.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Ot.DATA_LOSS:return oe.DATA_LOSS;default:return Re(39323,{code:t})}}(Xe=Ot||(Ot={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z6=new rs([4294967295,4294967295],0);function XT(t){const e=W6().encode(t),n=new WA;return n.update(e),new Uint8Array(n.digest())}function WT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new rs([n,i],0),new rs([r,a],0)]}class Tm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Pl(`Invalid padding: ${n}`);if(i<0)throw new Pl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Pl(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Pl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=rs.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(rs.fromNumber(i)));return r.compare(Z6)===1&&(r=new rs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=XT(e),[i,r]=WT(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);if(!this.we(u))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Tm(a,r,n);return i.forEach((d=>u.insert(d))),u}insert(e){if(this.ge===0)return;const n=XT(e),[i,r]=WT(n);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,r,a);this.Se(u)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Pl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n,i,r,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,tu.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Of(Ne.min(),r,new _t(Je),_o(),$e())}}class tu{constructor(e,n,i,r,a){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new tu(i,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class OS{constructor(e,n){this.targetId=e,this.Ce=n}}class BS{constructor(e,n,i=sn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class ZT{constructor(){this.ve=0,this.Fe=jT(),this.Me=sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),n=$e(),i=$e();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:Re(38017,{changeType:a})}})),new tu(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=jT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,it(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class j6{constructor(e){this.Ge=e,this.ze=new Map,this.je=_o(),this.Je=Fc(),this.He=Fc(),this.Ye=new _t(Je)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Re(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((i,r)=>{this.rt(r)&&n(r)}))}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const a=r.target;if(kp(a))if(i===0){const u=new Se(a.path);this.et(n,u,un.newNoDocument(u,Ne.min()))}else it(i===1,20013,{expectedCount:i});else{const u=this._t(n);if(u!==i){const d=this.ut(e),g=d?this.ct(d,e,u):1;if(g!==0){this.it(n);const h=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=n;let u,d;try{u=fs(i).toUint8Array()}catch(g){if(g instanceof uS)return la("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Tm(u,r,a)}catch(g){return la(g instanceof Pl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach((a=>{const u=this.Ge.ht(),d=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(n,a,null),r++)})),r}Tt(e){const n=new Map;this.ze.forEach(((a,u)=>{const d=this.ot(u);if(d){if(a.current&&kp(d.target)){const g=new Se(d.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,un.newNoDocument(g,e))}a.Be&&(n.set(u,a.ke()),a.qe())}}));let i=$e();this.He.forEach(((a,u)=>{let d=!0;u.forEachWhile((g=>{const h=this.ot(g);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const r=new Of(e,n,this.Ye,this.je,i);return this.je=_o(),this.Je=Fc(),this.He=Fc(),this.Ye=new _t(Je),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new ZT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ht(Je),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ht(Je),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ZT),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fc(){return new _t(Se.comparator)}function jT(){return new _t(Se.comparator)}const e3={asc:"ASCENDING",desc:"DESCENDING"},t3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n3={and:"AND",or:"OR"};class i3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bp(t,e){return t.useProto3Json||Mf(e)?e:{value:e}}function _f(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function o3(t,e){return _f(t,e.toTimestamp())}function Yi(t){return it(!!t,49232),Ne.fromTimestamp((function(n){const i=cs(n);return new ht(i.seconds,i.nanos)})(t))}function Em(t,e){return qp(t,e).canonicalString()}function qp(t,e){const n=(function(r){return new dt(["projects",r.projectId,"databases",r.database])})(t).child("documents");return e===void 0?n:n.child(e)}function FS(t){const e=dt.fromString(t);return it(JS(e),10190,{key:e.toString()}),e}function Fp(t,e){return Em(t.databaseId,e.path)}function ip(t,e){const n=FS(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Se(HS(n))}function GS(t,e){return Em(t.databaseId,e)}function s3(t){const e=FS(t);return e.length===4?dt.emptyPath():HS(e)}function Gp(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HS(t){return it(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function eE(t,e,n){return{name:Fp(t,e),fields:n.value.mapValue.fields}}function r3(t,e){let n;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Re(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(h,_){return h.useProto3Json?(it(_===void 0||typeof _=="string",58123),sn.fromBase64String(_||"")):(it(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),sn.fromUint8Array(_||new Uint8Array))})(t,e.targetChange.resumeToken),u=e.targetChange.cause,d=u&&(function(h){const _=h.code===void 0?oe.UNKNOWN:kS(h.code);return new pe(_,h.message||"")})(u);n=new BS(i,r,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=ip(t,i.document.name),a=Yi(i.document.updateTime),u=i.document.createTime?Yi(i.document.createTime):Ne.min(),d=new Xn({mapValue:{fields:i.document.fields}}),g=un.newFoundDocument(r,a,u,d),h=i.targetIds||[],_=i.removedTargetIds||[];n=new Zc(h,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=ip(t,i.document),a=i.readTime?Yi(i.readTime):Ne.min(),u=un.newNoDocument(r,a),d=i.removedTargetIds||[];n=new Zc([],d,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=ip(t,i.document),a=i.removedTargetIds||[];n=new Zc([],a,r,null)}else{if(!("filter"in e))return Re(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,u=new Q6(r,a),d=i.targetId;n=new OS(d,u)}}return n}function a3(t,e){let n;if(e instanceof eu)n={update:eE(t,e.key,e.value)};else if(e instanceof _m)n={delete:Fp(t,e.key)};else if(e instanceof or)n={update:eE(t,e.key,e.data),updateMask:g3(e.fieldMask)};else{if(!(e instanceof J6))return Re(16599,{Vt:e.type});n={verify:Fp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const d=u.transform;if(d instanceof gf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Xl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Wl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof yf)return{fieldPath:u.field.canonicalString(),increment:d.Ae};throw Re(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(n.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:o3(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Re(27497)})(t,e.precondition)),n}function l3(t,e){return t&&t.length>0?(it(e!==void 0,14353),t.map((n=>(function(r,a){let u=r.updateTime?Yi(r.updateTime):Yi(a);return u.isEqual(Ne.min())&&(u=Yi(a)),new H6(u,r.transformResults||[])})(n,e)))):[]}function u3(t,e){return{documents:[GS(t,e.path)]}}function c3(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=GS(t,r);const a=(function(h){if(h.length!==0)return YS(vi.create(h,"and"))})(e.filters);a&&(n.structuredQuery.where=a);const u=(function(h){if(h.length!==0)return h.map((_=>(function(A){return{field:Zr(A.field),direction:h3(A.dir)}})(_)))})(e.orderBy);u&&(n.structuredQuery.orderBy=u);const d=Bp(t,e.limit);return d!==null&&(n.structuredQuery.limit=d),e.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:n,parent:r}}function f3(t){let e=s3(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){it(i===1,65062);const _=n.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let a=[];n.where&&(a=(function(T){const A=zS(T);return A instanceof vi&&vS(A)?A.getFilters():[A]})(n.where));let u=[];n.orderBy&&(u=(function(T){return T.map((A=>(function(P){return new Ql(jr(P.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(A)))})(n.orderBy));let d=null;n.limit&&(d=(function(T){let A;return A=typeof T=="object"?T.value:T,Mf(A)?null:A})(n.limit));let g=null;n.startAt&&(g=(function(T){const A=!!T.before,C=T.values||[];return new pf(C,A)})(n.startAt));let h=null;return n.endAt&&(h=(function(T){const A=!T.before,C=T.values||[];return new pf(C,A)})(n.endAt)),N6(e,r,u,a,d,"F",g,h)}function d3(t,e){const n=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:r})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zS(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=jr(n.unaryFilter.field);return Bt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=jr(n.unaryFilter.field);return Bt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=jr(n.unaryFilter.field);return Bt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=jr(n.unaryFilter.field);return Bt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Bt.create(jr(n.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return vi.create(n.compositeFilter.filters.map((i=>zS(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Re(1026)}})(n.compositeFilter.op))})(t):Re(30097,{filter:t})}function h3(t){return e3[t]}function p3(t){return t3[t]}function m3(t){return n3[t]}function Zr(t){return{fieldPath:t.canonicalString()}}function jr(t){return on.fromServerFormat(t.fieldPath)}function YS(t){return t instanceof Bt?(function(n){if(n.op==="=="){if(FT(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NAN"}};if(qT(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(FT(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NOT_NAN"}};if(qT(n.value))return{unaryFilter:{field:Zr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zr(n.field),op:p3(n.op),value:n.value}}})(t):t instanceof vi?(function(n){const i=n.getFilters().map((r=>YS(r)));return i.length===1?i[0]:{compositeFilter:{op:m3(n.op),filters:i}}})(t):Re(54877,{filter:t})}function g3(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function JS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,i,r,a=Ne.min(),u=Ne.min(),d=sn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.yt=e}}function _3(t){const e=f3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?mf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.Cn=new T3}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(us.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(us.min())}updateCollectionGroup(e,n,i){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class T3{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Ht(dt.comparator),a=!r.has(i);return this.index[n]=r.add(i),a}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ht(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$S=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn($S,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new da(0)}static cr(){return new da(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="LruGarbageCollector",E3=1048576;function iE([t,e],[n,i]){const r=Je(t,n);return r===0?Je(e,i):r}class A3{constructor(e){this.Ir=e,this.buffer=new Ht(iE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();iE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class S3{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(nE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){va(n)?ye(nE,"Ignoring IndexedDB error during garbage collection: ",n):await _a(n)}await this.Vr(3e5)}))}}class x3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Df.ce);const i=new A3(n);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(tE)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tE):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,a,u,d,g,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,n)))).next((T=>(a=T,g=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),Xr()<=We.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(d-u)+`ms
	Removed ${a} targets in `+(g-d)+`ms
	Removed ${T} documents in `+(h-g)+`ms
Total Duration: ${h-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T}))))}}function C3(t,e){return new x3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3{constructor(){this.changes=new ir((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?se.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,n)))).next((r=>(i!==null&&Ol(i.mutation,r,hi.empty(),ht.now()),r)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.getLocalViewOfDocuments(e,i,$e()).next((()=>i))))}getLocalViewOfDocuments(e,n,i=$e()){const r=Qs();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,i).next((a=>{let u=Ml();return a.forEach(((d,g)=>{u=u.insert(d,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,n){const i=Qs();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,$e())))}populateOverlays(e,n,i){const r=[];return i.forEach((a=>{n.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((u,d)=>{n.set(u,d)}))}))}computeViews(e,n,i,r){let a=_o();const u=kl(),d=(function(){return kl()})();return n.forEach(((g,h)=>{const _=i.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof or)?a=a.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),Ol(_.mutation,h,_.mutation.getFieldMask(),ht.now())):u.set(h.key,hi.empty())})),this.recalculateAndSaveOverlays(e,a).next((g=>(g.forEach(((h,_)=>u.set(h,_))),n.forEach(((h,_)=>d.set(h,new R3(_,u.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,n){const i=kl();let r=new _t(((u,d)=>u-d)),a=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((u=>{for(const d of u)d.keys().forEach((g=>{const h=n.get(g);if(h===null)return;let _=i.get(g)||hi.empty();_=d.applyToLocalView(h,_),i.set(g,_);const T=(r.get(d.batchId)||$e()).add(g);r=r.insert(d.batchId,T)}))})).next((()=>{const u=[],d=r.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),h=g.key,_=g.value,T=wS();_.forEach((A=>{if(!a.has(A)){const C=US(n.get(A),i.get(A));C!==null&&T.set(A,C),a=a.add(A)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return se.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,n,i,r){return(function(u){return Se.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next((a=>{const u=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-a.size):se.resolve(Qs());let d=Yl,g=a;return u.next((h=>se.forEach(h,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{g=g.insert(_,A)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,g,h,$e()))).next((_=>({batchId:d,changes:IS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next((i=>{let r=Ml();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const a=n.collectionGroup;let u=Ml();return this.indexManager.getCollectionParents(e,a).next((d=>se.forEach(d,(g=>{const h=(function(T,A){return new Ta(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,g.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((_=>{_.forEach(((T,A)=>{u=u.insert(T,A)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,n,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,a,r)))).next((u=>{a.forEach(((g,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,un.newInvalidDocument(_)))}));let d=Ml();return u.forEach(((g,h)=>{const _=a.get(g);_!==void 0&&Ol(_.mutation,h,hi.empty(),ht.now()),Uf(n,h)&&(d=d.insert(g,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(r){return{id:r.id,version:r.version,createTime:Yi(r.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(r){return{name:r.name,query:_3(r.bundledQuery),readTime:Yi(r.readTime)}})(n)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){this.overlays=new _t(Se.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Qs();return se.forEach(n,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,n,i){return i.forEach(((r,a)=>{this.St(e,n,a)})),se.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,n,i){const r=Qs(),a=n.length+1,u=new Se(n.child("")),d=this.overlays.getIteratorFrom(u);for(;d.hasNext();){const g=d.getNext().value,h=g.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&g.largestBatchId>i&&r.set(g.getKey(),g)}return se.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let a=new _t(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>i){let _=a.get(h.largestBatchId);_===null&&(_=Qs(),a=a.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const d=Qs(),g=a.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((h,_)=>d.set(h,_))),!(d.size()>=r)););return se.resolve(d)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new K6(n,i));let a=this.qr.get(n);a===void 0&&(a=$e(),this.qr.set(n,a)),this.qr.set(n,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D3{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(){this.Qr=new Ht($t.$r),this.Ur=new Ht($t.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new $t(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach((i=>this.addReference(i,n)))}removeReference(e,n){this.Gr(new $t(e,n))}zr(e,n){e.forEach((i=>this.removeReference(i,n)))}jr(e){const n=new Se(new dt([])),i=new $t(n,e),r=new $t(n,e+1),a=[];return this.Ur.forEachInRange([i,r],(u=>{this.Gr(u),a.push(u.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Se(new dt([])),i=new $t(n,e),r=new $t(n,e+1);let a=$e();return this.Ur.forEachInRange([i,r],(u=>{a=a.add(u.key)})),a}containsKey(e){const n=new $t(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Se.comparator(e.key,n.key)||Je(e.Yr,n.Yr)}static Kr(e,n){return Je(e.Yr,n.Yr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ht($t.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new $6(a,n,i,r);this.mutationQueue.push(u);for(const d of r)this.Zr=this.Zr.add(new $t(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),a=r<0?0:r;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?dm:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new $t(n,0),r=new $t(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(u=>{const d=this.Xr(u.Yr);a.push(d)})),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Ht(Je);return n.forEach((r=>{const a=new $t(r,0),u=new $t(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,u],(d=>{i=i.add(d.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let a=i;Se.isDocumentKey(a)||(a=a.child(""));const u=new $t(new Se(a),0);let d=new Ht(Je);return this.Zr.forEachWhile((g=>{const h=g.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(d=d.add(g.Yr)),!0)}),u),se.resolve(this.ti(d))}ti(e){const n=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&n.push(r)})),n}removeMutationBatch(e,n){it(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(n.mutations,(r=>{const a=new $t(r.key,n.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,n){const i=new $t(n,0),r=this.Zr.firstAfterOrEqual(i);return se.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.ri=e,this.docs=(function(){return new _t(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),a=r?r.size:0,u=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return se.resolve(i?i.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let i=_o();return n.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():un.newInvalidDocument(r))})),se.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let a=_o();const u=n.path,d=new Se(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:h,value:{document:_}}=g.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||l6(a6(_),i)<=0||(r.has(_.key)||Uf(n,_))&&(a=a.insert(_.key,_.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,n,i,r){Re(9500)}ii(e,n){return se.forEach(this.docs,(i=>n(i)))}newChangeBuffer(e){return new V3(this)}getSize(e){return se.resolve(this.size)}}class V3 extends b3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(e){this.persistence=e,this.si=new ir((n=>mm(n)),gm),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Am,this.targetCount=0,this.ai=da.ur()}forEachTarget(e,n){return this.si.forEach(((i,r)=>n(r))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new da(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,i){let r=0;const a=[];return this.si.forEach(((u,d)=>{d.sequenceNumber<=n&&i.get(d.targetId)===null&&(this.si.delete(u),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),se.waitFor(a).next((()=>r))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return se.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),se.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,a=[];return r&&n.forEach((u=>{a.push(r.markPotentiallyOrphaned(e,u))})),se.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return se.resolve(i)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n){this.ui={},this.overlays={},this.ci=new Df(0),this.li=!1,this.li=!0,this.hi=new D3,this.referenceDelegate=e(this),this.Pi=new U3(this),this.indexManager=new v3,this.remoteDocumentCache=(function(r){return new P3(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new y3(n),this.Ii=new w3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new N3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new M3(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ye("MemoryPersistence","Starting transaction:",e);const r=new L3(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(e,n){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,n))))}}class L3 extends c6{constructor(e){super(),this.currentSequenceNumber=e}}class Sm{constructor(e){this.persistence=e,this.Ri=new Am,this.Vi=null}static mi(e){return new Sm(e)}get fi(){if(this.Vi)return this.Vi;throw Re(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),se.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const r=Se.fromPath(i);return this.gi(e,r).next((a=>{a||n.removeEntry(r,Ne.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class vf{constructor(e,n){this.persistence=e,this.pi=new ir((i=>h6(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=C3(this,n)}static mi(e,n){return new vf(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>n.next((r=>i+r))))}wr(e){let n=0;return this.pr(e,(i=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((i,r)=>this.br(e,i,r).next((a=>a?se.resolve():n(r)))))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,n).next((d=>{d||(i++,a.removeEntry(u,Ne.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qc(e.data.value)),n}br(e,n,i){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return se.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=$e(),r=$e();for(const a of n.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new xm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return VM()?8:f6(MM())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const a={result:null};return this.ys(e,n).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ws(e,n,r,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new k3;return this.Ss(e,n,u).next((d=>{if(a.result=d,this.Vs)return this.bs(e,n,u,d.size)}))})).next((()=>a.result))}bs(e,n,i,r){return i.documentReadCount<this.fs?(Xr()<=We.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Wr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Xr()<=We.DEBUG&&ye("QueryEngine","Query:",Wr(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Xr()<=We.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Wr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(n))):se.resolve())}ys(e,n){if(YT(n))return se.resolve(null);let i=Hi(n);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(n.limit!==null&&r===1&&(n=mf(n,null,"F"),i=Hi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=$e(...a);return this.ps.getDocuments(e,u).next((d=>this.indexManager.getMinOffset(e,i).next((g=>{const h=this.Ds(n,d);return this.Cs(n,h,u,g.readTime)?this.ys(e,mf(n,null,"F")):this.vs(e,h,n,g)}))))})))))}ws(e,n,i,r){return YT(n)||r.isEqual(Ne.min())?se.resolve(null):this.ps.getDocuments(e,i).next((a=>{const u=this.Ds(n,a);return this.Cs(n,u,i,r)?se.resolve(null):(Xr()<=We.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wr(n)),this.vs(e,u,n,r6(r,Yl)).next((d=>d)))}))}Ds(e,n){let i=new Ht(bS(e));return n.forEach(((r,a)=>{Uf(e,a)&&(i=i.add(a))})),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,n,i){return Xr()<=We.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Wr(n)),this.ps.getDocumentsMatchingQuery(e,n,us.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((a=>(n.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="LocalStore",B3=3e8;class q3{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new _t(Je),this.xs=new ir((a=>mm(a)),gm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new I3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function F3(t,e,n,i){return new q3(t,e,n,i)}async function QS(t,e){const n=Pe(t);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],d=[];let g=$e();for(const h of r){u.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}for(const h of a){d.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}return n.localDocuments.getDocuments(i,g).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:d})))}))}))}function G3(t,e){const n=Pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,h,_){const T=h.batch,A=T.keys();let C=se.resolve();return A.forEach((P=>{C=C.next((()=>_.getEntry(g,P))).next((V=>{const M=h.docVersions.get(P);it(M!==null,48541),V.version.compareTo(M)<0&&(T.applyToRemoteDocument(V,h),V.isValidDocument()&&(V.setReadTime(h.commitVersion),_.addEntry(V)))}))})),C.next((()=>d.mutationQueue.removeMutationBatch(g,T)))})(n,i,e,a).next((()=>a.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let g=$e();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(g=g.add(d.batch.mutations[h].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(i,r)))}))}function XS(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function H3(t,e){const n=Pe(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const A=r.get(T);if(!A)return;d.push(n.Pi.removeMatchingKeys(a,_.removedDocuments,T).next((()=>n.Pi.addMatchingKeys(a,_.addedDocuments,T))));let C=A.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?C=C.withResumeToken(sn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),r=r.insert(T,C),(function(V,M,K){return V.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=B3?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(A,C,_)&&d.push(n.Pi.updateTargetData(a,C))}));let g=_o(),h=$e();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(a,_))})),d.push(z3(a,u,e.documentUpdates).next((_=>{g=_.ks,h=_.qs}))),!i.isEqual(Ne.min())){const _=n.Pi.getLastRemoteSnapshotVersion(a).next((T=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(_)}return se.waitFor(d).next((()=>u.apply(a))).next((()=>n.localDocuments.getLocalViewOfDocuments(a,g,h))).next((()=>g))})).then((a=>(n.Ms=r,a)))}function z3(t,e,n){let i=$e(),r=$e();return n.forEach((a=>i=i.add(a))),e.getEntries(t,i).next((a=>{let u=_o();return n.forEach(((d,g)=>{const h=a.get(d);g.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(d)),g.isNoDocument()&&g.version.isEqual(Ne.min())?(e.removeEntry(d,g.readTime),u=u.insert(d,g)):!h.isValidDocument()||g.version.compareTo(h.version)>0||g.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(g),u=u.insert(d,g)):ye(Cm,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",g.version)})),{ks:u,qs:r}}))}function Y3(t,e){const n=Pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=dm),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function J3(t,e){const n=Pe(t);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return n.Pi.getTargetData(i,e).next((a=>a?(r=a,se.resolve(r)):n.Pi.allocateTargetId(i).next((u=>(r=new ns(e,u,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i}))}async function Hp(t,e,n){const i=Pe(t),r=i.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!va(u))throw u;ye(Cm,`Failed to update sequence numbers for target ${e}: ${u}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function oE(t,e,n){const i=Pe(t);let r=Ne.min(),a=$e();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,h,_){const T=Pe(g),A=T.xs.get(_);return A!==void 0?se.resolve(T.Ms.get(A)):T.Pi.getTargetData(h,_)})(i,u,Hi(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(u,d.targetId).next((g=>{a=g}))})).next((()=>i.Fs.getDocumentsMatchingQuery(u,e,n?r:Ne.min(),n?a:$e()))).next((d=>($3(i,M6(e),d),{documents:d,Qs:a})))))}function $3(t,e,n){let i=t.Os.get(e)||Ne.min();n.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),t.Os.set(e,i)}class sE{constructor(){this.activeTargetIds=O6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class K3{constructor(){this.Mo=new sE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sE,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="ConnectivityMonitor";class aE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(rE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(rE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gc=null;function zp(){return Gc===null?Gc=(function(){return 268435456+Math.round(2147483648*Math.random())})():Gc++,"0x"+Gc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op="RestConnection",X3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class W3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===df?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,a){const u=zp(),d=this.zo(e,n.toUriEncodedString());ye(op,`Sending RPC '${e}' ${u}:`,d,i);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,a);const{host:h}=new URL(d),_=Zl(h);return this.Jo(e,d,g,i,_).then((T=>(ye(op,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw la(op,`RPC '${e}' ${u} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,n,i,r,a,u){return this.Go(e,n,i,r,a)}jo(e,n,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ya})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}zo(e,n){const i=X3[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class j3 extends W3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,a){const u=zp();return new Promise(((d,g)=>{const h=new ZA;h.setWithCredentials(!0),h.listenOnce(jA.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Kc.NO_ERROR:const T=h.getResponseJson();ye(an,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Kc.TIMEOUT:ye(an,`RPC '${e}' ${u} timed out`),g(new pe(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Kc.HTTP_ERROR:const A=h.getStatus();if(ye(an,`RPC '${e}' ${u} failed with status:`,A,"response text:",h.getResponseText()),A>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);const P=C==null?void 0:C.error;if(P&&P.status&&P.message){const V=(function(K){const ee=K.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ee)>=0?ee:oe.UNKNOWN})(P.status);g(new pe(V,P.message))}else g(new pe(oe.UNKNOWN,"Server responded with status "+h.getStatus()))}else g(new pe(oe.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ye(an,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ye(an,`RPC '${e}' ${u} sending request:`,r),h.send(n,"POST",_,i,15)}))}T_(e,n,i){const r=zp(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=nS(),d=tS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(g.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,i),g.encodeInitMessageHeaders=!0;const _=a.join("");ye(an,`Creating RPC '${e}' stream ${r}: ${_}`,g);const T=u.createWebChannel(_,g);this.I_(T);let A=!1,C=!1;const P=new Z3({Yo:M=>{C?ye(an,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(A||(ye(an,`Opening RPC '${e}' stream ${r} transport.`),T.open(),A=!0),ye(an,`RPC '${e}' stream ${r} sending:`,M),T.send(M))},Zo:()=>T.close()}),V=(M,K,ee)=>{M.listen(K,(W=>{try{ee(W)}catch(re){setTimeout((()=>{throw re}),0)}}))};return V(T,Dl.EventType.OPEN,(()=>{C||(ye(an,`RPC '${e}' stream ${r} transport opened.`),P.o_())})),V(T,Dl.EventType.CLOSE,(()=>{C||(C=!0,ye(an,`RPC '${e}' stream ${r} transport closed`),P.a_(),this.E_(T))})),V(T,Dl.EventType.ERROR,(M=>{C||(C=!0,la(an,`RPC '${e}' stream ${r} transport errored. Name:`,M.name,"Message:",M.message),P.a_(new pe(oe.UNAVAILABLE,"The operation could not be completed")))})),V(T,Dl.EventType.MESSAGE,(M=>{var K;if(!C){const ee=M.data[0];it(!!ee,16349);const W=ee,re=(W==null?void 0:W.error)||((K=W[0])==null?void 0:K.error);if(re){ye(an,`RPC '${e}' stream ${r} received error:`,re);const fe=re.status;let ae=(function(I){const L=Ot[I];if(L!==void 0)return kS(L)})(fe),N=re.message;ae===void 0&&(ae=oe.INTERNAL,N="Unknown error status: "+fe+" with message "+re.message),C=!0,P.a_(new pe(ae,N)),T.close()}else ye(an,`RPC '${e}' stream ${r} received:`,ee),P.u_(ee)}})),V(d,eS.STAT_EVENT,(M=>{M.stat===Mp.PROXY?ye(an,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===Mp.NOPROXY&&ye(an,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function sp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){return new i3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e,n,i=1e3,r=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&ye("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="PersistentStream";class ZS{constructor(e,n,i,r,a,u,d,g){this.Mi=e,this.S_=i,this.b_=r,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new WS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===oe.RESOURCE_EXHAUSTED?(yo(n.toString()),yo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===n&&this.G_(i,r)}),(i=>{e((()=>{const r=new pe(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(lE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ye(lE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eP extends ZS{constructor(e,n,i,r,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,u),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=r3(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Ne.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?Ne.min():u.readTime?Yi(u.readTime):Ne.min()})(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Gp(this.serializer),n.addTarget=(function(a,u){let d;const g=u.target;if(d=kp(g)?{documents:u3(a,g)}:{query:c3(a,g).ft},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){d.resumeToken=qS(a,u.resumeToken);const h=Bp(a,u.expectedCount);h!==null&&(d.expectedCount=h)}else if(u.snapshotVersion.compareTo(Ne.min())>0){d.readTime=_f(a,u.snapshotVersion.toTimestamp());const h=Bp(a,u.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=d3(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Gp(this.serializer),n.removeTarget=e,this.q_(n)}}class tP extends ZS{constructor(e,n,i,r,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,u),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=l3(e.writeResults,e.commitTime),i=Yi(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Gp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((i=>a3(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{}class iP extends nP{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Go(e,qp(n,i),r,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new pe(oe.UNKNOWN,a.toString())}))}Ho(e,n,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Ho(e,qp(n,i),r,u,d,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(oe.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(yo(n),this.aa=!1):ye("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="RemoteStore";class sP{constructor(e,n,i,r,a){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((u=>{i.enqueueAndForget((async()=>{sr(this)&&(ye(Zs,"Restarting streams for network reachability change."),await(async function(g){const h=Pe(g);h.Ea.add(4),await nu(h),h.Ra.set("Unknown"),h.Ea.delete(4),await qf(h)})(this))}))})),this.Ra=new oP(i,r)}}async function qf(t){if(sr(t))for(const e of t.da)await e(!0)}async function nu(t){for(const e of t.da)await e(!1)}function jS(t,e){const n=Pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),wm(n)?Im(n):Ea(n).O_()&&Rm(n,e))}function bm(t,e){const n=Pe(t),i=Ea(n);n.Ia.delete(e),i.O_()&&ex(n,e),n.Ia.size===0&&(i.O_()?i.L_():sr(n)&&n.Ra.set("Unknown"))}function Rm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ea(t).Y_(e)}function ex(t,e){t.Va.Ue(e),Ea(t).Z_(e)}function Im(t){t.Va=new j6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ea(t).start(),t.Ra.ua()}function wm(t){return sr(t)&&!Ea(t).x_()&&t.Ia.size>0}function sr(t){return Pe(t).Ea.size===0}function tx(t){t.Va=void 0}async function rP(t){t.Ra.set("Online")}async function aP(t){t.Ia.forEach(((e,n)=>{Rm(t,e)}))}async function lP(t,e){tx(t),wm(t)?(t.Ra.ha(e),Im(t)):t.Ra.set("Unknown")}async function uP(t,e,n){if(t.Ra.set("Online"),e instanceof BS&&e.state===2&&e.cause)try{await(async function(r,a){const u=a.cause;for(const d of a.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,u),r.Ia.delete(d),r.Va.removeTarget(d))})(t,e)}catch(i){ye(Zs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Tf(t,i)}else if(e instanceof Zc?t.Va.Ze(e):e instanceof OS?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ne.min()))try{const i=await XS(t.localStore);n.compareTo(i)>=0&&await(function(a,u){const d=a.Va.Tt(u);return d.targetChanges.forEach(((g,h)=>{if(g.resumeToken.approximateByteSize()>0){const _=a.Ia.get(h);_&&a.Ia.set(h,_.withResumeToken(g.resumeToken,u))}})),d.targetMismatches.forEach(((g,h)=>{const _=a.Ia.get(g);if(!_)return;a.Ia.set(g,_.withResumeToken(sn.EMPTY_BYTE_STRING,_.snapshotVersion)),ex(a,g);const T=new ns(_.target,g,h,_.sequenceNumber);Rm(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(t,n)}catch(i){ye(Zs,"Failed to raise snapshot:",i),await Tf(t,i)}}async function Tf(t,e,n){if(!va(e))throw e;t.Ea.add(1),await nu(t),t.Ra.set("Offline"),n||(n=()=>XS(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{ye(Zs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qf(t)}))}function nx(t,e){return e().catch((n=>Tf(t,n,e)))}async function Ff(t){const e=Pe(t),n=hs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:dm;for(;cP(e);)try{const r=await Y3(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,fP(e,r)}catch(r){await Tf(e,r)}ix(e)&&ox(e)}function cP(t){return sr(t)&&t.Ta.length<10}function fP(t,e){t.Ta.push(e);const n=hs(t);n.O_()&&n.X_&&n.ea(e.mutations)}function ix(t){return sr(t)&&!hs(t).x_()&&t.Ta.length>0}function ox(t){hs(t).start()}async function dP(t){hs(t).ra()}async function hP(t){const e=hs(t);for(const n of t.Ta)e.ea(n.mutations)}async function pP(t,e,n){const i=t.Ta.shift(),r=vm.from(i,e,n);await nx(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await Ff(t)}async function mP(t,e){e&&hs(t).X_&&await(async function(i,r){if((function(u){return X6(u)&&u!==oe.ABORTED})(r.code)){const a=i.Ta.shift();hs(i).B_(),await nx(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await Ff(i)}})(t,e),ix(t)&&ox(t)}async function uE(t,e){const n=Pe(t);n.asyncQueue.verifyOperationInProgress(),ye(Zs,"RemoteStore received new credentials");const i=sr(n);n.Ea.add(3),await nu(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qf(n)}async function gP(t,e){const n=Pe(t);e?(n.Ea.delete(2),await qf(n)):e||(n.Ea.add(2),await nu(n),n.Ra.set("Unknown"))}function Ea(t){return t.ma||(t.ma=(function(n,i,r){const a=Pe(n);return a.sa(),new eP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(t.datastore,t.asyncQueue,{Xo:rP.bind(null,t),t_:aP.bind(null,t),r_:lP.bind(null,t),H_:uP.bind(null,t)}),t.da.push((async e=>{e?(t.ma.B_(),wm(t)?Im(t):t.Ra.set("Unknown")):(await t.ma.stop(),tx(t))}))),t.ma}function hs(t){return t.fa||(t.fa=(function(n,i,r){const a=Pe(n);return a.sa(),new tP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:dP.bind(null,t),r_:mP.bind(null,t),ta:hP.bind(null,t),na:pP.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Ff(t)):(await t.fa.stop(),t.Ta.length>0&&(ye(Zs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n,i,r,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,a){const u=Date.now()+i,d=new Nm(e,n,u,r,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(t,e){if(yo("AsyncQueue",`${e}: ${t}`),va(t))return new pe(oe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{static emptySet(e){return new oa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Se.comparator(n.key,i.key):(n,i)=>Se.comparator(n.key,i.key),this.keyedMap=Ml(),this.sortedSet=new _t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,i)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new oa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(){this.ga=new _t(Se.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Re(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,i)=>{e.push(i)})),e}}class ha{constructor(e,n,i,r,a,u,d,g,h){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=h}static fromInitialDocuments(e,n,i,r,a){const u=[];return n.forEach((d=>{u.push({type:0,doc:d})})),new ha(e,n,oa.emptySet(n),u,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class _P{constructor(){this.queries=fE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=Pe(n),a=r.queries;r.queries=fE(),a.forEach(((u,d)=>{for(const g of d.Sa)g.onError(i)}))})(this,new pe(oe.ABORTED,"Firestore shutting down"))}}function fE(){return new ir((t=>CS(t)),Vf)}async function vP(t,e){const n=Pe(t);let i=3;const r=e.query;let a=n.queries.get(r);a?!a.ba()&&e.Da()&&(i=2):(a=new yP,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await n.onListen(r,!0);break;case 1:a.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(u){const d=Dm(u,`Initialization of query '${Wr(e.query)}' failed`);return void e.onError(d)}n.queries.set(r,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Mm(n)}async function TP(t,e){const n=Pe(t),i=e.query;let r=3;const a=n.queries.get(i);if(a){const u=a.Sa.indexOf(e);u>=0&&(a.Sa.splice(u,1),a.Sa.length===0?r=e.Da()?0:1:!a.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function EP(t,e){const n=Pe(t);let i=!1;for(const r of e){const a=r.query,u=n.queries.get(a);if(u){for(const d of u.Sa)d.Fa(r)&&(i=!0);u.wa=r}}i&&Mm(n)}function AP(t,e,n){const i=Pe(t),r=i.queries.get(e);if(r)for(const a of r.Sa)a.onError(n);i.queries.delete(e)}function Mm(t){t.Ca.forEach((e=>{e.next()}))}var Yp,dE;(dE=Yp||(Yp={})).Ma="default",dE.Cache="cache";class SP{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new ha(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.key=e}}class rx{constructor(e){this.key=e}}class xP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=bS(e),this.tu=new oa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new cE,r=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,u=r,d=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const A=r.get(_),C=Uf(this.query,T)?T:null,P=!!A&&this.mutatedKeys.has(A.key),V=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let M=!1;A&&C?A.data.isEqual(C.data)?P!==V&&(i.track({type:3,doc:C}),M=!0):this.su(A,C)||(i.track({type:2,doc:C}),M=!0,(g&&this.eu(C,g)>0||h&&this.eu(C,h)<0)&&(d=!0)):!A&&C?(i.track({type:0,doc:C}),M=!0):A&&!C&&(i.track({type:1,doc:A}),M=!0,(g||h)&&(d=!0)),M&&(C?(u=u.add(C),a=V?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Cs:d,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(C,P){const V=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Rt:M})}};return V(C)-V(P)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),r=r??!1;const d=n&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,h=g!==this.Za;return this.Za=g,u.length!==0||h?{snapshot:new ha(this.query,e.tu,a,u,e.mutatedKeys,g===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return e.forEach((i=>{this.Xa.has(i)||n.push(new rx(i))})),this.Xa.forEach((i=>{e.has(i)||n.push(new sx(i))})),n}cu(e){this.Ya=e.Qs,this.Xa=$e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ha.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pm="SyncEngine";class CP{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class bP{constructor(e){this.key=e,this.hu=!1}}class RP{constructor(e,n,i,r,a,u){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new ir((d=>CS(d)),Vf),this.Iu=new Map,this.Eu=new Set,this.du=new _t(Se.comparator),this.Au=new Map,this.Ru=new Am,this.Vu={},this.mu=new Map,this.fu=da.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function IP(t,e,n=!0){const i=dx(t);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await ax(i,e,n,!0),r}async function wP(t,e){const n=dx(t);await ax(n,e,!0,!1)}async function ax(t,e,n,i){const r=await J3(t.localStore,Hi(e)),a=r.targetId,u=t.sharedClientState.addLocalQueryTarget(a,n);let d;return i&&(d=await NP(t,e,a,u==="current",r.resumeToken)),t.isPrimaryClient&&n&&jS(t.remoteStore,r),d}async function NP(t,e,n,i,r){t.pu=(T,A,C)=>(async function(V,M,K,ee){let W=M.view.ru(K);W.Cs&&(W=await oE(V.localStore,M.query,!1).then((({documents:N})=>M.view.ru(N,W))));const re=ee&&ee.targetChanges.get(M.targetId),fe=ee&&ee.targetMismatches.get(M.targetId)!=null,ae=M.view.applyChanges(W,V.isPrimaryClient,re,fe);return pE(V,M.targetId,ae.au),ae.snapshot})(t,T,A,C);const a=await oE(t.localStore,e,!0),u=new xP(e,a.Qs),d=u.ru(a.documents),g=tu.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),h=u.applyChanges(d,t.isPrimaryClient,g);pE(t,n,h.au);const _=new CP(e,n,u);return t.Tu.set(e,_),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function DP(t,e,n){const i=Pe(t),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((u=>!Vf(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Hp(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&bm(i.remoteStore,r.targetId),Jp(i,r.targetId)})).catch(_a)):(Jp(i,r.targetId),await Hp(i.localStore,r.targetId,!0))}async function MP(t,e){const n=Pe(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),bm(n.remoteStore,i.targetId))}async function PP(t,e,n){const i=qP(t);try{const r=await(function(u,d){const g=Pe(u),h=ht.now(),_=d.reduce(((C,P)=>C.add(P.key)),$e());let T,A;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let P=_o(),V=$e();return g.Ns.getEntries(C,_).next((M=>{P=M,P.forEach(((K,ee)=>{ee.isValidDocument()||(V=V.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,P))).next((M=>{T=M;const K=[];for(const ee of d){const W=Y6(ee,T.get(ee.key).overlayedDocument);W!=null&&K.push(new or(ee.key,W,gS(W.value.mapValue),zi.exists(!0)))}return g.mutationQueue.addMutationBatch(C,h,K,d)})).next((M=>{A=M;const K=M.applyToLocalDocumentSet(T,V);return g.documentOverlayCache.saveOverlays(C,M.batchId,K)}))})).then((()=>({batchId:A.batchId,changes:IS(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(u,d,g){let h=u.Vu[u.currentUser.toKey()];h||(h=new _t(Je)),h=h.insert(d,g),u.Vu[u.currentUser.toKey()]=h})(i,r.batchId,n),await iu(i,r.changes),await Ff(i.remoteStore)}catch(r){const a=Dm(r,"Failed to persist write");n.reject(a)}}async function lx(t,e){const n=Pe(t);try{const i=await H3(n.localStore,e);e.targetChanges.forEach(((r,a)=>{const u=n.Au.get(a);u&&(it(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?it(u.hu,14607):r.removedDocuments.size>0&&(it(u.hu,42227),u.hu=!1))})),await iu(n,i,e)}catch(i){await _a(i)}}function hE(t,e,n){const i=Pe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach(((a,u)=>{const d=u.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(u,d){const g=Pe(u);g.onlineState=d;let h=!1;g.queries.forEach(((_,T)=>{for(const A of T.Sa)A.va(d)&&(h=!0)})),h&&Mm(g)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function VP(t,e,n){const i=Pe(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),a=r&&r.key;if(a){let u=new _t(Se.comparator);u=u.insert(a,un.newNoDocument(a,Ne.min()));const d=$e().add(a),g=new Of(Ne.min(),new Map,new _t(Je),u,d);await lx(i,g),i.du=i.du.remove(a),i.Au.delete(e),Vm(i)}else await Hp(i.localStore,e,!1).then((()=>Jp(i,e,n))).catch(_a)}async function UP(t,e){const n=Pe(t),i=e.batch.batchId;try{const r=await G3(n.localStore,e);cx(n,i,null),ux(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await iu(n,r)}catch(r){await _a(r)}}async function LP(t,e,n){const i=Pe(t);try{const r=await(function(u,d){const g=Pe(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return g.mutationQueue.lookupMutationBatch(h,d).next((T=>(it(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(h,T)))).next((()=>g.mutationQueue.performConsistencyCheck(h))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(h,_,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>g.localDocuments.getDocuments(h,_)))}))})(i.localStore,e);cx(i,e,n),ux(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await iu(i,r)}catch(r){await _a(r)}}function ux(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function cx(t,e,n){const i=Pe(t);let r=i.Vu[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(n?a.reject(n):a.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function Jp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach((i=>{t.Ru.containsKey(i)||fx(t,i)}))}function fx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(bm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Vm(t))}function pE(t,e,n){for(const i of n)i instanceof sx?(t.Ru.addReference(i.key,e),kP(t,i)):i instanceof rx?(ye(Pm,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||fx(t,i.key)):Re(19791,{wu:i})}function kP(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ye(Pm,"New document in limbo: "+n),t.Eu.add(i),Vm(t))}function Vm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Se(dt.fromString(e)),i=t.fu.next();t.Au.set(i,new bP(n)),t.du=t.du.insert(n,i),jS(t.remoteStore,new ns(Hi(SS(n.path)),i,"TargetPurposeLimboResolution",Df.ce))}}async function iu(t,e,n){const i=Pe(t),r=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,g)=>{u.push(i.pu(g,e,n).then((h=>{var _;if((h||n)&&i.isPrimaryClient){const T=h?!h.fromCache:(_=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(h){r.push(h);const T=xm.As(g.targetId,h);a.push(T)}})))})),await Promise.all(u),i.Pu.H_(r),await(async function(g,h){const _=Pe(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(h,(A=>se.forEach(A.Es,(C=>_.persistence.referenceDelegate.addReference(T,A.targetId,C))).next((()=>se.forEach(A.ds,(C=>_.persistence.referenceDelegate.removeReference(T,A.targetId,C)))))))))}catch(T){if(!va(T))throw T;ye(Cm,"Failed to update sequence numbers: "+T)}for(const T of h){const A=T.targetId;if(!T.fromCache){const C=_.Ms.get(A),P=C.snapshotVersion,V=C.withLastLimboFreeSnapshotVersion(P);_.Ms=_.Ms.insert(A,V)}}})(i.localStore,a))}async function OP(t,e){const n=Pe(t);if(!n.currentUser.isEqual(e)){ye(Pm,"User change. New user:",e.toKey());const i=await QS(n.localStore,e);n.currentUser=e,(function(a,u){a.mu.forEach((d=>{d.forEach((g=>{g.reject(new pe(oe.CANCELLED,u))}))})),a.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await iu(n,i.Ls)}}function BP(t,e){const n=Pe(t),i=n.Au.get(e);if(i&&i.hu)return $e().add(i.key);{let r=$e();const a=n.Iu.get(e);if(!a)return r;for(const u of a){const d=n.Tu.get(u);r=r.unionWith(d.view.nu)}return r}}function dx(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VP.bind(null,e),e.Pu.H_=EP.bind(null,e.eventManager),e.Pu.yu=AP.bind(null,e.eventManager),e}function qP(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LP.bind(null,e),e}class Ef{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Bf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return F3(this.persistence,new O3,e.initialUser,this.serializer)}Cu(e){return new KS(Sm.mi,this.serializer)}Du(e){return new K3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ef.provider={build:()=>new Ef};class FP extends Ef{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){it(this.persistence.referenceDelegate instanceof vf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new S3(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new KS((i=>vf.mi(i,n)),this.serializer)}}class $p{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=OP.bind(null,this.syncEngine),await gP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new _P})()}createDatastore(e){const n=Bf(e.databaseInfo.databaseId),i=(function(a){return new j3(a)})(e.databaseInfo);return(function(a,u,d,g){return new iP(a,u,d,g)})(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return(function(i,r,a,u,d){return new sP(i,r,a,u,d)})(this.localStore,this.datastore,e.asyncQueue,(n=>hE(this.syncEngine,n,0)),(function(){return aE.v()?new aE:new Q3})())}createSyncEngine(e,n){return(function(r,a,u,d,g,h,_){const T=new RP(r,a,u,d,g,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(r){const a=Pe(r);ye(Zs,"RemoteStore shutting down."),a.Ea.add(5),await nu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}$p.provider={build:()=>new $p};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):yo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ps="FirestoreClient";class HP{constructor(e,n,i,r,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=ln.UNAUTHENTICATED,this.clientId=fm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{ye(ps,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(ye(ps,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Dm(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function rp(t,e){t.asyncQueue.verifyOperationInProgress(),ye(ps,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async r=>{i.isEqual(r)||(await QS(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function mE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await zP(t);ye(ps,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((i=>uE(e.remoteStore,i))),t.setAppCheckTokenChangeListener(((i,r)=>uE(e.remoteStore,r))),t._onlineComponents=e}async function zP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye(ps,"Using user provided OfflineComponentProvider");try{await rp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(r){return r.name==="FirebaseError"?r.code===oe.FAILED_PRECONDITION||r.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(n))throw n;la("Error using user provided cache. Falling back to memory cache: "+n),await rp(t,new Ef)}}else ye(ps,"Using default OfflineComponentProvider"),await rp(t,new FP(void 0));return t._offlineComponents}async function hx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye(ps,"Using user provided OnlineComponentProvider"),await mE(t,t._uninitializedComponentsProvider._online)):(ye(ps,"Using default OnlineComponentProvider"),await mE(t,new $p))),t._onlineComponents}function YP(t){return hx(t).then((e=>e.syncEngine))}async function JP(t){const e=await hx(t),n=e.eventManager;return n.onListen=IP.bind(null,e.syncEngine),n.onUnlisten=DP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=wP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=MP.bind(null,e.syncEngine),n}function $P(t,e,n={}){const i=new as;return t.asyncQueue.enqueueAndForget((async()=>(function(a,u,d,g,h){const _=new GP({next:A=>{_.Nu(),u.enqueueAndForget((()=>TP(a,T))),A.fromCache&&g.source==="server"?h.reject(new pe(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(A)},error:A=>h.reject(A)}),T=new SP(d,_,{includeMetadataChanges:!0,qa:!0});return vP(a,T)})(await JP(t),t.asyncQueue,e,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx="firestore.googleapis.com",yE=!0;class _E{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mx,this.ssl=yE}else this.host=e.host,this.ssl=e.ssl??yE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$S;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<E3)throw new pe(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}o6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=px(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new pe(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _E({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _E(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new K4;switch(i.type){case"firstParty":return new Z4(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new pe(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=gE.get(n);i&&(ye("ComponentProvider","Removing Datastore"),gE.delete(n),i.terminate())})(this),Promise.resolve()}}function KP(t,e,n,i={}){var h;t=zl(t,Gf);const r=Zl(e),a=t._getSettings(),u={...a,emulatorOptions:t._getEmulatorOptions()},d=`${e}:${n}`;r&&(kA(`https://${d}`),BA("Firestore",!0)),a.host!==mx&&a.host!==d&&la("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...a,host:d,ssl:r,emulatorOptions:i};if(!uf(g,u)&&(t._setSettings(g),i.mockUserToken)){let _,T;if(typeof i.mockUserToken=="string")_=i.mockUserToken,T=ln.MOCK_USER;else{_=OA(i.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const A=i.mockUserToken.sub||i.mockUserToken.user_id;if(!A)throw new pe(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new ln(A)}t._authCredentials=new Q4(new oS(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new gs(this.firestore,e,this._query)}}class Kt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(jl(n,Kt._jsonSchema))return new Kt(e,i||null,new Se(dt.fromString(n.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:qt("string",Kt._jsonSchemaVersion),referencePath:qt("string")};class ls extends gs{constructor(e,n,i){super(e,n,SS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Se(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function gx(t,e,...n){if(t=_i(t),sS("collection","path",e),t instanceof Gf){const i=dt.fromString(e,...n);return DT(i),new ls(t,null,i)}{if(!(t instanceof Kt||t instanceof ls))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(dt.fromString(e,...n));return DT(i),new ls(t.firestore,null,i)}}function yx(t,e,...n){if(t=_i(t),arguments.length===1&&(e=fm.newId()),sS("doc","path",e),t instanceof Gf){const i=dt.fromString(e,...n);return NT(i),new Kt(t,null,new Se(i))}{if(!(t instanceof Kt||t instanceof ls))throw new pe(oe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(dt.fromString(e,...n));return NT(i),new Kt(t.firestore,t instanceof ls?t.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="AsyncQueue";class TE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new WS(this,"async_queue_retry"),this._c=()=>{const i=sp();i&&ye(vE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=sp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=sp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new as;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!va(e))throw e;ye(vE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,yo("INTERNAL UNHANDLED ERROR: ",EE(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Nm.createAndSchedule(this,e,n,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&Re(47125,{Pc:EE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function EE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Hf extends Gf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new TE,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TE(e),this._firestoreClient=void 0,await e}}}function QP(t,e){const n=typeof t=="object"?t:KA(),i=typeof t=="string"?t:df,r=zA(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=UA("firestore");a&&KP(r,...a)}return r}function _x(t){if(t._terminated)throw new pe(oe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XP(t),t._firestoreClient}function XP(t){var i,r,a;const e=t._freezeSettings(),n=(function(d,g,h,_){return new g6(d,g,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,px(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new HP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(sn.fromBase64String(e))}catch(n){throw new pe(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wn(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(jl(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:qt("string",Wn._jsonSchemaVersion),bytes:qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ji._jsonSchemaVersion}}static fromJSON(e){if(jl(e,Ji._jsonSchema))return new Ji(e.latitude,e.longitude)}}Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:qt("string",Ji._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:$i._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(jl(e,$i._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new $i(e.vectorValues);throw new pe(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$i._jsonSchemaVersion="firestore/vectorValue/1.0",$i._jsonSchema={type:qt("string",$i._jsonSchemaVersion),vectorValues:qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=/^__.*__$/;class ZP{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new or(e,this.data,this.fieldMask,n,this.fieldTransforms):new eu(e,this.data,n,this.fieldTransforms)}}function Tx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{Ac:t})}}class Lm{constructor(e,n,i,r,a,u){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Lm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Af(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Tx(this.Ac)&&WP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class jP{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Bf(e)}Cc(e,n,i,r=!1){return new Lm({Ac:e,methodName:n,Dc:i,path:on.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ex(t){const e=t._freezeSettings(),n=Bf(t._databaseId);return new jP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eV(t,e,n,i,r,a={}){const u=t.Cc(a.merge||a.mergeFields?2:0,e,n,r);xx("Data must be an object, but it was:",u,i);const d=Ax(i,u);let g,h;if(a.merge)g=new hi(u.fieldMask),h=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const T of a.mergeFields){const A=nV(e,T,n);if(!u.contains(A))throw new pe(oe.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);oV(_,A)||_.push(A)}g=new hi(_),h=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,h=u.fieldTransforms;return new ZP(new Xn(d),g,h)}function tV(t,e,n,i=!1){return km(n,t.Cc(i?4:3,e))}function km(t,e){if(Sx(t=_i(t)))return xx("Unsupported field value:",e,t),Ax(t,e);if(t instanceof vx)return(function(i,r){if(!Tx(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const a=[];let u=0;for(const d of i){let g=km(d,r.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),a.push(g),u++}return{arrayValue:{values:a}}})(t,e)}return(function(i,r){if((i=_i(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return B6(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ht.fromDate(i);return{timestampValue:_f(r.serializer,a)}}if(i instanceof ht){const a=new ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_f(r.serializer,a)}}if(i instanceof Ji)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Wn)return{bytesValue:qS(r.serializer,i._byteString)};if(i instanceof Kt){const a=r.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Em(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof $i)return(function(u,d){return{mapValue:{fields:{[pS]:{stringValue:mS},[hf]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return ym(d.serializer,h)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Nf(i)}`)})(t,e)}function Ax(t,e){const n={};return lS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):nr(t,((i,r)=>{const a=km(r,e.mc(i));a!=null&&(n[i]=a)})),{mapValue:{fields:n}}}function Sx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof Ji||t instanceof Wn||t instanceof Kt||t instanceof vx||t instanceof $i)}function xx(t,e,n){if(!Sx(n)||!rS(n)){const i=Nf(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function nV(t,e,n){if((e=_i(e))instanceof Um)return e._internalPath;if(typeof e=="string")return Cx(t,e);throw Af("Field path arguments must be of type string or ",t,!1,void 0,n)}const iV=new RegExp("[~\\*/\\[\\]]");function Cx(t,e,n){if(e.search(iV)>=0)throw Af(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Um(...e.split("."))._internalPath}catch{throw Af(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Af(t,e,n,i,r){const a=i&&!i.isEmpty(),u=r!==void 0;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(a||u)&&(g+=" (found",a&&(g+=` in field ${i}`),u&&(g+=` in document ${r}`),g+=")"),new pe(oe.INVALID_ARGUMENT,d+t+g)}function oV(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n,i,r,a){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Om("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sV extends bx{data(){return super.data()}}function Om(t,e){return typeof e=="string"?Cx(t,e):e instanceof Um?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new pe(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Bm{}class qm extends Bm{}function aV(t,e,...n){let i=[];e instanceof Bm&&i.push(e),i=i.concat(n),(function(a){const u=a.filter((g=>g instanceof Gm)).length,d=a.filter((g=>g instanceof Fm)).length;if(u>1||u>0&&d>0)throw new pe(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)t=r._apply(t);return t}class Fm extends qm{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Fm(e,n,i)}_apply(e){const n=this._parse(e);return Rx(e._query,n),new gs(e.firestore,e.converter,Op(e._query,n))}_parse(e){const n=Ex(e.firestore);return(function(a,u,d,g,h,_,T){let A;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){SE(T,_);const P=[];for(const V of T)P.push(AE(g,a,V));A={arrayValue:{values:P}}}else A=AE(g,a,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||SE(T,_),A=tV(d,u,T,_==="in"||_==="not-in");return Bt.create(h,_,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Gm extends Bm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Gm(e,n)}_parse(e){const n=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:vi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(r,a){let u=r;const d=a.getFlattenedFilters();for(const g of d)Rx(u,g),u=Op(u,g)})(e._query,n),new gs(e.firestore,e.converter,Op(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hm extends qm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Hm(e,n)}_apply(e){const n=(function(r,a,u){if(r.startAt!==null)throw new pe(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new pe(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ql(a,u)})(e._query,this._field,this._direction);return new gs(e.firestore,e.converter,(function(r,a){const u=r.explicitOrderBy.concat([a]);return new Ta(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,n))}}function lV(t,e="asc"){const n=e,i=Om("orderBy",t);return Hm._create(i,n)}class zm extends qm{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new zm(e,n,i)}_apply(e){return new gs(e.firestore,e.converter,mf(e._query,this._limit,this._limitType))}}function uV(t){return s6("limit",t),zm._create("limit",t,"F")}function AE(t,e,n){if(typeof(n=_i(n))=="string"){if(n==="")throw new pe(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xS(e)&&n.indexOf("/")!==-1)throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(dt.fromString(n));if(!Se.isDocumentKey(i))throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return BT(t,new Se(i))}if(n instanceof Kt)return BT(t,n._key);throw new pe(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nf(n)}.`)}function SE(t,e){if(!Array.isArray(t)||t.length===0)throw new pe(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Rx(t,e){const n=(function(r,a){for(const u of r)for(const d of u.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(t.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cV{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return nr(e,((r,a)=>{i[r]=this.convertValue(a,n)})),i}convertVectorValue(e){var i,r,a;const n=(a=(r=(i=e.fields)==null?void 0:i[hf].arrayValue)==null?void 0:r.values)==null?void 0:a.map((u=>It(u.doubleValue)));return new $i(n)}convertGeoPoint(e){return new Ji(It(e.latitude),It(e.longitude))}convertArray(e,n){return(e.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Pf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Jl(e));default:return null}}convertTimestamp(e){const n=cs(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=dt.fromString(e);it(JS(i),9688,{name:e});const r=new $l(i.get(1),i.get(3)),a=new Se(i.popFirst(5));return r.isEqual(n)||yo(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Hc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sa extends bx{constructor(e,n,i,r,a,u){super(e,n,i,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Om("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=sa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}sa._jsonSchemaVersion="firestore/documentSnapshot/1.0",sa._jsonSchema={type:qt("string",sa._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class jc extends sa{data(e={}){return super.data(e)}}class ra{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Hc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((i=>{e.call(n,new jc(this._firestore,this._userDataWriter,i.key,i,new Hc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((d=>{const g=new jc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Hc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const g=new jc(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Hc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return d.type!==0&&(h=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),d.type!==1&&(u=u.add(d.doc),_=u.indexOf(d.doc.key)),{type:dV(d.type),doc:g,oldIndex:h,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ra._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=fm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(n.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function dV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:t})}}ra._jsonSchemaVersion="firestore/querySnapshot/1.0",ra._jsonSchema={type:qt("string",ra._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class hV extends cV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function pV(t){t=zl(t,gs);const e=zl(t.firestore,Hf),n=_x(e),i=new hV(e);return rV(t._query),$P(n,t._query).then((r=>new ra(e,i,t,r)))}function mV(t){return Ix(zl(t.firestore,Hf),[new _m(t._key,zi.none())])}function gV(t,e){const n=zl(t.firestore,Hf),i=yx(t),r=fV(t.converter,e);return Ix(n,[eV(Ex(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,zi.exists(!1))]).then((()=>i))}function Ix(t,e){return(function(i,r){const a=new as;return i.asyncQueue.enqueueAndForget((async()=>PP(await YP(i),r,a))),a.promise})(_x(t),e)}(function(e,n=!0){(function(r){ya=r})(JA),Gl(new aa("firestore",((i,{instanceIdentifier:r,options:a})=>{const u=i.getProvider("app").getImmediate(),d=new Hf(new X4(i.getProvider("auth-internal")),new j4(u,i.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new pe(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $l(h.options.projectId,_)})(u,r),u);return a={useFetchStreams:n,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),ss(bT,RT,e),ss(bT,RT,"esm2020")})();var yV="firebase",_V="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss(yV,_V,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="firebasestorage.googleapis.com",Nx="storageBucket",vV=120*1e3,TV=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St extends tr{constructor(e,n,i=0){super(ap(e),`Firebase Storage: ${n} (${ap(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,St.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ap(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var At;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(At||(At={}));function ap(t){return"storage/"+t}function Ym(){const t="An unknown error occurred, please check the error payload for server response.";return new St(At.UNKNOWN,t)}function EV(t){return new St(At.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function AV(t){return new St(At.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function SV(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new St(At.UNAUTHENTICATED,t)}function xV(){return new St(At.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function CV(t){return new St(At.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function bV(){return new St(At.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function RV(){return new St(At.CANCELED,"User canceled the upload/download.")}function IV(t){return new St(At.INVALID_URL,"Invalid URL '"+t+"'.")}function wV(t){return new St(At.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function NV(){return new St(At.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Nx+"' property when initializing the app?")}function DV(){return new St(At.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MV(){return new St(At.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PV(t){return new St(At.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Kp(t){return new St(At.INVALID_ARGUMENT,t)}function Dx(){return new St(At.APP_DELETED,"The Firebase app was deleted.")}function VV(t){return new St(At.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bl(t,e){return new St(At.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function wl(t){throw new St(At.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=Ln.makeFromUrl(e,n)}catch{return new Ln(e,"")}if(i.path==="")return i;throw wV(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function a(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}const u="(/(.*))?$",d=new RegExp("^gs://"+r+u,"i"),g={bucket:1,path:3};function h(re){re.path_=decodeURIComponent(re.path)}const _="v[A-Za-z0-9_]+",T=n.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",C=new RegExp(`^https?://${T}/${_}/b/${r}/o${A}`,"i"),P={bucket:1,path:3},V=n===wx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",K=new RegExp(`^https?://${V}/${r}/${M}`,"i"),W=[{regex:d,indices:g,postModify:a},{regex:C,indices:P,postModify:h},{regex:K,indices:{bucket:1,path:2},postModify:h}];for(let re=0;re<W.length;re++){const fe=W[re],ae=fe.regex.exec(e);if(ae){const N=ae[fe.indices.bucket];let w=ae[fe.indices.path];w||(w=""),i=new Ln(N,w),fe.postModify(i);break}}if(i==null)throw IV(e);return i}}class UV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LV(t,e,n){let i=1,r=null,a=null,u=!1,d=0;function g(){return d===2}let h=!1;function _(...M){h||(h=!0,e.apply(null,M))}function T(M){r=setTimeout(()=>{r=null,t(C,g())},M)}function A(){a&&clearTimeout(a)}function C(M,...K){if(h){A();return}if(M){A(),_.call(null,M,...K);return}if(g()||u){A(),_.call(null,M,...K);return}i<64&&(i*=2);let W;d===1?(d=2,W=0):W=(i+Math.random())*1e3,T(W)}let P=!1;function V(M){P||(P=!0,A(),!h&&(r!==null?(M||(d=2),clearTimeout(r),T(0)):M||(d=1)))}return T(0),a=setTimeout(()=>{u=!0,V(!0)},n),V}function kV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(t){return t!==void 0}function BV(t){return typeof t=="object"&&!Array.isArray(t)}function Jm(t){return typeof t=="string"||t instanceof String}function xE(t){return $m()&&t instanceof Blob}function $m(){return typeof Blob<"u"}function CE(t,e,n,i){if(i<e)throw Kp(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Kp(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function Mx(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Xs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xs||(Xs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||r||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,n,i,r,a,u,d,g,h,_,T,A=!0,C=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=d,this.errorCallback_=g,this.timeout_=h,this.progressCallback_=_,this.connectionFactory_=T,this.retry=A,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,V)=>{this.resolve_=P,this.reject_=V,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new zc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const u=d=>{const g=d.loaded,h=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,h)};this.progressCallback_!==null&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const d=a.getErrorCode()===Xs.NO_ERROR,g=a.getStatus();if(!d||qV(g,this.additionalRetryCodes_)&&this.retry){const _=a.getErrorCode()===Xs.ABORT;i(!1,new zc(!1,null,_));return}const h=this.successCodes_.indexOf(g)!==-1;i(!0,new zc(h,a))})},n=(i,r)=>{const a=this.resolve_,u=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const g=this.callback_(d,d.getResponse());OV(g)?a(g):a()}catch(g){u(g)}else if(d!==null){const g=Ym();g.serverResponse=d.getErrorText(),this.errorCallback_?u(this.errorCallback_(d,g)):u(g)}else if(r.canceled){const g=this.appDelete_?Dx():RV();u(g)}else{const g=bV();u(g)}};this.canceled_?n(!1,new zc(!1,null,!0)):this.backoffId_=LV(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class zc{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function GV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function HV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function zV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function YV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function JV(t,e,n,i,r,a,u=!0,d=!1){const g=Mx(t.urlParams),h=t.url+g,_=Object.assign({},t.headers);return zV(_,e),GV(_,n),HV(_,a),YV(_,i),new FV(h,t.method,_,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,u,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $V(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function KV(...t){const e=$V();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if($m())return new Blob(t);throw new St(At.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function QV(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(t){if(typeof atob>"u")throw PV("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class lp{constructor(e,n){this.data=e,this.contentType=n||null}}function Px(t,e){switch(t){case pi.RAW:return new lp(Vx(e));case pi.BASE64:case pi.BASE64URL:return new lp(Ux(t,e));case pi.DATA_URL:return new lp(ZV(e),jV(e))}throw Ym()}function Vx(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=i,u=t.charCodeAt(++n);i=65536|(a&1023)<<10|u&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function WV(t){let e;try{e=decodeURIComponent(t)}catch{throw Bl(pi.DATA_URL,"Malformed data URL.")}return Vx(e)}function Ux(t,e){switch(t){case pi.BASE64:{const r=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(r||a)throw Bl(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case pi.BASE64URL:{const r=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(r||a)throw Bl(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=XV(e)}catch(r){throw r.message.includes("polyfill")?r:Bl(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class Lx{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Bl(pi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=eU(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function ZV(t){const e=new Lx(t);return e.base64?Ux(pi.BASE64,e.rest):WV(e.rest)}function jV(t){return new Lx(t).contentType}function eU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){let i=0,r="";xE(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(xE(this.data_)){const i=this.data_,r=QV(i,e,n);return r===null?null:new ts(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new ts(i,!0)}}static getBlob(...e){if($m()){const n=e.map(i=>i instanceof ts?i.data_:i);return new ts(KV.apply(null,n))}else{const n=e.map(u=>Jm(u)?Px(pi.RAW,u).data:u.data_);let i=0;n.forEach(u=>{i+=u.byteLength});const r=new Uint8Array(i);let a=0;return n.forEach(u=>{for(let d=0;d<u.length;d++)r[a++]=u[d]}),new ts(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t){let e;try{e=JSON.parse(t)}catch{return null}return BV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function nU(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function Ox(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iU(t,e){return e}class pn{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||iU}}let Yc=null;function oU(t){return!Jm(t)||t.length<2?t:Ox(t)}function Bx(){if(Yc)return Yc;const t=[];t.push(new pn("bucket")),t.push(new pn("generation")),t.push(new pn("metageneration")),t.push(new pn("name","fullPath",!0));function e(a,u){return oU(u)}const n=new pn("name");n.xform=e,t.push(n);function i(a,u){return u!==void 0?Number(u):u}const r=new pn("size");return r.xform=i,t.push(r),t.push(new pn("timeCreated")),t.push(new pn("updated")),t.push(new pn("md5Hash",null,!0)),t.push(new pn("cacheControl",null,!0)),t.push(new pn("contentDisposition",null,!0)),t.push(new pn("contentEncoding",null,!0)),t.push(new pn("contentLanguage",null,!0)),t.push(new pn("contentType",null,!0)),t.push(new pn("metadata","customMetadata",!0)),Yc=t,Yc}function sU(t,e){function n(){const i=t.bucket,r=t.fullPath,a=new Ln(i,r);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function rU(t,e,n){const i={};i.type="file";const r=n.length;for(let a=0;a<r;a++){const u=n[a];i[u.local]=u.xform(i,e[u.server])}return sU(i,t),i}function qx(t,e,n){const i=kx(e);return i===null?null:rU(t,i,n)}function aU(t,e,n,i){const r=kx(e);if(r===null||!Jm(r.downloadTokens))return null;const a=r.downloadTokens;if(a.length===0)return null;const u=encodeURIComponent;return a.split(",").map(h=>{const _=t.bucket,T=t.fullPath,A="/b/"+u(_)+"/o/"+u(T),C=zf(A,n,i),P=Mx({alt:"media",token:h});return C+P})[0]}function lU(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const a=e[r];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class Km{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t){if(!t)throw Ym()}function uU(t,e){function n(i,r){const a=qx(t,r,e);return Fx(a!==null),a}return n}function cU(t,e){function n(i,r){const a=qx(t,r,e);return Fx(a!==null),aU(a,r,t.host,t._protocol)}return n}function Gx(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=xV():r=SV():n.getStatus()===402?r=AV(t.bucket):n.getStatus()===403?r=CV(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function Hx(t){const e=Gx(t);function n(i,r){let a=e(i,r);return i.getStatus()===404&&(a=EV(t.path)),a.serverResponse=r.serverResponse,a}return n}function fU(t,e,n){const i=e.fullServerUrl(),r=zf(i,t.host,t._protocol),a="GET",u=t.maxOperationRetryTime,d=new Km(r,a,cU(t,n),u);return d.errorHandler=Hx(e),d}function dU(t,e){const n=e.fullServerUrl(),i=zf(n,t.host,t._protocol),r="DELETE",a=t.maxOperationRetryTime;function u(g,h){}const d=new Km(i,r,u,a);return d.successCodes=[200,204],d.errorHandler=Hx(e),d}function hU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function pU(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=hU(null,e)),i}function mU(t,e,n,i,r){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function d(){let W="";for(let re=0;re<2;re++)W=W+Math.random().toString().slice(2);return W}const g=d();u["Content-Type"]="multipart/related; boundary="+g;const h=pU(e,i,r),_=lU(h,n),T="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+g+`\r
Content-Type: `+h.contentType+`\r
\r
`,A=`\r
--`+g+"--",C=ts.getBlob(T,i,A);if(C===null)throw DV();const P={name:h.fullPath},V=zf(a,t.host,t._protocol),M="POST",K=t.maxUploadRetryTime,ee=new Km(V,M,uU(t,n),K);return ee.urlParams=P,ee.headers=u,ee.body=C.uploadData(),ee.errorHandler=Gx(e),ee}class gU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,a){if(this.sent_)throw wl("cannot .send() more than once");if(Zl(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const u in a)a.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,a[u].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw wl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw wl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw wl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw wl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class yU extends gU{initXhr(){this.xhr_.responseType="text"}}function Qm(){return new yU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n){this._service=e,n instanceof Ln?this._location=n:this._location=Ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new js(e,n)}get root(){const e=new Ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ox(this._location.path)}get storage(){return this._service}get parent(){const e=tU(this._location.path);if(e===null)return null;const n=new Ln(this._location.bucket,e);return new js(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw VV(e)}}function _U(t,e,n){t._throwIfRoot("uploadBytes");const i=mU(t.storage,t._location,Bx(),new ts(e,!0),n);return t.storage.makeRequestWithTokens(i,Qm).then(r=>({metadata:r,ref:t}))}function vU(t,e,n=pi.RAW,i){t._throwIfRoot("uploadString");const r=Px(n,e),a={...i};return a.contentType==null&&r.contentType!=null&&(a.contentType=r.contentType),_U(t,r.data,a)}function TU(t){t._throwIfRoot("getDownloadURL");const e=fU(t.storage,t._location,Bx());return t.storage.makeRequestWithTokens(e,Qm).then(n=>{if(n===null)throw MV();return n})}function EU(t){t._throwIfRoot("deleteObject");const e=dU(t.storage,t._location);return t.storage.makeRequestWithTokens(e,Qm)}function AU(t,e){const n=nU(t._location.path,e),i=new Ln(t._location.bucket,n);return new js(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(t){return/^[A-Za-z]+:\/\//.test(t)}function xU(t,e){return new js(t,e)}function zx(t,e){if(t instanceof Xm){const n=t;if(n._bucket==null)throw NV();const i=new js(n,n._bucket);return e!=null?zx(i,e):i}else return e!==void 0?AU(t,e):t}function CU(t,e){if(e&&SU(e)){if(t instanceof Xm)return xU(t,e);throw Kp("To use ref(service, url), the first argument must be a Storage instance.")}else return zx(t,e)}function bE(t,e){const n=e==null?void 0:e[Nx];return n==null?null:Ln.makeFromBucketSpec(n,t)}function bU(t,e,n,i={}){t.host=`${e}:${n}`;const r=Zl(e);r&&(kA(`https://${t.host}/b`),BA("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:a}=i;a&&(t._overrideAuthToken=typeof a=="string"?a:OA(a,t.app.options.projectId))}class Xm{constructor(e,n,i,r,a,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=a,this._isUsingEmulator=u,this._bucket=null,this._host=wx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vV,this._maxUploadRetryTime=TV,this._requests=new Set,r!=null?this._bucket=Ln.makeFromBucketSpec(r,this._host):this._bucket=bE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ln.makeFromBucketSpec(this._url,e):this._bucket=bE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){CE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){CE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(YA(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new js(this,e)}_makeRequest(e,n,i,r,a=!0){if(this._deleted)return new UV(Dx());{const u=JV(e,this._appId,i,r,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const RE="@firebase/storage",IE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx="storage";function RU(t,e,n,i){return t=_i(t),vU(t,e,n,i)}function IU(t){return t=_i(t),TU(t)}function wU(t){return t=_i(t),EU(t)}function Jx(t,e){return t=_i(t),CU(t,e)}function NU(t=KA(),e){t=_i(t);const i=zA(t,Yx).getImmediate({identifier:e}),r=UA("storage");return r&&DU(i,...r),i}function DU(t,e,n,i={}){bU(t,e,n,i)}function MU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Xm(n,i,r,e,JA)}function PU(){Gl(new aa(Yx,MU,"PUBLIC").setMultipleInstances(!0)),ss(RE,IE,""),ss(RE,IE,"esm2020")}PU();const VU={apiKey:"AIzaSyD4Aw02INIjhiryvBFocolup1HGP29CtNw",authDomain:"juvalandtheo.firebaseapp.com",projectId:"juvalandtheo",storageBucket:"juvalandtheo.firebasestorage.app",messagingSenderId:"395659208490",appId:"1:395659208490:web:65e98f38fd48ffed72a053"},$x=$A(VU),Wm=QP($x),Kx=NU($x),Zm="posts";async function UU(t){try{const e=await gV(gx(Wm,Zm),{...t,createdAt:ht.now()});return console.log("[FIRESTORE] Post added with ID:",e.id),e.id}catch(e){throw console.error("[FIRESTORE] Error adding post:",e),e}}async function LU(t=50){try{const e=aV(gx(Wm,Zm),lV("createdAt","desc"),uV(t)),n=await pV(e),i=[];return n.forEach(r=>{const a=r.data();i.push({id:r.id,images:a.images,en:a.en,es:a.es,date:a.date,author:a.author,tags:a.tags})}),console.log("[FIRESTORE] Loaded",i.length,"posts"),i}catch(e){throw console.error("[FIRESTORE] Error getting posts:",e),e}}async function kU(t){try{await mV(yx(Wm,Zm,t)),console.log("[FIRESTORE] Post deleted:",t)}catch(e){throw console.error("[FIRESTORE] Error deleting post:",e),e}}async function OU(t,e){try{const n=Jx(Kx,e),i=await RU(n,t,"data_url"),r=await IU(i.ref);return console.log("[STORAGE] Image uploaded:",e),r}catch(n){throw console.error("[STORAGE] Error uploading image:",n),n}}async function BU(t,e){try{const n=t.map((r,a)=>{const u=`posts/${e}/image_${a}.jpg`;return OU(r,u)}),i=await Promise.all(n);return console.log("[STORAGE] Uploaded",i.length,"images for post",e),i}catch(n){throw console.error("[STORAGE] Error uploading images:",n),n}}async function qU(t){try{const n=new URL(t).pathname.match(/\/o\/(.+)\?/);if(!n)throw new Error("Invalid image URL");const i=decodeURIComponent(n[1]),r=Jx(Kx,i);await wU(r),console.log("[STORAGE] Image deleted:",i)}catch(e){throw console.error("[STORAGE] Error deleting image:",e),e}}async function FU(t){try{const e=t.map(n=>qU(n));await Promise.all(e),console.log("[STORAGE] Deleted",t.length,"images")}catch(e){console.error("[STORAGE] Error deleting images:",e)}}const GU=12,wE=["space","ocean","jungle","sports","pokemon","dinosaur"],HU=()=>{const[t,e]=Be.useState("home"),[n,i]=Be.useState("en"),[r,a]=Be.useState([]),[u,d]=Be.useState(null),[g,h]=Be.useState("idle"),[_,T]=Be.useState(null),[A,C]=Be.useState(""),[P,V]=Be.useState(null),[M,K]=Be.useState("space"),[ee,W]=Be.useState("all"),[re,fe]=Be.useState(!1),[ae,N]=Be.useState([]),[w,I]=Be.useState(""),[L,k]=Be.useState([]),[F,D]=Be.useState(new Date().toISOString().split("T")[0]),ke=Be.useRef(!1),be={club:"Juval & Theo",welcome:n==="es"?"Bienvenidos a nuestro mundo!":"Welcome to our world!",dadCorner:n==="es"?"Pap":"Dad",momCorner:n==="es"?"Mam":"Mom",back:n==="es"?" Volver":" Back",fresh:n==="es"?"ltimo Momento":"Latest Moment",archives:n==="es"?"Recuerdos Pasados":"Memory Lane",mixingColors:n==="es"?"Guardando fotos...":"Saving photos...",done:n==="es"?"Recuerdo Guardado!":"Memory Saved!",multipleHint:n==="es"?"Elige las fotos para el lbum":"Pick photos for the album",whoAreYou:n==="es"?"Quin eres?":"Who are you?",enterPin:n==="es"?"Cdigo Secreto":"Secret Code",tellStory:n==="es"?"Qu pas hoy?":"What happened today?",placeholderContext:n==="es"?"Cuntanos un poco sobre este momento...":"Tell us a bit about this moment...",startMission:n==="es"?" GUARDAR RECUERDO":" SAVE MEMORY",selectHeroes:n==="es"?"Quin sale en las fotos?":"Who is in these photos?",selectDate:n==="es"?" Cundo pas esto?":" When did this happen?"},$=Be.useMemo(()=>{if(ee==="all")return r;const Te=ee.charAt(0).toUpperCase()+ee.slice(1);return r.filter(ve=>ve.tags.includes(Te))},[r,ee]);Be.useEffect(()=>{try{const Q=hM();DA()||e("firstTimeSetup"),hT()&&fe(!0)}catch(Q){console.error("Auth initialization failed:",Q)}const Te=wE[Math.floor(Math.random()*wE.length)];K(Te);try{const Q=localStorage.getItem("juval-theo-lang"),ge=localStorage.getItem("juval-theo-user");(Q==="en"||Q==="es")&&i(Q),ge&&T(ge)}catch(Q){console.error("[INIT] Failed to load user preferences",Q)}(async()=>{try{console.log("[INIT] Loading posts from Firebase...");const Q=await LU(GU);Q.length>0?(a(Q),console.log("[INIT] Loaded",Q.length,"posts from Firebase")):(a(w_),console.log("[INIT] No posts in Firebase, showing initial posts"))}catch(Q){console.error("[INIT] Failed to load posts from Firebase:",Q),a(w_)}})(),ke.current=!0},[]);const ue=()=>{const Te=n==="en"?"es":"en";i(Te),localStorage.setItem("juval-theo-lang",Te)},le=()=>{T(null),localStorage.removeItem("juval-theo-user"),e("login")},Ce=Te=>{const ve=A+Te;ve.length<=4&&C(ve),ve.length===4&&(MA(P,ve)?(T(P),localStorage.setItem("juval-theo-user",P),hT()?e("settings"):e("home"),V(null),C("")):(C(""),alert(n==="es"?"Cdigo incorrecto!":"Wrong code!")))},qe=Be.useCallback(async Te=>{try{const ve=r.find(Q=>Q.id===Te);ve&&(await FU(ve.images),await kU(Te),a(Q=>Q.filter(ge=>ge.id!==Te)),d(Q=>(Q==null?void 0:Q.id)===Te?null:Q),e(Q=>Q==="detail"||Q==="latest"?"home":Q),console.log("[DELETE] Post deleted successfully:",Te))}catch(ve){console.error("[DELETE] Failed to delete post:",ve),alert(n==="es"?"Error al borrar el recuerdo. Intenta de nuevo.":"Error deleting memory. Please try again.")}},[r,n]),B=async Te=>{const ve=Te.target.files;if(!ve||ve.length===0)return;const Q=Array.from(ve).map(Ke=>new Promise(vt=>{const bn=new FileReader;bn.onloadend=()=>vt(bn.result),bn.readAsDataURL(Ke)})),ge=await Promise.all(Q);console.log("[COMPRESSION] Compressing",ge.length,"images...");const Oe=await _M(ge,800,.7);console.log("[COMPRESSION] Compression complete"),N(Oe),D(new Date().toISOString().split("T")[0])},ne=async()=>{if(!(ae.length===0||!_)){h("uploading");try{console.log("[SUBMIT] Generating content with AI...");const Te=await XD(ae,_,w,L),ve=F.split("-"),Q=new Date(parseInt(ve[0]),parseInt(ve[1])-1,parseInt(ve[2])).toLocaleDateString(),ge=Date.now().toString();console.log("[SUBMIT] Uploading images to Firebase Storage...");const Oe=await BU(ae,ge);console.log("[SUBMIT] Saving post to Firestore...");const Ke=await UU({id:"",images:Oe,en:Te.en,es:Te.es,date:Q,author:_,tags:["Moment",_,...L]}),vt={id:Ke,images:Oe,en:Te.en,es:Te.es,date:Q,author:_,tags:["Moment",_,...L]};a(bn=>[vt,...bn]),console.log("[SUBMIT] Post saved successfully:",Ke),h("success"),setTimeout(()=>{N([]),I(""),k([]),e("home"),h("idle"),window.scrollTo({top:0,behavior:"smooth"})},1500)}catch(Te){console.error("[SUBMIT] Error saving post:",Te),h("idle"),alert(n==="es"?"Error al guardar el recuerdo. Intenta de nuevo.":"Error saving memory. Please try again.")}}},de=Be.useCallback(Te=>{d(Te),e("detail"),window.scrollTo(0,0)},[]),me=Be.useMemo(()=>{const Te=[];if(M.length,M==="space"){for(let Q=0;Q<20;Q++){const ge=Q*13%100,Oe=Q*23%100,Ke=40+Q*7%40,vt=-(Q*10)%60;Te.push(q.jsx("div",{className:"bg-star",style:{top:`${ge}%`,left:`${Oe}%`,animationDuration:`${Ke}s`,animationDelay:`${vt}s`},children:""},`s-${Q}`))}const ve=["","",""];for(let Q=0;Q<3;Q++){const ge=20+Q*25,Oe=180+Q*60;Te.push(q.jsx("div",{className:"bg-planet",style:{top:`${ge}%`,animationDuration:`${Oe}s`},children:ve[Q]},`p-${Q}`))}}else if(M==="ocean"){const ve=["","","","",""];for(let Q=0;Q<8;Q++){const ge=Q*15%100,Oe=15+Q*5%20,Ke=-(Q*3)%15;Te.push(q.jsx("div",{className:"bg-fish",style:{left:`${ge}%`,animationDuration:`${Oe}s`,animationDelay:`${Ke}s`},children:ve[Q%ve.length]},`f-${Q}`))}for(let Q=0;Q<12;Q++){const ge=Q*11%100,Oe=8+Q*2%8,Ke=-(Q*2)%10;Te.push(q.jsx("div",{className:"bg-bubble",style:{left:`${ge}%`,animationDuration:`${Oe}s`,animationDelay:`${Ke}s`},children:""},`b-${Q}`))}}else if(M==="jungle"){const ve=["","","","","",""];for(let Q=0;Q<6;Q++){const ge=Q*18%100,Oe=25+Q*5%15,Ke=-(Q*4)%20;Te.push(q.jsx("div",{className:"bg-animal",style:{left:`${ge}%`,animationDuration:`${Oe}s`,animationDelay:`${Ke}s`},children:ve[Q]},`a-${Q}`))}for(let Q=0;Q<8;Q++){const ge=Q*13%100,Oe=120+Q*25%60,Ke=-(Q*30)%100;Te.push(q.jsx("div",{className:"bg-leaf",style:{left:`${ge}%`,animationDuration:`${Oe}s`,animationDelay:`${Ke}s`},children:""},`l-${Q}`))}}else if(M==="sports"){const ve=["","","","",""];for(let Q=0;Q<8;Q++){const ge=Q*14%100,Oe=3+Q*.5%2,Ke=-(Q*.5)%3;Te.push(q.jsx("div",{className:"bg-ball",style:{left:`${ge}%`,animationDuration:`${Oe}s`,animationDelay:`${Ke}s`},children:ve[Q%ve.length]},`ball-${Q}`))}}else if(M==="pokemon"){const ve=["","","",""],Q=["","","","",""];for(let ge=0;ge<6;ge++){const Oe=ge*18%80,Ke=20+ge*5%15,vt=-(ge*4)%20;Te.push(q.jsx("div",{className:"bg-pokemon-fly",style:{top:`${Oe}%`,animationDuration:`${Ke}s`,animationDelay:`${vt}s`},children:ve[ge%ve.length]},`fp-${ge}`))}for(let ge=0;ge<5;ge++){const Oe=ge*20%100,Ke=4+ge*.5%2,vt=-(ge*.8)%4;Te.push(q.jsx("div",{className:"bg-pokeball",style:{left:`${Oe}%`,animationDuration:`${Ke}s`,animationDelay:`${vt}s`},children:""},`pb-${ge}`))}for(let ge=0;ge<8;ge++){const Oe=ge*15%100,Ke=ge*13%100,vt=30+ge*5%20,bn=-(ge*5)%25;Te.push(q.jsx("div",{className:"bg-pokemon-element",style:{top:`${Oe}%`,left:`${Ke}%`,animationDuration:`${vt}s`,animationDelay:`${bn}s`},children:Q[ge%Q.length]},`elem-${ge}`))}}else if(M==="dinosaur"){const ve=["","","",""];for(let Q=0;Q<6;Q++){const ge=60+Q*8%30,Oe=25+Q*5%15,Ke=-(Q*5)%20;Te.push(q.jsx("div",{className:"bg-dino-walk",style:{top:`${ge}%`,animationDuration:`${Oe}s`,animationDelay:`${Ke}s`},children:ve[Q%ve.length]},`dino-${Q}`))}for(let Q=0;Q<4;Q++){const ge=10+Q*15%40,Oe=18+Q*3%12,Ke=-(Q*4)%15;Te.push(q.jsx("div",{className:"bg-pterodactyl",style:{top:`${ge}%`,animationDuration:`${Oe}s`,animationDelay:`${Ke}s`},children:""},`ptero-${Q}`))}for(let Q=0;Q<5;Q++){const ge=Q*22%100,Oe=8+Q*2%6,Ke=-(Q*3)%10;Te.push(q.jsx("div",{className:"bg-meteor",style:{left:`${ge}%`,animationDuration:`${Oe}s`,animationDelay:`${Ke}s`},children:""},`meteor-${Q}`))}}return Te},[M]),Ie=()=>q.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden z-0",children:me}),De={space:"bg-[#0f172a]",ocean:"bg-[#0ea5e9]",jungle:"bg-[#15803d]",sports:"bg-[#38bdf8]",pokemon:"bg-[#fee140]",dinosaur:"bg-[#c2410c]"};if(!_&&t!=="login")return q.jsx("div",{className:`min-h-screen ${De[M]} flex flex-col items-center justify-center`,children:q.jsxs("div",{className:"bg-white cartoon-border p-12 rounded-[50px] text-center animate-fade-in shadow-2xl relative overflow-hidden",children:[q.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-yellow-200 rounded-full opacity-50 blur-2xl"}),q.jsx("h1",{className:"text-4xl font-black text-slate-800 mb-8 uppercase relative z-10",children:"Our Family Album"}),q.jsx("button",{onClick:()=>e("login"),className:"bg-amber-400 text-slate-800 cartoon-border px-12 py-6 rounded-3xl font-black text-2xl uppercase cartoon-button relative z-10",children:"Open Album "})]})});const He=()=>{switch(t){case"login":return q.jsx("div",{className:"min-h-[80vh] flex flex-col items-center justify-center p-4",children:P?q.jsxs("div",{className:"bg-white cartoon-border p-10 rounded-[50px] w-full max-w-md text-center animate-fade-in shadow-2xl",children:[q.jsx("h3",{className:"text-4xl font-black mb-2 uppercase text-slate-800",children:P==="Dad"?be.dadCorner:be.momCorner}),q.jsx("p",{className:"text-xl font-bold text-slate-500 mb-8 italic",children:be.enterPin}),q.jsx("div",{className:"flex justify-center gap-6 mb-12",children:[...Array(4)].map((Q,ge)=>q.jsx("div",{className:`w-10 h-10 rounded-full border-[8px] border-slate-800 transition-all ${A.length>ge?"bg-slate-800 scale-125":"bg-white"}`},ge))}),q.jsx("div",{className:"grid grid-cols-3 gap-6 max-w-sm mx-auto",children:["1","2","3","4","5","6","7","8","9","C","0",""].map(Q=>q.jsx("button",{onClick:()=>{Q==="C"?C(""):Q===""?C(A.slice(0,-1)):Ce(Q)},className:"aspect-square bg-white border-[6px] border-slate-800 shadow-[4px_4px_0px_#1e293b] flex items-center justify-center text-4xl font-black text-slate-800 hover:bg-amber-400 active:translate-y-1 transition-all rounded-[24px]",children:Q},Q))}),q.jsx("button",{onClick:()=>V(null),className:"mt-12 text-slate-800 hover:text-red-600 font-black text-xl uppercase transition-all",children:be.back})]}):q.jsxs(q.Fragment,{children:[q.jsx("h2",{className:"text-6xl font-black text-slate-800 mb-12 uppercase text-center drop-shadow-lg",children:be.whoAreYou}),q.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 w-full max-w-4xl",children:[q.jsxs("button",{onClick:()=>V("Dad"),className:"bg-sky-500 cartoon-border p-12 rounded-[50px] hover:scale-105 active:scale-95 group transition-all",children:[q.jsx("span",{className:"text-9xl mb-6 block group-hover:animate-float",children:""}),q.jsx("h4",{className:"text-4xl font-black text-white uppercase",children:be.dadCorner})]}),q.jsxs("button",{onClick:()=>V("Mom"),className:"bg-rose-400 cartoon-border p-12 rounded-[50px] hover:scale-105 active:scale-95 group transition-all",children:[q.jsx("span",{className:"text-9xl mb-6 block group-hover:animate-float",children:""}),q.jsx("h4",{className:"text-4xl font-black text-white uppercase",children:be.momCorner})]})]})]})});case"home":const[Te,...ve]=$;return q.jsxs("div",{className:"py-10 px-4 max-w-5xl mx-auto",children:[q.jsxs("div",{className:"text-center mb-8",children:[q.jsx("h1",{className:`text-6xl md:text-8xl font-black ${M==="evening"?"text-white":"text-slate-800"} uppercase mb-4 drop-shadow-xl tracking-tighter`,children:be.club}),q.jsx("p",{className:`text-2xl ${M==="evening"?"text-slate-300":"text-slate-500"} font-black italic`,children:be.welcome})]}),q.jsx(O1,{posts:r,activeFilter:ee,onFilterChange:W,lang:n}),Te?q.jsxs("div",{className:"mb-24 animate-fade-in",children:[q.jsx("div",{className:"inline-block bg-amber-500 text-white cartoon-border px-8 py-3 rounded-2xl text-2xl font-black uppercase mb-6 transform -rotate-1 shadow-lg",children:be.fresh}),q.jsx(Qh,{post:Te,variant:"large",lang:n,onDelete:qe,onOpen:de})]}):q.jsx("div",{className:`text-center py-20 font-black text-3xl opacity-50 uppercase ${M==="evening"?"text-white":"text-slate-800"}`,children:"No memories yet..."}),ve.length>0&&q.jsxs("div",{className:"pb-20",children:[q.jsx("h3",{className:`text-4xl font-black ${M==="evening"?"text-white":"text-slate-800"} mb-12 uppercase text-center md:text-left`,children:be.archives}),q.jsx("div",{className:"flex flex-col gap-16",children:ve.map(Q=>q.jsx(Qh,{post:Q,lang:n,onDelete:qe,onOpen:de},Q.id))})]})]});case"upload":return q.jsx("div",{className:"py-10 px-4 max-w-4xl mx-auto",children:ae.length===0?q.jsxs("div",{className:"text-center animate-fade-in",children:[q.jsx("h2",{className:`text-5xl font-black mb-4 uppercase ${M==="evening"?"text-white":"text-slate-800"}`,children:"Add Memory"}),q.jsx("p",{className:`text-xl font-bold mb-12 italic ${M==="evening"?"text-slate-300":"text-slate-500"}`,children:be.multipleHint}),q.jsxs("label",{className:"cursor-pointer group block",children:[q.jsxs("div",{className:`cartoon-border p-16 rounded-[50px] transition-all group-hover:scale-105 shadow-2xl ${_==="Dad"?"bg-sky-500":"bg-rose-400"}`,children:[q.jsx("span",{className:"text-9xl mb-6 block group-hover:animate-float",children:_==="Dad"?"":""}),q.jsx("h4",{className:"text-4xl font-black text-white uppercase",children:_==="Dad"?be.dadCorner:be.momCorner}),q.jsx("div",{className:"mt-8 bg-white text-slate-800 px-8 py-4 rounded-3xl font-black text-xl uppercase cartoon-border inline-block hover:bg-amber-400 transition-colors",children:" Choose Photos"})]}),q.jsx("input",{type:"file",multiple:!0,className:"hidden",accept:"image/*",onChange:B})]}),q.jsx("button",{onClick:()=>e("home"),className:`mt-16 font-black text-2xl uppercase transition-all hover:scale-110 ${M==="evening"?"text-white":"text-slate-800"}`,children:be.back})]}):q.jsxs("div",{className:"animate-fade-in pb-24",children:[q.jsx("h2",{className:`text-4xl font-black uppercase mb-8 ${M==="evening"?"text-white":"text-slate-800"}`,children:be.tellStory}),q.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:ae.map((Q,ge)=>q.jsx("div",{className:"aspect-square cartoon-border rounded-2xl overflow-hidden bg-white shadow-md hover:scale-105 transition-transform",children:q.jsx("img",{src:Q,className:"w-full h-full object-cover",alt:"p"})},ge))}),q.jsxs("div",{className:"bg-white/90 cartoon-border p-8 rounded-[40px] mb-8 shadow-xl",children:[q.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase mb-4 text-center",children:be.selectDate}),q.jsx("input",{type:"date",value:F,onChange:Q=>D(Q.target.value),className:"w-full bg-slate-50 cartoon-border px-6 py-4 rounded-3xl text-2xl font-black text-slate-800 focus:outline-none focus:bg-amber-50 transition-colors cursor-pointer"})]}),q.jsxs("div",{className:"bg-white/90 cartoon-border p-8 rounded-[40px] mb-8 shadow-xl",children:[q.jsx("h3",{className:"text-2xl font-black text-slate-800 uppercase mb-4 text-center",children:be.selectHeroes}),q.jsx("div",{className:"flex justify-center gap-6",children:["Juval","Theo"].map(Q=>q.jsxs("button",{onClick:()=>k(ge=>ge.includes(Q)?ge.filter(Oe=>Oe!==Q):[...ge,Q]),className:`cartoon-border px-8 py-4 rounded-3xl text-xl font-black transition-all active:scale-95 ${L.includes(Q)?(Q==="Juval"?"bg-sky-400":"bg-rose-400")+" text-white scale-110 shadow-lg":"bg-white text-slate-400 opacity-60"}`,children:[Q==="Juval"?" ":" ",Q.toUpperCase()]},Q))})]}),q.jsx("div",{className:"bg-white cartoon-border p-6 rounded-[30px] mb-12 shadow-xl",children:q.jsx("textarea",{className:"w-full h-48 p-4 text-2xl font-semibold text-slate-700 focus:outline-none bg-transparent resize-none placeholder:text-slate-200",placeholder:be.placeholderContext,value:w,onChange:Q=>I(Q.target.value)})}),q.jsxs("div",{className:"text-center flex flex-col gap-6",children:[q.jsx("button",{onClick:ne,className:"bg-rose-500 text-white cartoon-border px-16 py-8 rounded-[40px] text-4xl font-black cartoon-button mx-auto shadow-2xl",children:be.startMission}),q.jsx("button",{onClick:()=>N([]),className:`font-black uppercase text-xl transition-all hover:scale-110 ${M==="evening"?"text-white hover:text-rose-400":"text-slate-800 hover:text-rose-600"}`,children:"Reset Selection"})]})]})});case"detail":return q.jsxs("div",{className:"py-10 px-4 max-w-5xl mx-auto animate-fade-in",children:[q.jsx("button",{onClick:()=>e("home"),className:"bg-white text-slate-800 cartoon-border px-8 py-4 rounded-2xl font-black text-xl mb-12 cartoon-button shadow-md",children:be.back}),u?q.jsx(Qh,{post:u,variant:"large",lang:n,onDelete:qe}):q.jsx("div",{className:"text-white text-center text-2xl",children:"Missing moment."})]});case"firstTimeSetup":return q.jsx(mM,{lang:n,theme:M,onComplete:()=>e("login")});case"settings":return _?q.jsx(gM,{lang:n,user:_,theme:M,onBack:()=>{fe(!1),e("home")}}):null;default:return null}};return q.jsxs("div",{className:`min-h-screen pb-32 relative transition-colors duration-1000 ${De[M]}`,children:[Ie(),_&&q.jsx("nav",{className:"bg-white/95 backdrop-blur-md border-b-4 border-slate-800 p-5 sticky top-0 z-50 shadow-sm",children:q.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center",children:[q.jsxs("div",{onClick:()=>e("home"),className:"flex items-center gap-3 cartoon-button cursor-pointer group",children:[q.jsx("div",{className:"bg-amber-400 p-3 rounded-2xl border-4 border-slate-800 transform group-hover:rotate-12 transition-transform shadow-md",children:q.jsx("span",{className:"text-3xl font-black text-slate-800",children:"JT"})}),q.jsx("span",{className:"hidden sm:block text-2xl font-black text-slate-800 uppercase ml-2 tracking-tighter",children:be.club})]}),q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("button",{onClick:ue,className:"bg-slate-100 text-slate-800 cartoon-border px-4 py-2 rounded-xl font-black text-sm uppercase hover:bg-slate-200 transition-colors shadow-sm",children:n==="en"?"ES ":"EN "}),q.jsx("button",{onClick:()=>e("settings"),className:"bg-slate-100 text-slate-800 cartoon-border px-4 py-2 rounded-xl font-black text-sm uppercase hover:bg-slate-200 transition-colors shadow-sm",title:n==="es"?"Configuracin":"Settings",children:""}),q.jsx("button",{onClick:le,className:"text-slate-400 font-black text-sm uppercase ml-4 hover:text-red-600 transition-colors",children:"Logout"})]})]})}),re&&_&&q.jsxs("div",{className:"bg-amber-400 border-b-4 border-slate-800 p-4 text-center sticky top-[72px] z-40 animate-fade-in",children:[q.jsx("p",{className:"text-slate-800 font-black text-lg",children:n==="es"?" Por favor cambia tu cdigo secreto en Configuracin":" Please change your secret code in Settings"}),q.jsx("button",{onClick:()=>{fe(!1),e("settings")},className:"bg-slate-800 text-white px-6 py-2 rounded-xl font-black text-sm uppercase mt-2 hover:bg-slate-700 transition-colors",children:n==="es"?"Ir a Configuracin":"Go to Settings"})]}),q.jsx("main",{className:"relative z-10",children:He()}),_&&t!=="upload"&&g==="idle"&&q.jsx("button",{onClick:()=>e("upload"),className:"fixed bottom-10 right-10 w-24 h-24 bg-rose-500 text-white rounded-full flex items-center justify-center text-5xl cartoon-border z-40 hover:scale-110 active:scale-95 shadow-2xl transition-all",children:""}),g!=="idle"&&q.jsx("div",{className:"fixed inset-0 bg-amber-400/95 z-[100] flex items-center justify-center p-6 backdrop-blur-sm animate-fade-in",children:q.jsx("div",{className:"bg-white cartoon-border p-12 rounded-[60px] animate-bounce text-center max-w-md shadow-[20px_20px_0px_#1e293b]",children:g==="uploading"?q.jsxs(q.Fragment,{children:[q.jsx("span",{className:"text-8xl block mb-8",children:""}),q.jsx("span",{className:"text-4xl font-black text-slate-800 uppercase tracking-tighter",children:be.mixingColors})]}):q.jsxs(q.Fragment,{children:[q.jsx("span",{className:"text-8xl block mb-8",children:""}),q.jsx("span",{className:"text-4xl font-black text-green-600 uppercase tracking-tighter",children:be.done})]})})})]})},Qx=document.getElementById("root");if(!Qx)throw new Error("Could not find root element to mount to");const zU=k1.createRoot(Qx);zU.render(q.jsx(HU,{}));
